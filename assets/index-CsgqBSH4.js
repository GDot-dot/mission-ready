(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Aw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ug={exports:{}},Yl={},Bg={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uo=Symbol.for("react.element"),Rw=Symbol.for("react.portal"),bw=Symbol.for("react.fragment"),kw=Symbol.for("react.strict_mode"),Nw=Symbol.for("react.profiler"),Pw=Symbol.for("react.provider"),Dw=Symbol.for("react.context"),Vw=Symbol.for("react.forward_ref"),Ow=Symbol.for("react.suspense"),Lw=Symbol.for("react.memo"),Mw=Symbol.for("react.lazy"),wp=Symbol.iterator;function jw(t){return t===null||typeof t!="object"?null:(t=wp&&t[wp]||t["@@iterator"],typeof t=="function"?t:null)}var $g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hg=Object.assign,Wg={};function hi(t,e,n){this.props=t,this.context=e,this.refs=Wg,this.updater=n||$g}hi.prototype.isReactComponent={};hi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qg(){}qg.prototype=hi.prototype;function qd(t,e,n){this.props=t,this.context=e,this.refs=Wg,this.updater=n||$g}var Gd=qd.prototype=new qg;Gd.constructor=qd;Hg(Gd,hi.prototype);Gd.isPureReactComponent=!0;var Ep=Array.isArray,Gg=Object.prototype.hasOwnProperty,Kd={current:null},Kg={key:!0,ref:!0,__self:!0,__source:!0};function Qg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Gg.call(e,r)&&!Kg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Uo,type:t,key:i,ref:o,props:s,_owner:Kd.current}}function Fw(t,e){return{$$typeof:Uo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Uo}function zw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xp=/\/+/g;function zu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zw(""+t.key):e.toString(36)}function $a(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Uo:case Rw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+zu(o,0):r,Ep(s)?(n="",t!=null&&(n=t.replace(xp,"$&/")+"/"),$a(s,e,n,"",function(d){return d})):s!=null&&(Qd(s)&&(s=Fw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(xp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ep(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+zu(i,l);o+=$a(i,e,n,u,s)}else if(u=jw(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+zu(i,l++),o+=$a(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wa(t,e,n){if(t==null)return t;var r=[],s=0;return $a(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Uw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lt={current:null},Ha={transition:null},Bw={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:Ha,ReactCurrentOwner:Kd};function Yg(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:wa,forEach:function(t,e,n){wa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wa(t,function(){e++}),e},toArray:function(t){return wa(t,function(e){return e})||[]},only:function(t){if(!Qd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=hi;ce.Fragment=bw;ce.Profiler=Nw;ce.PureComponent=qd;ce.StrictMode=kw;ce.Suspense=Ow;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bw;ce.act=Yg;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Hg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Kd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Gg.call(e,u)&&!Kg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Uo,type:t.type,key:s,ref:i,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:Dw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pw,_context:t},t.Consumer=t};ce.createElement=Qg;ce.createFactory=function(t){var e=Qg.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:Vw,render:t}};ce.isValidElement=Qd;ce.lazy=function(t){return{$$typeof:Mw,_payload:{_status:-1,_result:t},_init:Uw}};ce.memo=function(t,e){return{$$typeof:Lw,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Ha.transition;Ha.transition={};try{t()}finally{Ha.transition=e}};ce.unstable_act=Yg;ce.useCallback=function(t,e){return Lt.current.useCallback(t,e)};ce.useContext=function(t){return Lt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Lt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Lt.current.useEffect(t,e)};ce.useId=function(){return Lt.current.useId()};ce.useImperativeHandle=function(t,e,n){return Lt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Lt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Lt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Lt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return Lt.current.useReducer(t,e,n)};ce.useRef=function(t){return Lt.current.useRef(t)};ce.useState=function(t){return Lt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Lt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Lt.current.useTransition()};ce.version="18.3.1";Bg.exports=ce;var N=Bg.exports;const Vt=Aw(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w=N,Hw=Symbol.for("react.element"),Ww=Symbol.for("react.fragment"),qw=Object.prototype.hasOwnProperty,Gw=$w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kw={key:!0,ref:!0,__self:!0,__source:!0};function Xg(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)qw.call(e,r)&&!Kw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Hw,type:t,key:i,ref:o,props:s,_owner:Gw.current}}Yl.Fragment=Ww;Yl.jsx=Xg;Yl.jsxs=Xg;Ug.exports=Yl;var g=Ug.exports,Ac={},Jg={exports:{}},Xt={},Zg={exports:{}},ey={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,K){var q=$.length;$.push(K);e:for(;0<q;){var Y=q-1>>>1,W=$[Y];if(0<s(W,K))$[Y]=K,$[q]=W,q=Y;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var K=$[0],q=$.pop();if(q!==K){$[0]=q;e:for(var Y=0,W=$.length,ne=W>>>1;Y<ne;){var ke=2*(Y+1)-1,ze=$[ke],j=ke+1,X=$[j];if(0>s(ze,q))j<W&&0>s(X,ze)?($[Y]=X,$[j]=q,Y=j):($[Y]=ze,$[ke]=q,Y=ke);else if(j<W&&0>s(X,q))$[Y]=X,$[j]=q,Y=j;else break e}}return K}function s($,K){var q=$.sortIndex-K.sortIndex;return q!==0?q:$.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,p=null,m=3,w=!1,b=!1,k=!1,V=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C($){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=$)r(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(d)}}function D($){if(k=!1,C($),!b)if(n(u)!==null)b=!0,Te(L);else{var K=n(d);K!==null&&me(D,K.startTime-$)}}function L($,K){b=!1,k&&(k=!1,S(y),y=-1),w=!0;var q=m;try{for(C(K),p=n(u);p!==null&&(!(p.expirationTime>K)||$&&!A());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,m=p.priorityLevel;var W=Y(p.expirationTime<=K);K=t.unstable_now(),typeof W=="function"?p.callback=W:p===n(u)&&r(u),C(K)}else r(u);p=n(u)}if(p!==null)var ne=!0;else{var ke=n(d);ke!==null&&me(D,ke.startTime-K),ne=!1}return ne}finally{p=null,m=q,w=!1}}var M=!1,_=null,y=-1,x=5,T=-1;function A(){return!(t.unstable_now()-T<x)}function R(){if(_!==null){var $=t.unstable_now();T=$;var K=!0;try{K=_(!0,$)}finally{K?I():(M=!1,_=null)}}else M=!1}var I;if(typeof E=="function")I=function(){E(R)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,de=ee.port2;ee.port1.onmessage=R,I=function(){de.postMessage(null)}}else I=function(){V(R,0)};function Te($){_=$,M||(M=!0,I())}function me($,K){y=V(function(){$(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){b||w||(b=!0,Te(L))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var q=m;m=K;try{return $()}finally{m=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var q=m;m=$;try{return K()}finally{m=q}},t.unstable_scheduleCallback=function($,K,q){var Y=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Y+q:Y):q=Y,$){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=q+W,$={id:f++,callback:K,priorityLevel:$,startTime:q,expirationTime:W,sortIndex:-1},q>Y?($.sortIndex=q,e(d,$),n(u)===null&&$===n(d)&&(k?(S(y),y=-1):k=!0,me(D,q-Y))):($.sortIndex=W,e(u,$),b||w||(b=!0,Te(L))),$},t.unstable_shouldYield=A,t.unstable_wrapCallback=function($){var K=m;return function(){var q=m;m=K;try{return $.apply(this,arguments)}finally{m=q}}}})(ey);Zg.exports=ey;var Qw=Zg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw=N,Yt=Qw;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ty=new Set,uo={};function hs(t,e){Ks(t,e),Ks(t+"Capture",e)}function Ks(t,e){for(uo[t]=e,t=0;t<e.length;t++)ty.add(e[t])}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rc=Object.prototype.hasOwnProperty,Xw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ip={},Tp={};function Jw(t){return Rc.call(Tp,t)?!0:Rc.call(Ip,t)?!1:Xw.test(t)?Tp[t]=!0:(Ip[t]=!0,!1)}function Zw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eE(t,e,n,r){if(e===null||typeof e>"u"||Zw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new Mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new Mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new Mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new Mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new Mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new Mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new Mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new Mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new Mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yd=/[\-:]([a-z])/g;function Xd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yd,Xd);pt[e]=new Mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yd,Xd);pt[e]=new Mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yd,Xd);pt[e]=new Mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jd(t,e,n,r){var s=pt.hasOwnProperty(e)?pt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eE(e,n,s,r)&&(n=null),r||s===null?Jw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ir=Yw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ea=Symbol.for("react.element"),Cs=Symbol.for("react.portal"),As=Symbol.for("react.fragment"),Zd=Symbol.for("react.strict_mode"),bc=Symbol.for("react.profiler"),ny=Symbol.for("react.provider"),ry=Symbol.for("react.context"),eh=Symbol.for("react.forward_ref"),kc=Symbol.for("react.suspense"),Nc=Symbol.for("react.suspense_list"),th=Symbol.for("react.memo"),hr=Symbol.for("react.lazy"),sy=Symbol.for("react.offscreen"),Sp=Symbol.iterator;function Ni(t){return t===null||typeof t!="object"?null:(t=Sp&&t[Sp]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,Uu;function zi(t){if(Uu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Uu=e&&e[1]||""}return`
`+Uu+t}var Bu=!1;function $u(t,e){if(!t||Bu)return"";Bu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Bu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zi(t):""}function tE(t){switch(t.tag){case 5:return zi(t.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 2:case 15:return t=$u(t.type,!1),t;case 11:return t=$u(t.type.render,!1),t;case 1:return t=$u(t.type,!0),t;default:return""}}function Pc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case As:return"Fragment";case Cs:return"Portal";case bc:return"Profiler";case Zd:return"StrictMode";case kc:return"Suspense";case Nc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ry:return(t.displayName||"Context")+".Consumer";case ny:return(t._context.displayName||"Context")+".Provider";case eh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case th:return e=t.displayName||null,e!==null?e:Pc(t.type)||"Memo";case hr:e=t._payload,t=t._init;try{return Pc(t(e))}catch{}}return null}function nE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pc(e);case 8:return e===Zd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rE(t){var e=iy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xa(t){t._valueTracker||(t._valueTracker=rE(t))}function oy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=iy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function al(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dc(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ay(t,e){e=e.checked,e!=null&&Jd(t,"checked",e,!1)}function Vc(t,e){ay(t,e);var n=kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Oc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Oc(t,e.type,kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ap(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Oc(t,e,n){(e!=="number"||al(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ui=Array.isArray;function zs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+kr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Lc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Ui(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kr(n)}}function ly(t,e){var n=kr(e.value),r=kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function bp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ia,cy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ia=Ia||document.createElement("div"),Ia.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ia.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function co(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sE=["Webkit","ms","Moz","O"];Object.keys(Gi).forEach(function(t){sE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gi[e]=Gi[t]})});function dy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gi.hasOwnProperty(t)&&Gi[t]?(""+e).trim():e+"px"}function hy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=dy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var iE=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jc(t,e){if(e){if(iE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Fc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zc=null;function nh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uc=null,Us=null,Bs=null;function kp(t){if(t=Ho(t)){if(typeof Uc!="function")throw Error(B(280));var e=t.stateNode;e&&(e=tu(e),Uc(t.stateNode,t.type,e))}}function fy(t){Us?Bs?Bs.push(t):Bs=[t]:Us=t}function py(){if(Us){var t=Us,e=Bs;if(Bs=Us=null,kp(t),e)for(t=0;t<e.length;t++)kp(e[t])}}function my(t,e){return t(e)}function gy(){}var Hu=!1;function yy(t,e,n){if(Hu)return t(e,n);Hu=!0;try{return my(t,e,n)}finally{Hu=!1,(Us!==null||Bs!==null)&&(gy(),py())}}function ho(t,e){var n=t.stateNode;if(n===null)return null;var r=tu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Bc=!1;if(Jn)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){Bc=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{Bc=!1}function oE(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Ki=!1,ll=null,ul=!1,$c=null,aE={onError:function(t){Ki=!0,ll=t}};function lE(t,e,n,r,s,i,o,l,u){Ki=!1,ll=null,oE.apply(aE,arguments)}function uE(t,e,n,r,s,i,o,l,u){if(lE.apply(this,arguments),Ki){if(Ki){var d=ll;Ki=!1,ll=null}else throw Error(B(198));ul||(ul=!0,$c=d)}}function fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Np(t){if(fs(t)!==t)throw Error(B(188))}function cE(t){var e=t.alternate;if(!e){if(e=fs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Np(s),t;if(i===r)return Np(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function _y(t){return t=cE(t),t!==null?wy(t):null}function wy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wy(t);if(e!==null)return e;t=t.sibling}return null}var Ey=Yt.unstable_scheduleCallback,Pp=Yt.unstable_cancelCallback,dE=Yt.unstable_shouldYield,hE=Yt.unstable_requestPaint,qe=Yt.unstable_now,fE=Yt.unstable_getCurrentPriorityLevel,rh=Yt.unstable_ImmediatePriority,xy=Yt.unstable_UserBlockingPriority,cl=Yt.unstable_NormalPriority,pE=Yt.unstable_LowPriority,Iy=Yt.unstable_IdlePriority,Xl=null,kn=null;function mE(t){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Xl,t,void 0,(t.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:vE,gE=Math.log,yE=Math.LN2;function vE(t){return t>>>=0,t===0?32:31-(gE(t)/yE|0)|0}var Ta=64,Sa=4194304;function Bi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Bi(l):(i&=o,i!==0&&(r=Bi(i)))}else o=n&~s,o!==0?r=Bi(o):i!==0&&(r=Bi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-En(e),s=1<<n,r|=t[n],e&=~s;return r}function _E(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-En(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=_E(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Hc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ty(){var t=Ta;return Ta<<=1,!(Ta&4194240)&&(Ta=64),t}function Wu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-En(e),t[e]=n}function EE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-En(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function sh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-En(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Se=0;function Sy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cy,ih,Ay,Ry,by,Wc=!1,Ca=[],wr=null,Er=null,xr=null,fo=new Map,po=new Map,mr=[],xE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dp(t,e){switch(t){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":fo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(e.pointerId)}}function Di(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ho(e),e!==null&&ih(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function IE(t,e,n,r,s){switch(e){case"focusin":return wr=Di(wr,t,e,n,r,s),!0;case"dragenter":return Er=Di(Er,t,e,n,r,s),!0;case"mouseover":return xr=Di(xr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return fo.set(i,Di(fo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,po.set(i,Di(po.get(i)||null,t,e,n,r,s)),!0}return!1}function ky(t){var e=Xr(t.target);if(e!==null){var n=fs(e);if(n!==null){if(e=n.tag,e===13){if(e=vy(n),e!==null){t.blockedOn=e,by(t.priority,function(){Ay(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zc=r,n.target.dispatchEvent(r),zc=null}else return e=Ho(n),e!==null&&ih(e),t.blockedOn=n,!1;e.shift()}return!0}function Vp(t,e,n){Wa(t)&&n.delete(e)}function TE(){Wc=!1,wr!==null&&Wa(wr)&&(wr=null),Er!==null&&Wa(Er)&&(Er=null),xr!==null&&Wa(xr)&&(xr=null),fo.forEach(Vp),po.forEach(Vp)}function Vi(t,e){t.blockedOn===e&&(t.blockedOn=null,Wc||(Wc=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,TE)))}function mo(t){function e(s){return Vi(s,t)}if(0<Ca.length){Vi(Ca[0],t);for(var n=1;n<Ca.length;n++){var r=Ca[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wr!==null&&Vi(wr,t),Er!==null&&Vi(Er,t),xr!==null&&Vi(xr,t),fo.forEach(e),po.forEach(e),n=0;n<mr.length;n++)r=mr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mr.length&&(n=mr[0],n.blockedOn===null);)ky(n),n.blockedOn===null&&mr.shift()}var $s=ir.ReactCurrentBatchConfig,hl=!0;function SE(t,e,n,r){var s=Se,i=$s.transition;$s.transition=null;try{Se=1,oh(t,e,n,r)}finally{Se=s,$s.transition=i}}function CE(t,e,n,r){var s=Se,i=$s.transition;$s.transition=null;try{Se=4,oh(t,e,n,r)}finally{Se=s,$s.transition=i}}function oh(t,e,n,r){if(hl){var s=qc(t,e,n,r);if(s===null)tc(t,e,r,fl,n),Dp(t,r);else if(IE(s,t,e,n,r))r.stopPropagation();else if(Dp(t,r),e&4&&-1<xE.indexOf(t)){for(;s!==null;){var i=Ho(s);if(i!==null&&Cy(i),i=qc(t,e,n,r),i===null&&tc(t,e,r,fl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else tc(t,e,r,null,n)}}var fl=null;function qc(t,e,n,r){if(fl=null,t=nh(r),t=Xr(t),t!==null)if(e=fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fl=t,null}function Ny(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fE()){case rh:return 1;case xy:return 4;case cl:case pE:return 16;case Iy:return 536870912;default:return 16}default:return 16}}var yr=null,ah=null,qa=null;function Py(){if(qa)return qa;var t,e=ah,n=e.length,r,s="value"in yr?yr.value:yr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return qa=s.slice(t,1<r?1-r:void 0)}function Ga(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Aa(){return!0}function Op(){return!1}function Jt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Aa:Op,this.isPropagationStopped=Op,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Aa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Aa)},persist:function(){},isPersistent:Aa}),e}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lh=Jt(fi),$o=je({},fi,{view:0,detail:0}),AE=Jt($o),qu,Gu,Oi,Jl=je({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oi&&(Oi&&t.type==="mousemove"?(qu=t.screenX-Oi.screenX,Gu=t.screenY-Oi.screenY):Gu=qu=0,Oi=t),qu)},movementY:function(t){return"movementY"in t?t.movementY:Gu}}),Lp=Jt(Jl),RE=je({},Jl,{dataTransfer:0}),bE=Jt(RE),kE=je({},$o,{relatedTarget:0}),Ku=Jt(kE),NE=je({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),PE=Jt(NE),DE=je({},fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VE=Jt(DE),OE=je({},fi,{data:0}),Mp=Jt(OE),LE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ME={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jE[t])?!!e[t]:!1}function uh(){return FE}var zE=je({},$o,{key:function(t){if(t.key){var e=LE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ga(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ME[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uh,charCode:function(t){return t.type==="keypress"?Ga(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ga(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UE=Jt(zE),BE=je({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jp=Jt(BE),$E=je({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uh}),HE=Jt($E),WE=je({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),qE=Jt(WE),GE=je({},Jl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),KE=Jt(GE),QE=[9,13,27,32],ch=Jn&&"CompositionEvent"in window,Qi=null;Jn&&"documentMode"in document&&(Qi=document.documentMode);var YE=Jn&&"TextEvent"in window&&!Qi,Dy=Jn&&(!ch||Qi&&8<Qi&&11>=Qi),Fp=" ",zp=!1;function Vy(t,e){switch(t){case"keyup":return QE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rs=!1;function XE(t,e){switch(t){case"compositionend":return Oy(e);case"keypress":return e.which!==32?null:(zp=!0,Fp);case"textInput":return t=e.data,t===Fp&&zp?null:t;default:return null}}function JE(t,e){if(Rs)return t==="compositionend"||!ch&&Vy(t,e)?(t=Py(),qa=ah=yr=null,Rs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dy&&e.locale!=="ko"?null:e.data;default:return null}}var ZE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Up(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZE[t.type]:e==="textarea"}function Ly(t,e,n,r){fy(r),e=pl(e,"onChange"),0<e.length&&(n=new lh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yi=null,go=null;function e1(t){Gy(t,0)}function Zl(t){var e=Ns(t);if(oy(e))return t}function t1(t,e){if(t==="change")return e}var My=!1;if(Jn){var Qu;if(Jn){var Yu="oninput"in document;if(!Yu){var Bp=document.createElement("div");Bp.setAttribute("oninput","return;"),Yu=typeof Bp.oninput=="function"}Qu=Yu}else Qu=!1;My=Qu&&(!document.documentMode||9<document.documentMode)}function $p(){Yi&&(Yi.detachEvent("onpropertychange",jy),go=Yi=null)}function jy(t){if(t.propertyName==="value"&&Zl(go)){var e=[];Ly(e,go,t,nh(t)),yy(e1,e)}}function n1(t,e,n){t==="focusin"?($p(),Yi=e,go=n,Yi.attachEvent("onpropertychange",jy)):t==="focusout"&&$p()}function r1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zl(go)}function s1(t,e){if(t==="click")return Zl(e)}function i1(t,e){if(t==="input"||t==="change")return Zl(e)}function o1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var In=typeof Object.is=="function"?Object.is:o1;function yo(t,e){if(In(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rc.call(e,s)||!In(t[s],e[s]))return!1}return!0}function Hp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wp(t,e){var n=Hp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hp(n)}}function Fy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Fy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zy(){for(var t=window,e=al();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=al(t.document)}return e}function dh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function a1(t){var e=zy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Fy(n.ownerDocument.documentElement,n)){if(r!==null&&dh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Wp(n,i);var o=Wp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var l1=Jn&&"documentMode"in document&&11>=document.documentMode,bs=null,Gc=null,Xi=null,Kc=!1;function qp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kc||bs==null||bs!==al(r)||(r=bs,"selectionStart"in r&&dh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xi&&yo(Xi,r)||(Xi=r,r=pl(Gc,"onSelect"),0<r.length&&(e=new lh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bs)))}function Ra(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ks={animationend:Ra("Animation","AnimationEnd"),animationiteration:Ra("Animation","AnimationIteration"),animationstart:Ra("Animation","AnimationStart"),transitionend:Ra("Transition","TransitionEnd")},Xu={},Uy={};Jn&&(Uy=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function eu(t){if(Xu[t])return Xu[t];if(!ks[t])return t;var e=ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Uy)return Xu[t]=e[n];return t}var By=eu("animationend"),$y=eu("animationiteration"),Hy=eu("animationstart"),Wy=eu("transitionend"),qy=new Map,Gp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,e){qy.set(t,e),hs(e,[t])}for(var Ju=0;Ju<Gp.length;Ju++){var Zu=Gp[Ju],u1=Zu.toLowerCase(),c1=Zu[0].toUpperCase()+Zu.slice(1);Mr(u1,"on"+c1)}Mr(By,"onAnimationEnd");Mr($y,"onAnimationIteration");Mr(Hy,"onAnimationStart");Mr("dblclick","onDoubleClick");Mr("focusin","onFocus");Mr("focusout","onBlur");Mr(Wy,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d1=new Set("cancel close invalid load scroll toggle".split(" ").concat($i));function Kp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,uE(r,e,void 0,t),t.currentTarget=null}function Gy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Kp(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Kp(s,l,d),i=u}}}if(ul)throw t=$c,ul=!1,$c=null,t}function De(t,e){var n=e[Zc];n===void 0&&(n=e[Zc]=new Set);var r=t+"__bubble";n.has(r)||(Ky(e,t,2,!1),n.add(r))}function ec(t,e,n){var r=0;e&&(r|=4),Ky(n,t,r,e)}var ba="_reactListening"+Math.random().toString(36).slice(2);function vo(t){if(!t[ba]){t[ba]=!0,ty.forEach(function(n){n!=="selectionchange"&&(d1.has(n)||ec(n,!1,t),ec(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ba]||(e[ba]=!0,ec("selectionchange",!1,e))}}function Ky(t,e,n,r){switch(Ny(e)){case 1:var s=SE;break;case 4:s=CE;break;default:s=oh}n=s.bind(null,e,n,t),s=void 0,!Bc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function tc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Xr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}yy(function(){var d=i,f=nh(n),p=[];e:{var m=qy.get(t);if(m!==void 0){var w=lh,b=t;switch(t){case"keypress":if(Ga(n)===0)break e;case"keydown":case"keyup":w=UE;break;case"focusin":b="focus",w=Ku;break;case"focusout":b="blur",w=Ku;break;case"beforeblur":case"afterblur":w=Ku;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Lp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=bE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=HE;break;case By:case $y:case Hy:w=PE;break;case Wy:w=qE;break;case"scroll":w=AE;break;case"wheel":w=KE;break;case"copy":case"cut":case"paste":w=VE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=jp}var k=(e&4)!==0,V=!k&&t==="scroll",S=k?m!==null?m+"Capture":null:m;k=[];for(var E=d,C;E!==null;){C=E;var D=C.stateNode;if(C.tag===5&&D!==null&&(C=D,S!==null&&(D=ho(E,S),D!=null&&k.push(_o(E,D,C)))),V)break;E=E.return}0<k.length&&(m=new w(m,b,null,n,f),p.push({event:m,listeners:k}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",m&&n!==zc&&(b=n.relatedTarget||n.fromElement)&&(Xr(b)||b[Zn]))break e;if((w||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,w?(b=n.relatedTarget||n.toElement,w=d,b=b?Xr(b):null,b!==null&&(V=fs(b),b!==V||b.tag!==5&&b.tag!==6)&&(b=null)):(w=null,b=d),w!==b)){if(k=Lp,D="onMouseLeave",S="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(k=jp,D="onPointerLeave",S="onPointerEnter",E="pointer"),V=w==null?m:Ns(w),C=b==null?m:Ns(b),m=new k(D,E+"leave",w,n,f),m.target=V,m.relatedTarget=C,D=null,Xr(f)===d&&(k=new k(S,E+"enter",b,n,f),k.target=C,k.relatedTarget=V,D=k),V=D,w&&b)t:{for(k=w,S=b,E=0,C=k;C;C=xs(C))E++;for(C=0,D=S;D;D=xs(D))C++;for(;0<E-C;)k=xs(k),E--;for(;0<C-E;)S=xs(S),C--;for(;E--;){if(k===S||S!==null&&k===S.alternate)break t;k=xs(k),S=xs(S)}k=null}else k=null;w!==null&&Qp(p,m,w,k,!1),b!==null&&V!==null&&Qp(p,V,b,k,!0)}}e:{if(m=d?Ns(d):window,w=m.nodeName&&m.nodeName.toLowerCase(),w==="select"||w==="input"&&m.type==="file")var L=t1;else if(Up(m))if(My)L=i1;else{L=r1;var M=n1}else(w=m.nodeName)&&w.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=s1);if(L&&(L=L(t,d))){Ly(p,L,n,f);break e}M&&M(t,m,d),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Oc(m,"number",m.value)}switch(M=d?Ns(d):window,t){case"focusin":(Up(M)||M.contentEditable==="true")&&(bs=M,Gc=d,Xi=null);break;case"focusout":Xi=Gc=bs=null;break;case"mousedown":Kc=!0;break;case"contextmenu":case"mouseup":case"dragend":Kc=!1,qp(p,n,f);break;case"selectionchange":if(l1)break;case"keydown":case"keyup":qp(p,n,f)}var _;if(ch)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Rs?Vy(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Dy&&n.locale!=="ko"&&(Rs||y!=="onCompositionStart"?y==="onCompositionEnd"&&Rs&&(_=Py()):(yr=f,ah="value"in yr?yr.value:yr.textContent,Rs=!0)),M=pl(d,y),0<M.length&&(y=new Mp(y,t,null,n,f),p.push({event:y,listeners:M}),_?y.data=_:(_=Oy(n),_!==null&&(y.data=_)))),(_=YE?XE(t,n):JE(t,n))&&(d=pl(d,"onBeforeInput"),0<d.length&&(f=new Mp("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=_))}Gy(p,e)})}function _o(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ho(t,n),i!=null&&r.unshift(_o(t,i,s)),i=ho(t,e),i!=null&&r.push(_o(t,i,s))),t=t.return}return r}function xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=ho(n,i),u!=null&&o.unshift(_o(n,u,l))):s||(u=ho(n,i),u!=null&&o.push(_o(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var h1=/\r\n?/g,f1=/\u0000|\uFFFD/g;function Yp(t){return(typeof t=="string"?t:""+t).replace(h1,`
`).replace(f1,"")}function ka(t,e,n){if(e=Yp(e),Yp(t)!==e&&n)throw Error(B(425))}function ml(){}var Qc=null,Yc=null;function Xc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jc=typeof setTimeout=="function"?setTimeout:void 0,p1=typeof clearTimeout=="function"?clearTimeout:void 0,Xp=typeof Promise=="function"?Promise:void 0,m1=typeof queueMicrotask=="function"?queueMicrotask:typeof Xp<"u"?function(t){return Xp.resolve(null).then(t).catch(g1)}:Jc;function g1(t){setTimeout(function(){throw t})}function nc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),mo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);mo(e)}function Ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var pi=Math.random().toString(36).slice(2),bn="__reactFiber$"+pi,wo="__reactProps$"+pi,Zn="__reactContainer$"+pi,Zc="__reactEvents$"+pi,y1="__reactListeners$"+pi,v1="__reactHandles$"+pi;function Xr(t){var e=t[bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zn]||n[bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jp(t);t!==null;){if(n=t[bn])return n;t=Jp(t)}return e}t=n,n=t.parentNode}return null}function Ho(t){return t=t[bn]||t[Zn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ns(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function tu(t){return t[wo]||null}var ed=[],Ps=-1;function jr(t){return{current:t}}function Ve(t){0>Ps||(t.current=ed[Ps],ed[Ps]=null,Ps--)}function be(t,e){Ps++,ed[Ps]=t.current,t.current=e}var Nr={},At=jr(Nr),zt=jr(!1),ss=Nr;function Qs(t,e){var n=t.type.contextTypes;if(!n)return Nr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ut(t){return t=t.childContextTypes,t!=null}function gl(){Ve(zt),Ve(At)}function Zp(t,e,n){if(At.current!==Nr)throw Error(B(168));be(At,e),be(zt,n)}function Qy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,nE(t)||"Unknown",s));return je({},n,r)}function yl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Nr,ss=At.current,be(At,t),be(zt,zt.current),!0}function em(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=Qy(t,e,ss),r.__reactInternalMemoizedMergedChildContext=t,Ve(zt),Ve(At),be(At,t)):Ve(zt),be(zt,n)}var Wn=null,nu=!1,rc=!1;function Yy(t){Wn===null?Wn=[t]:Wn.push(t)}function _1(t){nu=!0,Yy(t)}function Fr(){if(!rc&&Wn!==null){rc=!0;var t=0,e=Se;try{var n=Wn;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wn=null,nu=!1}catch(s){throw Wn!==null&&(Wn=Wn.slice(t+1)),Ey(rh,Fr),s}finally{Se=e,rc=!1}}return null}var Ds=[],Vs=0,vl=null,_l=0,tn=[],nn=0,is=null,Gn=1,Kn="";function Kr(t,e){Ds[Vs++]=_l,Ds[Vs++]=vl,vl=t,_l=e}function Xy(t,e,n){tn[nn++]=Gn,tn[nn++]=Kn,tn[nn++]=is,is=t;var r=Gn;t=Kn;var s=32-En(r)-1;r&=~(1<<s),n+=1;var i=32-En(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Gn=1<<32-En(e)+s|n<<s|r,Kn=i+t}else Gn=1<<i|n<<s|r,Kn=t}function hh(t){t.return!==null&&(Kr(t,1),Xy(t,1,0))}function fh(t){for(;t===vl;)vl=Ds[--Vs],Ds[Vs]=null,_l=Ds[--Vs],Ds[Vs]=null;for(;t===is;)is=tn[--nn],tn[nn]=null,Kn=tn[--nn],tn[nn]=null,Gn=tn[--nn],tn[nn]=null}var Qt=null,Kt=null,Oe=!1,_n=null;function Jy(t,e){var n=sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function tm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=Ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=is!==null?{id:Gn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Kt=null,!0):!1;default:return!1}}function td(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nd(t){if(Oe){var e=Kt;if(e){var n=e;if(!tm(t,e)){if(td(t))throw Error(B(418));e=Ir(n.nextSibling);var r=Qt;e&&tm(t,e)?Jy(r,n):(t.flags=t.flags&-4097|2,Oe=!1,Qt=t)}}else{if(td(t))throw Error(B(418));t.flags=t.flags&-4097|2,Oe=!1,Qt=t}}}function nm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function Na(t){if(t!==Qt)return!1;if(!Oe)return nm(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xc(t.type,t.memoizedProps)),e&&(e=Kt)){if(td(t))throw Zy(),Error(B(418));for(;e;)Jy(t,e),e=Ir(e.nextSibling)}if(nm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kt=Ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kt=null}}else Kt=Qt?Ir(t.stateNode.nextSibling):null;return!0}function Zy(){for(var t=Kt;t;)t=Ir(t.nextSibling)}function Ys(){Kt=Qt=null,Oe=!1}function ph(t){_n===null?_n=[t]:_n.push(t)}var w1=ir.ReactCurrentBatchConfig;function Li(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Pa(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rm(t){var e=t._init;return e(t._payload)}function ev(t){function e(S,E){if(t){var C=S.deletions;C===null?(S.deletions=[E],S.flags|=16):C.push(E)}}function n(S,E){if(!t)return null;for(;E!==null;)e(S,E),E=E.sibling;return null}function r(S,E){for(S=new Map;E!==null;)E.key!==null?S.set(E.key,E):S.set(E.index,E),E=E.sibling;return S}function s(S,E){return S=Ar(S,E),S.index=0,S.sibling=null,S}function i(S,E,C){return S.index=C,t?(C=S.alternate,C!==null?(C=C.index,C<E?(S.flags|=2,E):C):(S.flags|=2,E)):(S.flags|=1048576,E)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,E,C,D){return E===null||E.tag!==6?(E=cc(C,S.mode,D),E.return=S,E):(E=s(E,C),E.return=S,E)}function u(S,E,C,D){var L=C.type;return L===As?f(S,E,C.props.children,D,C.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===hr&&rm(L)===E.type)?(D=s(E,C.props),D.ref=Li(S,E,C),D.return=S,D):(D=el(C.type,C.key,C.props,null,S.mode,D),D.ref=Li(S,E,C),D.return=S,D)}function d(S,E,C,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==C.containerInfo||E.stateNode.implementation!==C.implementation?(E=dc(C,S.mode,D),E.return=S,E):(E=s(E,C.children||[]),E.return=S,E)}function f(S,E,C,D,L){return E===null||E.tag!==7?(E=ns(C,S.mode,D,L),E.return=S,E):(E=s(E,C),E.return=S,E)}function p(S,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return E=cc(""+E,S.mode,C),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ea:return C=el(E.type,E.key,E.props,null,S.mode,C),C.ref=Li(S,null,E),C.return=S,C;case Cs:return E=dc(E,S.mode,C),E.return=S,E;case hr:var D=E._init;return p(S,D(E._payload),C)}if(Ui(E)||Ni(E))return E=ns(E,S.mode,C,null),E.return=S,E;Pa(S,E)}return null}function m(S,E,C,D){var L=E!==null?E.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return L!==null?null:l(S,E,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ea:return C.key===L?u(S,E,C,D):null;case Cs:return C.key===L?d(S,E,C,D):null;case hr:return L=C._init,m(S,E,L(C._payload),D)}if(Ui(C)||Ni(C))return L!==null?null:f(S,E,C,D,null);Pa(S,C)}return null}function w(S,E,C,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return S=S.get(C)||null,l(E,S,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ea:return S=S.get(D.key===null?C:D.key)||null,u(E,S,D,L);case Cs:return S=S.get(D.key===null?C:D.key)||null,d(E,S,D,L);case hr:var M=D._init;return w(S,E,C,M(D._payload),L)}if(Ui(D)||Ni(D))return S=S.get(C)||null,f(E,S,D,L,null);Pa(E,D)}return null}function b(S,E,C,D){for(var L=null,M=null,_=E,y=E=0,x=null;_!==null&&y<C.length;y++){_.index>y?(x=_,_=null):x=_.sibling;var T=m(S,_,C[y],D);if(T===null){_===null&&(_=x);break}t&&_&&T.alternate===null&&e(S,_),E=i(T,E,y),M===null?L=T:M.sibling=T,M=T,_=x}if(y===C.length)return n(S,_),Oe&&Kr(S,y),L;if(_===null){for(;y<C.length;y++)_=p(S,C[y],D),_!==null&&(E=i(_,E,y),M===null?L=_:M.sibling=_,M=_);return Oe&&Kr(S,y),L}for(_=r(S,_);y<C.length;y++)x=w(_,S,y,C[y],D),x!==null&&(t&&x.alternate!==null&&_.delete(x.key===null?y:x.key),E=i(x,E,y),M===null?L=x:M.sibling=x,M=x);return t&&_.forEach(function(A){return e(S,A)}),Oe&&Kr(S,y),L}function k(S,E,C,D){var L=Ni(C);if(typeof L!="function")throw Error(B(150));if(C=L.call(C),C==null)throw Error(B(151));for(var M=L=null,_=E,y=E=0,x=null,T=C.next();_!==null&&!T.done;y++,T=C.next()){_.index>y?(x=_,_=null):x=_.sibling;var A=m(S,_,T.value,D);if(A===null){_===null&&(_=x);break}t&&_&&A.alternate===null&&e(S,_),E=i(A,E,y),M===null?L=A:M.sibling=A,M=A,_=x}if(T.done)return n(S,_),Oe&&Kr(S,y),L;if(_===null){for(;!T.done;y++,T=C.next())T=p(S,T.value,D),T!==null&&(E=i(T,E,y),M===null?L=T:M.sibling=T,M=T);return Oe&&Kr(S,y),L}for(_=r(S,_);!T.done;y++,T=C.next())T=w(_,S,y,T.value,D),T!==null&&(t&&T.alternate!==null&&_.delete(T.key===null?y:T.key),E=i(T,E,y),M===null?L=T:M.sibling=T,M=T);return t&&_.forEach(function(R){return e(S,R)}),Oe&&Kr(S,y),L}function V(S,E,C,D){if(typeof C=="object"&&C!==null&&C.type===As&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ea:e:{for(var L=C.key,M=E;M!==null;){if(M.key===L){if(L=C.type,L===As){if(M.tag===7){n(S,M.sibling),E=s(M,C.props.children),E.return=S,S=E;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===hr&&rm(L)===M.type){n(S,M.sibling),E=s(M,C.props),E.ref=Li(S,M,C),E.return=S,S=E;break e}n(S,M);break}else e(S,M);M=M.sibling}C.type===As?(E=ns(C.props.children,S.mode,D,C.key),E.return=S,S=E):(D=el(C.type,C.key,C.props,null,S.mode,D),D.ref=Li(S,E,C),D.return=S,S=D)}return o(S);case Cs:e:{for(M=C.key;E!==null;){if(E.key===M)if(E.tag===4&&E.stateNode.containerInfo===C.containerInfo&&E.stateNode.implementation===C.implementation){n(S,E.sibling),E=s(E,C.children||[]),E.return=S,S=E;break e}else{n(S,E);break}else e(S,E);E=E.sibling}E=dc(C,S.mode,D),E.return=S,S=E}return o(S);case hr:return M=C._init,V(S,E,M(C._payload),D)}if(Ui(C))return b(S,E,C,D);if(Ni(C))return k(S,E,C,D);Pa(S,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,E!==null&&E.tag===6?(n(S,E.sibling),E=s(E,C),E.return=S,S=E):(n(S,E),E=cc(C,S.mode,D),E.return=S,S=E),o(S)):n(S,E)}return V}var Xs=ev(!0),tv=ev(!1),wl=jr(null),El=null,Os=null,mh=null;function gh(){mh=Os=El=null}function yh(t){var e=wl.current;Ve(wl),t._currentValue=e}function rd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hs(t,e){El=t,mh=Os=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ft=!0),t.firstContext=null)}function un(t){var e=t._currentValue;if(mh!==t)if(t={context:t,memoizedValue:e,next:null},Os===null){if(El===null)throw Error(B(308));Os=t,El.dependencies={lanes:0,firstContext:t}}else Os=Os.next=t;return e}var Jr=null;function vh(t){Jr===null?Jr=[t]:Jr.push(t)}function nv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,vh(e)):(n.next=s.next,s.next=n),e.interleaved=n,er(t,r)}function er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fr=!1;function _h(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Tr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,er(t,n)}return s=r.interleaved,s===null?(e.next=e,vh(r)):(e.next=s.next,s.next=e),r.interleaved=e,er(t,n)}function Ka(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sh(t,n)}}function sm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xl(t,e,n,r){var s=t.updateQueue;fr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=d=u=null,l=i;do{var m=l.lane,w=l.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,k=l;switch(m=e,w=n,k.tag){case 1:if(b=k.payload,typeof b=="function"){p=b.call(w,p,m);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=k.payload,m=typeof b=="function"?b.call(w,p,m):b,m==null)break e;p=je({},p,m);break e;case 2:fr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else w={eventTime:w,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=w,u=p):f=f.next=w,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);as|=o,t.lanes=o,t.memoizedState=p}}function im(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Wo={},Nn=jr(Wo),Eo=jr(Wo),xo=jr(Wo);function Zr(t){if(t===Wo)throw Error(B(174));return t}function wh(t,e){switch(be(xo,e),be(Eo,t),be(Nn,Wo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mc(e,t)}Ve(Nn),be(Nn,e)}function Js(){Ve(Nn),Ve(Eo),Ve(xo)}function sv(t){Zr(xo.current);var e=Zr(Nn.current),n=Mc(e,t.type);e!==n&&(be(Eo,t),be(Nn,n))}function Eh(t){Eo.current===t&&(Ve(Nn),Ve(Eo))}var Le=jr(0);function Il(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sc=[];function xh(){for(var t=0;t<sc.length;t++)sc[t]._workInProgressVersionPrimary=null;sc.length=0}var Qa=ir.ReactCurrentDispatcher,ic=ir.ReactCurrentBatchConfig,os=0,Me=null,Xe=null,rt=null,Tl=!1,Ji=!1,Io=0,E1=0;function Et(){throw Error(B(321))}function Ih(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!In(t[n],e[n]))return!1;return!0}function Th(t,e,n,r,s,i){if(os=i,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qa.current=t===null||t.memoizedState===null?S1:C1,t=n(r,s),Ji){i=0;do{if(Ji=!1,Io=0,25<=i)throw Error(B(301));i+=1,rt=Xe=null,e.updateQueue=null,Qa.current=A1,t=n(r,s)}while(Ji)}if(Qa.current=Sl,e=Xe!==null&&Xe.next!==null,os=0,rt=Xe=Me=null,Tl=!1,e)throw Error(B(300));return t}function Sh(){var t=Io!==0;return Io=0,t}function Rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Me.memoizedState=rt=t:rt=rt.next=t,rt}function cn(){if(Xe===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=rt===null?Me.memoizedState:rt.next;if(e!==null)rt=e,Xe=t;else{if(t===null)throw Error(B(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},rt===null?Me.memoizedState=rt=t:rt=rt.next=t}return rt}function To(t,e){return typeof e=="function"?e(t):e}function oc(t){var e=cn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Xe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if((os&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Me.lanes|=f,as|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,In(r,e.memoizedState)||(Ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Me.lanes|=i,as|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ac(t){var e=cn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);In(i,e.memoizedState)||(Ft=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function iv(){}function ov(t,e){var n=Me,r=cn(),s=e(),i=!In(r.memoizedState,s);if(i&&(r.memoizedState=s,Ft=!0),r=r.queue,Ch(uv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,So(9,lv.bind(null,n,r,s,e),void 0,null),it===null)throw Error(B(349));os&30||av(n,e,s)}return s}function av(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lv(t,e,n,r){e.value=n,e.getSnapshot=r,cv(e)&&dv(t)}function uv(t,e,n){return n(function(){cv(e)&&dv(t)})}function cv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!In(t,n)}catch{return!0}}function dv(t){var e=er(t,1);e!==null&&xn(e,t,1,-1)}function om(t){var e=Rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:t},e.queue=t,t=t.dispatch=T1.bind(null,Me,t),[e.memoizedState,t]}function So(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hv(){return cn().memoizedState}function Ya(t,e,n,r){var s=Rn();Me.flags|=t,s.memoizedState=So(1|e,n,void 0,r===void 0?null:r)}function ru(t,e,n,r){var s=cn();r=r===void 0?null:r;var i=void 0;if(Xe!==null){var o=Xe.memoizedState;if(i=o.destroy,r!==null&&Ih(r,o.deps)){s.memoizedState=So(e,n,i,r);return}}Me.flags|=t,s.memoizedState=So(1|e,n,i,r)}function am(t,e){return Ya(8390656,8,t,e)}function Ch(t,e){return ru(2048,8,t,e)}function fv(t,e){return ru(4,2,t,e)}function pv(t,e){return ru(4,4,t,e)}function mv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gv(t,e,n){return n=n!=null?n.concat([t]):null,ru(4,4,mv.bind(null,e,t),n)}function Ah(){}function yv(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ih(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vv(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ih(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function _v(t,e,n){return os&21?(In(n,e)||(n=Ty(),Me.lanes|=n,as|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=n)}function x1(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=ic.transition;ic.transition={};try{t(!1),e()}finally{Se=n,ic.transition=r}}function wv(){return cn().memoizedState}function I1(t,e,n){var r=Cr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ev(t))xv(e,n);else if(n=nv(t,e,n,r),n!==null){var s=Ot();xn(n,t,r,s),Iv(n,e,r)}}function T1(t,e,n){var r=Cr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ev(t))xv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,In(l,o)){var u=e.interleaved;u===null?(s.next=s,vh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=nv(t,e,s,r),n!==null&&(s=Ot(),xn(n,t,r,s),Iv(n,e,r))}}function Ev(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function xv(t,e){Ji=Tl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Iv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sh(t,n)}}var Sl={readContext:un,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},S1={readContext:un,useCallback:function(t,e){return Rn().memoizedState=[t,e===void 0?null:e],t},useContext:un,useEffect:am,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ya(4194308,4,mv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ya(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ya(4,2,t,e)},useMemo:function(t,e){var n=Rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=I1.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=Rn();return t={current:t},e.memoizedState=t},useState:om,useDebugValue:Ah,useDeferredValue:function(t){return Rn().memoizedState=t},useTransition:function(){var t=om(!1),e=t[0];return t=x1.bind(null,t[1]),Rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,s=Rn();if(Oe){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),it===null)throw Error(B(349));os&30||av(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,am(uv.bind(null,r,i,t),[t]),r.flags|=2048,So(9,lv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Rn(),e=it.identifierPrefix;if(Oe){var n=Kn,r=Gn;n=(r&~(1<<32-En(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Io++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=E1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},C1={readContext:un,useCallback:yv,useContext:un,useEffect:Ch,useImperativeHandle:gv,useInsertionEffect:fv,useLayoutEffect:pv,useMemo:vv,useReducer:oc,useRef:hv,useState:function(){return oc(To)},useDebugValue:Ah,useDeferredValue:function(t){var e=cn();return _v(e,Xe.memoizedState,t)},useTransition:function(){var t=oc(To)[0],e=cn().memoizedState;return[t,e]},useMutableSource:iv,useSyncExternalStore:ov,useId:wv,unstable_isNewReconciler:!1},A1={readContext:un,useCallback:yv,useContext:un,useEffect:Ch,useImperativeHandle:gv,useInsertionEffect:fv,useLayoutEffect:pv,useMemo:vv,useReducer:ac,useRef:hv,useState:function(){return ac(To)},useDebugValue:Ah,useDeferredValue:function(t){var e=cn();return Xe===null?e.memoizedState=t:_v(e,Xe.memoizedState,t)},useTransition:function(){var t=ac(To)[0],e=cn().memoizedState;return[t,e]},useMutableSource:iv,useSyncExternalStore:ov,useId:wv,unstable_isNewReconciler:!1};function yn(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var su={isMounted:function(t){return(t=t._reactInternals)?fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ot(),s=Cr(t),i=Qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Tr(t,i,s),e!==null&&(xn(e,t,s,r),Ka(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ot(),s=Cr(t),i=Qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Tr(t,i,s),e!==null&&(xn(e,t,s,r),Ka(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ot(),r=Cr(t),s=Qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Tr(t,s,r),e!==null&&(xn(e,t,r,n),Ka(e,t,r))}};function lm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!yo(n,r)||!yo(s,i):!0}function Tv(t,e,n){var r=!1,s=Nr,i=e.contextType;return typeof i=="object"&&i!==null?i=un(i):(s=Ut(e)?ss:At.current,r=e.contextTypes,i=(r=r!=null)?Qs(t,s):Nr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=su,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function um(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&su.enqueueReplaceState(e,e.state,null)}function id(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},_h(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=un(i):(i=Ut(e)?ss:At.current,s.context=Qs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&su.enqueueReplaceState(s,s.state,null),xl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Zs(t,e){try{var n="",r=e;do n+=tE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function lc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function od(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var R1=typeof WeakMap=="function"?WeakMap:Map;function Sv(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Al||(Al=!0,gd=r),od(t,e)},n}function Cv(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){od(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){od(t,e),typeof r!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function cm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new R1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=B1.bind(null,t,e,n),e.then(t,t))}function dm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,Tr(n,e,1))),n.lanes|=1),t)}var b1=ir.ReactCurrentOwner,Ft=!1;function Dt(t,e,n,r){e.child=t===null?tv(e,null,n,r):Xs(e,t.child,n,r)}function fm(t,e,n,r,s){n=n.render;var i=e.ref;return Hs(e,s),r=Th(t,e,n,r,i,s),n=Sh(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,tr(t,e,s)):(Oe&&n&&hh(e),e.flags|=1,Dt(t,e,r,s),e.child)}function pm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Oh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Av(t,e,i,r,s)):(t=el(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:yo,n(o,r)&&t.ref===e.ref)return tr(t,e,s)}return e.flags|=1,t=Ar(i,r),t.ref=e.ref,t.return=e,e.child=t}function Av(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(yo(i,r)&&t.ref===e.ref)if(Ft=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ft=!0);else return e.lanes=t.lanes,tr(t,e,s)}return ad(t,e,n,r,s)}function Rv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Ms,Gt),Gt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(Ms,Gt),Gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,be(Ms,Gt),Gt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,be(Ms,Gt),Gt|=r;return Dt(t,e,s,n),e.child}function bv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ad(t,e,n,r,s){var i=Ut(n)?ss:At.current;return i=Qs(e,i),Hs(e,s),n=Th(t,e,n,r,i,s),r=Sh(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,tr(t,e,s)):(Oe&&r&&hh(e),e.flags|=1,Dt(t,e,n,s),e.child)}function mm(t,e,n,r,s){if(Ut(n)){var i=!0;yl(e)}else i=!1;if(Hs(e,s),e.stateNode===null)Xa(t,e),Tv(e,n,r),id(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=un(d):(d=Ut(n)?ss:At.current,d=Qs(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&um(e,o,r,d),fr=!1;var m=e.memoizedState;o.state=m,xl(e,r,o,s),u=e.memoizedState,l!==r||m!==u||zt.current||fr?(typeof f=="function"&&(sd(e,n,f,r),u=e.memoizedState),(l=fr||lm(e,n,l,r,m,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,rv(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:yn(e.type,l),o.props=d,p=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=un(u):(u=Ut(n)?ss:At.current,u=Qs(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==u)&&um(e,o,r,u),fr=!1,m=e.memoizedState,o.state=m,xl(e,r,o,s);var b=e.memoizedState;l!==p||m!==b||zt.current||fr?(typeof w=="function"&&(sd(e,n,w,r),b=e.memoizedState),(d=fr||lm(e,n,d,r,m,b,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return ld(t,e,n,r,i,s)}function ld(t,e,n,r,s,i){bv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&em(e,n,!1),tr(t,e,i);r=e.stateNode,b1.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Xs(e,t.child,null,i),e.child=Xs(e,null,l,i)):Dt(t,e,l,i),e.memoizedState=r.state,s&&em(e,n,!0),e.child}function kv(t){var e=t.stateNode;e.pendingContext?Zp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zp(t,e.context,!1),wh(t,e.containerInfo)}function gm(t,e,n,r,s){return Ys(),ph(s),e.flags|=256,Dt(t,e,n,r),e.child}var ud={dehydrated:null,treeContext:null,retryLane:0};function cd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Nv(t,e,n){var r=e.pendingProps,s=Le.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),be(Le,s&1),t===null)return nd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=au(o,r,0,null),t=ns(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=cd(n),e.memoizedState=ud,t):Rh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return k1(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ar(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ar(l,i):(i=ns(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?cd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ud,r}return i=t.child,t=i.sibling,r=Ar(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Rh(t,e){return e=au({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Da(t,e,n,r){return r!==null&&ph(r),Xs(e,t.child,null,n),t=Rh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function k1(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=lc(Error(B(422))),Da(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=au({mode:"visible",children:r.children},s,0,null),i=ns(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Xs(e,t.child,null,o),e.child.memoizedState=cd(o),e.memoizedState=ud,i);if(!(e.mode&1))return Da(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=lc(i,r,void 0),Da(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ft||l){if(r=it,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,er(t,s),xn(r,t,s,-1))}return Vh(),r=lc(Error(B(421))),Da(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=$1.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Kt=Ir(s.nextSibling),Qt=e,Oe=!0,_n=null,t!==null&&(tn[nn++]=Gn,tn[nn++]=Kn,tn[nn++]=is,Gn=t.id,Kn=t.overflow,is=e),e=Rh(e,r.children),e.flags|=4096,e)}function ym(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rd(t.return,e,n)}function uc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Pv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Dt(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ym(t,n,e);else if(t.tag===19)ym(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(Le,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Il(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),uc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Il(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}uc(e,!0,n,null,i);break;case"together":uc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),as|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function N1(t,e,n){switch(e.tag){case 3:kv(e),Ys();break;case 5:sv(e);break;case 1:Ut(e.type)&&yl(e);break;case 4:wh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;be(wl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?Nv(t,e,n):(be(Le,Le.current&1),t=tr(t,e,n),t!==null?t.sibling:null);be(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Pv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,Rv(t,e,n)}return tr(t,e,n)}var Dv,dd,Vv,Ov;Dv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dd=function(){};Vv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Zr(Nn.current);var i=null;switch(n){case"input":s=Dc(t,s),r=Dc(t,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=Lc(t,s),r=Lc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ml)}jc(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(uo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(uo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&De("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Ov=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mi(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function P1(t,e,n){var r=e.pendingProps;switch(fh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return Ut(e.type)&&gl(),xt(e),null;case 3:return r=e.stateNode,Js(),Ve(zt),Ve(At),xh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Na(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_n!==null&&(_d(_n),_n=null))),dd(t,e),xt(e),null;case 5:Eh(e);var s=Zr(xo.current);if(n=e.type,t!==null&&e.stateNode!=null)Vv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return xt(e),null}if(t=Zr(Nn.current),Na(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[bn]=e,r[wo]=i,t=(e.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(s=0;s<$i.length;s++)De($i[s],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":Cp(r,i),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},De("invalid",r);break;case"textarea":Rp(r,i),De("invalid",r)}jc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ka(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ka(r.textContent,l,t),s=["children",""+l]):uo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&De("scroll",r)}switch(n){case"input":xa(r),Ap(r,i,!0);break;case"textarea":xa(r),bp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ml)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bn]=e,t[wo]=r,Dv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fc(n,r),n){case"dialog":De("cancel",t),De("close",t),s=r;break;case"iframe":case"object":case"embed":De("load",t),s=r;break;case"video":case"audio":for(s=0;s<$i.length;s++)De($i[s],t);s=r;break;case"source":De("error",t),s=r;break;case"img":case"image":case"link":De("error",t),De("load",t),s=r;break;case"details":De("toggle",t),s=r;break;case"input":Cp(t,r),s=Dc(t,r),De("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),De("invalid",t);break;case"textarea":Rp(t,r),s=Lc(t,r),De("invalid",t);break;default:s=r}jc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?hy(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&cy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&co(t,u):typeof u=="number"&&co(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(uo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&De("scroll",t):u!=null&&Jd(t,i,u,o))}switch(n){case"input":xa(t),Ap(t,r,!1);break;case"textarea":xa(t),bp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+kr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?zs(t,!!r.multiple,i,!1):r.defaultValue!=null&&zs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ml)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(t&&e.stateNode!=null)Ov(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Zr(xo.current),Zr(Nn.current),Na(e)){if(r=e.stateNode,n=e.memoizedProps,r[bn]=e,(i=r.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:ka(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ka(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bn]=e,e.stateNode=r}return xt(e),null;case 13:if(Ve(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&Kt!==null&&e.mode&1&&!(e.flags&128))Zy(),Ys(),e.flags|=98560,i=!1;else if(i=Na(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[bn]=e}else Ys(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),i=!1}else _n!==null&&(_d(_n),_n=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?et===0&&(et=3):Vh())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return Js(),dd(t,e),t===null&&vo(e.stateNode.containerInfo),xt(e),null;case 10:return yh(e.type._context),xt(e),null;case 17:return Ut(e.type)&&gl(),xt(e),null;case 19:if(Ve(Le),i=e.memoizedState,i===null)return xt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Mi(i,!1);else{if(et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Il(t),o!==null){for(e.flags|=128,Mi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(Le,Le.current&1|2),e.child}t=t.sibling}i.tail!==null&&qe()>ei&&(e.flags|=128,r=!0,Mi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Il(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Oe)return xt(e),null}else 2*qe()-i.renderingStartTime>ei&&n!==1073741824&&(e.flags|=128,r=!0,Mi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qe(),e.sibling=null,n=Le.current,be(Le,r?n&1|2:n&1),e):(xt(e),null);case 22:case 23:return Dh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gt&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function D1(t,e){switch(fh(e),e.tag){case 1:return Ut(e.type)&&gl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Js(),Ve(zt),Ve(At),xh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Eh(e),null;case 13:if(Ve(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Ys()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(Le),null;case 4:return Js(),null;case 10:return yh(e.type._context),null;case 22:case 23:return Dh(),null;case 24:return null;default:return null}}var Va=!1,St=!1,V1=typeof WeakSet=="function"?WeakSet:Set,G=null;function Ls(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function hd(t,e,n){try{n()}catch(r){Be(t,e,r)}}var vm=!1;function O1(t,e){if(Qc=hl,t=zy(),dh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,p=t,m=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)m=p,p=w;for(;;){if(p===t)break t;if(m===n&&++d===s&&(l=o),m===i&&++f===r&&(u=o),(w=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yc={focusedElem:t,selectionRange:n},hl=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var k=b.memoizedProps,V=b.memoizedState,S=e.stateNode,E=S.getSnapshotBeforeUpdate(e.elementType===e.type?k:yn(e.type,k),V);S.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(D){Be(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return b=vm,vm=!1,b}function Zi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&hd(e,n,i)}s=s.next}while(s!==r)}}function iu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Lv(t){var e=t.alternate;e!==null&&(t.alternate=null,Lv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bn],delete e[wo],delete e[Zc],delete e[y1],delete e[v1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Mv(t){return t.tag===5||t.tag===3||t.tag===4}function _m(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Mv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ml));else if(r!==4&&(t=t.child,t!==null))for(pd(t,e,n),t=t.sibling;t!==null;)pd(t,e,n),t=t.sibling}function md(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(md(t,e,n),t=t.sibling;t!==null;)md(t,e,n),t=t.sibling}var ut=null,vn=!1;function dr(t,e,n){for(n=n.child;n!==null;)jv(t,e,n),n=n.sibling}function jv(t,e,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Xl,n)}catch{}switch(n.tag){case 5:St||Ls(n,e);case 6:var r=ut,s=vn;ut=null,dr(t,e,n),ut=r,vn=s,ut!==null&&(vn?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(vn?(t=ut,n=n.stateNode,t.nodeType===8?nc(t.parentNode,n):t.nodeType===1&&nc(t,n),mo(t)):nc(ut,n.stateNode));break;case 4:r=ut,s=vn,ut=n.stateNode.containerInfo,vn=!0,dr(t,e,n),ut=r,vn=s;break;case 0:case 11:case 14:case 15:if(!St&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hd(n,e,o),s=s.next}while(s!==r)}dr(t,e,n);break;case 1:if(!St&&(Ls(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Be(n,e,l)}dr(t,e,n);break;case 21:dr(t,e,n);break;case 22:n.mode&1?(St=(r=St)||n.memoizedState!==null,dr(t,e,n),St=r):dr(t,e,n);break;default:dr(t,e,n)}}function wm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new V1),e.forEach(function(r){var s=H1.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ut=l.stateNode,vn=!1;break e;case 3:ut=l.stateNode.containerInfo,vn=!0;break e;case 4:ut=l.stateNode.containerInfo,vn=!0;break e}l=l.return}if(ut===null)throw Error(B(160));jv(i,o,s),ut=null,vn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Be(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fv(e,t),e=e.sibling}function Fv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gn(e,t),An(t),r&4){try{Zi(3,t,t.return),iu(3,t)}catch(k){Be(t,t.return,k)}try{Zi(5,t,t.return)}catch(k){Be(t,t.return,k)}}break;case 1:gn(e,t),An(t),r&512&&n!==null&&Ls(n,n.return);break;case 5:if(gn(e,t),An(t),r&512&&n!==null&&Ls(n,n.return),t.flags&32){var s=t.stateNode;try{co(s,"")}catch(k){Be(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ay(s,i),Fc(l,o);var d=Fc(l,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?hy(s,p):f==="dangerouslySetInnerHTML"?cy(s,p):f==="children"?co(s,p):Jd(s,f,p,d)}switch(l){case"input":Vc(s,i);break;case"textarea":ly(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?zs(s,!!i.multiple,w,!1):m!==!!i.multiple&&(i.defaultValue!=null?zs(s,!!i.multiple,i.defaultValue,!0):zs(s,!!i.multiple,i.multiple?[]:"",!1))}s[wo]=i}catch(k){Be(t,t.return,k)}}break;case 6:if(gn(e,t),An(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Be(t,t.return,k)}}break;case 3:if(gn(e,t),An(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mo(e.containerInfo)}catch(k){Be(t,t.return,k)}break;case 4:gn(e,t),An(t);break;case 13:gn(e,t),An(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Nh=qe())),r&4&&wm(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(St=(d=St)||f,gn(e,t),St=d):gn(e,t),An(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(G=t,f=t.child;f!==null;){for(p=G=f;G!==null;){switch(m=G,w=m.child,m.tag){case 0:case 11:case 14:case 15:Zi(4,m,m.return);break;case 1:Ls(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(k){Be(r,n,k)}}break;case 5:Ls(m,m.return);break;case 22:if(m.memoizedState!==null){xm(p);continue}}w!==null?(w.return=m,G=w):xm(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=dy("display",o))}catch(k){Be(t,t.return,k)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(k){Be(t,t.return,k)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:gn(e,t),An(t),r&4&&wm(t);break;case 21:break;default:gn(e,t),An(t)}}function An(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Mv(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(co(s,""),r.flags&=-33);var i=_m(t);md(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=_m(t);pd(t,l,o);break;default:throw Error(B(161))}}catch(u){Be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function L1(t,e,n){G=t,zv(t)}function zv(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Va;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||St;l=Va;var d=St;if(Va=o,(St=u)&&!d)for(G=s;G!==null;)o=G,u=o.child,o.tag===22&&o.memoizedState!==null?Im(s):u!==null?(u.return=o,G=u):Im(s);for(;i!==null;)G=i,zv(i),i=i.sibling;G=s,Va=l,St=d}Em(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):Em(t)}}function Em(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:St||iu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!St)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:yn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&im(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}im(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&mo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}St||e.flags&512&&fd(e)}catch(m){Be(e,e.return,m)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function xm(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function Im(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{iu(4,e)}catch(u){Be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Be(e,s,u)}}var i=e.return;try{fd(e)}catch(u){Be(e,i,u)}break;case 5:var o=e.return;try{fd(e)}catch(u){Be(e,o,u)}}}catch(u){Be(e,e.return,u)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var M1=Math.ceil,Cl=ir.ReactCurrentDispatcher,bh=ir.ReactCurrentOwner,on=ir.ReactCurrentBatchConfig,we=0,it=null,Ye=null,ht=0,Gt=0,Ms=jr(0),et=0,Co=null,as=0,ou=0,kh=0,eo=null,jt=null,Nh=0,ei=1/0,Hn=null,Al=!1,gd=null,Sr=null,Oa=!1,vr=null,Rl=0,to=0,yd=null,Ja=-1,Za=0;function Ot(){return we&6?qe():Ja!==-1?Ja:Ja=qe()}function Cr(t){return t.mode&1?we&2&&ht!==0?ht&-ht:w1.transition!==null?(Za===0&&(Za=Ty()),Za):(t=Se,t!==0||(t=window.event,t=t===void 0?16:Ny(t.type)),t):1}function xn(t,e,n,r){if(50<to)throw to=0,yd=null,Error(B(185));Bo(t,n,r),(!(we&2)||t!==it)&&(t===it&&(!(we&2)&&(ou|=n),et===4&&gr(t,ht)),Bt(t,r),n===1&&we===0&&!(e.mode&1)&&(ei=qe()+500,nu&&Fr()))}function Bt(t,e){var n=t.callbackNode;wE(t,e);var r=dl(t,t===it?ht:0);if(r===0)n!==null&&Pp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Pp(n),e===1)t.tag===0?_1(Tm.bind(null,t)):Yy(Tm.bind(null,t)),m1(function(){!(we&6)&&Fr()}),n=null;else{switch(Sy(r)){case 1:n=rh;break;case 4:n=xy;break;case 16:n=cl;break;case 536870912:n=Iy;break;default:n=cl}n=Kv(n,Uv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Uv(t,e){if(Ja=-1,Za=0,we&6)throw Error(B(327));var n=t.callbackNode;if(Ws()&&t.callbackNode!==n)return null;var r=dl(t,t===it?ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bl(t,r);else{e=r;var s=we;we|=2;var i=$v();(it!==t||ht!==e)&&(Hn=null,ei=qe()+500,ts(t,e));do try{z1();break}catch(l){Bv(t,l)}while(!0);gh(),Cl.current=i,we=s,Ye!==null?e=0:(it=null,ht=0,e=et)}if(e!==0){if(e===2&&(s=Hc(t),s!==0&&(r=s,e=vd(t,s))),e===1)throw n=Co,ts(t,0),gr(t,r),Bt(t,qe()),n;if(e===6)gr(t,r);else{if(s=t.current.alternate,!(r&30)&&!j1(s)&&(e=bl(t,r),e===2&&(i=Hc(t),i!==0&&(r=i,e=vd(t,i))),e===1))throw n=Co,ts(t,0),gr(t,r),Bt(t,qe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Qr(t,jt,Hn);break;case 3:if(gr(t,r),(r&130023424)===r&&(e=Nh+500-qe(),10<e)){if(dl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ot(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Jc(Qr.bind(null,t,jt,Hn),e);break}Qr(t,jt,Hn);break;case 4:if(gr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-En(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*M1(r/1960))-r,10<r){t.timeoutHandle=Jc(Qr.bind(null,t,jt,Hn),r);break}Qr(t,jt,Hn);break;case 5:Qr(t,jt,Hn);break;default:throw Error(B(329))}}}return Bt(t,qe()),t.callbackNode===n?Uv.bind(null,t):null}function vd(t,e){var n=eo;return t.current.memoizedState.isDehydrated&&(ts(t,e).flags|=256),t=bl(t,e),t!==2&&(e=jt,jt=n,e!==null&&_d(e)),t}function _d(t){jt===null?jt=t:jt.push.apply(jt,t)}function j1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!In(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gr(t,e){for(e&=~kh,e&=~ou,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-En(e),r=1<<n;t[n]=-1,e&=~r}}function Tm(t){if(we&6)throw Error(B(327));Ws();var e=dl(t,0);if(!(e&1))return Bt(t,qe()),null;var n=bl(t,e);if(t.tag!==0&&n===2){var r=Hc(t);r!==0&&(e=r,n=vd(t,r))}if(n===1)throw n=Co,ts(t,0),gr(t,e),Bt(t,qe()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qr(t,jt,Hn),Bt(t,qe()),null}function Ph(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(ei=qe()+500,nu&&Fr())}}function ls(t){vr!==null&&vr.tag===0&&!(we&6)&&Ws();var e=we;we|=1;var n=on.transition,r=Se;try{if(on.transition=null,Se=1,t)return t()}finally{Se=r,on.transition=n,we=e,!(we&6)&&Fr()}}function Dh(){Gt=Ms.current,Ve(Ms)}function ts(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,p1(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(fh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gl();break;case 3:Js(),Ve(zt),Ve(At),xh();break;case 5:Eh(r);break;case 4:Js();break;case 13:Ve(Le);break;case 19:Ve(Le);break;case 10:yh(r.type._context);break;case 22:case 23:Dh()}n=n.return}if(it=t,Ye=t=Ar(t.current,null),ht=Gt=e,et=0,Co=null,kh=ou=as=0,jt=eo=null,Jr!==null){for(e=0;e<Jr.length;e++)if(n=Jr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Jr=null}return t}function Bv(t,e){do{var n=Ye;try{if(gh(),Qa.current=Sl,Tl){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Tl=!1}if(os=0,rt=Xe=Me=null,Ji=!1,Io=0,bh.current=null,n===null||n.return===null){et=1,Co=e,Ye=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=ht,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=dm(o);if(w!==null){w.flags&=-257,hm(w,o,l,i,e),w.mode&1&&cm(i,d,e),e=w,u=d;var b=e.updateQueue;if(b===null){var k=new Set;k.add(u),e.updateQueue=k}else b.add(u);break e}else{if(!(e&1)){cm(i,d,e),Vh();break e}u=Error(B(426))}}else if(Oe&&l.mode&1){var V=dm(o);if(V!==null){!(V.flags&65536)&&(V.flags|=256),hm(V,o,l,i,e),ph(Zs(u,l));break e}}i=u=Zs(u,l),et!==4&&(et=2),eo===null?eo=[i]:eo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=Sv(i,u,e);sm(i,S);break e;case 1:l=u;var E=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Sr===null||!Sr.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=Cv(i,l,e);sm(i,D);break e}}i=i.return}while(i!==null)}Wv(n)}catch(L){e=L,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function $v(){var t=Cl.current;return Cl.current=Sl,t===null?Sl:t}function Vh(){(et===0||et===3||et===2)&&(et=4),it===null||!(as&268435455)&&!(ou&268435455)||gr(it,ht)}function bl(t,e){var n=we;we|=2;var r=$v();(it!==t||ht!==e)&&(Hn=null,ts(t,e));do try{F1();break}catch(s){Bv(t,s)}while(!0);if(gh(),we=n,Cl.current=r,Ye!==null)throw Error(B(261));return it=null,ht=0,et}function F1(){for(;Ye!==null;)Hv(Ye)}function z1(){for(;Ye!==null&&!dE();)Hv(Ye)}function Hv(t){var e=Gv(t.alternate,t,Gt);t.memoizedProps=t.pendingProps,e===null?Wv(t):Ye=e,bh.current=null}function Wv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=D1(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{et=6,Ye=null;return}}else if(n=P1(n,e,Gt),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);et===0&&(et=5)}function Qr(t,e,n){var r=Se,s=on.transition;try{on.transition=null,Se=1,U1(t,e,n,r)}finally{on.transition=s,Se=r}return null}function U1(t,e,n,r){do Ws();while(vr!==null);if(we&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(EE(t,i),t===it&&(Ye=it=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oa||(Oa=!0,Kv(cl,function(){return Ws(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=on.transition,on.transition=null;var o=Se;Se=1;var l=we;we|=4,bh.current=null,O1(t,n),Fv(n,t),a1(Yc),hl=!!Qc,Yc=Qc=null,t.current=n,L1(n),hE(),we=l,Se=o,on.transition=i}else t.current=n;if(Oa&&(Oa=!1,vr=t,Rl=s),i=t.pendingLanes,i===0&&(Sr=null),mE(n.stateNode),Bt(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Al)throw Al=!1,t=gd,gd=null,t;return Rl&1&&t.tag!==0&&Ws(),i=t.pendingLanes,i&1?t===yd?to++:(to=0,yd=t):to=0,Fr(),null}function Ws(){if(vr!==null){var t=Sy(Rl),e=on.transition,n=Se;try{if(on.transition=null,Se=16>t?16:t,vr===null)var r=!1;else{if(t=vr,vr=null,Rl=0,we&6)throw Error(B(331));var s=we;for(we|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(G=d;G!==null;){var f=G;switch(f.tag){case 0:case 11:case 15:Zi(8,f,i)}var p=f.child;if(p!==null)p.return=f,G=p;else for(;G!==null;){f=G;var m=f.sibling,w=f.return;if(Lv(f),f===d){G=null;break}if(m!==null){m.return=w,G=m;break}G=w}}}var b=i.alternate;if(b!==null){var k=b.child;if(k!==null){b.child=null;do{var V=k.sibling;k.sibling=null,k=V}while(k!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zi(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,G=S;break e}G=i.return}}var E=t.current;for(G=E;G!==null;){o=G;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,G=C;else e:for(o=E;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:iu(9,l)}}catch(L){Be(l,l.return,L)}if(l===o){G=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,G=D;break e}G=l.return}}if(we=s,Fr(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Xl,t)}catch{}r=!0}return r}finally{Se=n,on.transition=e}}return!1}function Sm(t,e,n){e=Zs(n,e),e=Sv(t,e,1),t=Tr(t,e,1),e=Ot(),t!==null&&(Bo(t,1,e),Bt(t,e))}function Be(t,e,n){if(t.tag===3)Sm(t,t,n);else for(;e!==null;){if(e.tag===3){Sm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sr===null||!Sr.has(r))){t=Zs(n,t),t=Cv(e,t,1),e=Tr(e,t,1),t=Ot(),e!==null&&(Bo(e,1,t),Bt(e,t));break}}e=e.return}}function B1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ot(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ht&n)===n&&(et===4||et===3&&(ht&130023424)===ht&&500>qe()-Nh?ts(t,0):kh|=n),Bt(t,e)}function qv(t,e){e===0&&(t.mode&1?(e=Sa,Sa<<=1,!(Sa&130023424)&&(Sa=4194304)):e=1);var n=Ot();t=er(t,e),t!==null&&(Bo(t,e,n),Bt(t,n))}function $1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),qv(t,n)}function H1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),qv(t,n)}var Gv;Gv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zt.current)Ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ft=!1,N1(t,e,n);Ft=!!(t.flags&131072)}else Ft=!1,Oe&&e.flags&1048576&&Xy(e,_l,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xa(t,e),t=e.pendingProps;var s=Qs(e,At.current);Hs(e,n),s=Th(null,e,r,t,s,n);var i=Sh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ut(r)?(i=!0,yl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_h(e),s.updater=su,e.stateNode=s,s._reactInternals=e,id(e,r,t,n),e=ld(null,e,r,!0,i,n)):(e.tag=0,Oe&&i&&hh(e),Dt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=q1(r),t=yn(r,t),s){case 0:e=ad(null,e,r,t,n);break e;case 1:e=mm(null,e,r,t,n);break e;case 11:e=fm(null,e,r,t,n);break e;case 14:e=pm(null,e,r,yn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),ad(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),mm(t,e,r,s,n);case 3:e:{if(kv(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,rv(t,e),xl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Zs(Error(B(423)),e),e=gm(t,e,r,n,s);break e}else if(r!==s){s=Zs(Error(B(424)),e),e=gm(t,e,r,n,s);break e}else for(Kt=Ir(e.stateNode.containerInfo.firstChild),Qt=e,Oe=!0,_n=null,n=tv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ys(),r===s){e=tr(t,e,n);break e}Dt(t,e,r,n)}e=e.child}return e;case 5:return sv(e),t===null&&nd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Xc(r,s)?o=null:i!==null&&Xc(r,i)&&(e.flags|=32),bv(t,e),Dt(t,e,o,n),e.child;case 6:return t===null&&nd(e),null;case 13:return Nv(t,e,n);case 4:return wh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xs(e,null,r,n):Dt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),fm(t,e,r,s,n);case 7:return Dt(t,e,e.pendingProps,n),e.child;case 8:return Dt(t,e,e.pendingProps.children,n),e.child;case 12:return Dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,be(wl,r._currentValue),r._currentValue=o,i!==null)if(In(i.value,o)){if(i.children===s.children&&!zt.current){e=tr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Qn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),rd(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),rd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Dt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Hs(e,n),s=un(s),r=r(s),e.flags|=1,Dt(t,e,r,n),e.child;case 14:return r=e.type,s=yn(r,e.pendingProps),s=yn(r.type,s),pm(t,e,r,s,n);case 15:return Av(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),Xa(t,e),e.tag=1,Ut(r)?(t=!0,yl(e)):t=!1,Hs(e,n),Tv(e,r,s),id(e,r,s,n),ld(null,e,r,!0,t,n);case 19:return Pv(t,e,n);case 22:return Rv(t,e,n)}throw Error(B(156,e.tag))};function Kv(t,e){return Ey(t,e)}function W1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(t,e,n,r){return new W1(t,e,n,r)}function Oh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function q1(t){if(typeof t=="function")return Oh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eh)return 11;if(t===th)return 14}return 2}function Ar(t,e){var n=t.alternate;return n===null?(n=sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function el(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Oh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case As:return ns(n.children,s,i,e);case Zd:o=8,s|=8;break;case bc:return t=sn(12,n,e,s|2),t.elementType=bc,t.lanes=i,t;case kc:return t=sn(13,n,e,s),t.elementType=kc,t.lanes=i,t;case Nc:return t=sn(19,n,e,s),t.elementType=Nc,t.lanes=i,t;case sy:return au(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ny:o=10;break e;case ry:o=9;break e;case eh:o=11;break e;case th:o=14;break e;case hr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=sn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ns(t,e,n,r){return t=sn(7,t,r,e),t.lanes=n,t}function au(t,e,n,r){return t=sn(22,t,r,e),t.elementType=sy,t.lanes=n,t.stateNode={isHidden:!1},t}function cc(t,e,n){return t=sn(6,t,null,e),t.lanes=n,t}function dc(t,e,n){return e=sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function G1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wu(0),this.expirationTimes=Wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lh(t,e,n,r,s,i,o,l,u){return t=new G1(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=sn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_h(i),t}function K1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Qv(t){if(!t)return Nr;t=t._reactInternals;e:{if(fs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Ut(n))return Qy(t,n,e)}return e}function Yv(t,e,n,r,s,i,o,l,u){return t=Lh(n,r,!0,t,s,i,o,l,u),t.context=Qv(null),n=t.current,r=Ot(),s=Cr(n),i=Qn(r,s),i.callback=e??null,Tr(n,i,s),t.current.lanes=s,Bo(t,s,r),Bt(t,r),t}function lu(t,e,n,r){var s=e.current,i=Ot(),o=Cr(s);return n=Qv(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Tr(s,e,o),t!==null&&(xn(t,s,o,i),Ka(t,s,o)),o}function kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mh(t,e){Cm(t,e),(t=t.alternate)&&Cm(t,e)}function Q1(){return null}var Xv=typeof reportError=="function"?reportError:function(t){console.error(t)};function jh(t){this._internalRoot=t}uu.prototype.render=jh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));lu(t,e,null,null)};uu.prototype.unmount=jh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ls(function(){lu(null,t,null,null)}),e[Zn]=null}};function uu(t){this._internalRoot=t}uu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ry();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mr.length&&e!==0&&e<mr[n].priority;n++);mr.splice(n,0,t),n===0&&ky(t)}};function Fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Am(){}function Y1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=kl(o);i.call(d)}}var o=Yv(e,r,t,0,null,!1,!1,"",Am);return t._reactRootContainer=o,t[Zn]=o.current,vo(t.nodeType===8?t.parentNode:t),ls(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=kl(u);l.call(d)}}var u=Lh(t,0,!1,null,null,!1,!1,"",Am);return t._reactRootContainer=u,t[Zn]=u.current,vo(t.nodeType===8?t.parentNode:t),ls(function(){lu(e,u,n,r)}),u}function du(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=kl(o);l.call(u)}}lu(e,o,t,s)}else o=Y1(n,e,t,s,r);return kl(o)}Cy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bi(e.pendingLanes);n!==0&&(sh(e,n|1),Bt(e,qe()),!(we&6)&&(ei=qe()+500,Fr()))}break;case 13:ls(function(){var r=er(t,1);if(r!==null){var s=Ot();xn(r,t,1,s)}}),Mh(t,1)}};ih=function(t){if(t.tag===13){var e=er(t,134217728);if(e!==null){var n=Ot();xn(e,t,134217728,n)}Mh(t,134217728)}};Ay=function(t){if(t.tag===13){var e=Cr(t),n=er(t,e);if(n!==null){var r=Ot();xn(n,t,e,r)}Mh(t,e)}};Ry=function(){return Se};by=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};Uc=function(t,e,n){switch(e){case"input":if(Vc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=tu(r);if(!s)throw Error(B(90));oy(r),Vc(r,s)}}}break;case"textarea":ly(t,n);break;case"select":e=n.value,e!=null&&zs(t,!!n.multiple,e,!1)}};my=Ph;gy=ls;var X1={usingClientEntryPoint:!1,Events:[Ho,Ns,tu,fy,py,Ph]},ji={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},J1={bundleType:ji.bundleType,version:ji.version,rendererPackageName:ji.rendererPackageName,rendererConfig:ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_y(t),t===null?null:t.stateNode},findFiberByHostInstance:ji.findFiberByHostInstance||Q1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var La=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!La.isDisabled&&La.supportsFiber)try{Xl=La.inject(J1),kn=La}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X1;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fh(e))throw Error(B(200));return K1(t,e,null,n)};Xt.createRoot=function(t,e){if(!Fh(t))throw Error(B(299));var n=!1,r="",s=Xv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lh(t,1,!1,null,null,n,!1,r,s),t[Zn]=e.current,vo(t.nodeType===8?t.parentNode:t),new jh(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=_y(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return ls(t)};Xt.hydrate=function(t,e,n){if(!cu(e))throw Error(B(200));return du(null,t,e,!0,n)};Xt.hydrateRoot=function(t,e,n){if(!Fh(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Xv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Yv(e,null,t,1,n??null,s,!1,i,o),t[Zn]=e.current,vo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new uu(e)};Xt.render=function(t,e,n){if(!cu(e))throw Error(B(200));return du(null,t,e,!1,n)};Xt.unmountComponentAtNode=function(t){if(!cu(t))throw Error(B(40));return t._reactRootContainer?(ls(function(){du(null,null,t,!1,function(){t._reactRootContainer=null,t[Zn]=null})}),!0):!1};Xt.unstable_batchedUpdates=Ph;Xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!cu(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return du(t,e,n,!1,r)};Xt.version="18.3.1-next-f1338f8080-20240426";function Jv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jv)}catch(t){console.error(t)}}Jv(),Jg.exports=Xt;var js=Jg.exports,Rm=js;Ac.createRoot=Rm.createRoot,Ac.hydrateRoot=Rm.hydrateRoot;const xe=()=>Math.random().toString(36).substring(2,9),ue="folder_default",fe="group_default",wd="trip_group_default",hc=[{name:"Amber",class:"bg-amber-50 text-amber-700 border-amber-200"},{name:"Blue",class:"bg-blue-50 text-blue-700 border-blue-200"},{name:"Purple",class:"bg-purple-50 text-purple-700 border-purple-200"},{name:"Emerald",class:"bg-emerald-50 text-emerald-700 border-emerald-200"},{name:"Slate",class:"bg-slate-50 text-slate-700 border-slate-200"},{name:"Red",class:"bg-red-50 text-red-700 border-red-200"},{name:"Orange",class:"bg-orange-50 text-orange-700 border-orange-200"},{name:"Teal",class:"bg-teal-50 text-teal-700 border-teal-200"},{name:"Pink",class:"bg-pink-50 text-pink-700 border-pink-200"},{name:"Indigo",class:"bg-indigo-50 text-indigo-700 border-indigo-200"}],fc=[{id:"cat_tools",name:"/",color:"bg-amber-50 text-amber-700 border-amber-200"},{id:"cat_hardware",name:"/PCBA",color:"bg-blue-50 text-blue-700 border-blue-200"},{id:"cat_cables",name:"/",color:"bg-purple-50 text-purple-700 border-purple-200"},{id:"cat_software",name:"/",color:"bg-emerald-50 text-emerald-700 border-emerald-200"},{id:"cat_docs",name:"/",color:"bg-slate-50 text-slate-700 border-slate-200"}],Z1=[{id:ue,name:" (Business)",isSystem:!0},{id:"folder_travel",name:" (Travel)",isSystem:!1}],ex=[{id:fe,folderId:ue,name:"",isSystem:!0},{id:"group_travel_default",folderId:"folder_travel",name:"",isSystem:!0}],tx=[{id:xe(),folderId:ue,groupId:fe,category:"cat_tools",name:"ST-Link (U2-04)",defaultVersion:""},{id:xe(),folderId:ue,groupId:fe,category:"cat_tools",name:"U-4P-10",defaultVersion:""},{id:xe(),folderId:ue,groupId:fe,category:"cat_tools",name:"3.3v PWR-5",defaultVersion:""},{id:xe(),folderId:ue,groupId:fe,category:"cat_tools",name:"U-TTL-4 (WIFI)",defaultVersion:""},{id:xe(),folderId:ue,groupId:fe,category:"cat_tools",name:"",defaultVersion:""},{id:xe(),folderId:ue,groupId:fe,category:"cat_tools",name:"-2",defaultVersion:""},{id:xe(),folderId:ue,groupId:fe,category:"cat_tools",name:"USB-3p -1",defaultVersion:""},{id:xe(),folderId:ue,groupId:fe,category:"cat_tools",name:"USB-3p -2",defaultVersion:""},{id:xe(),folderId:ue,groupId:fe,category:"cat_tools",name:"",defaultVersion:""},{id:xe(),folderId:ue,groupId:fe,category:"cat_tools",name:"ROS3 (UR8UR10)",defaultVersion:""},{id:xe(),folderId:ue,groupId:fe,category:"cat_hardware",name:"OSG PCBA ++",defaultVersion:"V1.6"},{id:xe(),folderId:ue,groupId:fe,category:"cat_hardware",name:"ROS PVBA +Ozon",defaultVersion:"V1.73"},{id:xe(),folderId:ue,groupId:fe,category:"cat_hardware",name:"ROSV",defaultVersion:"1.7"},{id:xe(),folderId:ue,groupId:fe,category:"cat_hardware",name:"Ozone",defaultVersion:"122"},{id:xe(),folderId:ue,groupId:fe,category:"cat_hardware",name:"ROS",defaultVersion:"9"},{id:xe(),folderId:ue,groupId:fe,category:"cat_hardware",name:"Alpha Sensor",defaultVersion:""},{id:xe(),folderId:ue,groupId:fe,category:"cat_hardware",name:"PCB (/)",defaultVersion:""},{id:xe(),folderId:ue,groupId:fe,category:"cat_cables",name:" (1316)",defaultVersion:""},{id:xe(),folderId:ue,groupId:fe,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C1"},{id:xe(),folderId:ue,groupId:fe,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C2"},{id:xe(),folderId:ue,groupId:fe,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C1"},{id:xe(),folderId:ue,groupId:fe,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C1"},{id:xe(),folderId:ue,groupId:fe,category:"cat_cables",name:"USB PORT Hub",defaultVersion:"*1"},{id:xe(),folderId:ue,groupId:fe,category:"cat_cables",name:"",defaultVersion:""},{id:xe(),folderId:ue,groupId:fe,category:"cat_cables",name:"",defaultVersion:"8"},{id:xe(),folderId:ue,groupId:fe,category:"cat_cables",name:" (CL+S1+)",defaultVersion:"2"},{id:xe(),folderId:ue,groupId:fe,category:"cat_software",name:"S1_DFU",defaultVersion:"0624"},{id:xe(),folderId:ue,groupId:fe,category:"cat_software",name:"S1_AP",defaultVersion:"0804"},{id:xe(),folderId:ue,groupId:fe,category:"cat_software",name:"ROS_DFU",defaultVersion:"0624"},{id:xe(),folderId:ue,groupId:fe,category:"cat_software",name:"ROS_AP",defaultVersion:"0730"},{id:xe(),folderId:ue,groupId:fe,category:"cat_software",name:"OSG_DFU",defaultVersion:"0624"},{id:xe(),folderId:ue,groupId:fe,category:"cat_software",name:"OSG_AP",defaultVersion:"0723"}];/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ae=(t,e)=>{const n=N.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...d},f)=>N.createElement("svg",{ref:f,...nx,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${rx(t)}`,l].join(" "),...d},[...e.map(([p,m])=>N.createElement(p,m)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=Ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=Ae("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=Ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=Ae("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=Ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=Ae("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=Ae("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=Ae("DownloadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=Ae("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=Ae("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=Ae("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=Ae("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=Ae("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=Ae("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=Ae("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=Ae("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=Ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=Ae("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=Ae("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=Ae("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=Ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=Ae("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=Ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=Ae("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=Ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=Ae("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=Ae("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=Ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=Ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Tx=({items:t,setItems:e,folders:n,setFolders:r,groups:s,setGroups:i,categories:o,setCategories:l})=>{var Mn,kt,Sn,jn,Fn;const[u,d]=N.useState(((Mn=n[0])==null?void 0:Mn.id)||ue),[f,p]=N.useState("ALL"),[m,w]=N.useState(""),[b,k]=N.useState("ALL"),[V,S]=N.useState(!1),[E,C]=N.useState(""),[D,L]=N.useState(((kt=o[0])==null?void 0:kt.id)||""),[M,_]=N.useState(""),[y,x]=N.useState(!1),[T,A]=N.useState(""),[R,I]=N.useState(!1),[ee,de]=N.useState(""),[Te,me]=N.useState(!1),[$,K]=N.useState(!1),[q,Y]=N.useState(null),[W,ne]=N.useState(""),[ke,ze]=N.useState(hc[0].class);N.useEffect(()=>{p("ALL")},[u]),N.useEffect(()=>{!D&&o.length>0&&L(o[0].id)},[o,D]);const j=((Sn=n.find(F=>F.id===u))==null?void 0:Sn.name)||"",X=s.filter(F=>F.folderId===u),he=((jn=X.find(F=>F.isSystem))==null?void 0:jn.id)||(X.length>0?X[0].id:fe),Ne=F=>{window.confirm("")&&e(le=>le.filter(oe=>oe.id!==F))},ie=()=>{if(!E.trim())return;const F={id:Math.random().toString(36).substring(2,9),folderId:u,groupId:f==="ALL"?he:f,name:E,category:D,defaultVersion:M};e(le=>[...le,F]),C(""),_(""),S(!1)},Rt=()=>{if(!T.trim())return;const F=Math.random().toString(36).substring(2,9),le={id:F,name:T,isSystem:!1};r(ae=>[...ae,le]);const oe={id:Math.random().toString(36).substring(2,9),folderId:F,name:"",isSystem:!0};i(ae=>[...ae,oe]),A(""),x(!1),d(le.id)},Ge=(F,le)=>{F.stopPropagation(),window.confirm("")&&(e(oe=>oe.map(ae=>ae.folderId===le?{...ae,folderId:ue,groupId:fe}:ae)),i(oe=>oe.filter(ae=>ae.folderId!==le)),r(oe=>oe.filter(ae=>ae.id!==le)),u===le&&d(ue))},Ht=()=>{if(!ee.trim())return;const F={id:Math.random().toString(36).substring(2,9),folderId:u,name:ee,isSystem:!1};i(le=>[...le,F]),de(""),I(!1),p(F.id)},bt=(F,le)=>{F.stopPropagation(),window.confirm("")&&(e(oe=>oe.map(ae=>ae.groupId===le?{...ae,groupId:he}:ae)),i(oe=>oe.filter(ae=>ae.id!==le)),f===le&&p("ALL"))},Zt=()=>{if(!W.trim())return;const F={id:Math.random().toString(36).substring(2,9),name:W,color:ke};l(le=>[...le,F]),ne(""),K(!1)},dn=()=>{!W.trim()||!q||(l(F=>F.map(le=>le.id===q?{...le,name:W,color:ke}:le)),Y(null),ne(""))},ys=F=>{window.confirm("")&&l(le=>le.filter(oe=>oe.id!==F))},or=t.filter(F=>{if(F.folderId!==u||f!=="ALL"&&F.groupId!==f)return!1;const le=F.name.toLowerCase().includes(m.toLowerCase()),oe=b==="ALL"||F.category===b;return le&&oe});return g.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 min-h-[600px]",children:[Te&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg shadow-2xl max-h-[80vh] flex flex-col",children:[g.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[g.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[g.jsx(Nm,{size:20})," "]}),g.jsx("button",{onClick:()=>me(!1),className:"p-1 hover:bg-slate-100 rounded-full",children:g.jsx(Fs,{size:20})})]}),g.jsxs("div",{className:"p-4 overflow-y-auto flex-1 space-y-4",children:[($||q)&&g.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 space-y-3",children:[g.jsx("h4",{className:"text-sm font-bold text-slate-500",children:q?"":""}),g.jsx("div",{className:"flex gap-2",children:g.jsx("input",{autoFocus:!0,className:"flex-1 border border-slate-300 rounded px-2 py-1 text-sm outline-none focus:border-blue-500",placeholder:"",value:W,onChange:F=>ne(F.target.value)})}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:""}),g.jsx("div",{className:"flex flex-wrap gap-2",children:hc.map((F,le)=>g.jsx("button",{onClick:()=>ze(F.class),className:`w-6 h-6 rounded-full border ${F.class.replace("bg-","bg-").replace("text-","text-").split(" ")[0]} ${ke===F.class?"ring-2 ring-offset-1 ring-slate-400":""}`,title:F.name},le))}),g.jsx("div",{className:`mt-2 text-xs px-2 py-1 rounded border w-fit ${ke}`,children:""})]}),g.jsxs("div",{className:"flex gap-2 pt-2",children:[g.jsx("button",{onClick:q?dn:Zt,className:"flex-1 bg-blue-600 text-white py-1 rounded text-sm hover:bg-blue-700",children:q?"":""}),g.jsx("button",{onClick:()=>{K(!1),Y(null),ne("")},className:"flex-1 bg-white border border-slate-300 text-slate-600 py-1 rounded text-sm hover:bg-slate-50",children:""})]})]}),!$&&!q&&g.jsxs("button",{onClick:()=>{K(!0),ne(""),ze(hc[0].class)},className:"w-full py-2 border-2 border-dashed border-slate-200 rounded-lg text-slate-400 text-sm hover:border-blue-300 hover:text-blue-500 hover:bg-blue-50 flex items-center justify-center gap-1",children:[g.jsx(qn,{size:16})," "]}),g.jsx("div",{className:"space-y-2",children:o.map(F=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-100 rounded-lg shadow-sm group",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:`w-4 h-4 rounded-full ${F.color.split(" ")[0].replace("text-","bg-").replace("border-","")} border opacity-50`}),g.jsx("span",{className:`text-sm px-2 py-0.5 rounded border ${F.color}`,children:F.name})]}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:()=>{Y(F.id),ne(F.name),ze(F.color),K(!1)},className:"p-1 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded",children:g.jsx(vx,{size:16})}),g.jsx("button",{onClick:()=>ys(F.id),className:"p-1 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded",children:g.jsx(tl,{size:16})})]})]},F.id))})]})]})}),g.jsx("div",{className:"w-full lg:w-64 flex-shrink-0 space-y-4",children:g.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsxs("h2",{className:"font-bold text-slate-700 flex items-center gap-2",children:[g.jsx(bm,{size:18}),""]}),g.jsx("button",{onClick:()=>x(!0),className:"p-1 hover:bg-slate-100 rounded text-blue-600",title:"",children:g.jsx(cx,{size:18})})]}),y&&g.jsxs("div",{className:"mb-4 bg-blue-50 p-2 rounded-lg border border-blue-100",children:[g.jsx("input",{autoFocus:!0,type:"text",placeholder:"...",value:T,onChange:F=>A(F.target.value),onKeyDown:F=>F.key==="Enter"&&Rt(),className:"w-full text-sm p-1.5 border border-blue-200 rounded mb-2 outline-none"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:Rt,className:"flex-1 bg-blue-600 text-white text-xs py-1 rounded",children:""}),g.jsx("button",{onClick:()=>x(!1),className:"flex-1 bg-white text-slate-500 text-xs py-1 rounded border",children:""})]})]}),g.jsx("div",{className:"space-y-1 max-h-[300px] lg:max-h-none overflow-y-auto",children:n.map(F=>g.jsxs("div",{onClick:()=>d(F.id),className:`group flex items-center justify-between p-2.5 rounded-lg cursor-pointer transition-all border ${u===F.id?"bg-blue-50 border-blue-200 text-blue-700 shadow-sm":"hover:bg-slate-50 border-transparent text-slate-600"}`,children:[g.jsxs("div",{className:"flex items-center gap-2 truncate",children:[g.jsx(bm,{size:16,className:u===F.id?"fill-blue-200":""}),g.jsx("span",{className:"text-sm font-medium truncate",children:F.name})]}),!F.isSystem&&g.jsx("button",{onClick:le=>Ge(le,F.id),className:"opacity-0 group-hover:opacity-100 text-slate-400 hover:text-red-500 transition-opacity p-1",children:g.jsx(tl,{size:14})})]},F.id))})]})}),g.jsxs("div",{className:"flex-1 space-y-4",children:[g.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col gap-4",children:[g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-slate-800",children:j}),g.jsxs("p",{className:"text-slate-500 text-sm",children:[or.length," "]})]}),g.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 bg-slate-800 text-white px-4 py-2 rounded-lg hover:bg-slate-700 transition-colors shadow-md text-sm",children:[g.jsx(qn,{size:16}),g.jsx("span",{children:""})]})]}),g.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx(fx,{size:14,className:"text-slate-400"}),g.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:""})]}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.jsx("button",{onClick:()=>p("ALL"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${f==="ALL"?"bg-slate-100 text-slate-800 border-slate-300":"bg-white text-slate-500 hover:bg-slate-50 border border-slate-200"}`,children:""}),X.map(F=>g.jsxs("div",{className:`group flex items-center gap-1 pl-3 pr-2 py-1.5 rounded-lg border transition-all ${f===F.id?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:border-blue-200"}`,onClick:()=>p(F.id),children:[g.jsx("span",{className:"text-sm font-medium cursor-pointer",children:F.name}),!F.isSystem&&g.jsx("button",{onClick:le=>bt(le,F.id),className:"ml-1 p-0.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(Fs,{size:12})})]},F.id)),R?g.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 p-1 rounded-lg border border-slate-200 animate-in fade-in",children:[g.jsx("input",{autoFocus:!0,className:"w-24 text-sm bg-white px-2 py-0.5 rounded border border-slate-200 outline-none focus:border-blue-300",placeholder:"",value:ee,onChange:F=>de(F.target.value),onKeyDown:F=>F.key==="Enter"&&Ht()}),g.jsx("button",{onClick:Ht,className:"bg-blue-500 text-white p-0.5 rounded hover:bg-blue-600",children:g.jsx(qn,{size:14})}),g.jsx("button",{onClick:()=>I(!1),className:"text-slate-400 hover:text-slate-600 p-0.5",children:g.jsx(Fs,{size:14})})]}):g.jsxs("button",{onClick:()=>I(!0),className:"px-2 py-1.5 rounded-lg border border-dashed border-slate-300 text-slate-400 hover:text-blue-600 hover:border-blue-300 hover:bg-blue-50 transition-all flex items-center gap-1 text-sm",children:[g.jsx(qn,{size:14}),""]})]})]})]}),V&&g.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-6 rounded-xl shadow-inner animate-in fade-in slide-in-from-top-4",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsxs("h3",{className:"font-bold text-blue-900 flex items-center gap-2",children:[g.jsx(qn,{size:18}),"",j,"",f!=="ALL"&&g.jsx("span",{className:"text-blue-600 text-sm bg-white px-2 py-0.5 rounded-full shadow-sm",children:(Fn=X.find(F=>F.id===f))==null?void 0:Fn.name})]}),g.jsx("button",{onClick:()=>S(!1),className:"text-blue-500 hover:text-blue-700",children:g.jsx(Fs,{size:20})})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[g.jsxs("div",{className:"md:col-span-4",children:[g.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:""}),g.jsx("input",{type:"text",value:E,onChange:F=>C(F.target.value),placeholder:": ST-Link",className:"w-full bg-white border border-blue-200 rounded-lg px-3 py-2 text-slate-900 focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{className:"md:col-span-3",children:[g.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:""}),g.jsx("select",{value:D,onChange:F=>L(F.target.value),className:"w-full bg-white border border-blue-200 rounded-lg px-3 py-2 text-slate-900 focus:ring-2 focus:ring-blue-500 outline-none",children:o.map(F=>g.jsx("option",{value:F.id,children:F.name},F.id))})]}),g.jsxs("div",{className:"md:col-span-3",children:[g.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"/"}),g.jsx("input",{type:"text",value:M,onChange:F=>_(F.target.value),placeholder:": V1.6",className:"w-full bg-white border border-blue-200 rounded-lg px-3 py-2 text-slate-900 focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"md:col-span-2 flex items-end",children:g.jsx("button",{onClick:ie,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 font-medium shadow-sm",children:""})})]})]}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[g.jsxs("div",{className:"relative flex-1 w-full",children:[g.jsx(e0,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),g.jsx("input",{type:"text",placeholder:"...",value:m,onChange:F=>w(F.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-lg text-slate-900 focus:ring-2 focus:ring-slate-400 outline-none shadow-sm"})]}),g.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[g.jsxs("select",{value:b,onChange:F=>k(F.target.value),className:"bg-white border border-slate-200 rounded-lg px-4 py-2 text-slate-900 focus:ring-2 focus:ring-slate-400 outline-none shadow-sm cursor-pointer flex-1 md:flex-none",children:[g.jsx("option",{value:"ALL",children:""}),o.map(F=>g.jsx("option",{value:F.id,children:F.name},F.id))]}),g.jsx("button",{onClick:()=>me(!0),className:"px-3 py-2 bg-white border border-slate-200 rounded-lg text-slate-600 hover:bg-slate-50 hover:text-blue-600 transition-colors shadow-sm flex items-center gap-2 whitespace-nowrap",title:"",children:g.jsx(Nm,{size:18})})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[or.map(F=>{var hn;const le=((hn=X.find(zn=>zn.id===F.groupId))==null?void 0:hn.name)||"",oe=o.find(zn=>zn.id===F.category),ae=(oe==null?void 0:oe.color)||"bg-gray-100 text-gray-600 border-gray-200",Wt=(oe==null?void 0:oe.name)||"";return g.jsxs("div",{className:"group bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${ae}`,children:Wt}),g.jsx("span",{className:"text-xs px-2 py-1 rounded-full border border-slate-100 bg-slate-50 text-slate-500",children:le})]}),g.jsx("button",{onClick:()=>Ne(F.id),className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(tl,{size:16})})]}),g.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:F.name}),F.defaultVersion&&g.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[": ",g.jsx("span",{className:"bg-slate-100 px-1 rounded text-slate-700",children:F.defaultVersion})]})]},F.id)}),or.length===0&&g.jsx("div",{className:"col-span-full text-center py-12 text-slate-400 bg-slate-50 rounded-xl border border-dashed border-slate-200",children:m||b!=="ALL"||f!=="ALL"?"":""})]})]})]})};function Sx(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const hu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function mi(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function zh(t){return"nodeType"in t}function $t(t){var e,n;return t?mi(t)?t:zh(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Uh(t){const{Document:e}=$t(t);return t instanceof e}function qo(t){return mi(t)?!1:t instanceof $t(t).HTMLElement}function t0(t){return t instanceof $t(t).SVGElement}function gi(t){return t?mi(t)?t.document:zh(t)?Uh(t)?t:qo(t)||t0(t)?t.ownerDocument:document:document:document}const Vn=hu?N.useLayoutEffect:N.useEffect;function Bh(t){const e=N.useRef(t);return Vn(()=>{e.current=t}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function Cx(){const t=N.useRef(null),e=N.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=N.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Ao(t,e){e===void 0&&(e=[t]);const n=N.useRef(t);return Vn(()=>{n.current!==t&&(n.current=t)},e),n}function Go(t,e){const n=N.useRef();return N.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Nl(t){const e=Bh(t),n=N.useRef(null),r=N.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function xd(t){const e=N.useRef();return N.useEffect(()=>{e.current=t},[t]),e.current}let pc={};function Ko(t,e){return N.useMemo(()=>{if(e)return e;const n=pc[t]==null?0:pc[t]+1;return pc[t]=n,t+"-"+n},[t,e])}function n0(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const l=Object.entries(o);for(const[u,d]of l){const f=i[u];f!=null&&(i[u]=f+t*d)}return i},{...e})}}const qs=n0(1),Ro=n0(-1);function Ax(t){return"clientX"in t&&"clientY"in t}function $h(t){if(!t)return!1;const{KeyboardEvent:e}=$t(t.target);return e&&t instanceof e}function Rx(t){if(!t)return!1;const{TouchEvent:e}=$t(t.target);return e&&t instanceof e}function Id(t){if(Rx(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Ax(t)?{x:t.clientX,y:t.clientY}:null}const bo=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[bo.Translate.toString(t),bo.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Pm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function bx(t){return t.matches(Pm)?t:t.querySelector(Pm)}const kx={display:"none"};function Nx(t){let{id:e,value:n}=t;return Vt.createElement("div",{id:e,style:kx},n)}function Px(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Vt.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Dx(){const[t,e]=N.useState("");return{announce:N.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const r0=N.createContext(null);function Vx(t){const e=N.useContext(r0);N.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Ox(){const[t]=N.useState(()=>new Set),e=N.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[N.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,i)})},[t]),e]}const Lx={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Mx={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function jx(t){let{announcements:e=Mx,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=Lx}=t;const{announce:i,announcement:o}=Dx(),l=Ko("DndLiveRegion"),[u,d]=N.useState(!1);if(N.useEffect(()=>{d(!0)},[]),Vx(N.useMemo(()=>({onDragStart(p){let{active:m}=p;i(e.onDragStart({active:m}))},onDragMove(p){let{active:m,over:w}=p;e.onDragMove&&i(e.onDragMove({active:m,over:w}))},onDragOver(p){let{active:m,over:w}=p;i(e.onDragOver({active:m,over:w}))},onDragEnd(p){let{active:m,over:w}=p;i(e.onDragEnd({active:m,over:w}))},onDragCancel(p){let{active:m,over:w}=p;i(e.onDragCancel({active:m,over:w}))}}),[i,e])),!u)return null;const f=Vt.createElement(Vt.Fragment,null,Vt.createElement(Nx,{id:r,value:s.draggable}),Vt.createElement(Px,{id:l,announcement:o}));return n?js.createPortal(f,n):f}var Je;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Je||(Je={}));function Pl(){}function Dm(t,e){return N.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Fx(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Tn=Object.freeze({x:0,y:0});function s0(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function i0(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function zx(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Vm(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function o0(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Om(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const Ux=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Om(e,e.left,e.top),i=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const d=s0(Om(u),s);i.push({id:l,data:{droppableContainer:o,value:d}})}}return i.sort(i0)},Bx=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Vm(e),i=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const d=Vm(u),f=s.reduce((m,w,b)=>m+s0(d[b],w),0),p=Number((f/4).toFixed(4));i.push({id:l,data:{droppableContainer:o,value:p}})}}return i.sort(i0)};function $x(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,l=i-n;if(r<s&&n<i){const u=e.width*e.height,d=t.width*t.height,f=o*l,p=f/(u+d-f);return Number(p.toFixed(4))}return 0}const Hx=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,l=n.get(o);if(l){const u=$x(l,e);u>0&&s.push({id:o,data:{droppableContainer:i,value:u}})}}return s.sort(zx)};function Wx(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function a0(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Tn}function qx(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const Gx=qx(1);function Kx(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Qx(t,e,n){const r=Kx(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:l}=r,u=t.left-o-(1-s)*parseFloat(n),d=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),f=s?t.width/s:t.width,p=i?t.height/i:t.height;return{width:f,height:p,top:d,right:u+f,bottom:d+p,left:u}}const Yx={ignoreTransform:!1};function yi(t,e){e===void 0&&(e=Yx);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:f}=$t(t).getComputedStyle(t);d&&(n=Qx(n,d,f))}const{top:r,left:s,width:i,height:o,bottom:l,right:u}=n;return{top:r,left:s,width:i,height:o,bottom:l,right:u}}function Lm(t){return yi(t,{ignoreTransform:!0})}function Xx(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Jx(t,e){return e===void 0&&(e=$t(t).getComputedStyle(t)),e.position==="fixed"}function Zx(t,e){e===void 0&&(e=$t(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function fu(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(Uh(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!qo(s)||t0(s)||n.includes(s))return n;const i=$t(t).getComputedStyle(s);return s!==t&&Zx(s,i)&&n.push(s),Jx(s,i)?n:r(s.parentNode)}return t?r(t):n}function l0(t){const[e]=fu(t,1);return e??null}function mc(t){return!hu||!t?null:mi(t)?t:zh(t)?Uh(t)||t===gi(t).scrollingElement?window:qo(t)?t:null:null}function u0(t){return mi(t)?t.scrollX:t.scrollLeft}function c0(t){return mi(t)?t.scrollY:t.scrollTop}function Td(t){return{x:u0(t),y:c0(t)}}var st;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(st||(st={}));function d0(t){return!hu||!t?!1:t===document.scrollingElement}function h0(t){const e={x:0,y:0},n=d0(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const eI={x:.2,y:.2};function tI(t,e,n,r,s){let{top:i,left:o,right:l,bottom:u}=n;r===void 0&&(r=10),s===void 0&&(s=eI);const{isTop:d,isBottom:f,isLeft:p,isRight:m}=h0(t),w={x:0,y:0},b={x:0,y:0},k={height:e.height*s.y,width:e.width*s.x};return!d&&i<=e.top+k.height?(w.y=st.Backward,b.y=r*Math.abs((e.top+k.height-i)/k.height)):!f&&u>=e.bottom-k.height&&(w.y=st.Forward,b.y=r*Math.abs((e.bottom-k.height-u)/k.height)),!m&&l>=e.right-k.width?(w.x=st.Forward,b.x=r*Math.abs((e.right-k.width-l)/k.width)):!p&&o<=e.left+k.width&&(w.x=st.Backward,b.x=r*Math.abs((e.left+k.width-o)/k.width)),{direction:w,speed:b}}function nI(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function f0(t){return t.reduce((e,n)=>qs(e,Td(n)),Tn)}function rI(t){return t.reduce((e,n)=>e+u0(n),0)}function sI(t){return t.reduce((e,n)=>e+c0(n),0)}function iI(t,e){if(e===void 0&&(e=yi),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);l0(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const oI=[["x",["left","right"],rI],["y",["top","bottom"],sI]];class Hh{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=fu(n),s=f0(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of oI)for(const u of o)Object.defineProperty(this,u,{get:()=>{const d=l(r),f=s[i]-d;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class no{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function aI(t){const{EventTarget:e}=$t(t);return t instanceof e?t:gi(t)}function gc(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var en;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(en||(en={}));function Mm(t){t.preventDefault()}function lI(t){t.stopPropagation()}var ge;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ge||(ge={}));const p0={start:[ge.Space,ge.Enter],cancel:[ge.Esc],end:[ge.Space,ge.Enter,ge.Tab]},uI=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case ge.Right:return{...n,x:n.x+25};case ge.Left:return{...n,x:n.x-25};case ge.Down:return{...n,y:n.y+25};case ge.Up:return{...n,y:n.y-25}}};class Wh{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new no(gi(n)),this.windowListeners=new no($t(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(en.Resize,this.handleCancel),this.windowListeners.add(en.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(en.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&iI(r),n(Tn)}handleKeyDown(e){if($h(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=p0,coordinateGetter:o=uI,scrollBehavior:l="smooth"}=s,{code:u}=e;if(i.end.includes(u)){this.handleEnd(e);return}if(i.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:d}=r.current,f=d?{x:d.left,y:d.top}:Tn;this.referenceCoordinates||(this.referenceCoordinates=f);const p=o(e,{active:n,context:r.current,currentCoordinates:f});if(p){const m=Ro(p,f),w={x:0,y:0},{scrollableAncestors:b}=r.current;for(const k of b){const V=e.code,{isTop:S,isRight:E,isLeft:C,isBottom:D,maxScroll:L,minScroll:M}=h0(k),_=nI(k),y={x:Math.min(V===ge.Right?_.right-_.width/2:_.right,Math.max(V===ge.Right?_.left:_.left+_.width/2,p.x)),y:Math.min(V===ge.Down?_.bottom-_.height/2:_.bottom,Math.max(V===ge.Down?_.top:_.top+_.height/2,p.y))},x=V===ge.Right&&!E||V===ge.Left&&!C,T=V===ge.Down&&!D||V===ge.Up&&!S;if(x&&y.x!==p.x){const A=k.scrollLeft+m.x,R=V===ge.Right&&A<=L.x||V===ge.Left&&A>=M.x;if(R&&!m.y){k.scrollTo({left:A,behavior:l});return}R?w.x=k.scrollLeft-A:w.x=V===ge.Right?k.scrollLeft-L.x:k.scrollLeft-M.x,w.x&&k.scrollBy({left:-w.x,behavior:l});break}else if(T&&y.y!==p.y){const A=k.scrollTop+m.y,R=V===ge.Down&&A<=L.y||V===ge.Up&&A>=M.y;if(R&&!m.x){k.scrollTo({top:A,behavior:l});return}R?w.y=k.scrollTop-A:w.y=V===ge.Down?k.scrollTop-L.y:k.scrollTop-M.y,w.y&&k.scrollBy({top:-w.y,behavior:l});break}}this.handleMove(e,qs(Ro(p,this.referenceCoordinates),w))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Wh.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=p0,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function jm(t){return!!(t&&"distance"in t)}function Fm(t){return!!(t&&"delay"in t)}class qh{constructor(e,n,r){var s;r===void 0&&(r=aI(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=gi(o),this.documentListeners=new no(this.document),this.listeners=new no(r),this.windowListeners=new no($t(o)),this.initialCoordinates=(s=Id(i))!=null?s:Tn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(en.Resize,this.handleCancel),this.windowListeners.add(en.DragStart,Mm),this.windowListeners.add(en.VisibilityChange,this.handleCancel),this.windowListeners.add(en.ContextMenu,Mm),this.documentListeners.add(en.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Fm(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(jm(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(en.Click,lI,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(en.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!s)return;const u=(n=Id(e))!=null?n:Tn,d=Ro(s,u);if(!r&&l){if(jm(l)){if(l.tolerance!=null&&gc(d,l.tolerance))return this.handleCancel();if(gc(d,l.distance))return this.handleStart()}if(Fm(l)&&gc(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===ge.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const cI={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Gh extends qh{constructor(e){const{event:n}=e,r=gi(n.target);super(e,cI,r)}}Gh.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const dI={move:{name:"mousemove"},end:{name:"mouseup"}};var Sd;(function(t){t[t.RightClick=2]="RightClick"})(Sd||(Sd={}));class hI extends qh{constructor(e){super(e,dI,gi(e.event.target))}}hI.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Sd.RightClick?!1:(r==null||r({event:n}),!0)}}];const yc={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class fI extends qh{constructor(e){super(e,yc)}static setup(){return window.addEventListener(yc.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(yc.move.name,e)};function e(){}}}fI.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var ro;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(ro||(ro={}));var Dl;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Dl||(Dl={}));function pI(t){let{acceleration:e,activator:n=ro.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:l=Dl.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:f,delta:p,threshold:m}=t;const w=gI({delta:p,disabled:!i}),[b,k]=Cx(),V=N.useRef({x:0,y:0}),S=N.useRef({x:0,y:0}),E=N.useMemo(()=>{switch(n){case ro.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case ro.DraggableRect:return s}},[n,s,u]),C=N.useRef(null),D=N.useCallback(()=>{const M=C.current;if(!M)return;const _=V.current.x*S.current.x,y=V.current.y*S.current.y;M.scrollBy(_,y)},[]),L=N.useMemo(()=>l===Dl.TreeOrder?[...d].reverse():d,[l,d]);N.useEffect(()=>{if(!i||!d.length||!E){k();return}for(const M of L){if((r==null?void 0:r(M))===!1)continue;const _=d.indexOf(M),y=f[_];if(!y)continue;const{direction:x,speed:T}=tI(M,y,E,e,m);for(const A of["x","y"])w[A][x[A]]||(T[A]=0,x[A]=0);if(T.x>0||T.y>0){k(),C.current=M,b(D,o),V.current=T,S.current=x;return}}V.current={x:0,y:0},S.current={x:0,y:0},k()},[e,D,r,k,i,o,JSON.stringify(E),JSON.stringify(w),b,d,L,f,JSON.stringify(m)])}const mI={x:{[st.Backward]:!1,[st.Forward]:!1},y:{[st.Backward]:!1,[st.Forward]:!1}};function gI(t){let{delta:e,disabled:n}=t;const r=xd(e);return Go(s=>{if(n||!r||!s)return mI;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[st.Backward]:s.x[st.Backward]||i.x===-1,[st.Forward]:s.x[st.Forward]||i.x===1},y:{[st.Backward]:s.y[st.Backward]||i.y===-1,[st.Forward]:s.y[st.Forward]||i.y===1}}},[n,e,r])}function yI(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Go(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function vI(t,e){return N.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var ko;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ko||(ko={}));var Cd;(function(t){t.Optimized="optimized"})(Cd||(Cd={}));const zm=new Map;function _I(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=N.useState(null),{frequency:l,measure:u,strategy:d}=s,f=N.useRef(t),p=V(),m=Ao(p),w=N.useCallback(function(S){S===void 0&&(S=[]),!m.current&&o(E=>E===null?S:E.concat(S.filter(C=>!E.includes(C))))},[m]),b=N.useRef(null),k=Go(S=>{if(p&&!n)return zm;if(!S||S===zm||f.current!==t||i!=null){const E=new Map;for(let C of t){if(!C)continue;if(i&&i.length>0&&!i.includes(C.id)&&C.rect.current){E.set(C.id,C.rect.current);continue}const D=C.node.current,L=D?new Hh(u(D),D):null;C.rect.current=L,L&&E.set(C.id,L)}return E}return S},[t,i,n,p,u]);return N.useEffect(()=>{f.current=t},[t]),N.useEffect(()=>{p||w()},[n,p]),N.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),N.useEffect(()=>{p||typeof l!="number"||b.current!==null||(b.current=setTimeout(()=>{w(),b.current=null},l))},[l,p,w,...r]),{droppableRects:k,measureDroppableContainers:w,measuringScheduled:i!=null};function V(){switch(d){case ko.Always:return!1;case ko.BeforeDragging:return n;default:return!n}}}function m0(t,e){return Go(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function wI(t,e){return m0(t,e)}function EI(t){let{callback:e,disabled:n}=t;const r=Bh(e),s=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return N.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function pu(t){let{callback:e,disabled:n}=t;const r=Bh(e),s=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return N.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function xI(t){return new Hh(yi(t),t)}function Um(t,e,n){e===void 0&&(e=xI);const[r,s]=N.useState(null);function i(){s(u=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=u??n)!=null?d:null}const f=e(t);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const o=EI({callback(u){if(t)for(const d of u){const{type:f,target:p}=d;if(f==="childList"&&p instanceof HTMLElement&&p.contains(t)){i();break}}}}),l=pu({callback:i});return Vn(()=>{i(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),r}function II(t){const e=m0(t);return a0(t,e)}const Bm=[];function TI(t){const e=N.useRef(t),n=Go(r=>t?r&&r!==Bm&&t&&e.current&&t.parentNode===e.current.parentNode?r:fu(t):Bm,[t]);return N.useEffect(()=>{e.current=t},[t]),n}function SI(t){const[e,n]=N.useState(null),r=N.useRef(t),s=N.useCallback(i=>{const o=mc(i.target);o&&n(l=>l?(l.set(o,Td(o)),new Map(l)):null)},[]);return N.useEffect(()=>{const i=r.current;if(t!==i){o(i);const l=t.map(u=>{const d=mc(u);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,Td(d)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(u=>{const d=mc(u);d==null||d.removeEventListener("scroll",s)})}},[s,t]),N.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>qs(i,o),Tn):f0(t):Tn,[t,e])}function $m(t,e){e===void 0&&(e=[]);const n=N.useRef(null);return N.useEffect(()=>{n.current=null},e),N.useEffect(()=>{const r=t!==Tn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Ro(t,n.current):Tn}function CI(t){N.useEffect(()=>{if(!hu)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function AI(t,e){return N.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function g0(t){return N.useMemo(()=>t?Xx(t):null,[t])}const Hm=[];function RI(t,e){e===void 0&&(e=yi);const[n]=t,r=g0(n?$t(n):null),[s,i]=N.useState(Hm);function o(){i(()=>t.length?t.map(u=>d0(u)?r:new Hh(e(u),u)):Hm)}const l=pu({callback:o});return Vn(()=>{l==null||l.disconnect(),o(),t.forEach(u=>l==null?void 0:l.observe(u))},[t]),s}function bI(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return qo(e)?e:t}function kI(t){let{measure:e}=t;const[n,r]=N.useState(null),s=N.useCallback(d=>{for(const{target:f}of d)if(qo(f)){r(p=>{const m=e(f);return p?{...p,width:m.width,height:m.height}:m});break}},[e]),i=pu({callback:s}),o=N.useCallback(d=>{const f=bI(d);i==null||i.disconnect(),f&&(i==null||i.observe(f)),r(f?e(f):null)},[e,i]),[l,u]=Nl(o);return N.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const NI=[{sensor:Gh,options:{}},{sensor:Wh,options:{}}],PI={current:{}},nl={draggable:{measure:Lm},droppable:{measure:Lm,strategy:ko.WhileDragging,frequency:Cd.Optimized},dragOverlay:{measure:yi}};class so extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const DI={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new so,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Pl},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:nl,measureDroppableContainers:Pl,windowRect:null,measuringScheduled:!1},VI={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Pl,draggableNodes:new Map,over:null,measureDroppableContainers:Pl},mu=N.createContext(VI),y0=N.createContext(DI);function OI(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new so}}}function LI(t,e){switch(e.type){case Je.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Je.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Je.DragEnd:case Je.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Je.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new so(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Je.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new so(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case Je.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new so(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function MI(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=N.useContext(mu),i=xd(r),o=xd(n==null?void 0:n.id);return N.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!$h(i)||document.activeElement===i.target)return;const l=s.get(o);if(!l)return;const{activatorNode:u,node:d}=l;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const f of[u.current,d.current]){if(!f)continue;const p=bx(f);if(p){p.focus();break}}})}},[r,e,s,o,i]),null}function jI(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function FI(t){return N.useMemo(()=>({draggable:{...nl.draggable,...t==null?void 0:t.draggable},droppable:{...nl.droppable,...t==null?void 0:t.droppable},dragOverlay:{...nl.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function zI(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=N.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Vn(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!r)return;const d=e==null?void 0:e.node.current;if(!d||d.isConnected===!1)return;const f=n(d),p=a0(f,r);if(o||(p.x=0),l||(p.y=0),i.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const m=l0(d);m&&m.scrollBy({top:p.y,left:p.x})}},[e,o,l,r,n])}const v0=N.createContext({...Tn,scaleX:1,scaleY:1});var pr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(pr||(pr={}));const UI=N.memo(function(e){var n,r,s,i;let{id:o,accessibility:l,autoScroll:u=!0,children:d,sensors:f=NI,collisionDetection:p=Hx,measuring:m,modifiers:w,...b}=e;const k=N.useReducer(LI,void 0,OI),[V,S]=k,[E,C]=Ox(),[D,L]=N.useState(pr.Uninitialized),M=D===pr.Initialized,{draggable:{active:_,nodes:y,translate:x},droppable:{containers:T}}=V,A=_!=null?y.get(_):null,R=N.useRef({initial:null,translated:null}),I=N.useMemo(()=>{var Ke;return _!=null?{id:_,data:(Ke=A==null?void 0:A.data)!=null?Ke:PI,rect:R}:null},[_,A]),ee=N.useRef(null),[de,Te]=N.useState(null),[me,$]=N.useState(null),K=Ao(b,Object.values(b)),q=Ko("DndDescribedBy",o),Y=N.useMemo(()=>T.getEnabled(),[T]),W=FI(m),{droppableRects:ne,measureDroppableContainers:ke,measuringScheduled:ze}=_I(Y,{dragging:M,dependencies:[x.x,x.y],config:W.droppable}),j=yI(y,_),X=N.useMemo(()=>me?Id(me):null,[me]),he=Ur(),Ne=wI(j,W.draggable.measure);zI({activeNode:_!=null?y.get(_):null,config:he.layoutShiftCompensation,initialRect:Ne,measure:W.draggable.measure});const ie=Um(j,W.draggable.measure,Ne),Rt=Um(j?j.parentElement:null),Ge=N.useRef({activatorEvent:null,active:null,activeNode:j,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:y,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ht=T.getNodeFor((n=Ge.current.over)==null?void 0:n.id),bt=kI({measure:W.dragOverlay.measure}),Zt=(r=bt.nodeRef.current)!=null?r:j,dn=M?(s=bt.rect)!=null?s:ie:null,ys=!!(bt.nodeRef.current&&bt.rect),or=II(ys?null:ie),Mn=g0(Zt?$t(Zt):null),kt=TI(M?Ht??j:null),Sn=RI(kt),jn=jI(w,{transform:{x:x.x-or.x,y:x.y-or.y,scaleX:1,scaleY:1},activatorEvent:me,active:I,activeNodeRect:ie,containerNodeRect:Rt,draggingNodeRect:dn,over:Ge.current.over,overlayNodeRect:bt.rect,scrollableAncestors:kt,scrollableAncestorRects:Sn,windowRect:Mn}),Fn=X?qs(X,x):null,F=SI(kt),le=$m(F),oe=$m(F,[ie]),ae=qs(jn,le),Wt=dn?Gx(dn,jn):null,hn=I&&Wt?p({active:I,collisionRect:Wt,droppableRects:ne,droppableContainers:Y,pointerCoordinates:Fn}):null,zn=o0(hn,"id"),[Cn,ar]=N.useState(null),ta=ys?jn:qs(jn,oe),na=Wx(ta,(i=Cn==null?void 0:Cn.rect)!=null?i:null,ie),zr=N.useRef(null),ra=N.useCallback((Ke,ot)=>{let{sensor:He,options:fn}=ot;if(ee.current==null)return;const at=y.get(ee.current);if(!at)return;const gt=Ke.nativeEvent,yt=new He({active:ee.current,activeNode:at,event:gt,options:fn,context:Ge,onAbort(_e){if(!y.get(_e))return;const{onDragAbort:vt}=K.current,Nt={id:_e};vt==null||vt(Nt),E({type:"onDragAbort",event:Nt})},onPending(_e,pn,vt,Nt){if(!y.get(_e))return;const{onDragPending:$r}=K.current,Pt={id:_e,constraint:pn,initialCoordinates:vt,offset:Nt};$r==null||$r(Pt),E({type:"onDragPending",event:Pt})},onStart(_e){const pn=ee.current;if(pn==null)return;const vt=y.get(pn);if(!vt)return;const{onDragStart:Nt}=K.current,Br={activatorEvent:gt,active:{id:pn,data:vt.data,rect:R}};js.unstable_batchedUpdates(()=>{Nt==null||Nt(Br),L(pr.Initializing),S({type:Je.DragStart,initialCoordinates:_e,active:pn}),E({type:"onDragStart",event:Br}),Te(zr.current),$(gt)})},onMove(_e){S({type:Je.DragMove,coordinates:_e})},onEnd:Un(Je.DragEnd),onCancel:Un(Je.DragCancel)});zr.current=yt;function Un(_e){return async function(){const{active:vt,collisions:Nt,over:Br,scrollAdjustedTranslate:$r}=Ge.current;let Pt=null;if(vt&&$r){const{cancelDrop:Hr}=K.current;Pt={activatorEvent:gt,active:vt,collisions:Nt,delta:$r,over:Br},_e===Je.DragEnd&&typeof Hr=="function"&&await Promise.resolve(Hr(Pt))&&(_e=Je.DragCancel)}ee.current=null,js.unstable_batchedUpdates(()=>{S({type:_e}),L(pr.Uninitialized),ar(null),Te(null),$(null),zr.current=null;const Hr=_e===Je.DragEnd?"onDragEnd":"onDragCancel";if(Pt){const xi=K.current[Hr];xi==null||xi(Pt),E({type:Hr,event:Pt})}})}}},[y]),Au=N.useCallback((Ke,ot)=>(He,fn)=>{const at=He.nativeEvent,gt=y.get(fn);if(ee.current!==null||!gt||at.dndKit||at.defaultPrevented)return;const yt={active:gt};Ke(He,ot.options,yt)===!0&&(at.dndKit={capturedBy:ot.sensor},ee.current=fn,ra(He,ot))},[y,ra]),vs=vI(f,Au);CI(f),Vn(()=>{ie&&D===pr.Initializing&&L(pr.Initialized)},[ie,D]),N.useEffect(()=>{const{onDragMove:Ke}=K.current,{active:ot,activatorEvent:He,collisions:fn,over:at}=Ge.current;if(!ot||!He)return;const gt={active:ot,activatorEvent:He,collisions:fn,delta:{x:ae.x,y:ae.y},over:at};js.unstable_batchedUpdates(()=>{Ke==null||Ke(gt),E({type:"onDragMove",event:gt})})},[ae.x,ae.y]),N.useEffect(()=>{const{active:Ke,activatorEvent:ot,collisions:He,droppableContainers:fn,scrollAdjustedTranslate:at}=Ge.current;if(!Ke||ee.current==null||!ot||!at)return;const{onDragOver:gt}=K.current,yt=fn.get(zn),Un=yt&&yt.rect.current?{id:yt.id,rect:yt.rect.current,data:yt.data,disabled:yt.disabled}:null,_e={active:Ke,activatorEvent:ot,collisions:He,delta:{x:at.x,y:at.y},over:Un};js.unstable_batchedUpdates(()=>{ar(Un),gt==null||gt(_e),E({type:"onDragOver",event:_e})})},[zn]),Vn(()=>{Ge.current={activatorEvent:me,active:I,activeNode:j,collisionRect:Wt,collisions:hn,droppableRects:ne,draggableNodes:y,draggingNode:Zt,draggingNodeRect:dn,droppableContainers:T,over:Cn,scrollableAncestors:kt,scrollAdjustedTranslate:ae},R.current={initial:dn,translated:Wt}},[I,j,hn,Wt,y,Zt,dn,ne,T,Cn,kt,ae]),pI({...he,delta:x,draggingRect:Wt,pointerCoordinates:Fn,scrollableAncestors:kt,scrollableAncestorRects:Sn});const sa=N.useMemo(()=>({active:I,activeNode:j,activeNodeRect:ie,activatorEvent:me,collisions:hn,containerNodeRect:Rt,dragOverlay:bt,draggableNodes:y,droppableContainers:T,droppableRects:ne,over:Cn,measureDroppableContainers:ke,scrollableAncestors:kt,scrollableAncestorRects:Sn,measuringConfiguration:W,measuringScheduled:ze,windowRect:Mn}),[I,j,ie,me,hn,Rt,bt,y,T,ne,Cn,ke,kt,Sn,W,ze,Mn]),ia=N.useMemo(()=>({activatorEvent:me,activators:vs,active:I,activeNodeRect:ie,ariaDescribedById:{draggable:q},dispatch:S,draggableNodes:y,over:Cn,measureDroppableContainers:ke}),[me,vs,I,ie,S,q,y,Cn,ke]);return Vt.createElement(r0.Provider,{value:C},Vt.createElement(mu.Provider,{value:ia},Vt.createElement(y0.Provider,{value:sa},Vt.createElement(v0.Provider,{value:na},d)),Vt.createElement(MI,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Vt.createElement(jx,{...l,hiddenTextDescribedById:q}));function Ur(){const Ke=(de==null?void 0:de.autoScrollEnabled)===!1,ot=typeof u=="object"?u.enabled===!1:u===!1,He=M&&!Ke&&!ot;return typeof u=="object"?{...u,enabled:He}:{enabled:He}}}),BI=N.createContext(null),Wm="button",$I="Draggable";function HI(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Ko($I),{activators:o,activatorEvent:l,active:u,activeNodeRect:d,ariaDescribedById:f,draggableNodes:p,over:m}=N.useContext(mu),{role:w=Wm,roleDescription:b="draggable",tabIndex:k=0}=s??{},V=(u==null?void 0:u.id)===e,S=N.useContext(V?v0:BI),[E,C]=Nl(),[D,L]=Nl(),M=AI(o,e),_=Ao(n);Vn(()=>(p.set(e,{id:e,key:i,node:E,activatorNode:D,data:_}),()=>{const x=p.get(e);x&&x.key===i&&p.delete(e)}),[p,e]);const y=N.useMemo(()=>({role:w,tabIndex:k,"aria-disabled":r,"aria-pressed":V&&w===Wm?!0:void 0,"aria-roledescription":b,"aria-describedby":f.draggable}),[r,w,k,V,b,f.draggable]);return{active:u,activatorEvent:l,activeNodeRect:d,attributes:y,isDragging:V,listeners:r?void 0:M,node:E,over:m,setNodeRef:C,setActivatorNodeRef:L,transform:S}}function WI(){return N.useContext(y0)}const qI="Droppable",GI={timeout:25};function KI(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Ko(qI),{active:o,dispatch:l,over:u,measureDroppableContainers:d}=N.useContext(mu),f=N.useRef({disabled:n}),p=N.useRef(!1),m=N.useRef(null),w=N.useRef(null),{disabled:b,updateMeasurementsFor:k,timeout:V}={...GI,...s},S=Ao(k??r),E=N.useCallback(()=>{if(!p.current){p.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{d(Array.isArray(S.current)?S.current:[S.current]),w.current=null},V)},[V]),C=pu({callback:E,disabled:b||!o}),D=N.useCallback((y,x)=>{C&&(x&&(C.unobserve(x),p.current=!1),y&&C.observe(y))},[C]),[L,M]=Nl(D),_=Ao(e);return N.useEffect(()=>{!C||!L.current||(C.disconnect(),p.current=!1,C.observe(L.current))},[L,C]),N.useEffect(()=>(l({type:Je.RegisterDroppable,element:{id:r,key:i,disabled:n,node:L,rect:m,data:_}}),()=>l({type:Je.UnregisterDroppable,key:i,id:r})),[r]),N.useEffect(()=>{n!==f.current.disabled&&(l({type:Je.SetDroppableDisabled,id:r,key:i,disabled:n}),f.current.disabled=n)},[r,i,n,l]),{active:o,rect:m,isOver:(u==null?void 0:u.id)===r,node:L,over:u,setNodeRef:M}}function Kh(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function QI(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Ma(t){return t!==null&&t>=0}function YI(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function XI(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const _0=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=Kh(e,r,n),o=e[s],l=i[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},ja={scaleX:1,scaleY:1},JI=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const d=i[o];return d?{x:0,y:n<o?d.top+d.height-(l.top+l.height):d.top-l.top,...ja}:null}const u=ZI(i,s,n);return s>n&&s<=o?{x:0,y:-l.height-u,...ja}:s<n&&s>=o?{x:0,y:l.height+u,...ja}:{x:0,y:0,...ja}};function ZI(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const w0="Sortable",E0=Vt.createContext({activeIndex:-1,containerId:w0,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:_0,disabled:{draggable:!1,droppable:!1}});function eT(t){let{children:e,id:n,items:r,strategy:s=_0,disabled:i=!1}=t;const{active:o,dragOverlay:l,droppableRects:u,over:d,measureDroppableContainers:f}=WI(),p=Ko(w0,n),m=l.rect!==null,w=N.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),b=o!=null,k=o?w.indexOf(o.id):-1,V=d?w.indexOf(d.id):-1,S=N.useRef(w),E=!YI(w,S.current),C=V!==-1&&k===-1||E,D=XI(i);Vn(()=>{E&&b&&f(w)},[E,w,b,f]),N.useEffect(()=>{S.current=w},[w]);const L=N.useMemo(()=>({activeIndex:k,containerId:p,disabled:D,disableTransforms:C,items:w,overIndex:V,useDragOverlay:m,sortedRects:QI(w,u),strategy:s}),[k,p,D.draggable,D.droppable,C,w,V,u,m,s]);return Vt.createElement(E0.Provider,{value:L},e)}const tT=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return Kh(n,r,s).indexOf(e)},nT=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:l,previousContainerId:u,transition:d}=t;return!d||!r||l!==i&&s===o?!1:n?!0:o!==s&&e===u},rT={duration:200,easing:"ease"},x0="transform",sT=bo.Transition.toString({property:x0,duration:0,easing:"linear"}),iT={roleDescription:"sortable"};function oT(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=N.useState(null),l=N.useRef(n);return Vn(()=>{if(!e&&n!==l.current&&r.current){const u=s.current;if(u){const d=yi(r.current,{ignoreTransform:!0}),f={x:u.left-d.left,y:u.top-d.top,scaleX:u.width/d.width,scaleY:u.height/d.height};(f.x||f.y)&&o(f)}}n!==l.current&&(l.current=n)},[e,n,r,s]),N.useEffect(()=>{i&&o(null)},[i]),i}function aT(t){let{animateLayoutChanges:e=nT,attributes:n,disabled:r,data:s,getNewIndex:i=tT,id:o,strategy:l,resizeObserverConfig:u,transition:d=rT}=t;const{items:f,containerId:p,activeIndex:m,disabled:w,disableTransforms:b,sortedRects:k,overIndex:V,useDragOverlay:S,strategy:E}=N.useContext(E0),C=lT(r,w),D=f.indexOf(o),L=N.useMemo(()=>({sortable:{containerId:p,index:D,items:f},...s}),[p,s,D,f]),M=N.useMemo(()=>f.slice(f.indexOf(o)),[f,o]),{rect:_,node:y,isOver:x,setNodeRef:T}=KI({id:o,data:L,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...u}}),{active:A,activatorEvent:R,activeNodeRect:I,attributes:ee,setNodeRef:de,listeners:Te,isDragging:me,over:$,setActivatorNodeRef:K,transform:q}=HI({id:o,data:L,attributes:{...iT,...n},disabled:C.draggable}),Y=Sx(T,de),W=!!A,ne=W&&!b&&Ma(m)&&Ma(V),ke=!S&&me,ze=ke&&ne?q:null,X=ne?ze??(l??E)({rects:k,activeNodeRect:I,activeIndex:m,overIndex:V,index:D}):null,he=Ma(m)&&Ma(V)?i({id:o,items:f,activeIndex:m,overIndex:V}):D,Ne=A==null?void 0:A.id,ie=N.useRef({activeId:Ne,items:f,newIndex:he,containerId:p}),Rt=f!==ie.current.items,Ge=e({active:A,containerId:p,isDragging:me,isSorting:W,id:o,index:D,items:f,newIndex:ie.current.newIndex,previousItems:ie.current.items,previousContainerId:ie.current.containerId,transition:d,wasDragging:ie.current.activeId!=null}),Ht=oT({disabled:!Ge,index:D,node:y,rect:_});return N.useEffect(()=>{W&&ie.current.newIndex!==he&&(ie.current.newIndex=he),p!==ie.current.containerId&&(ie.current.containerId=p),f!==ie.current.items&&(ie.current.items=f)},[W,he,p,f]),N.useEffect(()=>{if(Ne===ie.current.activeId)return;if(Ne&&!ie.current.activeId){ie.current.activeId=Ne;return}const Zt=setTimeout(()=>{ie.current.activeId=Ne},50);return()=>clearTimeout(Zt)},[Ne]),{active:A,activeIndex:m,attributes:ee,data:L,rect:_,index:D,newIndex:he,items:f,isOver:x,isSorting:W,isDragging:me,listeners:Te,node:y,overIndex:V,over:$,setNodeRef:Y,setActivatorNodeRef:K,setDroppableNodeRef:T,setDraggableNodeRef:de,transform:Ht??X,transition:bt()};function bt(){if(Ht||Rt&&ie.current.newIndex===D)return sT;if(!(ke&&!$h(R)||!d)&&(W||Ge))return bo.Transition.toString({...d,property:x0})}}function lT(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Vl(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const uT=[ge.Down,ge.Right,ge.Up,ge.Left],cT=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:i,over:o,scrollableAncestors:l}}=e;if(uT.includes(t.code)){if(t.preventDefault(),!n||!r)return;const u=[];i.getEnabled().forEach(p=>{if(!p||p!=null&&p.disabled)return;const m=s.get(p.id);if(m)switch(t.code){case ge.Down:r.top<m.top&&u.push(p);break;case ge.Up:r.top>m.top&&u.push(p);break;case ge.Left:r.left>m.left&&u.push(p);break;case ge.Right:r.left<m.left&&u.push(p);break}});const d=Bx({collisionRect:r,droppableRects:s,droppableContainers:u});let f=o0(d,"id");if(f===(o==null?void 0:o.id)&&d.length>1&&(f=d[1].id),f!=null){const p=i.get(n.id),m=i.get(f),w=m?s.get(m.id):null,b=m==null?void 0:m.node.current;if(b&&w&&p&&m){const V=fu(b).some((M,_)=>l[_]!==M),S=I0(p,m),E=dT(p,m),C=V||!S?{x:0,y:0}:{x:E?r.width-w.width:0,y:E?r.height-w.height:0},D={x:w.left,y:w.top};return C.x&&C.y?D:Ro(D,C)}}}};function I0(t,e){return!Vl(t)||!Vl(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function dT(t,e){return!Vl(t)||!Vl(e)||!I0(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const hT=({item:t,info:e,updateItem:n,handleRemoveItem:r})=>{const{attributes:s,listeners:i,setNodeRef:o,transform:l,transition:u,isDragging:d}=aT({id:t.id}),f={transform:bo.Transform.toString(l),transition:u,zIndex:d?50:"auto",opacity:d?.5:1,touchAction:"none"};return g.jsxs("div",{ref:o,style:f,className:"flex gap-3 items-start bg-white p-3 rounded-lg border border-slate-200 shadow-sm",children:[g.jsx("div",{...s,...i,className:"mt-1 text-slate-300 cursor-grab active:cursor-grabbing hover:text-slate-500 p-1",children:g.jsx(dx,{size:20})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${e.color} whitespace-nowrap`,children:e.name}),g.jsx("span",{className:"font-bold text-slate-800 truncate",children:t.name})]}),g.jsx("div",{className:"flex gap-2",children:g.jsx("div",{className:"flex-1",children:g.jsx("textarea",{value:t.version,onChange:p=>n(t.id,"version",p.target.value),placeholder:" ()...",rows:2,className:"w-full bg-slate-50 border border-slate-200 rounded px-2 py-1 text-sm text-slate-900 focus:ring-1 focus:ring-blue-500 outline-none resize-none"})})})]}),g.jsxs("div",{className:"flex flex-col items-end gap-2",children:[g.jsxs("div",{className:"flex items-center border border-slate-200 rounded-lg overflow-hidden bg-slate-50",children:[g.jsx("input",{type:"number",min:"1",value:t.qty,onChange:p=>n(t.id,"qty",parseInt(p.target.value)||1),className:"w-12 text-center bg-white border-x border-slate-200 py-1 text-slate-900 font-bold outline-none"}),g.jsx("span",{className:"text-xs text-slate-400 px-1",children:"Qty"})]}),g.jsx("button",{onClick:()=>r(t.id),className:"text-slate-300 hover:text-red-500 p-1",children:g.jsx(tl,{size:16})})]})]})},fT=({inventory:t,folders:e,groups:n,categories:r,currentTrip:s,onSave:i,onCancel:o})=>{var ze;const[l,u]=N.useState((s==null?void 0:s.name)||` ${new Date().toLocaleDateString()}`),[d,f]=N.useState((s==null?void 0:s.date)||new Date().toISOString().split("T")[0]),[p,m]=N.useState((s==null?void 0:s.items)||[]),[w,b]=N.useState((s==null?void 0:s.groups)||[{id:wd,name:""}]),[k,V]=N.useState(w[0].id),[S,E]=N.useState(""),[C,D]=N.useState(!1),[L,M]=N.useState(""),[_,y]=N.useState("ALL"),[x,T]=N.useState("ALL"),[A,R]=N.useState("ALL"),I=Fx(Dm(Gh,{activationConstraint:{distance:8}}),Dm(Wh,{coordinateGetter:cT})),ee=j=>{const{active:X,over:he}=j;X.id!==(he==null?void 0:he.id)&&m(Ne=>{const ie=Ne.findIndex(Ge=>Ge.id===X.id),Rt=Ne.findIndex(Ge=>Ge.id===(he==null?void 0:he.id));return Kh(Ne,ie,Rt)})},de=j=>{const X={id:Math.random().toString(36).substring(2,9),inventoryId:j.id,tripGroupId:k,name:j.name,category:j.category,qty:1,version:j.defaultVersion||"",checked:!1};m(he=>[...he,X])},Te=j=>{m(X=>X.filter(he=>he.id!==j))},me=(j,X,he)=>{m(Ne=>Ne.map(ie=>ie.id===j?{...ie,[X]:he}:ie))},$=()=>{if(!S.trim())return;const j=Math.random().toString(36).substring(2,9),X={id:j,name:S};b(he=>[...he,X]),V(j),E(""),D(!1)},K=(j,X)=>{if(j.stopPropagation(),w.length<=1){alert("");return}window.confirm("")&&(b(he=>he.filter(Ne=>Ne.id!==X)),m(he=>he.filter(Ne=>Ne.tripGroupId!==X)),k===X&&V(w[0].id))},q=()=>{if(!l.trim()){alert("");return}if(p.length===0&&!window.confirm(""))return;const j={id:(s==null?void 0:s.id)||Math.random().toString(36).substring(2,9),userId:(s==null?void 0:s.userId)||"unknown",name:l,date:d,status:(s==null?void 0:s.status)||"planning",groups:w,items:p};i(j)},Y=t.filter(j=>{const X=j.name.toLowerCase().includes(L.toLowerCase()),he=_==="ALL"||j.category===_,Ne=x==="ALL"||j.folderId===x,ie=A==="ALL"||j.groupId===A;return X&&he&&Ne&&ie}),W=x==="ALL"?n:n.filter(j=>j.folderId===x),ne=p.filter(j=>j.tripGroupId===k),ke=j=>{const X=r.find(he=>he.id===j);return{name:(X==null?void 0:X.name)||"",color:(X==null?void 0:X.color)||"bg-gray-100 text-gray-600 border-gray-200"}};return g.jsxs("div",{className:"h-[calc(100vh-100px)] flex flex-col gap-4",children:[g.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col md:flex-row justify-between items-start md:items-center gap-4 shrink-0",children:[g.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[g.jsx("button",{onClick:o,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500",children:g.jsx(Zv,{size:24})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("label",{className:"block text-xs text-slate-400 font-bold uppercase tracking-wider",children:""}),g.jsx("input",{type:"text",value:l,onChange:j=>u(j.target.value),className:"text-xl font-bold text-slate-900 bg-transparent border-b border-transparent hover:border-slate-300 focus:border-blue-500 focus:outline-none w-full"})]})]}),g.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[g.jsx("input",{type:"date",value:d,onChange:j=>f(j.target.value),className:"bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-slate-700 focus:ring-2 focus:ring-blue-500"}),g.jsxs("button",{onClick:q,className:"flex items-center gap-2 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 shadow-md transition-transform active:scale-95",children:[g.jsx(wx,{size:18}),g.jsx("span",{children:""})]})]})]}),g.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-4 overflow-hidden",children:[g.jsxs("div",{className:"flex-1 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col overflow-hidden",children:[g.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50 space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ed,{className:"text-slate-500",size:20}),g.jsx("h3",{className:"font-bold text-slate-700",children:""})]}),g.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded-full",children:["  ",(ze=w.find(j=>j.id===k))==null?void 0:ze.name]})]}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[g.jsxs("div",{className:"relative flex-1",children:[g.jsx(e0,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),g.jsx("input",{type:"text",placeholder:"...",value:L,onChange:j=>M(j.target.value),className:"w-full pl-9 pr-3 py-1.5 bg-white border border-slate-200 rounded text-sm text-slate-900 focus:ring-1 focus:ring-blue-500 outline-none"})]}),g.jsxs("select",{value:x,onChange:j=>{T(j.target.value),R("ALL")},className:"bg-white border border-slate-200 rounded px-2 py-1 text-sm text-slate-700 focus:ring-1 focus:ring-blue-500 outline-none",children:[g.jsx("option",{value:"ALL",children:" "}),e.map(j=>g.jsx("option",{value:j.id,children:j.name},j.id))]}),g.jsxs("select",{value:A,onChange:j=>R(j.target.value),className:"bg-white border border-slate-200 rounded px-2 py-1 text-sm text-slate-700 focus:ring-1 focus:ring-blue-500 outline-none max-w-[150px]",children:[g.jsx("option",{value:"ALL",children:" "}),W.map(j=>g.jsx("option",{value:j.id,children:j.name},j.id))]})]}),g.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[g.jsx("button",{onClick:()=>y("ALL"),className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-colors ${_==="ALL"?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:""}),r.map(j=>g.jsx("button",{onClick:()=>y(j.id),className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-colors ${_===j.id?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:j.name},j.id))]})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-4 grid grid-cols-1 lg:grid-cols-2 gap-3 content-start",children:[Y.map(j=>{const X=ke(j.category);return g.jsxs("button",{onClick:()=>de(j),className:"group flex flex-col items-start p-3 rounded-lg border border-slate-100 hover:border-blue-300 hover:bg-blue-50 transition-all text-left bg-white shadow-sm",children:[g.jsxs("div",{className:"flex justify-between w-full mb-1",children:[g.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${X.color}`,children:X.name}),g.jsx(qn,{size:16,className:"text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity"})]}),g.jsx("span",{className:"font-medium text-slate-800 text-sm",children:j.name}),j.defaultVersion&&g.jsxs("span",{className:"text-xs text-slate-400 mt-1",children:[": ",j.defaultVersion]})]},j.id)}),Y.length===0&&g.jsx("div",{className:"col-span-full text-center text-slate-400 text-sm py-8",children:""})]})]}),g.jsxs("div",{className:"flex-1 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col overflow-hidden",children:[g.jsxs("div",{className:"p-2 border-b border-slate-100 bg-slate-50 flex overflow-x-auto gap-2 scrollbar-hide items-center",children:[w.map(j=>g.jsxs("div",{onClick:()=>V(j.id),className:`
                        flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-all whitespace-nowrap border
                        ${k===j.id?"bg-white border-blue-200 text-blue-700 shadow-sm font-medium":"bg-slate-100 border-transparent text-slate-500 hover:bg-white hover:border-slate-200"}
                    `,children:[g.jsx("span",{children:j.name}),g.jsx("span",{className:"text-xs bg-opacity-20 bg-slate-500 px-1.5 rounded-full",children:p.filter(X=>X.tripGroupId===j.id).length}),k===j.id&&g.jsx("button",{onClick:X=>K(X,j.id),className:"ml-1 p-0.5 hover:text-red-500 rounded hover:bg-red-50",children:g.jsx(Fs,{size:12})})]},j.id)),C?g.jsxs("div",{className:"flex items-center gap-1 bg-white p-1 rounded-lg border border-blue-200 shadow-sm animate-in fade-in",children:[g.jsx("input",{autoFocus:!0,className:"w-24 text-sm px-2 py-0.5 outline-none",placeholder:"",value:S,onChange:j=>E(j.target.value),onKeyDown:j=>j.key==="Enter"&&$()}),g.jsx("button",{onClick:$,className:"text-blue-600 hover:bg-blue-50 p-1 rounded",children:g.jsx(qn,{size:14})}),g.jsx("button",{onClick:()=>D(!1),className:"text-slate-400 hover:text-slate-600 p-1",children:g.jsx(Fs,{size:14})})]}):g.jsx("button",{onClick:()=>D(!0),className:"p-1.5 rounded-lg text-slate-400 hover:bg-slate-100 hover:text-slate-600 transition-colors",title:"",children:g.jsx(qn,{size:18})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50/50",children:ne.length===0?g.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-300",children:[g.jsx(Ed,{size:48,className:"mb-4 opacity-50"}),g.jsx("p",{children:""})]}):g.jsx(UI,{sensors:I,collisionDetection:Ux,onDragEnd:ee,children:g.jsx(eT,{items:ne.map(j=>j.id),strategy:JI,children:ne.map(j=>g.jsx(hT,{item:j,info:ke(j.category),updateItem:me,handleRemoveItem:Te},j.id))})})})]})]})]})},pT=({trip:t,categories:e,onUpdateTrip:n,onBack:r,onEdit:s})=>{const[i,o]=N.useState(t);N.useEffect(()=>{o(t)},[t]);const l=f=>{const p=i.items.map(b=>b.id===f?{...b,checked:!b.checked}:b),m={...i,items:p},w=p.every(b=>b.checked);m.status=w?"completed":"active",o(m),n(m)},u=Math.round(i.items.filter(f=>f.checked).length/i.items.length*100)||0,d=f=>{const p=e.find(m=>m.id===f);return{name:(p==null?void 0:p.name)||"",color:(p==null?void 0:p.color)||"bg-gray-100 text-gray-600 border-gray-200"}};return g.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-20",children:[g.jsxs("div",{className:"sticky top-0 z-10 bg-slate-50/95 backdrop-blur-sm pt-4 pb-2 border-b border-slate-200",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("button",{onClick:r,className:"flex items-center text-slate-500 hover:text-slate-800",children:[g.jsx(Zv,{size:20,className:"mr-1"}),""]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm bg-white border border-slate-200 text-slate-600 hover:bg-slate-100",children:[g.jsx(yx,{size:16}),""]}),g.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${i.status==="completed"?"bg-green-500 text-white":"bg-blue-600 text-white"}`,children:i.status==="completed"?"":""})]})]}),g.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:i.name}),g.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex items-center gap-4",children:[g.jsx("div",{className:"flex-1 h-3 bg-slate-100 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-green-500 transition-all duration-500 ease-out",style:{width:`${u}%`}})}),g.jsxs("span",{className:"font-bold text-slate-700 min-w-[3rem] text-right",children:[u,"%"]})]})]}),i.groups.map(f=>{const p=i.items.filter(m=>m.tripGroupId===f.id);return p.length===0?null:g.jsxs("div",{className:"space-y-3",children:[g.jsxs("h3",{className:"font-bold text-slate-700 text-lg flex items-center gap-2 border-l-4 border-blue-500 pl-3",children:[g.jsx(hx,{size:18,className:"text-blue-500"}),f.name]}),g.jsx("div",{className:"grid grid-cols-1 gap-3",children:p.map(m=>{const w=d(m.category);return g.jsxs("div",{onClick:()=>l(m.id),className:`
                        relative cursor-pointer transition-all duration-200 
                        p-4 rounded-xl border-2 shadow-sm flex items-start gap-4
                        ${m.checked?"bg-green-50 border-green-200 opacity-70":"bg-white border-slate-200 hover:border-blue-400 hover:shadow-md"}
                        `,children:[g.jsxs("div",{className:`
                        flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center transition-colors mt-1
                        ${m.checked?"bg-green-500 text-white":"bg-slate-100 text-slate-300"}
                        `,children:[g.jsx(ix,{size:20,className:m.checked?"opacity-100":"opacity-0"}),!m.checked&&g.jsx(ax,{size:20,className:"absolute"})]}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex justify-between items-start mb-1",children:[g.jsxs("div",{className:"flex flex-col",children:[g.jsx("span",{className:`text-lg font-bold break-words ${m.checked?"text-slate-500 line-through":"text-slate-800"}`,children:m.name}),g.jsx("span",{className:`text-[10px] w-fit px-1.5 py-0.5 rounded border ${w.color} mt-1`,children:w.name})]}),g.jsxs("span",{className:"bg-slate-100 text-slate-700 font-bold px-2 py-1 rounded text-sm whitespace-nowrap ml-2",children:["x",m.qty]})]}),m.version&&g.jsx("div",{className:`text-sm mt-2 font-medium px-3 py-2 rounded w-full whitespace-pre-wrap break-words leading-relaxed ${m.checked?"bg-slate-100 text-slate-400":"bg-yellow-50 text-yellow-800 border border-yellow-200"}`,children:m.version})]})]},m.id)})})]},f.id)}),i.items.length===0&&g.jsxs("div",{className:"text-center py-20 text-slate-400",children:[g.jsx(_x,{size:48,className:"mx-auto mb-4 opacity-50"}),g.jsx("p",{children:""})]})]})};var qm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},mT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},S0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,w=d&63;u||(w=64,o||(m=64)),r.push(n[f],n[p],n[m],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(T0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new gT;const m=i<<2|l>>4;if(r.push(m),d!==64){const w=l<<4&240|d>>2;if(r.push(w),p!==64){const b=d<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yT=function(t){const e=T0(t);return S0.encodeByteArray(e,!0)},Ol=function(t){return yT(t).replace(/\./g,"")},vT=function(t){try{return S0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ll(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!_T(n)||(t[n]=Ll(t[n],e[n]));return t}function _T(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=()=>C0().__FIREBASE_DEFAULTS__,ET=()=>{if(typeof process>"u"||typeof qm>"u")return;const t=qm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vT(t[1]);return e&&JSON.parse(e)},Qh=()=>{try{return wT()||ET()||xT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IT=t=>{var e,n;return(n=(e=Qh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},TT=t=>{const e=IT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},A0=()=>{var t;return(t=Qh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ol(JSON.stringify(n)),Ol(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RT(){var t;const e=(t=Qh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bT(){return typeof window<"u"||R0()}function R0(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function kT(){return!RT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NT(){try{return typeof indexedDB=="object"}catch{return!1}}function PT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="FirebaseError";class ps extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DT,Object.setPrototypeOf(this,ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gu.prototype.create)}}class gu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?VT(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ps(s,l,r)}}function VT(t,e){return t.replace(OT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const OT=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ad(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Km(i)&&Km(o)){if(!Ad(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Km(t){return t!==null&&typeof t=="object"}function LT(t,e){const n=new MT(t,e);return n.subscribe.bind(n)}class MT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");jT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=vc),s.error===void 0&&(s.error=vc),s.complete===void 0&&(s.complete=vc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){return t&&t._delegate?t._delegate:t}class ti{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ST;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UT(e))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yr){return this.instances.has(e)}getOptions(e=Yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yr){return this.component?this.component.multipleInstances?e:Yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zT(t){return t===Yr?void 0:t}function UT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=[];var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const k0={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},BT=ve.INFO,$T={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},HT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=$T[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xh{constructor(e){this.name=e,this._logLevel=BT,this._logHandler=HT,this._userLogHandler=null,Yh.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?k0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}function WT(t){Yh.forEach(e=>{e.setLogLevel(t)})}function qT(t,e){for(const n of Yh){let r=null;e&&e.level&&(r=k0[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const l=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");i>=(r??s.logLevel)&&t({level:ve[i].toLowerCase(),message:l,args:o,type:s.name})}}}const GT=(t,e)=>e.some(n=>t instanceof n);let Qm,Ym;function KT(){return Qm||(Qm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QT(){return Ym||(Ym=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N0=new WeakMap,Rd=new WeakMap,P0=new WeakMap,_c=new WeakMap,Jh=new WeakMap;function YT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Rr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&N0.set(n,t)}).catch(()=>{}),Jh.set(e,t),e}function XT(t){if(Rd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Rd.set(t,e)}let bd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||P0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function JT(t){bd=t(bd)}function ZT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wc(this),e,...n);return P0.set(r,e.sort?e.sort():[e]),Rr(r)}:QT().includes(t)?function(...e){return t.apply(wc(this),e),Rr(N0.get(this))}:function(...e){return Rr(t.apply(wc(this),e))}}function eS(t){return typeof t=="function"?ZT(t):(t instanceof IDBTransaction&&XT(t),GT(t,KT())?new Proxy(t,bd):t)}function Rr(t){if(t instanceof IDBRequest)return YT(t);if(_c.has(t))return _c.get(t);const e=eS(t);return e!==t&&(_c.set(t,e),Jh.set(e,t)),e}const wc=t=>Jh.get(t);function tS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Rr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Rr(o.result),u.oldVersion,u.newVersion,Rr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const nS=["get","getKey","getAll","getAllKeys","count"],rS=["put","add","delete","clear"],Ec=new Map;function Xm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ec.get(e))return Ec.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=rS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||nS.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Ec.set(e,i),i}JT(t=>({...t,get:(e,n,r)=>Xm(e,n)||t.get(e,n,r),has:(e,n)=>!!Xm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jl="@firebase/app",kd="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new Xh("@firebase/app"),oS="@firebase/app-compat",aS="@firebase/analytics-compat",lS="@firebase/analytics",uS="@firebase/app-check-compat",cS="@firebase/app-check",dS="@firebase/auth",hS="@firebase/auth-compat",fS="@firebase/database",pS="@firebase/data-connect",mS="@firebase/database-compat",gS="@firebase/functions",yS="@firebase/functions-compat",vS="@firebase/installations",_S="@firebase/installations-compat",wS="@firebase/messaging",ES="@firebase/messaging-compat",xS="@firebase/performance",IS="@firebase/performance-compat",TS="@firebase/remote-config",SS="@firebase/remote-config-compat",CS="@firebase/storage",AS="@firebase/storage-compat",RS="@firebase/firestore",bS="@firebase/vertexai-preview",kS="@firebase/firestore-compat",NS="firebase",PS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr="[DEFAULT]",DS={[jl]:"fire-core",[oS]:"fire-core-compat",[lS]:"fire-analytics",[aS]:"fire-analytics-compat",[cS]:"fire-app-check",[uS]:"fire-app-check-compat",[dS]:"fire-auth",[hS]:"fire-auth-compat",[fS]:"fire-rtdb",[pS]:"fire-data-connect",[mS]:"fire-rtdb-compat",[gS]:"fire-fn",[yS]:"fire-fn-compat",[vS]:"fire-iid",[_S]:"fire-iid-compat",[wS]:"fire-fcm",[ES]:"fire-fcm-compat",[xS]:"fire-perf",[IS]:"fire-perf-compat",[TS]:"fire-rc",[SS]:"fire-rc-compat",[CS]:"fire-gcs",[AS]:"fire-gcs-compat",[RS]:"fire-fst",[kS]:"fire-fst-compat",[bS]:"fire-vertex","fire-js":"fire-js",[NS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new Map,ni=new Map,ri=new Map;function No(t,e){try{t.container.addComponent(e)}catch(n){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function D0(t,e){t.container.addOrOverwriteComponent(e)}function si(t){const e=t.name;if(ri.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;ri.set(e,t);for(const n of Dr.values())No(n,t);for(const n of ni.values())No(n,t);return!0}function Zh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function VS(t,e,n=Pr){Zh(t,e).clearInstance(n)}function V0(t){return t.options!==void 0}function OS(t){return t.settings!==void 0}function LS(){ri.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},an=new gu("app","Firebase",MS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let O0=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ti("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS extends O0{constructor(e,n,r,s){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,o,s);else{const l=e;super(l.options,o,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Yn(jl,kd,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){nf(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw an.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef=PS;function tf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Pr,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw an.create("bad-app-name",{appName:String(s)});if(n||(n=A0()),!n)throw an.create("no-options");const i=Dr.get(s);if(i){if(Ad(n,i.options)&&Ad(r,i.config))return i;throw an.create("duplicate-app",{appName:s})}const o=new b0(s);for(const u of ri.values())o.addComponent(u);const l=new O0(n,r,o);return Dr.set(s,l),l}function FS(t,e){if(bT()&&!R0())throw an.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;V0(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=d=>[...d].reduce((f,p)=>Math.imul(31,f)+p.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw an.create("finalization-registry-not-supported",{});const i=""+s(JSON.stringify(r)),o=ni.get(i);if(o)return o.incRefCount(e.releaseOnDeref),o;const l=new b0(i);for(const d of ri.values())l.addComponent(d);const u=new jS(n,e,i,l);return ni.set(i,u),u}function L0(t=Pr){const e=Dr.get(t);if(!e&&t===Pr&&A0())return tf();if(!e)throw an.create("no-app",{appName:t});return e}function zS(){return Array.from(Dr.values())}async function nf(t){let e=!1;const n=t.name;Dr.has(n)?(e=!0,Dr.delete(n)):ni.has(n)&&t.decRefCount()<=0&&(ni.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Yn(t,e,n){var r;let s=(r=DS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(l.join(" "));return}si(new ti(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function M0(t,e){if(t!==null&&typeof t!="function")throw an.create("invalid-log-argument");qT(t,e)}function j0(t){WT(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="firebase-heartbeat-database",BS=1,Po="firebase-heartbeat-store";let xc=null;function F0(){return xc||(xc=tS(US,BS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Po)}catch(n){console.warn(n)}}}}).catch(t=>{throw an.create("idb-open",{originalErrorMessage:t.message})})),xc}async function $S(t){try{const n=(await F0()).transaction(Po),r=await n.objectStore(Po).get(z0(t));return await n.done,r}catch(e){if(e instanceof ps)nr.warn(e.message);else{const n=an.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});nr.warn(n.message)}}}async function Jm(t,e){try{const r=(await F0()).transaction(Po,"readwrite");await r.objectStore(Po).put(e,z0(t)),await r.done}catch(n){if(n instanceof ps)nr.warn(n.message);else{const r=an.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});nr.warn(r.message)}}}function z0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=1024,WS=30*24*60*60*1e3;class qS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Zm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=WS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){nr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zm(),{heartbeatsToSend:r,unsentEntries:s}=GS(this._heartbeatsCache.heartbeats),i=Ol(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return nr.warn(n),""}}}function Zm(){return new Date().toISOString().substring(0,10)}function GS(t,e=HS){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),eg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),eg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class KS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NT()?PT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $S(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function eg(t){return Ol(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t){si(new ti("platform-logger",e=>new sS(e),"PRIVATE")),si(new ti("heartbeat",e=>new qS(e),"PRIVATE")),Yn(jl,kd,t),Yn(jl,kd,"esm2017"),Yn("fire-js","")}QS("");const YS=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ps,SDK_VERSION:ef,_DEFAULT_ENTRY_NAME:Pr,_addComponent:No,_addOrOverwriteComponent:D0,_apps:Dr,_clearComponents:LS,_components:ri,_getProvider:Zh,_isFirebaseApp:V0,_isFirebaseServerApp:OS,_registerComponent:si,_removeServiceInstance:VS,_serverApps:ni,deleteApp:nf,getApp:L0,getApps:zS,initializeApp:tf,initializeServerApp:FS,onLog:M0,registerVersion:Yn,setLogLevel:j0},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n){this._delegate=e,this.firebase=n,No(e,new ti("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),nf(this._delegate)))}_getService(e,n=Pr){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=Pr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){No(this._delegate,e)}_addOrOverwriteComponent(e){D0(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},tg=new gu("app-compat","Firebase",JS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:Yn,setLogLevel:j0,onLog:M0,apps:null,SDK_VERSION:ef,INTERNAL:{registerComponent:l,removeApp:r,useAsService:u,modularAPIs:YS}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(d){delete e[d]}function s(d){if(d=d||Pr,!Gm(e,d))throw tg.create("no-app",{appName:d});return e[d]}s.App=t;function i(d,f={}){const p=tf(d,f);if(Gm(e,p.name))return e[p.name];const m=new t(p,n);return e[p.name]=m,m}function o(){return Object.keys(e).map(d=>e[d])}function l(d){const f=d.name,p=f.replace("-compat","");if(si(d)&&d.type==="PUBLIC"){const m=(w=s())=>{if(typeof w[p]!="function")throw tg.create("invalid-app-argument",{appName:f});return w[p]()};d.serviceProps!==void 0&&Ll(m,d.serviceProps),n[p]=m,t.prototype[p]=function(...w){return this._getService.bind(this,f).apply(this,d.multipleInstances?w:[])}}return d.type==="PUBLIC"?n[p]:null}function u(d,f){return f==="serverAuth"?null:f}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(){const t=ZS(XS);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:U0,extendNamespace:e,createSubscribe:LT,ErrorFactory:gu,deepExtend:Ll});function e(n){Ll(t,n)}return t}const e2=U0();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=new Xh("@firebase/app-compat"),t2="@firebase/app-compat",n2="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t){Yn(t2,n2,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=C0();if(t.firebase!==void 0){ng.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ng.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const B0=e2;r2();var s2="firebase",i2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */B0.registerVersion(s2,i2,"app-compat");var rg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rs,$0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function x(){}x.prototype=y.prototype,_.D=y.prototype,_.prototype=new x,_.prototype.constructor=_,_.C=function(T,A,R){for(var I=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)I[ee-2]=arguments[ee];return y.prototype[A].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,y,x){x||(x=0);var T=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)T[A]=y.charCodeAt(x++)|y.charCodeAt(x++)<<8|y.charCodeAt(x++)<<16|y.charCodeAt(x++)<<24;else for(A=0;16>A;++A)T[A]=y[x++]|y[x++]<<8|y[x++]<<16|y[x++]<<24;y=_.g[0],x=_.g[1],A=_.g[2];var R=_.g[3],I=y+(R^x&(A^R))+T[0]+3614090360&4294967295;y=x+(I<<7&4294967295|I>>>25),I=R+(A^y&(x^A))+T[1]+3905402710&4294967295,R=y+(I<<12&4294967295|I>>>20),I=A+(x^R&(y^x))+T[2]+606105819&4294967295,A=R+(I<<17&4294967295|I>>>15),I=x+(y^A&(R^y))+T[3]+3250441966&4294967295,x=A+(I<<22&4294967295|I>>>10),I=y+(R^x&(A^R))+T[4]+4118548399&4294967295,y=x+(I<<7&4294967295|I>>>25),I=R+(A^y&(x^A))+T[5]+1200080426&4294967295,R=y+(I<<12&4294967295|I>>>20),I=A+(x^R&(y^x))+T[6]+2821735955&4294967295,A=R+(I<<17&4294967295|I>>>15),I=x+(y^A&(R^y))+T[7]+4249261313&4294967295,x=A+(I<<22&4294967295|I>>>10),I=y+(R^x&(A^R))+T[8]+1770035416&4294967295,y=x+(I<<7&4294967295|I>>>25),I=R+(A^y&(x^A))+T[9]+2336552879&4294967295,R=y+(I<<12&4294967295|I>>>20),I=A+(x^R&(y^x))+T[10]+4294925233&4294967295,A=R+(I<<17&4294967295|I>>>15),I=x+(y^A&(R^y))+T[11]+2304563134&4294967295,x=A+(I<<22&4294967295|I>>>10),I=y+(R^x&(A^R))+T[12]+1804603682&4294967295,y=x+(I<<7&4294967295|I>>>25),I=R+(A^y&(x^A))+T[13]+4254626195&4294967295,R=y+(I<<12&4294967295|I>>>20),I=A+(x^R&(y^x))+T[14]+2792965006&4294967295,A=R+(I<<17&4294967295|I>>>15),I=x+(y^A&(R^y))+T[15]+1236535329&4294967295,x=A+(I<<22&4294967295|I>>>10),I=y+(A^R&(x^A))+T[1]+4129170786&4294967295,y=x+(I<<5&4294967295|I>>>27),I=R+(x^A&(y^x))+T[6]+3225465664&4294967295,R=y+(I<<9&4294967295|I>>>23),I=A+(y^x&(R^y))+T[11]+643717713&4294967295,A=R+(I<<14&4294967295|I>>>18),I=x+(R^y&(A^R))+T[0]+3921069994&4294967295,x=A+(I<<20&4294967295|I>>>12),I=y+(A^R&(x^A))+T[5]+3593408605&4294967295,y=x+(I<<5&4294967295|I>>>27),I=R+(x^A&(y^x))+T[10]+38016083&4294967295,R=y+(I<<9&4294967295|I>>>23),I=A+(y^x&(R^y))+T[15]+3634488961&4294967295,A=R+(I<<14&4294967295|I>>>18),I=x+(R^y&(A^R))+T[4]+3889429448&4294967295,x=A+(I<<20&4294967295|I>>>12),I=y+(A^R&(x^A))+T[9]+568446438&4294967295,y=x+(I<<5&4294967295|I>>>27),I=R+(x^A&(y^x))+T[14]+3275163606&4294967295,R=y+(I<<9&4294967295|I>>>23),I=A+(y^x&(R^y))+T[3]+4107603335&4294967295,A=R+(I<<14&4294967295|I>>>18),I=x+(R^y&(A^R))+T[8]+1163531501&4294967295,x=A+(I<<20&4294967295|I>>>12),I=y+(A^R&(x^A))+T[13]+2850285829&4294967295,y=x+(I<<5&4294967295|I>>>27),I=R+(x^A&(y^x))+T[2]+4243563512&4294967295,R=y+(I<<9&4294967295|I>>>23),I=A+(y^x&(R^y))+T[7]+1735328473&4294967295,A=R+(I<<14&4294967295|I>>>18),I=x+(R^y&(A^R))+T[12]+2368359562&4294967295,x=A+(I<<20&4294967295|I>>>12),I=y+(x^A^R)+T[5]+4294588738&4294967295,y=x+(I<<4&4294967295|I>>>28),I=R+(y^x^A)+T[8]+2272392833&4294967295,R=y+(I<<11&4294967295|I>>>21),I=A+(R^y^x)+T[11]+1839030562&4294967295,A=R+(I<<16&4294967295|I>>>16),I=x+(A^R^y)+T[14]+4259657740&4294967295,x=A+(I<<23&4294967295|I>>>9),I=y+(x^A^R)+T[1]+2763975236&4294967295,y=x+(I<<4&4294967295|I>>>28),I=R+(y^x^A)+T[4]+1272893353&4294967295,R=y+(I<<11&4294967295|I>>>21),I=A+(R^y^x)+T[7]+4139469664&4294967295,A=R+(I<<16&4294967295|I>>>16),I=x+(A^R^y)+T[10]+3200236656&4294967295,x=A+(I<<23&4294967295|I>>>9),I=y+(x^A^R)+T[13]+681279174&4294967295,y=x+(I<<4&4294967295|I>>>28),I=R+(y^x^A)+T[0]+3936430074&4294967295,R=y+(I<<11&4294967295|I>>>21),I=A+(R^y^x)+T[3]+3572445317&4294967295,A=R+(I<<16&4294967295|I>>>16),I=x+(A^R^y)+T[6]+76029189&4294967295,x=A+(I<<23&4294967295|I>>>9),I=y+(x^A^R)+T[9]+3654602809&4294967295,y=x+(I<<4&4294967295|I>>>28),I=R+(y^x^A)+T[12]+3873151461&4294967295,R=y+(I<<11&4294967295|I>>>21),I=A+(R^y^x)+T[15]+530742520&4294967295,A=R+(I<<16&4294967295|I>>>16),I=x+(A^R^y)+T[2]+3299628645&4294967295,x=A+(I<<23&4294967295|I>>>9),I=y+(A^(x|~R))+T[0]+4096336452&4294967295,y=x+(I<<6&4294967295|I>>>26),I=R+(x^(y|~A))+T[7]+1126891415&4294967295,R=y+(I<<10&4294967295|I>>>22),I=A+(y^(R|~x))+T[14]+2878612391&4294967295,A=R+(I<<15&4294967295|I>>>17),I=x+(R^(A|~y))+T[5]+4237533241&4294967295,x=A+(I<<21&4294967295|I>>>11),I=y+(A^(x|~R))+T[12]+1700485571&4294967295,y=x+(I<<6&4294967295|I>>>26),I=R+(x^(y|~A))+T[3]+2399980690&4294967295,R=y+(I<<10&4294967295|I>>>22),I=A+(y^(R|~x))+T[10]+4293915773&4294967295,A=R+(I<<15&4294967295|I>>>17),I=x+(R^(A|~y))+T[1]+2240044497&4294967295,x=A+(I<<21&4294967295|I>>>11),I=y+(A^(x|~R))+T[8]+1873313359&4294967295,y=x+(I<<6&4294967295|I>>>26),I=R+(x^(y|~A))+T[15]+4264355552&4294967295,R=y+(I<<10&4294967295|I>>>22),I=A+(y^(R|~x))+T[6]+2734768916&4294967295,A=R+(I<<15&4294967295|I>>>17),I=x+(R^(A|~y))+T[13]+1309151649&4294967295,x=A+(I<<21&4294967295|I>>>11),I=y+(A^(x|~R))+T[4]+4149444226&4294967295,y=x+(I<<6&4294967295|I>>>26),I=R+(x^(y|~A))+T[11]+3174756917&4294967295,R=y+(I<<10&4294967295|I>>>22),I=A+(y^(R|~x))+T[2]+718787259&4294967295,A=R+(I<<15&4294967295|I>>>17),I=x+(R^(A|~y))+T[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,_.g[2]=_.g[2]+A&4294967295,_.g[3]=_.g[3]+R&4294967295}r.prototype.u=function(_,y){y===void 0&&(y=_.length);for(var x=y-this.blockSize,T=this.B,A=this.h,R=0;R<y;){if(A==0)for(;R<=x;)s(this,_,R),R+=this.blockSize;if(typeof _=="string"){for(;R<y;)if(T[A++]=_.charCodeAt(R++),A==this.blockSize){s(this,T),A=0;break}}else for(;R<y;)if(T[A++]=_[R++],A==this.blockSize){s(this,T),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;var x=8*this.o;for(y=_.length-8;y<_.length;++y)_[y]=x&255,x/=256;for(this.u(_),_=Array(16),y=x=0;4>y;++y)for(var T=0;32>T;T+=8)_[x++]=this.g[y]>>>T&255;return _};function i(_,y){var x=l;return Object.prototype.hasOwnProperty.call(x,_)?x[_]:x[_]=y(_)}function o(_,y){this.h=y;for(var x=[],T=!0,A=_.length-1;0<=A;A--){var R=_[A]|0;T&&R==y||(x[A]=R,T=!1)}this.g=x}var l={};function u(_){return-128<=_&&128>_?i(_,function(y){return new o([y|0],0>y?-1:0)}):new o([_|0],0>_?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return p;if(0>_)return V(d(-_));for(var y=[],x=1,T=0;_>=x;T++)y[T]=_/x|0,x*=4294967296;return new o(y,0)}function f(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return V(f(_.substring(1),y));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=d(Math.pow(y,8)),T=p,A=0;A<_.length;A+=8){var R=Math.min(8,_.length-A),I=parseInt(_.substring(A,A+R),y);8>R?(R=d(Math.pow(y,R)),T=T.j(R).add(d(I))):(T=T.j(x),T=T.add(d(I)))}return T}var p=u(0),m=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-V(this).m();for(var _=0,y=1,x=0;x<this.g.length;x++){var T=this.i(x);_+=(0<=T?T:4294967296+T)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b(this))return"0";if(k(this))return"-"+V(this).toString(_);for(var y=d(Math.pow(_,6)),x=this,T="";;){var A=D(x,y).g;x=S(x,A.j(y));var R=((0<x.g.length?x.g[0]:x.h)>>>0).toString(_);if(x=A,b(x))return R+T;for(;6>R.length;)R="0"+R;T=R+T}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function b(_){if(_.h!=0)return!1;for(var y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function k(_){return _.h==-1}t.l=function(_){return _=S(this,_),k(_)?-1:b(_)?0:1};function V(_){for(var y=_.g.length,x=[],T=0;T<y;T++)x[T]=~_.g[T];return new o(x,~_.h).add(m)}t.abs=function(){return k(this)?V(this):this},t.add=function(_){for(var y=Math.max(this.g.length,_.g.length),x=[],T=0,A=0;A<=y;A++){var R=T+(this.i(A)&65535)+(_.i(A)&65535),I=(R>>>16)+(this.i(A)>>>16)+(_.i(A)>>>16);T=I>>>16,R&=65535,I&=65535,x[A]=I<<16|R}return new o(x,x[x.length-1]&-2147483648?-1:0)};function S(_,y){return _.add(V(y))}t.j=function(_){if(b(this)||b(_))return p;if(k(this))return k(_)?V(this).j(V(_)):V(V(this).j(_));if(k(_))return V(this.j(V(_)));if(0>this.l(w)&&0>_.l(w))return d(this.m()*_.m());for(var y=this.g.length+_.g.length,x=[],T=0;T<2*y;T++)x[T]=0;for(T=0;T<this.g.length;T++)for(var A=0;A<_.g.length;A++){var R=this.i(T)>>>16,I=this.i(T)&65535,ee=_.i(A)>>>16,de=_.i(A)&65535;x[2*T+2*A]+=I*de,E(x,2*T+2*A),x[2*T+2*A+1]+=R*de,E(x,2*T+2*A+1),x[2*T+2*A+1]+=I*ee,E(x,2*T+2*A+1),x[2*T+2*A+2]+=R*ee,E(x,2*T+2*A+2)}for(T=0;T<y;T++)x[T]=x[2*T+1]<<16|x[2*T];for(T=y;T<2*y;T++)x[T]=0;return new o(x,0)};function E(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function C(_,y){this.g=_,this.h=y}function D(_,y){if(b(y))throw Error("division by zero");if(b(_))return new C(p,p);if(k(_))return y=D(V(_),y),new C(V(y.g),V(y.h));if(k(y))return y=D(_,V(y)),new C(V(y.g),y.h);if(30<_.g.length){if(k(_)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var x=m,T=y;0>=T.l(_);)x=L(x),T=L(T);var A=M(x,1),R=M(T,1);for(T=M(T,2),x=M(x,2);!b(T);){var I=R.add(T);0>=I.l(_)&&(A=A.add(x),R=I),T=M(T,1),x=M(x,1)}return y=S(_,A.j(y)),new C(A,y)}for(A=p;0<=_.l(y);){for(x=Math.max(1,Math.floor(_.m()/y.m())),T=Math.ceil(Math.log(x)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),R=d(x),I=R.j(y);k(I)||0<I.l(_);)x-=T,R=d(x),I=R.j(y);b(R)&&(R=m),A=A.add(R),_=S(_,I)}return new C(A,_)}t.A=function(_){return D(this,_).h},t.and=function(_){for(var y=Math.max(this.g.length,_.g.length),x=[],T=0;T<y;T++)x[T]=this.i(T)&_.i(T);return new o(x,this.h&_.h)},t.or=function(_){for(var y=Math.max(this.g.length,_.g.length),x=[],T=0;T<y;T++)x[T]=this.i(T)|_.i(T);return new o(x,this.h|_.h)},t.xor=function(_){for(var y=Math.max(this.g.length,_.g.length),x=[],T=0;T<y;T++)x[T]=this.i(T)^_.i(T);return new o(x,this.h^_.h)};function L(_){for(var y=_.g.length+1,x=[],T=0;T<y;T++)x[T]=_.i(T)<<1|_.i(T-1)>>>31;return new o(x,_.h)}function M(_,y){var x=y>>5;y%=32;for(var T=_.g.length-x,A=[],R=0;R<T;R++)A[R]=0<y?_.i(R+x)>>>y|_.i(R+x+1)<<32-y:_.i(R+x);return new o(A,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,rs=o}).apply(typeof rg<"u"?rg:typeof self<"u"?self:typeof window<"u"?window:{});var Fa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var H0,Hi,W0,rl,Nd,q0,G0,K0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,h){return a==Array.prototype||a==Object.prototype||(a[c]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fa=="object"&&Fa];for(var c=0;c<a.length;++c){var h=a[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(a,c){if(c)e:{var h=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var P=a[v];if(!(P in h))break e;h=h[P]}a=a[a.length-1],v=h[a],c=c(v),c!=v&&c!=null&&e(h,a,{configurable:!0,writable:!0,value:c})}}function i(a,c){a instanceof String&&(a+="");var h=0,v=!1,P={next:function(){if(!v&&h<a.length){var O=h++;return{value:c(O,a[O]),done:!1}}return v=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}s("Array.prototype.values",function(a){return a||function(){return i(this,function(c,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function d(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function f(a,c,h){return a.call.apply(a.bind,arguments)}function p(a,c,h){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,v),a.apply(c,P)}}return function(){return a.apply(c,arguments)}}function m(a,c,h){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function w(a,c){var h=Array.prototype.slice.call(arguments,1);return function(){var v=h.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function b(a,c){function h(){}h.prototype=c.prototype,a.aa=c.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(v,P,O){for(var H=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)H[Re-2]=arguments[Re];return c.prototype[P].apply(v,H)}}function k(a){const c=a.length;if(0<c){const h=Array(c);for(let v=0;v<c;v++)h[v]=a[v];return h}return[]}function V(a,c){for(let h=1;h<arguments.length;h++){const v=arguments[h];if(u(v)){const P=a.length||0,O=v.length||0;a.length=P+O;for(let H=0;H<O;H++)a[P+H]=v[H]}else a.push(v)}}class S{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(a){return/^[\s\xa0]*$/.test(a)}function C(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var L=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function M(a,c,h){for(const v in a)c.call(h,a[v],v,a)}function _(a,c){for(const h in a)c.call(void 0,a[h],h,a)}function y(a){const c={};for(const h in a)c[h]=a[h];return c}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,c){let h,v;for(let P=1;P<arguments.length;P++){v=arguments[P];for(h in v)a[h]=v[h];for(let O=0;O<x.length;O++)h=x[O],Object.prototype.hasOwnProperty.call(v,h)&&(a[h]=v[h])}}function A(a){var c=1;a=a.split(":");const h=[];for(;0<c&&a.length;)h.push(a.shift()),c--;return a.length&&h.push(a.join(":")),h}function R(a){l.setTimeout(()=>{throw a},0)}function I(){var a=K;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class ee{constructor(){this.h=this.g=null}add(c,h){const v=de.get();v.set(c,h),this.h?this.h.next=v:this.g=v,this.h=v}}var de=new S(()=>new Te,a=>a.reset());class Te{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let me,$=!1,K=new ee,q=()=>{const a=l.Promise.resolve(void 0);me=()=>{a.then(Y)}};var Y=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(h){R(h)}var c=de;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}$=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const h=()=>{};l.addEventListener("test",h,c),l.removeEventListener("test",h,c)}catch{}return a}();function ze(a,c){if(ne.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(L){e:{try{D(c.nodeName);var P=!0;break e}catch{}P=!1}P||(c=null)}}else h=="mouseover"?c=a.fromElement:h=="mouseout"&&(c=a.toElement);this.relatedTarget=c,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:j[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ze.aa.h.call(this)}}b(ze,ne);var j={2:"touch",3:"pen",4:"mouse"};ze.prototype.h=function(){ze.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var X="closure_listenable_"+(1e6*Math.random()|0),he=0;function Ne(a,c,h,v,P){this.listener=a,this.proxy=null,this.src=c,this.type=h,this.capture=!!v,this.ha=P,this.key=++he,this.da=this.fa=!1}function ie(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Rt(a){this.src=a,this.g={},this.h=0}Rt.prototype.add=function(a,c,h,v,P){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var H=Ht(a,c,v,P);return-1<H?(c=a[H],h||(c.fa=!1)):(c=new Ne(c,this.src,O,!!v,P),c.fa=h,a.push(c)),c};function Ge(a,c){var h=c.type;if(h in a.g){var v=a.g[h],P=Array.prototype.indexOf.call(v,c,void 0),O;(O=0<=P)&&Array.prototype.splice.call(v,P,1),O&&(ie(c),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Ht(a,c,h,v){for(var P=0;P<a.length;++P){var O=a[P];if(!O.da&&O.listener==c&&O.capture==!!h&&O.ha==v)return P}return-1}var bt="closure_lm_"+(1e6*Math.random()|0),Zt={};function dn(a,c,h,v,P){if(Array.isArray(c)){for(var O=0;O<c.length;O++)dn(a,c[O],h,v,P);return null}return h=le(h),a&&a[X]?a.K(c,h,d(v)?!!v.capture:!1,P):ys(a,c,h,!1,v,P)}function ys(a,c,h,v,P,O){if(!c)throw Error("Invalid event type");var H=d(P)?!!P.capture:!!P,Re=Fn(a);if(Re||(a[bt]=Re=new Rt(a)),h=Re.add(c,h,v,H,O),h.proxy)return h;if(v=or(),h.proxy=v,v.src=a,v.listener=h,a.addEventListener)ke||(P=H),P===void 0&&(P=!1),a.addEventListener(c.toString(),v,P);else if(a.attachEvent)a.attachEvent(Sn(c.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return h}function or(){function a(h){return c.call(a.src,a.listener,h)}const c=jn;return a}function Mn(a,c,h,v,P){if(Array.isArray(c))for(var O=0;O<c.length;O++)Mn(a,c[O],h,v,P);else v=d(v)?!!v.capture:!!v,h=le(h),a&&a[X]?(a=a.i,c=String(c).toString(),c in a.g&&(O=a.g[c],h=Ht(O,h,v,P),-1<h&&(ie(O[h]),Array.prototype.splice.call(O,h,1),O.length==0&&(delete a.g[c],a.h--)))):a&&(a=Fn(a))&&(c=a.g[c.toString()],a=-1,c&&(a=Ht(c,h,v,P)),(h=-1<a?c[a]:null)&&kt(h))}function kt(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[X])Ge(c.i,a);else{var h=a.type,v=a.proxy;c.removeEventListener?c.removeEventListener(h,v,a.capture):c.detachEvent?c.detachEvent(Sn(h),v):c.addListener&&c.removeListener&&c.removeListener(v),(h=Fn(c))?(Ge(h,a),h.h==0&&(h.src=null,c[bt]=null)):ie(a)}}}function Sn(a){return a in Zt?Zt[a]:Zt[a]="on"+a}function jn(a,c){if(a.da)a=!0;else{c=new ze(c,this);var h=a.listener,v=a.ha||a.src;a.fa&&kt(a),a=h.call(v,c)}return a}function Fn(a){return a=a[bt],a instanceof Rt?a:null}var F="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(a){return typeof a=="function"?a:(a[F]||(a[F]=function(c){return a.handleEvent(c)}),a[F])}function oe(){W.call(this),this.i=new Rt(this),this.M=this,this.F=null}b(oe,W),oe.prototype[X]=!0,oe.prototype.removeEventListener=function(a,c,h,v){Mn(this,a,c,h,v)};function ae(a,c){var h,v=a.F;if(v)for(h=[];v;v=v.F)h.push(v);if(a=a.M,v=c.type||c,typeof c=="string")c=new ne(c,a);else if(c instanceof ne)c.target=c.target||a;else{var P=c;c=new ne(v,a),T(c,P)}if(P=!0,h)for(var O=h.length-1;0<=O;O--){var H=c.g=h[O];P=Wt(H,v,!0,c)&&P}if(H=c.g=a,P=Wt(H,v,!0,c)&&P,P=Wt(H,v,!1,c)&&P,h)for(O=0;O<h.length;O++)H=c.g=h[O],P=Wt(H,v,!1,c)&&P}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var h=a.g[c],v=0;v<h.length;v++)ie(h[v]);delete a.g[c],a.h--}}this.F=null},oe.prototype.K=function(a,c,h,v){return this.i.add(String(a),c,!1,h,v)},oe.prototype.L=function(a,c,h,v){return this.i.add(String(a),c,!0,h,v)};function Wt(a,c,h,v){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var P=!0,O=0;O<c.length;++O){var H=c[O];if(H&&!H.da&&H.capture==h){var Re=H.listener,lt=H.ha||H.src;H.fa&&Ge(a.i,H),P=Re.call(lt,v)!==!1&&P}}return P&&!v.defaultPrevented}function hn(a,c,h){if(typeof a=="function")h&&(a=m(a,h));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function zn(a){a.g=hn(()=>{a.g=null,a.i&&(a.i=!1,zn(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class Cn extends W{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:zn(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ar(a){W.call(this),this.h=a,this.g={}}b(ar,W);var ta=[];function na(a){M(a.g,function(c,h){this.g.hasOwnProperty(h)&&kt(c)},a),a.g={}}ar.prototype.N=function(){ar.aa.N.call(this),na(this)},ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zr=l.JSON.stringify,ra=l.JSON.parse,Au=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function vs(){}vs.prototype.h=null;function sa(a){return a.h||(a.h=a.i())}function ia(){}var Ur={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ke(){ne.call(this,"d")}b(Ke,ne);function ot(){ne.call(this,"c")}b(ot,ne);var He={},fn=null;function at(){return fn=fn||new oe}He.La="serverreachability";function gt(a){ne.call(this,He.La,a)}b(gt,ne);function yt(a){const c=at();ae(c,new gt(c))}He.STAT_EVENT="statevent";function Un(a,c){ne.call(this,He.STAT_EVENT,a),this.stat=c}b(Un,ne);function _e(a){const c=at();ae(c,new Un(c,a))}He.Ma="timingevent";function pn(a,c){ne.call(this,He.Ma,a),this.size=c}b(pn,ne);function vt(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function Nt(){this.g=!0}Nt.prototype.xa=function(){this.g=!1};function Br(a,c,h,v,P,O){a.info(function(){if(a.g)if(O)for(var H="",Re=O.split("&"),lt=0;lt<Re.length;lt++){var Ee=Re[lt].split("=");if(1<Ee.length){var _t=Ee[0];Ee=Ee[1];var wt=_t.split("_");H=2<=wt.length&&wt[1]=="type"?H+(_t+"="+Ee+"&"):H+(_t+"=redacted&")}}else H=null;else H=O;return"XMLHTTP REQ ("+v+") [attempt "+P+"]: "+c+`
`+h+`
`+H})}function $r(a,c,h,v,P,O,H){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+P+"]: "+c+`
`+h+`
`+O+" "+H})}function Pt(a,c,h,v){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+xi(a,h)+(v?" "+v:"")})}function Hr(a,c){a.info(function(){return"TIMEOUT: "+c})}Nt.prototype.info=function(){};function xi(a,c){if(!a.g)return c;if(!c)return null;try{var h=JSON.parse(c);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var v=h[a];if(!(2>v.length)){var P=v[1];if(Array.isArray(P)&&!(1>P.length)){var O=P[0];if(O!="noop"&&O!="stop"&&O!="close")for(var H=1;H<P.length;H++)P[H]=""}}}}return zr(h)}catch{return c}}var oa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Of={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ru;function aa(){}b(aa,vs),aa.prototype.g=function(){return new XMLHttpRequest},aa.prototype.i=function(){return{}},Ru=new aa;function lr(a,c,h,v){this.j=a,this.i=c,this.l=h,this.R=v||1,this.U=new ar(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lf}function Lf(){this.i=null,this.g="",this.h=!1}var Mf={},bu={};function ku(a,c,h){a.L=1,a.v=da(Bn(c)),a.m=h,a.P=!0,jf(a,null)}function jf(a,c){a.F=Date.now(),la(a),a.A=Bn(a.v);var h=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Jf(h.i,"t",v),a.C=0,h=a.j.J,a.h=new Lf,a.g=gp(a.j,h?c:null,!a.m),0<a.O&&(a.M=new Cn(m(a.Y,a,a.g),a.O)),c=a.U,h=a.g,v=a.ca;var P="readystatechange";Array.isArray(P)||(P&&(ta[0]=P.toString()),P=ta);for(var O=0;O<P.length;O++){var H=dn(h,P[O],v||c.handleEvent,!1,c.h||c);if(!H)break;c.g[H.key]=H}c=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),yt(),Br(a.i,a.u,a.A,a.l,a.R,a.m)}lr.prototype.ca=function(a){a=a.target;const c=this.M;c&&$n(a)==3?c.j():this.Y(a)},lr.prototype.Y=function(a){try{if(a==this.g)e:{const wt=$n(this.g);var c=this.g.Ba();const Es=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||ip(this.g)))){this.J||wt!=4||c==7||(c==8||0>=Es?yt(3):yt(2)),Nu(this);var h=this.g.Z();this.X=h;t:if(Ff(this)){var v=ip(this.g);a="";var P=v.length,O=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),Ii(this);var H="";break t}this.h.i=new l.TextDecoder}for(c=0;c<P;c++)this.h.h=!0,a+=this.h.i.decode(v[c],{stream:!(O&&c==P-1)});v.length=0,this.h.g+=a,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=h==200,$r(this.i,this.u,this.A,this.l,this.R,wt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,lt=this.g;if((Re=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Re)){var Ee=Re;break t}}Ee=null}if(h=Ee)Pt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pu(this,h);else{this.o=!1,this.s=3,_e(12),Wr(this),Ii(this);break e}}if(this.P){h=!0;let mn;for(;!this.J&&this.C<H.length;)if(mn=lw(this,H),mn==bu){wt==4&&(this.s=4,_e(14),h=!1),Pt(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==Mf){this.s=4,_e(15),Pt(this.i,this.l,H,"[Invalid Chunk]"),h=!1;break}else Pt(this.i,this.l,mn,null),Pu(this,mn);if(Ff(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||H.length!=0||this.h.h||(this.s=1,_e(16),h=!1),this.o=this.o&&h,!h)Pt(this.i,this.l,H,"[Invalid Chunked Response]"),Wr(this),Ii(this);else if(0<H.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),ju(_t),_t.M=!0,_e(11))}}else Pt(this.i,this.l,H,null),Pu(this,H);wt==4&&Wr(this),this.o&&!this.J&&(wt==4?hp(this.j,this):(this.o=!1,la(this)))}else Sw(this.g),h==400&&0<H.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),Wr(this),Ii(this)}}}catch{}finally{}};function Ff(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function lw(a,c){var h=a.C,v=c.indexOf(`
`,h);return v==-1?bu:(h=Number(c.substring(h,v)),isNaN(h)?Mf:(v+=1,v+h>c.length?bu:(c=c.slice(v,v+h),a.C=v+h,c)))}lr.prototype.cancel=function(){this.J=!0,Wr(this)};function la(a){a.S=Date.now()+a.I,zf(a,a.I)}function zf(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=vt(m(a.ba,a),c)}function Nu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}lr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Hr(this.i,this.A),this.L!=2&&(yt(),_e(17)),Wr(this),this.s=2,Ii(this)):zf(this,this.S-a)};function Ii(a){a.j.G==0||a.J||hp(a.j,a)}function Wr(a){Nu(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,na(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function Pu(a,c){try{var h=a.j;if(h.G!=0&&(h.g==a||Du(h.h,a))){if(!a.K&&Du(h.h,a)&&h.G==3){try{var v=h.Da.g.parse(c)}catch{v=null}if(Array.isArray(v)&&v.length==3){var P=v;if(P[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)ya(h),ma(h);else break e;Mu(h),_e(18)}}else h.za=P[1],0<h.za-h.T&&37500>P[2]&&h.F&&h.v==0&&!h.C&&(h.C=vt(m(h.Za,h),6e3));if(1>=$f(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Gr(h,11)}else if((a.K||h.g==a)&&ya(h),!E(c))for(P=h.Da.g.parse(c),c=0;c<P.length;c++){let Ee=P[c];if(h.T=Ee[0],Ee=Ee[1],h.G==2)if(Ee[0]=="c"){h.K=Ee[1],h.ia=Ee[2];const _t=Ee[3];_t!=null&&(h.la=_t,h.j.info("VER="+h.la));const wt=Ee[4];wt!=null&&(h.Aa=wt,h.j.info("SVER="+h.Aa));const Es=Ee[5];Es!=null&&typeof Es=="number"&&0<Es&&(v=1.5*Es,h.L=v,h.j.info("backChannelRequestTimeoutMs_="+v)),v=h;const mn=a.g;if(mn){const _a=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_a){var O=v.h;O.g||_a.indexOf("spdy")==-1&&_a.indexOf("quic")==-1&&_a.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Vu(O,O.h),O.h=null))}if(v.D){const Fu=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fu&&(v.ya=Fu,Pe(v.I,v.D,Fu))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),v=h;var H=a;if(v.qa=mp(v,v.J?v.ia:null,v.W),H.K){Hf(v.h,H);var Re=H,lt=v.L;lt&&(Re.I=lt),Re.B&&(Nu(Re),la(Re)),v.g=H}else cp(v);0<h.i.length&&ga(h)}else Ee[0]!="stop"&&Ee[0]!="close"||Gr(h,7);else h.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Gr(h,7):Lu(h):Ee[0]!="noop"&&h.l&&h.l.ta(Ee),h.v=0)}}yt(4)}catch{}}var uw=class{constructor(a,c){this.g=a,this.map=c}};function Uf(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function $f(a){return a.h?1:a.g?a.g.size:0}function Du(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Vu(a,c){a.g?a.g.add(c):a.h=c}function Hf(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}Uf.prototype.cancel=function(){if(this.i=Wf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Wf(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const h of a.g.values())c=c.concat(h.D);return c}return k(a.i)}function cw(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],h=a.length,v=0;v<h;v++)c.push(a[v]);return c}c=[],h=0;for(v in a)c[h++]=a[v];return c}function dw(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var h=0;h<a;h++)c.push(h);return c}c=[],h=0;for(const v in a)c[h++]=v;return c}}}function qf(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var h=dw(a),v=cw(a),P=v.length,O=0;O<P;O++)c.call(void 0,v[O],h&&h[O],a)}var Gf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hw(a,c){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var v=a[h].indexOf("="),P=null;if(0<=v){var O=a[h].substring(0,v);P=a[h].substring(v+1)}else O=a[h];c(O,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function qr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof qr){this.h=a.h,ua(this,a.j),this.o=a.o,this.g=a.g,ca(this,a.s),this.l=a.l;var c=a.i,h=new Ci;h.i=c.i,c.g&&(h.g=new Map(c.g),h.h=c.h),Kf(this,h),this.m=a.m}else a&&(c=String(a).match(Gf))?(this.h=!1,ua(this,c[1]||"",!0),this.o=Ti(c[2]||""),this.g=Ti(c[3]||"",!0),ca(this,c[4]),this.l=Ti(c[5]||"",!0),Kf(this,c[6]||"",!0),this.m=Ti(c[7]||"")):(this.h=!1,this.i=new Ci(null,this.h))}qr.prototype.toString=function(){var a=[],c=this.j;c&&a.push(Si(c,Qf,!0),":");var h=this.g;return(h||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Si(c,Qf,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Si(h,h.charAt(0)=="/"?mw:pw,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Si(h,yw)),a.join("")};function Bn(a){return new qr(a)}function ua(a,c,h){a.j=h?Ti(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function ca(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function Kf(a,c,h){c instanceof Ci?(a.i=c,vw(a.i,a.h)):(h||(c=Si(c,gw)),a.i=new Ci(c,a.h))}function Pe(a,c,h){a.i.set(c,h)}function da(a){return Pe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ti(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Si(a,c,h){return typeof a=="string"?(a=encodeURI(a).replace(c,fw),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function fw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Qf=/[#\/\?@]/g,pw=/[#\?:]/g,mw=/[#\?]/g,gw=/[#\?@]/g,yw=/#/g;function Ci(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function ur(a){a.g||(a.g=new Map,a.h=0,a.i&&hw(a.i,function(c,h){a.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}t=Ci.prototype,t.add=function(a,c){ur(this),this.i=null,a=_s(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(c),this.h+=1,this};function Yf(a,c){ur(a),c=_s(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function Xf(a,c){return ur(a),c=_s(a,c),a.g.has(c)}t.forEach=function(a,c){ur(this),this.g.forEach(function(h,v){h.forEach(function(P){a.call(c,P,v,this)},this)},this)},t.na=function(){ur(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),h=[];for(let v=0;v<c.length;v++){const P=a[v];for(let O=0;O<P.length;O++)h.push(c[v])}return h},t.V=function(a){ur(this);let c=[];if(typeof a=="string")Xf(this,a)&&(c=c.concat(this.g.get(_s(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)c=c.concat(a[h])}return c},t.set=function(a,c){return ur(this),this.i=null,a=_s(this,a),Xf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function Jf(a,c,h){Yf(a,c),0<h.length&&(a.i=null,a.g.set(_s(a,c),k(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var h=0;h<c.length;h++){var v=c[h];const O=encodeURIComponent(String(v)),H=this.V(v);for(v=0;v<H.length;v++){var P=O;H[v]!==""&&(P+="="+encodeURIComponent(String(H[v]))),a.push(P)}}return this.i=a.join("&")};function _s(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function vw(a,c){c&&!a.j&&(ur(a),a.i=null,a.g.forEach(function(h,v){var P=v.toLowerCase();v!=P&&(Yf(this,v),Jf(this,P,h))},a)),a.j=c}function _w(a,c){const h=new Nt;if(l.Image){const v=new Image;v.onload=w(cr,h,"TestLoadImage: loaded",!0,c,v),v.onerror=w(cr,h,"TestLoadImage: error",!1,c,v),v.onabort=w(cr,h,"TestLoadImage: abort",!1,c,v),v.ontimeout=w(cr,h,"TestLoadImage: timeout",!1,c,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else c(!1)}function ww(a,c){const h=new Nt,v=new AbortController,P=setTimeout(()=>{v.abort(),cr(h,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:v.signal}).then(O=>{clearTimeout(P),O.ok?cr(h,"TestPingServer: ok",!0,c):cr(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(P),cr(h,"TestPingServer: error",!1,c)})}function cr(a,c,h,v,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),v(h)}catch{}}function Ew(){this.g=new Au}function xw(a,c,h){const v=h||"";try{qf(a,function(P,O){let H=P;d(P)&&(H=zr(P)),c.push(v+O+"="+encodeURIComponent(H))})}catch(P){throw c.push(v+"type="+encodeURIComponent("_badmap")),P}}function ha(a){this.l=a.Ub||null,this.j=a.eb||!1}b(ha,vs),ha.prototype.g=function(){return new fa(this.l,this.j)},ha.prototype.i=function(a){return function(){return a}}({});function fa(a,c){oe.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(fa,oe),t=fa.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,Ri(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zf(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zf(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?Ai(this):Ri(this),this.readyState==3&&Zf(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ai(this))},t.Qa=function(a){this.g&&(this.response=a,Ai(this))},t.ga=function(){this.g&&Ai(this)};function Ai(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ri(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=c.next();return a.join(`\r
`)};function Ri(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function ep(a){let c="";return M(a,function(h,v){c+=v,c+=":",c+=h,c+=`\r
`}),c}function Ou(a,c,h){e:{for(v in h){var v=!1;break e}v=!0}v||(h=ep(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Pe(a,c,h))}function Ue(a){oe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ue,oe);var Iw=/^https?$/i,Tw=["POST","PUT"];t=Ue.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,h,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ru.g(),this.v=this.o?sa(this.o):sa(Ru),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(O){tp(this,O);return}if(a=h||"",h=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var P in v)h.set(P,v[P]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const O of v.keys())h.set(O,v.get(O));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(h.keys()).find(O=>O.toLowerCase()=="content-type"),P=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Tw,c,void 0))||v||P||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,H]of h)this.g.setRequestHeader(O,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sp(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){tp(this,O)}};function tp(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,np(a),pa(a)}function np(a){a.A||(a.A=!0,ae(a,"complete"),ae(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ae(this,"complete"),ae(this,"abort"),pa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pa(this,!0)),Ue.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?rp(this):this.bb())},t.bb=function(){rp(this)};function rp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||$n(a)!=4||a.Z()!=2)){if(a.u&&$n(a)==4)hn(a.Ea,0,a);else if(ae(a,"readystatechange"),$n(a)==4){a.h=!1;try{const H=a.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var h;if(!(h=c)){var v;if(v=H===0){var P=String(a.D).match(Gf)[1]||null;!P&&l.self&&l.self.location&&(P=l.self.location.protocol.slice(0,-1)),v=!Iw.test(P?P.toLowerCase():"")}h=v}if(h)ae(a,"complete"),ae(a,"success");else{a.m=6;try{var O=2<$n(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",np(a)}}finally{pa(a)}}}}function pa(a,c){if(a.g){sp(a);const h=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||ae(a,"ready");try{h.onreadystatechange=v}catch{}}}function sp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function $n(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),ra(c)}};function ip(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Sw(a){const c={};a=(a.g&&2<=$n(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(E(a[v]))continue;var h=A(a[v]);const P=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const O=c[P]||[];c[P]=O,O.push(h)}_(c,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(a,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||c}function op(a){this.Aa=0,this.i=[],this.j=new Nt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bi("baseRetryDelayMs",5e3,a),this.cb=bi("retryDelaySeedMs",1e4,a),this.Wa=bi("forwardChannelMaxRetries",2,a),this.wa=bi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Uf(a&&a.concurrentRequestLimit),this.Da=new Ew,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=op.prototype,t.la=8,t.G=1,t.connect=function(a,c,h,v){_e(0),this.W=a,this.H=c||{},h&&v!==void 0&&(this.H.OSID=h,this.H.OAID=v),this.F=this.X,this.I=mp(this,null,this.W),ga(this)};function Lu(a){if(ap(a),a.G==3){var c=a.U++,h=Bn(a.I);if(Pe(h,"SID",a.K),Pe(h,"RID",c),Pe(h,"TYPE","terminate"),ki(a,h),c=new lr(a,a.j,c),c.L=2,c.v=da(Bn(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=c.v,h=!0),h||(c.g=gp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),la(c)}pp(a)}function ma(a){a.g&&(ju(a),a.g.cancel(),a.g=null)}function ap(a){ma(a),a.u&&(l.clearTimeout(a.u),a.u=null),ya(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function ga(a){if(!Bf(a.h)&&!a.s){a.s=!0;var c=a.Ga;me||q(),$||(me(),$=!0),K.add(c,a),a.B=0}}function Cw(a,c){return $f(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=vt(m(a.Ga,a,c),fp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const P=new lr(this,this.j,a);let O=this.o;if(this.S&&(O?(O=y(O),T(O,this.S)):O=this.S),this.m!==null||this.O||(P.H=O,O=null),this.P)e:{for(var c=0,h=0;h<this.i.length;h++){t:{var v=this.i[h];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(c+=v,4096<c){c=h;break e}if(c===4096||h===this.i.length-1){c=h+1;break e}}c=1e3}else c=1e3;c=up(this,P,c),h=Bn(this.I),Pe(h,"RID",a),Pe(h,"CVER",22),this.D&&Pe(h,"X-HTTP-Session-Id",this.D),ki(this,h),O&&(this.O?c="headers="+encodeURIComponent(String(ep(O)))+"&"+c:this.m&&Ou(h,this.m,O)),Vu(this.h,P),this.Ua&&Pe(h,"TYPE","init"),this.P?(Pe(h,"$req",c),Pe(h,"SID","null"),P.T=!0,ku(P,h,null)):ku(P,h,c),this.G=2}}else this.G==3&&(a?lp(this,a):this.i.length==0||Bf(this.h)||lp(this))};function lp(a,c){var h;c?h=c.l:h=a.U++;const v=Bn(a.I);Pe(v,"SID",a.K),Pe(v,"RID",h),Pe(v,"AID",a.T),ki(a,v),a.m&&a.o&&Ou(v,a.m,a.o),h=new lr(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),c&&(a.i=c.D.concat(a.i)),c=up(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Vu(a.h,h),ku(h,v,c)}function ki(a,c){a.H&&M(a.H,function(h,v){Pe(c,v,h)}),a.l&&qf({},function(h,v){Pe(c,v,h)})}function up(a,c,h){h=Math.min(a.i.length,h);var v=a.l?m(a.l.Na,a.l,a):null;e:{var P=a.i;let O=-1;for(;;){const H=["count="+h];O==-1?0<h?(O=P[0].g,H.push("ofs="+O)):O=0:H.push("ofs="+O);let Re=!0;for(let lt=0;lt<h;lt++){let Ee=P[lt].g;const _t=P[lt].map;if(Ee-=O,0>Ee)O=Math.max(0,P[lt].g-100),Re=!1;else try{xw(_t,H,"req"+Ee+"_")}catch{v&&v(_t)}}if(Re){v=H.join("&");break e}}}return a=a.i.splice(0,h),c.D=a,v}function cp(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;me||q(),$||(me(),$=!0),K.add(c,a),a.v=0}}function Mu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=vt(m(a.Fa,a),fp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,dp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=vt(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),ma(this),dp(this))};function ju(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function dp(a){a.g=new lr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=Bn(a.qa);Pe(c,"RID","rpc"),Pe(c,"SID",a.K),Pe(c,"AID",a.T),Pe(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&Pe(c,"TO",a.ja),Pe(c,"TYPE","xmlhttp"),ki(a,c),a.m&&a.o&&Ou(c,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=da(Bn(c)),h.m=null,h.P=!0,jf(h,a)}t.Za=function(){this.C!=null&&(this.C=null,ma(this),Mu(this),_e(19))};function ya(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function hp(a,c){var h=null;if(a.g==c){ya(a),ju(a),a.g=null;var v=2}else if(Du(a.h,c))h=c.D,Hf(a.h,c),v=1;else return;if(a.G!=0){if(c.o)if(v==1){h=c.m?c.m.length:0,c=Date.now()-c.F;var P=a.B;v=at(),ae(v,new pn(v,h)),ga(a)}else cp(a);else if(P=c.s,P==3||P==0&&0<c.X||!(v==1&&Cw(a,c)||v==2&&Mu(a)))switch(h&&0<h.length&&(c=a.h,c.i=c.i.concat(h)),P){case 1:Gr(a,5);break;case 4:Gr(a,10);break;case 3:Gr(a,6);break;default:Gr(a,2)}}}function fp(a,c){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*c}function Gr(a,c){if(a.j.info("Error code "+c),c==2){var h=m(a.fb,a),v=a.Xa;const P=!v;v=new qr(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ua(v,"https"),da(v),P?_w(v.toString(),h):ww(v.toString(),h)}else _e(2);a.G=0,a.l&&a.l.sa(c),pp(a),ap(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))};function pp(a){if(a.G=0,a.ka=[],a.l){const c=Wf(a.h);(c.length!=0||a.i.length!=0)&&(V(a.ka,c),V(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function mp(a,c,h){var v=h instanceof qr?Bn(h):new qr(h);if(v.g!="")c&&(v.g=c+"."+v.g),ca(v,v.s);else{var P=l.location;v=P.protocol,c=c?c+"."+P.hostname:P.hostname,P=+P.port;var O=new qr(null);v&&ua(O,v),c&&(O.g=c),P&&ca(O,P),h&&(O.l=h),v=O}return h=a.D,c=a.ya,h&&c&&Pe(v,h,c),Pe(v,"VER",a.la),ki(a,v),v}function gp(a,c,h){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new Ue(new ha({eb:h})):new Ue(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yp(){}t=yp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function va(){}va.prototype.g=function(a,c){return new qt(a,c)};function qt(a,c){oe.call(this),this.g=new op(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!E(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new ws(this)}b(qt,oe),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Lu(this.g)},qt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=zr(a),a=h);c.i.push(new uw(c.Ya++,a)),c.G==3&&ga(c)},qt.prototype.N=function(){this.g.l=null,delete this.j,Lu(this.g),delete this.g,qt.aa.N.call(this)};function vp(a){Ke.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const h in c){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}b(vp,Ke);function _p(){ot.call(this),this.status=1}b(_p,ot);function ws(a){this.g=a}b(ws,yp),ws.prototype.ua=function(){ae(this.g,"a")},ws.prototype.ta=function(a){ae(this.g,new vp(a))},ws.prototype.sa=function(a){ae(this.g,new _p)},ws.prototype.ra=function(){ae(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,K0=function(){return new va},G0=function(){return at()},q0=He,Nd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oa.NO_ERROR=0,oa.TIMEOUT=8,oa.HTTP_ERROR=6,rl=oa,Of.COMPLETE="complete",W0=Of,ia.EventType=Ur,Ur.OPEN="a",Ur.CLOSE="b",Ur.ERROR="c",Ur.MESSAGE="d",oe.prototype.listen=oe.prototype.K,Hi=ia,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,H0=Ue}).apply(typeof Fa<"u"?Fa:typeof self<"u"?self:typeof window<"u"?window:{});const sg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Xh("@firebase/firestore");function Fi(){return us.logLevel}function Q(t,...e){if(us.logLevel<=ve.DEBUG){const n=e.map(rf);us.debug(`Firestore (${vi}): ${t}`,...n)}}function rr(t,...e){if(us.logLevel<=ve.ERROR){const n=e.map(rf);us.error(`Firestore (${vi}): ${t}`,...n)}}function ii(t,...e){if(us.logLevel<=ve.WARN){const n=e.map(rf);us.warn(`Firestore (${vi}): ${t}`,...n)}}function rf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${vi}) INTERNAL ASSERTION FAILED: `+t;throw rr(e),new Error(e)}function Ce(t,e){t||te()}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends ps{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class a2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class l2{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new br;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new br,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new br)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new Q0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new Tt(e)}}class u2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class c2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new u2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class d2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ce(this.o===void 0);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new d2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=f2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ie(t,e){return t<e?-1:t>e?1:0}function oi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new re(e)}static min(){return new re(new tt(0,0))}static max(){return new re(new tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Do.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Do?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class $e extends Do{construct(e,n,r){return new $e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const p2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Do{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return p2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new J(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new J(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new J(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z($e.fromString(e))}static fromName(e){return new Z($e.fromString(e).popFirst(5))}static empty(){return new Z($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new $e(e.slice()))}}function m2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=re.fromTimestamp(r===1e9?new tt(n+1,0):new tt(n,r));return new Vr(s,Z.empty(),e)}function g2(t){return new Vr(t.readTime,t.key,-1)}class Vr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vr(re.min(),Z.empty(),-1)}static max(){return new Vr(re.max(),Z.empty(),-1)}}function y2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==v2)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function w2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sf.oe=-1;function yu(t){return t==null}function Fl(t){return t===0&&1/t==-1/0}function E2(t){return typeof t=="number"&&Number.isInteger(t)&&!Fl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _i(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function X0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new za(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new za(this.root,e,this.comparator,!1)}getReverseIterator(){return new za(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new za(this.root,e,this.comparator,!0)}}class za{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ct.RED,this.left=s??ct.EMPTY,this.right=i??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ct(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ct.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new og(this.data.getIterator())}getIteratorFrom(e){return new og(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class og{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new wn([])}unionWith(e){let n=new ft(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new J0("Invalid base64 string: "+i):i}}(e);return new mt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const x2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(Ce(!!t),typeof t=="string"){let e=0;const n=x2.exec(t);if(Ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cs(t){return typeof t=="string"?mt.fromBase64String(t):mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function af(t){const e=t.mapValue.fields.__previous_value__;return of(e)?af(e):e}function Vo(t){const e=Or(t.mapValue.fields.__local_write_time__.timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Oo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Oo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua={mapValue:{}};function ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?of(t)?4:S2(t)?9007199254740991:T2(t)?10:11:te()}function On(t,e){if(t===e)return!0;const n=ds(t);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vo(t).isEqual(Vo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Or(s.timestampValue),l=Or(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return cs(s.bytesValue).isEqual(cs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return We(s.geoPointValue.latitude)===We(i.geoPointValue.latitude)&&We(s.geoPointValue.longitude)===We(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return We(s.integerValue)===We(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=We(s.doubleValue),l=We(i.doubleValue);return o===l?Fl(o)===Fl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return oi(t.arrayValue.values||[],e.arrayValue.values||[],On);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(ig(o)!==ig(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!On(o[u],l[u])))return!1;return!0}(t,e);default:return te()}}function Lo(t,e){return(t.values||[]).find(n=>On(n,e))!==void 0}function ai(t,e){if(t===e)return 0;const n=ds(t),r=ds(e);if(n!==r)return Ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=We(i.integerValue||i.doubleValue),u=We(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return ag(t.timestampValue,e.timestampValue);case 4:return ag(Vo(t),Vo(e));case 5:return Ie(t.stringValue,e.stringValue);case 6:return function(i,o){const l=cs(i),u=cs(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=Ie(l[d],u[d]);if(f!==0)return f}return Ie(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ie(We(i.latitude),We(o.latitude));return l!==0?l:Ie(We(i.longitude),We(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return lg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,f;const p=i.fields||{},m=o.fields||{},w=(l=p.value)===null||l===void 0?void 0:l.arrayValue,b=(u=m.value)===null||u===void 0?void 0:u.arrayValue,k=Ie(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0);return k!==0?k:lg(w,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ua.mapValue&&o===Ua.mapValue)return 0;if(i===Ua.mapValue)return 1;if(o===Ua.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const m=Ie(u[p],f[p]);if(m!==0)return m;const w=ai(l[u[p]],d[f[p]]);if(w!==0)return w}return Ie(u.length,f.length)}(t.mapValue,e.mapValue);default:throw te()}}function ag(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=Or(t),r=Or(e),s=Ie(n.seconds,r.seconds);return s!==0?s:Ie(n.nanos,r.nanos)}function lg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ai(n[s],r[s]);if(i)return i}return Ie(n.length,r.length)}function li(t){return Pd(t)}function Pd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Pd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Pd(n.fields[o])}`;return s+"}"}(t.mapValue):te()}function Dd(t){return!!t&&"integerValue"in t}function lf(t){return!!t&&"arrayValue"in t}function ug(t){return!!t&&"nullValue"in t}function cg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sl(t){return!!t&&"mapValue"in t}function T2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function io(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _i(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=io(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=io(t.arrayValue.values[n]);return e}return Object.assign({},t)}function S2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=io(n)}setAll(e){let n=dt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=io(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());sl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return On(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];sl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){_i(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new rn(io(this.value))}}function Z0(t){const e=[];return _i(t.fields,(n,r)=>{const s=new dt([n]);if(sl(r)){const i=Z0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ct(e,0,re.min(),re.min(),re.min(),rn.empty(),0)}static newFoundDocument(e,n,r,s){return new Ct(e,1,n,re.min(),r,s,0)}static newNoDocument(e,n){return new Ct(e,2,n,re.min(),re.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new Ct(e,3,n,re.min(),re.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n){this.position=e,this.inclusive=n}}function dg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=ai(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function hg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!On(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n="asc"){this.field=e,this.dir=n}}function C2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{}class Ze extends e_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new R2(e,n,r):n==="array-contains"?new N2(e,r):n==="in"?new P2(e,r):n==="not-in"?new D2(e,r):n==="array-contains-any"?new V2(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new b2(e,r):new k2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ai(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(ai(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends e_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ln(e,n)}matches(e){return t_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function t_(t){return t.op==="and"}function n_(t){return A2(t)&&t_(t)}function A2(t){for(const e of t.filters)if(e instanceof Ln)return!1;return!0}function Vd(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+li(t.value);if(n_(t))return t.filters.map(e=>Vd(e)).join(",");{const e=t.filters.map(n=>Vd(n)).join(",");return`${t.op}(${e})`}}function r_(t,e){return t instanceof Ze?function(r,s){return s instanceof Ze&&r.op===s.op&&r.field.isEqual(s.field)&&On(r.value,s.value)}(t,e):t instanceof Ln?function(r,s){return s instanceof Ln&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&r_(o,s.filters[l]),!0):!1}(t,e):void te()}function s_(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${li(n.value)}`}(t):t instanceof Ln?function(n){return n.op.toString()+" {"+n.getFilters().map(s_).join(" ,")+"}"}(t):"Filter"}class R2 extends Ze{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class b2 extends Ze{constructor(e,n){super(e,"in",n),this.keys=i_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class k2 extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=i_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function i_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class N2 extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lf(n)&&Lo(n.arrayValue,this.value)}}class P2 extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lo(this.value.arrayValue,n)}}class D2 extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Lo(this.value.arrayValue,n)}}class V2 extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function fg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new O2(t,e,n,r,s,i,o)}function uf(t){const e=se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Vd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),yu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>li(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>li(r)).join(",")),e.ue=n}return e.ue}function cf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!C2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!r_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hg(t.startAt,e.startAt)&&hg(t.endAt,e.endAt)}function Od(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function L2(t,e,n,r,s,i,o,l){return new vu(t,e,n,r,s,i,o,l)}function df(t){return new vu(t)}function pg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function M2(t){return t.collectionGroup!==null}function oo(t){const e=se(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ft(dt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ul(i,r))}),n.has(dt.keyField().canonicalString())||e.ce.push(new Ul(dt.keyField(),r))}return e.ce}function Pn(t){const e=se(t);return e.le||(e.le=j2(e,oo(t))),e.le}function j2(t,e){if(t.limitType==="F")return fg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ul(s.field,i)});const n=t.endAt?new zl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zl(t.startAt.position,t.startAt.inclusive):null;return fg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ld(t,e,n){return new vu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _u(t,e){return cf(Pn(t),Pn(e))&&t.limitType===e.limitType}function o_(t){return`${uf(Pn(t))}|lt:${t.limitType}`}function Is(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>s_(s)).join(", ")}]`),yu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>li(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>li(s)).join(",")),`Target(${r})`}(Pn(t))}; limitType=${t.limitType})`}function wu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of oo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=dg(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,oo(r),s)||r.endAt&&!function(o,l,u){const d=dg(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,oo(r),s))}(t,e)}function F2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function a_(t){return(e,n)=>{let r=!1;for(const s of oo(t)){const i=z2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function z2(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?ai(u,d):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_i(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return X0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=new Fe(Z.comparator);function sr(){return U2}const l_=new Fe(Z.comparator);function Wi(...t){let e=l_;for(const n of t)e=e.insert(n.key,n);return e}function u_(t){let e=l_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function es(){return ao()}function c_(){return ao()}function ao(){return new wi(t=>t.toString(),(t,e)=>t.isEqual(e))}const B2=new Fe(Z.comparator),$2=new ft(Z.comparator);function pe(...t){let e=$2;for(const n of t)e=e.add(n);return e}const H2=new ft(Ie);function W2(){return H2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fl(e)?"-0":e}}function d_(t){return{integerValue:""+t}}function q2(t,e){return E2(e)?d_(e):hf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(){this._=void 0}}function G2(t,e,n){return t instanceof Bl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&of(i)&&(i=af(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Mo?f_(t,e):t instanceof jo?p_(t,e):function(s,i){const o=h_(s,i),l=mg(o)+mg(s.Pe);return Dd(o)&&Dd(s.Pe)?d_(l):hf(s.serializer,l)}(t,e)}function K2(t,e,n){return t instanceof Mo?f_(t,e):t instanceof jo?p_(t,e):n}function h_(t,e){return t instanceof $l?function(r){return Dd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Bl extends Eu{}class Mo extends Eu{constructor(e){super(),this.elements=e}}function f_(t,e){const n=m_(e);for(const r of t.elements)n.some(s=>On(s,r))||n.push(r);return{arrayValue:{values:n}}}class jo extends Eu{constructor(e){super(),this.elements=e}}function p_(t,e){let n=m_(e);for(const r of t.elements)n=n.filter(s=>!On(s,r));return{arrayValue:{values:n}}}class $l extends Eu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function mg(t){return We(t.integerValue||t.doubleValue)}function m_(t){return lf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Q2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Mo&&s instanceof Mo||r instanceof jo&&s instanceof jo?oi(r.elements,s.elements,On):r instanceof $l&&s instanceof $l?On(r.Pe,s.Pe):r instanceof Bl&&s instanceof Bl}(t.transform,e.transform)}class Y2{constructor(e,n){this.version=e,this.transformResults=n}}class Xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function il(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xu{}function g_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new v_(t.key,Xn.none()):new Xo(t.key,t.data,Xn.none());{const n=t.data,r=rn.empty();let s=new ft(dt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ms(t.key,r,new wn(s.toArray()),Xn.none())}}function X2(t,e,n){t instanceof Xo?function(s,i,o){const l=s.value.clone(),u=yg(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ms?function(s,i,o){if(!il(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=yg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(y_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function lo(t,e,n,r){return t instanceof Xo?function(i,o,l,u){if(!il(i.precondition,o))return l;const d=i.value.clone(),f=vg(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof ms?function(i,o,l,u){if(!il(i.precondition,o))return l;const d=vg(i.fieldTransforms,u,o),f=o.data;return f.setAll(y_(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return il(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function J2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=h_(r.transform,s||null);i!=null&&(n===null&&(n=rn.empty()),n.set(r.field,i))}return n||null}function gg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&oi(r,s,(i,o)=>Q2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xo extends xu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ms extends xu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function y_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function yg(t,e,n){const r=new Map;Ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,K2(o,l,n[s]))}return r}function vg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,G2(i,o,e))}return r}class v_ extends xu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z2 extends xu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&X2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=c_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=g_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&oi(this.mutations,e.mutations,(n,r)=>gg(n,r))&&oi(this.baseMutations,e.baseMutations,(n,r)=>gg(n,r))}}class ff{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ce(e.mutations.length===r.length);let s=function(){return B2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ff(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,ye;function rC(t){switch(t){default:return te();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function __(t){if(t===void 0)return rr("GRPC error has no .code"),U.UNKNOWN;switch(t){case Qe.OK:return U.OK;case Qe.CANCELLED:return U.CANCELLED;case Qe.UNKNOWN:return U.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return U.INTERNAL;case Qe.UNAVAILABLE:return U.UNAVAILABLE;case Qe.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Qe.NOT_FOUND:return U.NOT_FOUND;case Qe.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Qe.ABORTED:return U.ABORTED;case Qe.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Qe.DATA_LOSS:return U.DATA_LOSS;default:return te()}}(ye=Qe||(Qe={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=new rs([4294967295,4294967295],0);function _g(t){const e=sC().encode(t),n=new $0;return n.update(e),new Uint8Array(n.digest())}function wg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new rs([n,r],0),new rs([s,i],0)]}class pf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qi(`Invalid padding: ${n}`);if(r<0)throw new qi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=rs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(rs.fromNumber(r)));return s.compare(iC)===1&&(s=new rs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=_g(e),[r,s]=wg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new pf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=_g(e),[r,s]=wg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Jo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Iu(re.min(),s,new Fe(Ie),sr(),pe())}}class Jo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Jo(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class w_{constructor(e,n){this.targetId=e,this.me=n}}class E_{constructor(e,n,r=mt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Eg{constructor(){this.fe=0,this.ge=Ig(),this.pe=mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te()}}),new Jo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Ig()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oC{constructor(e){this.Le=e,this.Be=new Map,this.ke=sr(),this.qe=xg(),this.Qe=new Fe(Ie)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Od(i))if(r===0){const o=new Z(i.path);this.Ue(n,o,Ct.newNoDocument(o,re.min()))}else Ce(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=cs(r).toUint8Array()}catch(u){if(u instanceof J0)return ii("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new pf(o,s,i)}catch(u){return ii(u instanceof qi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Od(l.target)){const u=new Z(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Ct.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=pe();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Iu(e,n,this.Qe,this.ke,r);return this.ke=sr(),this.qe=xg(),this.Qe=new Fe(Ie),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Eg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ft(Ie),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Eg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function xg(){return new Fe(Z.comparator)}function Ig(){return new Fe(Z.comparator)}const aC={asc:"ASCENDING",desc:"DESCENDING"},lC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uC={and:"AND",or:"OR"};class cC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Md(t,e){return t.useProto3Json||yu(e)?e:{value:e}}function Hl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function x_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dC(t,e){return Hl(t,e.toTimestamp())}function Dn(t){return Ce(!!t),re.fromTimestamp(function(n){const r=Or(n);return new tt(r.seconds,r.nanos)}(t))}function mf(t,e){return jd(t,e).canonicalString()}function jd(t,e){const n=function(s){return new $e(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function I_(t){const e=$e.fromString(t);return Ce(R_(e)),e}function Fd(t,e){return mf(t.databaseId,e.path)}function Ic(t,e){const n=I_(e);if(n.get(1)!==t.databaseId.projectId)throw new J(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(S_(n))}function T_(t,e){return mf(t.databaseId,e)}function hC(t){const e=I_(t);return e.length===4?$e.emptyPath():S_(e)}function zd(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function S_(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Tg(t,e,n){return{name:Fd(t,e),fields:n.value.mapValue.fields}}function fC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(Ce(f===void 0||typeof f=="string"),mt.fromBase64String(f||"")):(Ce(f===void 0||f instanceof Buffer||f instanceof Uint8Array),mt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?U.UNKNOWN:__(d.code);return new J(f,d.message||"")}(o);n=new E_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ic(t,r.document.name),i=Dn(r.document.updateTime),o=r.document.createTime?Dn(r.document.createTime):re.min(),l=new rn({mapValue:{fields:r.document.fields}}),u=Ct.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new ol(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ic(t,r.document),i=r.readTime?Dn(r.readTime):re.min(),o=Ct.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ol([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ic(t,r.document),i=r.removedTargetIds||[];n=new ol([],i,s,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new nC(s,i),l=r.targetId;n=new w_(l,o)}}return n}function pC(t,e){let n;if(e instanceof Xo)n={update:Tg(t,e.key,e.value)};else if(e instanceof v_)n={delete:Fd(t,e.key)};else if(e instanceof ms)n={update:Tg(t,e.key,e.data),updateMask:IC(e.fieldMask)};else{if(!(e instanceof Z2))return te();n={verify:Fd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Bl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Mo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof jo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof $l)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:dC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te()}(t,e.precondition)),n}function mC(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Dn(s.updateTime):Dn(i);return o.isEqual(re.min())&&(o=Dn(i)),new Y2(o,s.transformResults||[])}(n,e))):[]}function gC(t,e){return{documents:[T_(t,e.path)]}}function yC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=T_(t,s);const i=function(d){if(d.length!==0)return A_(Ln.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(m){return{field:Ts(m.field),direction:wC(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Md(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function vC(t){let e=hC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ce(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const m=C_(p);return m instanceof Ln&&n_(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(b){return new Ul(Ss(b.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,yu(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,w=p.values||[];return new zl(w,m)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const m=!p.before,w=p.values||[];return new zl(w,m)}(n.endAt)),L2(e,s,o,i,l,"F",u,d)}function _C(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function C_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ss(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ss(n.unaryFilter.field);return Ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ss(n.unaryFilter.field);return Ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ss(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(Ss(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ln.create(n.compositeFilter.filters.map(r=>C_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function wC(t){return aC[t]}function EC(t){return lC[t]}function xC(t){return uC[t]}function Ts(t){return{fieldPath:t.canonicalString()}}function Ss(t){return dt.fromServerFormat(t.fieldPath)}function A_(t){return t instanceof Ze?function(n){if(n.op==="=="){if(cg(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NAN"}};if(ug(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cg(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NAN"}};if(ug(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(n.field),op:EC(n.op),value:n.value}}}(t):t instanceof Ln?function(n){const r=n.getFilters().map(s=>A_(s));return r.length===1?r[0]:{compositeFilter:{op:xC(n.op),filters:r}}}(t):te()}function IC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function R_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n,r,s,i=re.min(),o=re.min(),l=mt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new _r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.ct=e}}function SC(t){const e=vC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ld(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.un=new AC}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Vr.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Vr.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class AC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ft($e.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ft($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ui(0)}static kn(){return new ui(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.changes=new wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&lo(r.mutation,s,wn.empty(),tt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=es();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Wi();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=es();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=sr();const o=ao(),l=function(){return ao()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof ms)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),lo(f.mutation,d,f.mutation.getFieldMask(),tt.now())):o.set(d.key,wn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return l.set(d,new bC(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ao();let s=new Fe((o,l)=>o-l),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||wn.empty();f=l.applyToLocalView(d,f),r.set(u,f);const p=(s.get(l.batchId)||pe()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,p=c_();f.forEach(m=>{if(!i.has(m)){const w=g_(n.get(m),r.get(m));w!==null&&p.set(m,w),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):M2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(es());let l=-1,u=i;return o.next(d=>z.forEach(d,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?z.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,pe())).next(f=>({batchId:l,changes:u_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let s=Wi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Wi();return this.indexManager.getCollectionParents(e,i).next(l=>z.forEach(l,u=>{const d=function(p,m){return new vu(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Ct.newInvalidDocument(f)))});let l=Wi();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&lo(f.mutation,d,wn.empty(),tt.now()),wu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Dn(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:SC(s.bundledQuery),readTime:Dn(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this.overlays=new Fe(Z.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=es();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=es(),i=n.length+1,o=new Z(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Fe((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=es(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=es(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return z.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tC(n,r));let i=this.Ir.get(n);i===void 0&&(i=pe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this.Tr=new ft(nt.Er),this.dr=new ft(nt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new nt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Z(new $e([])),r=new nt(n,e),s=new nt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Z(new $e([])),r=new nt(n,e),s=new nt(n,e+1);let i=pe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new nt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Z.comparator(e.key,n.key)||Ie(e.wr,n.wr)}static Ar(e,n){return Ie(e.wr,n.wr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ft(nt.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new eC(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new nt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),s=new nt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(Ie);return n.forEach(s=>{const i=new nt(s,0),o=new nt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const o=new nt(new Z(i),0);let l=new ft(Ie);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),z.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,s=>{const i=new nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new nt(n,0),s=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.Mr=e,this.docs=function(){return new Fe(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Ct.newInvalidDocument(n))}getEntries(e,n){let r=sr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ct.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=sr();const o=n.path,l=new Z(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||y2(g2(f),r)<=0||(s.has(f.key)||wu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new LC(this)}getSize(e){return z.resolve(this.size)}}class LC extends RC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.persistence=e,this.Nr=new wi(n=>uf(n),cf),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new gf,this.targetCount=0,this.kr=ui.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ui(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new sf(0),this.Kr=!1,this.Kr=!0,this.$r=new DC,this.referenceDelegate=e(this),this.Ur=new MC(this),this.indexManager=new CC,this.remoteDocumentCache=function(s){return new OC(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new TC(n),this.Gr=new NC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new VC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new FC(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class FC extends _2{constructor(e){super(),this.currentSequenceNumber=e}}class yf{constructor(e){this.persistence=e,this.Jr=new gf,this.Yr=null}static Zr(e){return new yf(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const s=Z.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new vf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return kT()?8:w2(AT())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new zC;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Fi()<=ve.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Fi()<=ve.DEBUG&&Q("QueryEngine","Query:",Is(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Fi()<=ve.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):z.resolve())}Yi(e,n){if(pg(n))return z.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ld(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=pe(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,Ld(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return pg(n)||s.isEqual(re.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?z.resolve(null):(Fi()<=ve.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Is(n)),this.rs(e,o,n,m2(s,-1)).next(l=>l))})}ts(e,n){let r=new ft(a_(e));return n.forEach((s,i)=>{wu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Fi()<=ve.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Is(n)),this.Ji.getDocumentsMatchingQuery(e,n,Vr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Fe(Ie),this._s=new wi(i=>uf(i),cf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function $C(t,e,n,r){return new BC(t,e,n,r)}async function b_(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=pe();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function HC(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const p=d.batch,m=p.keys();let w=z.resolve();return m.forEach(b=>{w=w.next(()=>f.getEntry(u,b)).next(k=>{const V=d.docVersions.get(b);Ce(V!==null),k.version.compareTo(V)<0&&(p.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),f.addEntry(k)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=pe();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function k_(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function WC(t,e){const n=se(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const m=s.get(p);if(!m)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,p)));let w=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(mt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(p,w),function(k,V,S){return k.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,w,f)&&l.push(n.Ur.updateTargetData(i,w))});let u=sr(),d=pe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(qC(i,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(re.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return z.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function qC(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=sr();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):Q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function GC(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KC(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new _r(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ud(t,e,n){const r=se(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Yo(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Sg(t,e,n){const r=se(t);let s=re.min(),i=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const p=se(u),m=p._s.get(f);return m!==void 0?z.resolve(p.os.get(m)):p.Ur.getTargetData(d,f)}(r,o,Pn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:re.min(),n?i:pe())).next(l=>(QC(r,F2(e),l),{documents:l,Ts:i})))}function QC(t,e,n){let r=t.us.get(e)||re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Cg{constructor(){this.activeTargetIds=W2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YC{constructor(){this.so=new Cg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Cg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba=null;function Tc(){return Ba===null?Ba=function(){return 268435456+Math.round(2147483648*Math.random())}():Ba++,"0x"+Ba.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class eA extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Tc(),u=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(f=>(Q("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw ii("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=JC[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Tc();return new Promise((o,l)=>{const u=new H0;u.setWithCredentials(!0),u.listenOnce(W0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case rl.NO_ERROR:const f=u.getResponseJson();Q(It,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case rl.TIMEOUT:Q(It,`RPC '${e}' ${i} timed out`),l(new J(U.DEADLINE_EXCEEDED,"Request time out"));break;case rl.HTTP_ERROR:const p=u.getStatus();if(Q(It,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m==null?void 0:m.error;if(w&&w.status&&w.message){const b=function(V){const S=V.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(S)>=0?S:U.UNKNOWN}(w.status);l(new J(b,w.message))}else l(new J(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new J(U.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{Q(It,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);Q(It,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Tc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=K0(),l=G0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");Q(It,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=o.createWebChannel(f,u);let m=!1,w=!1;const b=new ZC({Io:V=>{w?Q(It,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(m||(Q(It,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),Q(It,`RPC '${e}' stream ${s} sending:`,V),p.send(V))},To:()=>p.close()}),k=(V,S,E)=>{V.listen(S,C=>{try{E(C)}catch(D){setTimeout(()=>{throw D},0)}})};return k(p,Hi.EventType.OPEN,()=>{w||(Q(It,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),k(p,Hi.EventType.CLOSE,()=>{w||(w=!0,Q(It,`RPC '${e}' stream ${s} transport closed`),b.So())}),k(p,Hi.EventType.ERROR,V=>{w||(w=!0,ii(It,`RPC '${e}' stream ${s} transport errored:`,V),b.So(new J(U.UNAVAILABLE,"The operation could not be completed")))}),k(p,Hi.EventType.MESSAGE,V=>{var S;if(!w){const E=V.data[0];Ce(!!E);const C=E,D=C.error||((S=C[0])===null||S===void 0?void 0:S.error);if(D){Q(It,`RPC '${e}' stream ${s} received error:`,D);const L=D.status;let M=function(x){const T=Qe[x];if(T!==void 0)return __(T)}(L),_=D.message;M===void 0&&(M=U.INTERNAL,_="Unknown error status: "+L+" with message "+D.message),w=!0,b.So(new J(M,_)),p.close()}else Q(It,`RPC '${e}' stream ${s} received:`,E),b.bo(E)}}),k(l,q0.STAT_EVENT,V=>{V.stat===Nd.PROXY?Q(It,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===Nd.NOPROXY&&Q(It,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Sc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t){return new cC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new N_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new J(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tA extends P_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=fC(this.serializer,e),r=function(i){if(!("targetChange"in i))return re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Dn(o.readTime):re.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=zd(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Od(u)?{documents:gC(i,u)}:{query:yC(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=x_(i,o.resumeToken);const d=Md(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(re.min())>0){l.readTime=Hl(i,o.snapshotVersion.toTimestamp());const d=Md(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=_C(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=zd(this.serializer),n.removeTarget=e,this.a_(n)}}class nA extends P_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=mC(e.writeResults,e.commitTime),r=Dn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=zd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>pC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new J(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,jd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,jd(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class sA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rr(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{gs(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=se(u);d.L_.add(4),await Zo(d),d.q_.set("Unknown"),d.L_.delete(4),await Su(d)}(this))})}),this.q_=new sA(r,s)}}async function Su(t){if(gs(t))for(const e of t.B_)await e(!0)}async function Zo(t){for(const e of t.B_)await e(!1)}function D_(t,e){const n=se(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xf(n)?Ef(n):Ei(n).r_()&&wf(n,e))}function _f(t,e){const n=se(t),r=Ei(n);n.N_.delete(e),r.r_()&&V_(n,e),n.N_.size===0&&(r.r_()?r.o_():gs(n)&&n.q_.set("Unknown"))}function wf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ei(t).A_(e)}function V_(t,e){t.Q_.xe(e),Ei(t).R_(e)}function Ef(t){t.Q_=new oC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ei(t).start(),t.q_.v_()}function xf(t){return gs(t)&&!Ei(t).n_()&&t.N_.size>0}function gs(t){return se(t).L_.size===0}function O_(t){t.Q_=void 0}async function oA(t){t.q_.set("Online")}async function aA(t){t.N_.forEach((e,n)=>{wf(t,e)})}async function lA(t,e){O_(t),xf(t)?(t.q_.M_(e),Ef(t)):t.q_.set("Unknown")}async function uA(t,e,n){if(t.q_.set("Online"),e instanceof E_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wl(t,r)}else if(e instanceof ol?t.Q_.Ke(e):e instanceof w_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(re.min()))try{const r=await k_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(mt.EMPTY_BYTE_STRING,f.snapshotVersion)),V_(i,u);const p=new _r(f.target,u,d,f.sequenceNumber);wf(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await Wl(t,r)}}async function Wl(t,e,n){if(!Yo(e))throw e;t.L_.add(1),await Zo(t),t.q_.set("Offline"),n||(n=()=>k_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Su(t)})}function L_(t,e){return e().catch(n=>Wl(t,n,e))}async function Cu(t){const e=se(t),n=Lr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;cA(e);)try{const s=await GC(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,dA(e,s)}catch(s){await Wl(e,s)}M_(e)&&j_(e)}function cA(t){return gs(t)&&t.O_.length<10}function dA(t,e){t.O_.push(e);const n=Lr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function M_(t){return gs(t)&&!Lr(t).n_()&&t.O_.length>0}function j_(t){Lr(t).start()}async function hA(t){Lr(t).p_()}async function fA(t){const e=Lr(t);for(const n of t.O_)e.m_(n.mutations)}async function pA(t,e,n){const r=t.O_.shift(),s=ff.from(r,e,n);await L_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Cu(t)}async function mA(t,e){e&&Lr(t).V_&&await async function(r,s){if(function(o){return rC(o)&&o!==U.ABORTED}(s.code)){const i=r.O_.shift();Lr(r).s_(),await L_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Cu(r)}}(t,e),M_(t)&&j_(t)}async function Rg(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=gs(n);n.L_.add(3),await Zo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Su(n)}async function gA(t,e){const n=se(t);e?(n.L_.delete(2),await Su(n)):e||(n.L_.add(2),await Zo(n),n.q_.set("Unknown"))}function Ei(t){return t.K_||(t.K_=function(n,r,s){const i=se(n);return i.w_(),new tA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:oA.bind(null,t),Ro:aA.bind(null,t),mo:lA.bind(null,t),d_:uA.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xf(t)?Ef(t):t.q_.set("Unknown")):(await t.K_.stop(),O_(t))})),t.K_}function Lr(t){return t.U_||(t.U_=function(n,r,s){const i=se(n);return i.w_(),new nA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:hA.bind(null,t),mo:mA.bind(null,t),f_:fA.bind(null,t),g_:pA.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Cu(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new If(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tf(t,e){if(rr("AsyncQueue",`${e}: ${t}`),Yo(t))return new J(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=Wi(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new Gs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Gs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Gs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(){this.W_=new Fe(Z.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ci{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ci(e,n,Gs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class vA{constructor(){this.queries=kg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=se(n),i=s.queries;s.queries=kg(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new J(U.ABORTED,"Firestore shutting down"))}}function kg(){return new wi(t=>o_(t),_u)}async function _A(t,e){const n=se(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new yA,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Tf(o,`Initialization of query '${Is(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Sf(n)}async function wA(t,e){const n=se(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function EA(t,e){const n=se(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Sf(n)}function xA(t,e,n){const r=se(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Sf(t){t.Y_.forEach(e=>{e.next()})}var Bd,Ng;(Ng=Bd||(Bd={})).ea="default",Ng.Cache="cache";class IA{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ci(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ci.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Bd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e){this.key=e}}class z_{constructor(e){this.key=e}}class TA{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=a_(e),this.Ra=new Gs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new bg,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const m=s.get(f),w=wu(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let V=!1;m&&w?m.data.isEqual(w.data)?b!==k&&(r.track({type:3,doc:w}),V=!0):this.ga(m,w)||(r.track({type:2,doc:w}),V=!0,(u&&this.Aa(w,u)>0||d&&this.Aa(w,d)<0)&&(l=!0)):!m&&w?(r.track({type:0,doc:w}),V=!0):m&&!w&&(r.track({type:1,doc:m}),V=!0,(u||d)&&(l=!0)),V&&(w?(o=o.add(w),i=k?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(w,b){const k=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return k(w)-k(b)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new ci(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new bg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new z_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new F_(r))}),n}ba(e){this.Ta=e.Ts,this.da=pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ci.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class SA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class CA{constructor(e){this.key=e,this.va=!1}}class AA{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new wi(l=>o_(l),_u),this.Ma=new Map,this.xa=new Set,this.Oa=new Fe(Z.comparator),this.Na=new Map,this.La=new gf,this.Ba={},this.ka=new Map,this.qa=ui.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function RA(t,e,n=!0){const r=q_(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await U_(r,e,n,!0),s}async function bA(t,e){const n=q_(t);await U_(n,e,!0,!1)}async function U_(t,e,n,r){const s=await KC(t.localStore,Pn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await kA(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&D_(t.remoteStore,s),l}async function kA(t,e,n,r,s){t.Ka=(p,m,w)=>async function(k,V,S,E){let C=V.view.ma(S);C.ns&&(C=await Sg(k.localStore,V.query,!1).then(({documents:_})=>V.view.ma(_,C)));const D=E&&E.targetChanges.get(V.targetId),L=E&&E.targetMismatches.get(V.targetId)!=null,M=V.view.applyChanges(C,k.isPrimaryClient,D,L);return Dg(k,V.targetId,M.wa),M.snapshot}(t,p,m,w);const i=await Sg(t.localStore,e,!0),o=new TA(e,i.Ts),l=o.ma(i.documents),u=Jo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Dg(t,n,d.wa);const f=new SA(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function NA(t,e,n){const r=se(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!_u(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ud(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&_f(r.remoteStore,s.targetId),$d(r,s.targetId)}).catch(Qo)):($d(r,s.targetId),await Ud(r.localStore,s.targetId,!0))}async function PA(t,e){const n=se(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_f(n.remoteStore,r.targetId))}async function DA(t,e,n){const r=zA(t);try{const s=await function(o,l){const u=se(o),d=tt.now(),f=l.reduce((w,b)=>w.add(b.key),pe());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let b=sr(),k=pe();return u.cs.getEntries(w,f).next(V=>{b=V,b.forEach((S,E)=>{E.isValidDocument()||(k=k.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,b)).next(V=>{p=V;const S=[];for(const E of l){const C=J2(E,p.get(E.key).overlayedDocument);C!=null&&S.push(new ms(E.key,C,Z0(C.value.mapValue),Xn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,S,l)}).next(V=>{m=V;const S=V.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(w,V.batchId,S)})}).then(()=>({batchId:m.batchId,changes:u_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Fe(Ie)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await ea(r,s.changes),await Cu(r.remoteStore)}catch(s){const i=Tf(s,"Failed to persist write");n.reject(i)}}async function B_(t,e){const n=se(t);try{const r=await WC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ce(o.va):s.removedDocuments.size>0&&(Ce(o.va),o.va=!1))}),await ea(n,r,e)}catch(r){await Qo(r)}}function Pg(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=se(o);u.onlineState=l;let d=!1;u.queries.forEach((f,p)=>{for(const m of p.j_)m.Z_(l)&&(d=!0)}),d&&Sf(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VA(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Fe(Z.comparator);o=o.insert(i,Ct.newNoDocument(i,re.min()));const l=pe().add(i),u=new Iu(re.min(),new Map,new Fe(Ie),o,l);await B_(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Cf(r)}else await Ud(r.localStore,e,!1).then(()=>$d(r,e,n)).catch(Qo)}async function OA(t,e){const n=se(t),r=e.batch.batchId;try{const s=await HC(n.localStore,e);H_(n,r,null),$_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ea(n,s)}catch(s){await Qo(s)}}async function LA(t,e,n){const r=se(t);try{const s=await function(o,l){const u=se(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(Ce(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);H_(r,e,n),$_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ea(r,s)}catch(s){await Qo(s)}}function $_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function H_(t,e,n){const r=se(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function $d(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||W_(t,r)})}function W_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(_f(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Cf(t))}function Dg(t,e,n){for(const r of n)r instanceof F_?(t.La.addReference(r.key,e),MA(t,r)):r instanceof z_?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||W_(t,r.key)):te()}function MA(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),Cf(t))}function Cf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Z($e.fromString(e)),r=t.qa.next();t.Na.set(r,new CA(n)),t.Oa=t.Oa.insert(n,r),D_(t.remoteStore,new _r(Pn(df(n.path)),r,"TargetPurposeLimboResolution",sf.oe))}}async function ea(t,e,n){const r=se(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=vf.Wi(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=se(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>z.forEach(d,m=>z.forEach(m.$i,w=>f.persistence.referenceDelegate.addReference(p,m.targetId,w)).next(()=>z.forEach(m.Ui,w=>f.persistence.referenceDelegate.removeReference(p,m.targetId,w)))))}catch(p){if(!Yo(p))throw p;Q("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const w=f.os.get(m),b=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(b);f.os=f.os.insert(m,k)}}}(r.localStore,i))}async function jA(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await b_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new J(U.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ea(n,r.hs)}}function FA(t,e){const n=se(t),r=n.Na.get(e);if(r&&r.va)return pe().add(r.key);{let s=pe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function q_(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=B_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VA.bind(null,e),e.Ca.d_=EA.bind(null,e.eventManager),e.Ca.$a=xA.bind(null,e.eventManager),e}function zA(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LA.bind(null,e),e}class ql{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return $C(this.persistence,new UC,e.initialUser,this.serializer)}Ga(e){return new jC(yf.Zr,this.serializer)}Wa(e){return new YC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ql.provider={build:()=>new ql};class Hd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Pg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jA.bind(null,this.syncEngine),await gA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vA}()}createDatastore(e){const n=Tu(e.databaseInfo.databaseId),r=function(i){return new eA(i)}(e.databaseInfo);return function(i,o,l,u){return new rA(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new iA(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Pg(this.syncEngine,n,0),function(){return Ag.D()?new Ag:new XC}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,f){const p=new AA(s,i,o,l,u,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=se(s);Q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Zo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Hd.provider={build:()=>new Hd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Tt.UNAUTHENTICATED,this.clientId=Y0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Tf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cc(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await b_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Vg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $A(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Rg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Rg(e.remoteStore,s)),t._onlineComponents=e}async function $A(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Cc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ii("Error using user provided cache. Falling back to memory cache: "+n),await Cc(t,new ql)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Cc(t,new ql);return t._offlineComponents}async function G_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await Vg(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await Vg(t,new Hd))),t._onlineComponents}function HA(t){return G_(t).then(e=>e.syncEngine)}async function WA(t){const e=await G_(t),n=e.eventManager;return n.onListen=RA.bind(null,e.syncEngine),n.onUnlisten=NA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PA.bind(null,e.syncEngine),n}function qA(t,e,n={}){const r=new br;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new UA({next:m=>{f.Za(),o.enqueueAndForget(()=>wA(i,p));const w=m.docs.has(l);!w&&m.fromCache?d.reject(new J(U.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&m.fromCache&&u&&u.source==="server"?d.reject(new J(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new IA(df(l.path),f,{includeMetadataChanges:!0,_a:!0});return _A(i,p)}(await WA(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t,e,n){if(!n)throw new J(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KA(t,e,n,r){if(e===!0&&r===!0)throw new J(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Lg(t){if(!Z.isDocumentKey(t))throw new J(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Af(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function Fo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Af(t);throw new J(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new J(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new J(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new J(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new o2;switch(r.type){case"firstParty":return new c2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Og.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Og.delete(n),r.terminate())}(this),Promise.resolve()}}function QA(t,e,n,r={}){var s;const i=(t=Fo(t,Rf))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Tt.MOCK_USER;else{l=CT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new J(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Tt(d)}t._authCredentials=new a2(new Q0(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bf(this.firestore,e,this._query)}}class ln{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}}class zo extends bf{constructor(e,n,r){super(e,n,df(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new Z(e))}withConverter(e){return new zo(this.firestore,e,this._path)}}function Gl(t,e,...n){if(t=Ml(t),arguments.length===1&&(e=Y0.newId()),GA("doc","path",e),t instanceof Rf){const r=$e.fromString(e,...n);return Lg(r),new ln(t,null,new Z(r))}{if(!(t instanceof ln||t instanceof zo))throw new J(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return Lg(r),new ln(t.firestore,t instanceof zo?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new N_(this,"async_queue_retry"),this.Vu=()=>{const r=Sc();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Sc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Sc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new br;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yo(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw rr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=If.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class kf extends Rf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new jg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jg(e),this._firestoreClient=void 0,await e}}}function YA(t,e){const n=typeof t=="object"?t:L0(),r=typeof t=="string"?t:"(default)",s=Zh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=TT("firestore");i&&QA(s,...i)}return s}function Q_(t){if(t._terminated)throw new J(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XA(t),t._firestoreClient}function XA(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,f){return new I2(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,K_(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new BA(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new di(mt.fromBase64String(e))}catch(n){throw new J(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new di(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=/^__.*__$/;class ZA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xo(e,this.data,n,this.fieldTransforms)}}function X_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class Vf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Vf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Kl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(X_(this.Cu)&&JA.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class eR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tu(e)}Qu(e,n,r,s=!1){return new Vf({Cu:e,methodName:n,qu:r,path:dt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tR(t){const e=t._freezeSettings(),n=Tu(t._databaseId);return new eR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nR(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);tw("Data must be an object, but it was:",o,r);const l=Z_(r,o);let u,d;if(i.merge)u=new wn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const m=rR(e,p,n);if(!o.contains(m))throw new J(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);iR(f,m)||f.push(m)}u=new wn(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new ZA(new rn(l),u,d)}function J_(t,e){if(ew(t=Ml(t)))return tw("Unsupported field value:",e,t),Z_(t,e);if(t instanceof Y_)return function(r,s){if(!X_(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=J_(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ml(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return q2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=tt.fromDate(r);return{timestampValue:Hl(s.serializer,i)}}if(r instanceof tt){const i=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hl(s.serializer,i)}}if(r instanceof Pf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof di)return{bytesValue:x_(s.serializer,r._byteString)};if(r instanceof ln){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:mf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Df)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return hf(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Af(r)}`)}(t,e)}function Z_(t,e){const n={};return X0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_i(t,(r,s)=>{const i=J_(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ew(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof Pf||t instanceof di||t instanceof ln||t instanceof Y_||t instanceof Df)}function tw(t,e,n){if(!ew(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Af(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function rR(t,e,n){if((e=Ml(e))instanceof Nf)return e._internalPath;if(typeof e=="string")return nw(t,e);throw Kl("Field path arguments must be of type string or ",t,!1,void 0,n)}const sR=new RegExp("[~\\*/\\[\\]]");function nw(t,e,n){if(e.search(sR)>=0)throw Kl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Nf(...e.split("."))._internalPath}catch{throw Kl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new J(U.INVALID_ARGUMENT,l+t+u)}function iR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oR extends rw{data(){return super.data()}}function sw(t,e){return typeof e=="string"?nw(t,e):e instanceof Nf?e._internalPath:e._delegate._internalPath}class aR{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _i(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>We(o.doubleValue));return new Df(i)}convertGeoPoint(e){return new Pf(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=af(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vo(e));default:return null}}convertTimestamp(e){const n=Or(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=$e.fromString(e);Ce(R_(r));const s=new Oo(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(n)||rr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iw extends rw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(sw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class cR extends iw{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t){t=Fo(t,ln);const e=Fo(t.firestore,kf);return qA(Q_(e),t._key).then(n=>fR(e,t,n))}class dR extends aR{constructor(e){super(),this.firestore=e}convertBytes(e){return new di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,n)}}function ow(t,e,n){t=Fo(t,ln);const r=Fo(t.firestore,kf),s=lR(t.converter,e);return hR(r,[nR(tR(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Xn.none())])}function hR(t,e){return function(r,s){const i=new br;return r.asyncQueue.enqueueAndForget(async()=>DA(await HA(r),s,i)),i.promise}(Q_(t),e)}function fR(t,e,n){const r=n.docs.get(e._key),s=new dR(t);return new iw(t,s,e._key,r,new uR(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){vi=s})(ef),si(new ti("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new kf(new l2(r.getProvider("auth-internal")),new h2(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new J(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oo(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Yn(sg,"4.7.3",e),Yn(sg,"4.7.3","esm2017")})();const pR={apiKey:"AIzaSyBAInv4O5MVcOE3kb8ztIM9U2Q1OOmnjJk",authDomain:"mission-ready-30e27.firebaseapp.com",projectId:"mission-ready-30e27",storageBucket:"mission-ready-30e27.firebasestorage.app",messagingSenderId:"421602206314",appId:"1:421602206314:web:6f24797d13a78609532013",measurementId:"G-QQ21XL2Y9H"},mR=B0.initializeApp(pR),Ql=YA(mR),Fg={register:async(t,e)=>{try{const n=Gl(Ql,"user_accounts",t);if((await Wd(n)).exists())return{success:!1,error:""};const s=Math.random().toString(36).substring(2,15);return await ow(n,{password:e,userId:s,createdAt:new Date().toISOString()}),{success:!0,userId:s}}catch(n){return console.error("Register failed:",n),{success:!1,error:n.message}}},login:async(t,e)=>{try{const n=Gl(Ql,"user_accounts",t),r=await Wd(n);if(!r.exists())return{success:!1,error:""};const s=r.data();return s.password!==e?{success:!1,error:""}:{success:!0,userId:s.userId}}catch(n){return console.error("Login failed:",n),{success:!1,error:n.message}}}},zg={upload:async(t,e)=>{try{return await ow(Gl(Ql,"users",t),{lastUpdated:new Date().toISOString(),data:JSON.stringify(e)}),{success:!0}}catch(n){return console.error("Upload failed:",n),{success:!1,error:n}}},download:async t=>{try{const e=Gl(Ql,"users",t),n=await Wd(e);if(n.exists()){const r=n.data().data;return{success:!0,data:JSON.parse(r)}}else return{success:!1,error:"No data found"}}catch(e){return console.error("Download failed:",e),{success:!1,error:e}}}},gR=({onLogin:t})=>{const[e,n]=N.useState(!1),[r,s]=N.useState(""),[i,o]=N.useState(""),[l,u]=N.useState(""),[d,f]=N.useState(!1),p=async m=>{if(m.preventDefault(),u(""),f(!0),!r.trim()||!i.trim()){u(""),f(!1);return}try{if(e){const w=await Fg.register(r,i);if(w.success&&w.userId){localStorage.setItem("mission_ready_active_user_id",w.userId);const b=JSON.parse(localStorage.getItem("mission_ready_users")||"[]");b.some(k=>k.username===r)||localStorage.setItem("mission_ready_users",JSON.stringify([...b,{id:w.userId,username:r,password:i}])),t({id:w.userId,username:r})}else u(w.error||"")}else{const w=await Fg.login(r,i);if(w.success&&w.userId)localStorage.setItem("mission_ready_active_user_id",w.userId),t({id:w.userId,username:r});else{const k=JSON.parse(localStorage.getItem("mission_ready_users")||"[]").find(V=>V.username===r&&V.password===i);k?(console.log("Cloud login failed, using local credentials"),t({id:k.id,username:k.username})):u(w.error||"")}}}catch{u("")}finally{f(!1)}};return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 p-4",children:g.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md border border-slate-200",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("div",{className:"bg-blue-600 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-blue-200",children:g.jsx(km,{className:"text-white",size:32})}),g.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Mission Ready"}),g.jsxs("p",{className:"text-slate-500 flex items-center justify-center gap-1",children:["",g.jsxs("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full flex items-center gap-1",children:[g.jsx(lx,{size:10})," Cloud Sync"]})]})]}),g.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg mb-6",children:[g.jsx("button",{onClick:()=>{n(!1),u("")},className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${e?"text-slate-500 hover:text-slate-700":"bg-white text-blue-600 shadow-sm"}`,children:""}),g.jsx("button",{onClick:()=>{n(!0),u("")},className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${e?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:""})]}),g.jsxs("form",{onSubmit:p,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),g.jsxs("div",{className:"relative",children:[g.jsx(xx,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),g.jsx("input",{type:"text",value:r,onChange:m=>s(m.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:bg-white outline-none transition-all text-slate-900",placeholder:""})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),g.jsxs("div",{className:"relative",children:[g.jsx(km,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),g.jsx("input",{type:"password",value:i,onChange:m=>o(m.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:bg-white outline-none transition-all text-slate-900",placeholder:""})]})]}),l&&g.jsxs("div",{className:"text-red-500 text-sm bg-red-50 p-3 rounded-lg border border-red-100 flex items-center gap-2",children:[g.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),l]}),g.jsx("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg shadow-blue-200 active:scale-[0.98] transition-all flex items-center justify-center gap-2 mt-2 disabled:opacity-70 disabled:cursor-not-allowed",children:d?"...":e?"":""})]})]})})};function yR(){const[t,e]=N.useState(null),[n,r]=N.useState("DASHBOARD"),[s,i]=N.useState([]),[o,l]=N.useState([]),[u,d]=N.useState([]),[f,p]=N.useState([]),[m,w]=N.useState([]),[b,k]=N.useState(null),[V,S]=N.useState(!1);N.useEffect(()=>{const R=localStorage.getItem("mission_ready_active_user_id"),I=JSON.parse(localStorage.getItem("mission_ready_users")||"[]");if(R&&I.length>0){const ee=I.find(de=>de.id===R);ee&&C({id:ee.id,username:ee.username})}},[]);const E=R=>{const I=localStorage.getItem(`mission_ready_categories_${R}`);w(I?JSON.parse(I):fc);const ee=localStorage.getItem(`mission_ready_inventory_${R}`);let de=[];ee?(de=JSON.parse(ee),de=de.map(q=>{let Y=q.category;return Y.includes("Tools")||Y.includes("")?Y="cat_tools":Y.includes("Hardware")||Y.includes("")?Y="cat_hardware":Y.includes("Cables")||Y.includes("")?Y="cat_cables":Y.includes("Software")||Y.includes("")?Y="cat_software":(Y.includes("Docs")||Y.includes(""))&&(Y="cat_docs"),!Y.startsWith("cat_")&&!fc.some(W=>W.id===Y)&&(Y="cat_tools"),{...q,category:Y,folderId:q.folderId||ue,groupId:q.groupId||fe}})):de=tx,i(de);const Te=localStorage.getItem(`mission_ready_trips_${R}`);let me=Te?JSON.parse(Te):[];me=me.map(q=>({...q,groups:q.groups||[{id:wd,name:""}],items:q.items.map(Y=>{let W=Y.category;return W.includes("Tools")||W.includes("")?W="cat_tools":W.includes("Hardware")||W.includes("")?W="cat_hardware":W.includes("Cables")||W.includes("")?W="cat_cables":W.includes("Software")||W.includes("")?W="cat_software":(W.includes("Docs")||W.includes(""))&&(W="cat_docs"),!W.startsWith("cat_")&&!fc.some(ne=>ne.id===W)&&(W="cat_tools"),{...Y,category:W,tripGroupId:Y.tripGroupId||wd}})})),l(me);const $=localStorage.getItem(`mission_ready_folders_${R}`);d($?JSON.parse($):Z1);const K=localStorage.getItem(`mission_ready_groups_${R}`);p(K?JSON.parse(K):ex)};N.useEffect(()=>{t&&localStorage.setItem(`mission_ready_inventory_${t.id}`,JSON.stringify(s))},[s,t]),N.useEffect(()=>{t&&localStorage.setItem(`mission_ready_trips_${t.id}`,JSON.stringify(o))},[o,t]),N.useEffect(()=>{t&&localStorage.setItem(`mission_ready_folders_${t.id}`,JSON.stringify(u))},[u,t]),N.useEffect(()=>{t&&localStorage.setItem(`mission_ready_groups_${t.id}`,JSON.stringify(f))},[f,t]),N.useEffect(()=>{t&&localStorage.setItem(`mission_ready_categories_${t.id}`,JSON.stringify(m))},[m,t]);const C=R=>{e(R),localStorage.setItem("mission_ready_active_user_id",R.id),E(R.id),r("DASHBOARD")},D=()=>{e(null),localStorage.removeItem("mission_ready_active_user_id"),i([]),l([]),d([]),p([]),w([])},L=R=>{if(!t)return;const I={...R,userId:t.id};l(ee=>ee.find(Te=>Te.id===R.id)?ee.map(Te=>Te.id===R.id?I:Te):[I,...ee]),k(R.id),r("TRIP_RUN")},M=()=>{k(null),r("TRIP_EDIT")},_=R=>{k(R),r("TRIP_RUN")},y=(R,I)=>{R.stopPropagation(),window.confirm("")&&(l(ee=>ee.filter(de=>de.id!==I)),b===I&&(k(null),r("DASHBOARD")))},x=async()=>{if(!t)return;S(!0);const R={inventory:s,trips:o,folders:u,groups:f,categories:m};try{const I=await zg.upload(t.id,R);I.success?alert(` 
`):alert(" "+JSON.stringify(I.error))}catch(I){console.error(I),alert(" ")}finally{S(!1)}},T=async()=>{if(t&&window.confirm(` 

`)){S(!0);try{const R=await zg.download(t.id);if(R.success&&R.data){const{inventory:I,trips:ee,folders:de,groups:Te,categories:me}=R.data;me&&w(me),I&&i(I),ee&&l(ee),de&&d(de),Te&&p(Te),alert(" ")}else alert(" ")}catch(R){console.error(R),alert(" ")}finally{S(!1)}}};if(!t)return g.jsx(gR,{onLogin:C});const A=o.find(R=>R.id===b)||null;return g.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900 font-sans",children:[g.jsx("nav",{className:"bg-white border-b border-slate-200 sticky top-0 z-20 shadow-sm",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between",children:[g.jsxs("div",{onClick:()=>r("DASHBOARD"),className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("div",{className:"bg-slate-900 text-white p-1.5 rounded-lg",children:g.jsx(px,{size:20})}),g.jsx("span",{className:"font-bold text-lg tracking-tight text-slate-800 hidden md:block",children:"Mission Ready"})]}),g.jsxs("div",{className:"flex items-center gap-1 md:gap-4",children:[g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:()=>r("DASHBOARD"),className:`px-3 md:px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="DASHBOARD"?"text-blue-600 bg-blue-50":"text-slate-500 hover:bg-slate-100"}`,children:""}),g.jsx("button",{onClick:()=>r("INVENTORY"),className:`px-3 md:px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="INVENTORY"?"text-blue-600 bg-blue-50":"text-slate-500 hover:bg-slate-100"}`,children:""})]}),g.jsx("div",{className:"h-6 w-px bg-slate-200 mx-1"}),g.jsxs("div",{className:"flex items-center gap-2",children:[V?g.jsxs("div",{className:"flex items-center gap-1 text-slate-400 px-2",children:[g.jsx(mx,{size:18,className:"animate-spin"}),g.jsx("span",{className:"text-xs hidden md:inline",children:"..."})]}):g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:x,className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:" ()",children:g.jsx(Ex,{size:20})}),g.jsx("button",{onClick:T,className:"p-2 text-slate-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:" ()",children:g.jsx(ux,{size:20})})]}),g.jsx("div",{className:"h-4 w-px bg-slate-200 mx-1"}),g.jsxs("div",{className:"hidden md:flex items-center gap-2 text-slate-600 text-sm font-medium px-2",children:[g.jsx(Ix,{size:16}),g.jsx("span",{children:t.username})]}),g.jsx("button",{onClick:D,className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"",children:g.jsx(gx,{size:20})})]})]})]})}),g.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[n==="DASHBOARD"&&g.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[g.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 rounded-2xl p-8 text-white shadow-lg flex flex-col md:flex-row justify-between items-center gap-6",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold mb-2",children:""}),g.jsx("p",{className:"text-slate-300",children:""})]}),g.jsxs("button",{onClick:M,className:"bg-blue-500 hover:bg-blue-400 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg hover:shadow-xl transition-all active:scale-95 whitespace-nowrap",children:[g.jsx(qn,{size:24}),""]})]}),g.jsxs("div",{children:[g.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[g.jsx(sx,{size:20,className:"text-slate-500"}),""]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.length===0?g.jsxs("div",{className:"col-span-full bg-white border border-dashed border-slate-300 rounded-xl p-12 text-center text-slate-400",children:[g.jsx(Ed,{size:48,className:"mx-auto mb-4 opacity-50"}),g.jsx("p",{children:""})]}):o.map(R=>{const I=R.items.filter(Te=>Te.checked).length,ee=R.items.length,de=ee===0?0:Math.round(I/ee*100);return g.jsxs("div",{onClick:()=>_(R.id),className:"group bg-white p-5 rounded-xl border border-slate-200 shadow-sm hover:shadow-md hover:border-blue-200 transition-all cursor-pointer relative",children:[g.jsxs("div",{className:"flex justify-between items-start mb-3",children:[g.jsxs("div",{className:"min-w-0 pr-4",children:[g.jsx("h3",{className:"font-bold text-lg text-slate-800 group-hover:text-blue-600 transition-colors truncate",children:R.name}),g.jsx("p",{className:"text-sm text-slate-500",children:R.date})]}),g.jsxs("div",{className:"flex flex-col items-end shrink-0",children:[g.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${de===100?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"}`,children:de===100?"":""}),g.jsx("button",{onClick:Te=>y(Te,R.id),className:"mt-2 text-xs text-slate-300 hover:text-red-500 p-1 z-10",children:""})]})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex justify-between text-xs text-slate-500 font-medium",children:[g.jsx("span",{children:""}),g.jsxs("span",{children:[I,"/",ee," "]})]}),g.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${de}%`}})})]}),g.jsx(ox,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-200 opacity-0 group-hover:opacity-100 transition-all transform group-hover:translate-x-1"})]},R.id)})})]})]}),n==="INVENTORY"&&g.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",children:g.jsx(Tx,{items:s,setItems:i,folders:u,setFolders:d,groups:f,setGroups:p,categories:m,setCategories:w})}),n==="TRIP_EDIT"&&g.jsx("div",{className:"animate-in fade-in zoom-in-95 duration-200",children:g.jsx(fT,{inventory:s,folders:u,groups:f,categories:m,currentTrip:A,onSave:L,onCancel:()=>r(b?"TRIP_RUN":"DASHBOARD")})}),n==="TRIP_RUN"&&A&&g.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:g.jsx(pT,{trip:A,categories:m,onUpdateTrip:L,onBack:()=>r("DASHBOARD"),onEdit:()=>r("TRIP_EDIT")})})]})]})}const aw=document.getElementById("root");if(!aw)throw new Error("Could not find root element to mount to");const vR=Ac.createRoot(aw);vR.render(g.jsx(Vt.StrictMode,{children:g.jsx(yR,{})}));
