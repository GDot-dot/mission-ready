(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Aw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hg={exports:{}},Yl={},Wg={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uo=Symbol.for("react.element"),Rw=Symbol.for("react.portal"),Nw=Symbol.for("react.fragment"),Pw=Symbol.for("react.strict_mode"),Dw=Symbol.for("react.profiler"),Vw=Symbol.for("react.provider"),Ow=Symbol.for("react.context"),Lw=Symbol.for("react.forward_ref"),Mw=Symbol.for("react.suspense"),jw=Symbol.for("react.memo"),Fw=Symbol.for("react.lazy"),xp=Symbol.iterator;function zw(t){return t===null||typeof t!="object"?null:(t=xp&&t[xp]||t["@@iterator"],typeof t=="function"?t:null)}var qg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gg=Object.assign,Kg={};function hi(t,e,n){this.props=t,this.context=e,this.refs=Kg,this.updater=n||qg}hi.prototype.isReactComponent={};hi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qg(){}Qg.prototype=hi.prototype;function qd(t,e,n){this.props=t,this.context=e,this.refs=Kg,this.updater=n||qg}var Gd=qd.prototype=new Qg;Gd.constructor=qd;Gg(Gd,hi.prototype);Gd.isPureReactComponent=!0;var Ep=Array.isArray,Yg=Object.prototype.hasOwnProperty,Kd={current:null},Xg={key:!0,ref:!0,__self:!0,__source:!0};function Jg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Yg.call(e,r)&&!Xg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Uo,type:t,key:i,ref:o,props:s,_owner:Kd.current}}function Uw(t,e){return{$$typeof:Uo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Uo}function Bw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ip=/\/+/g;function zu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Bw(""+t.key):e.toString(36)}function $a(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Uo:case Rw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+zu(o,0):r,Ep(s)?(n="",t!=null&&(n=t.replace(Ip,"$&/")+"/"),$a(s,e,n,"",function(d){return d})):s!=null&&(Qd(s)&&(s=Uw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ip,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ep(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+zu(i,l);o+=$a(i,e,n,u,s)}else if(u=zw(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+zu(i,l++),o+=$a(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wa(t,e,n){if(t==null)return t;var r=[],s=0;return $a(t,r,"","",function(i){return e.call(n,i,s++)}),r}function $w(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lt={current:null},Ha={transition:null},Hw={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:Ha,ReactCurrentOwner:Kd};function Zg(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:wa,forEach:function(t,e,n){wa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wa(t,function(){e++}),e},toArray:function(t){return wa(t,function(e){return e})||[]},only:function(t){if(!Qd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=hi;de.Fragment=Nw;de.Profiler=Dw;de.PureComponent=qd;de.StrictMode=Pw;de.Suspense=Mw;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hw;de.act=Zg;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Gg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Kd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Yg.call(e,u)&&!Xg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Uo,type:t.type,key:s,ref:i,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:Ow,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Vw,_context:t},t.Consumer=t};de.createElement=Jg;de.createFactory=function(t){var e=Jg.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:Lw,render:t}};de.isValidElement=Qd;de.lazy=function(t){return{$$typeof:Fw,_payload:{_status:-1,_result:t},_init:$w}};de.memo=function(t,e){return{$$typeof:jw,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Ha.transition;Ha.transition={};try{t()}finally{Ha.transition=e}};de.unstable_act=Zg;de.useCallback=function(t,e){return Lt.current.useCallback(t,e)};de.useContext=function(t){return Lt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Lt.current.useDeferredValue(t)};de.useEffect=function(t,e){return Lt.current.useEffect(t,e)};de.useId=function(){return Lt.current.useId()};de.useImperativeHandle=function(t,e,n){return Lt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Lt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Lt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Lt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Lt.current.useReducer(t,e,n)};de.useRef=function(t){return Lt.current.useRef(t)};de.useState=function(t){return Lt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Lt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Lt.current.useTransition()};de.version="18.3.1";Wg.exports=de;var R=Wg.exports;const Vt=Aw(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ww=R,qw=Symbol.for("react.element"),Gw=Symbol.for("react.fragment"),Kw=Object.prototype.hasOwnProperty,Qw=Ww.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yw={key:!0,ref:!0,__self:!0,__source:!0};function e0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Kw.call(e,r)&&!Yw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:qw,type:t,key:i,ref:o,props:s,_owner:Qw.current}}Yl.Fragment=Gw;Yl.jsx=e0;Yl.jsxs=e0;Hg.exports=Yl;var p=Hg.exports,kc={},t0={exports:{}},Xt={},n0={exports:{}},r0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,G){var M=H.length;H.push(G);e:for(;0<M;){var Y=M-1>>>1,q=H[Y];if(0<s(q,G))H[Y]=G,H[M]=q,M=Y;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var G=H[0],M=H.pop();if(M!==G){H[0]=M;e:for(var Y=0,q=H.length,Q=q>>>1;Y<Q;){var oe=2*(Y+1)-1,be=H[oe],F=oe+1,J=H[F];if(0>s(be,M))F<q&&0>s(J,be)?(H[Y]=J,H[F]=M,Y=F):(H[Y]=be,H[oe]=M,Y=oe);else if(F<q&&0>s(J,M))H[Y]=J,H[F]=M,Y=F;else break e}}return G}function s(H,G){var M=H.sortIndex-G.sortIndex;return M!==0?M:H.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,g=3,E=!1,A=!1,C=!1,N=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(H){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=H)r(d),G.sortIndex=G.expirationTime,e(u,G);else break;G=n(d)}}function D(H){if(C=!1,S(H),!A)if(n(u)!==null)A=!0,mt(L);else{var G=n(d);G!==null&&xe(D,G.startTime-H)}}function L(H,G){A=!1,C&&(C=!1,I(y),y=-1),E=!0;var M=g;try{for(S(G),m=n(u);m!==null&&(!(m.expirationTime>G)||H&&!k());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,g=m.priorityLevel;var q=Y(m.expirationTime<=G);G=t.unstable_now(),typeof q=="function"?m.callback=q:m===n(u)&&r(u),S(G)}else r(u);m=n(u)}if(m!==null)var Q=!0;else{var oe=n(d);oe!==null&&xe(D,oe.startTime-G),Q=!1}return Q}finally{m=null,g=M,E=!1}}var j=!1,w=null,y=-1,x=5,T=-1;function k(){return!(t.unstable_now()-T<x)}function P(){if(w!==null){var H=t.unstable_now();T=H;var G=!0;try{G=w(!0,H)}finally{G?b():(j=!1,w=null)}}else j=!1}var b;if(typeof _=="function")b=function(){_(P)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,We=Se.port2;Se.port1.onmessage=P,b=function(){We.postMessage(null)}}else b=function(){N(P,0)};function mt(H){w=H,j||(j=!0,b())}function xe(H,G){y=N(function(){H(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){A||E||(A=!0,mt(L))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var M=g;g=G;try{return H()}finally{g=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,G){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var M=g;g=H;try{return G()}finally{g=M}},t.unstable_scheduleCallback=function(H,G,M){var Y=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?Y+M:Y):M=Y,H){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=M+q,H={id:f++,callback:G,priorityLevel:H,startTime:M,expirationTime:q,sortIndex:-1},M>Y?(H.sortIndex=M,e(d,H),n(u)===null&&H===n(d)&&(C?(I(y),y=-1):C=!0,xe(D,M-Y))):(H.sortIndex=q,e(u,H),A||E||(A=!0,mt(L))),H},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(H){var G=g;return function(){var M=g;g=G;try{return H.apply(this,arguments)}finally{g=M}}}})(r0);n0.exports=r0;var Xw=n0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jw=R,Yt=Xw;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s0=new Set,uo={};function fs(t,e){Ks(t,e),Ks(t+"Capture",e)}function Ks(t,e){for(uo[t]=e,t=0;t<e.length;t++)s0.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cc=Object.prototype.hasOwnProperty,Zw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tp={},Sp={};function ex(t){return Cc.call(Sp,t)?!0:Cc.call(Tp,t)?!1:Zw.test(t)?Sp[t]=!0:(Tp[t]=!0,!1)}function tx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nx(t,e,n,r){if(e===null||typeof e>"u"||tx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ft[t]=new Mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ft[e]=new Mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ft[t]=new Mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ft[t]=new Mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ft[t]=new Mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ft[t]=new Mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ft[t]=new Mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ft[t]=new Mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ft[t]=new Mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yd=/[\-:]([a-z])/g;function Xd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yd,Xd);ft[e]=new Mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yd,Xd);ft[e]=new Mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yd,Xd);ft[e]=new Mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ft[t]=new Mt(t,1,!1,t.toLowerCase(),null,!1,!1)});ft.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ft[t]=new Mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jd(t,e,n,r){var s=ft.hasOwnProperty(e)?ft[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nx(e,n,s,r)&&(n=null),r||s===null?ex(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var or=Jw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xa=Symbol.for("react.element"),ks=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),Zd=Symbol.for("react.strict_mode"),Ac=Symbol.for("react.profiler"),i0=Symbol.for("react.provider"),o0=Symbol.for("react.context"),eh=Symbol.for("react.forward_ref"),Rc=Symbol.for("react.suspense"),Nc=Symbol.for("react.suspense_list"),th=Symbol.for("react.memo"),fr=Symbol.for("react.lazy"),a0=Symbol.for("react.offscreen"),bp=Symbol.iterator;function Ni(t){return t===null||typeof t!="object"?null:(t=bp&&t[bp]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,Uu;function zi(t){if(Uu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Uu=e&&e[1]||""}return`
`+Uu+t}var Bu=!1;function $u(t,e){if(!t||Bu)return"";Bu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Bu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zi(t):""}function rx(t){switch(t.tag){case 5:return zi(t.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 2:case 15:return t=$u(t.type,!1),t;case 11:return t=$u(t.type.render,!1),t;case 1:return t=$u(t.type,!0),t;default:return""}}function Pc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cs:return"Fragment";case ks:return"Portal";case Ac:return"Profiler";case Zd:return"StrictMode";case Rc:return"Suspense";case Nc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case o0:return(t.displayName||"Context")+".Consumer";case i0:return(t._context.displayName||"Context")+".Provider";case eh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case th:return e=t.displayName||null,e!==null?e:Pc(t.type)||"Memo";case fr:e=t._payload,t=t._init;try{return Pc(t(e))}catch{}}return null}function sx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pc(e);case 8:return e===Zd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function l0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ix(t){var e=l0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ea(t){t._valueTracker||(t._valueTracker=ix(t))}function u0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=l0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function al(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dc(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Nr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function c0(t,e){e=e.checked,e!=null&&Jd(t,"checked",e,!1)}function Vc(t,e){c0(t,e);var n=Nr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Oc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Oc(t,e.type,Nr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Cp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Oc(t,e,n){(e!=="number"||al(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ui=Array.isArray;function zs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Nr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Lc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ap(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Ui(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Nr(n)}}function d0(t,e){var n=Nr(e.value),r=Nr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function h0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?h0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ia,f0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ia=Ia||document.createElement("div"),Ia.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ia.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function co(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ox=["Webkit","ms","Moz","O"];Object.keys(Gi).forEach(function(t){ox.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gi[e]=Gi[t]})});function p0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gi.hasOwnProperty(t)&&Gi[t]?(""+e).trim():e+"px"}function m0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=p0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ax=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jc(t,e){if(e){if(ax[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Fc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zc=null;function nh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uc=null,Us=null,Bs=null;function Np(t){if(t=Ho(t)){if(typeof Uc!="function")throw Error($(280));var e=t.stateNode;e&&(e=tu(e),Uc(t.stateNode,t.type,e))}}function g0(t){Us?Bs?Bs.push(t):Bs=[t]:Us=t}function y0(){if(Us){var t=Us,e=Bs;if(Bs=Us=null,Np(t),e)for(t=0;t<e.length;t++)Np(e[t])}}function v0(t,e){return t(e)}function _0(){}var Hu=!1;function w0(t,e,n){if(Hu)return t(e,n);Hu=!0;try{return v0(t,e,n)}finally{Hu=!1,(Us!==null||Bs!==null)&&(_0(),y0())}}function ho(t,e){var n=t.stateNode;if(n===null)return null;var r=tu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Bc=!1;if(Zn)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){Bc=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{Bc=!1}function lx(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Ki=!1,ll=null,ul=!1,$c=null,ux={onError:function(t){Ki=!0,ll=t}};function cx(t,e,n,r,s,i,o,l,u){Ki=!1,ll=null,lx.apply(ux,arguments)}function dx(t,e,n,r,s,i,o,l,u){if(cx.apply(this,arguments),Ki){if(Ki){var d=ll;Ki=!1,ll=null}else throw Error($(198));ul||(ul=!0,$c=d)}}function ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function x0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pp(t){if(ps(t)!==t)throw Error($(188))}function hx(t){var e=t.alternate;if(!e){if(e=ps(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Pp(s),t;if(i===r)return Pp(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function E0(t){return t=hx(t),t!==null?I0(t):null}function I0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=I0(t);if(e!==null)return e;t=t.sibling}return null}var T0=Yt.unstable_scheduleCallback,Dp=Yt.unstable_cancelCallback,fx=Yt.unstable_shouldYield,px=Yt.unstable_requestPaint,He=Yt.unstable_now,mx=Yt.unstable_getCurrentPriorityLevel,rh=Yt.unstable_ImmediatePriority,S0=Yt.unstable_UserBlockingPriority,cl=Yt.unstable_NormalPriority,gx=Yt.unstable_LowPriority,b0=Yt.unstable_IdlePriority,Xl=null,Rn=null;function yx(t){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(Xl,t,void 0,(t.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:wx,vx=Math.log,_x=Math.LN2;function wx(t){return t>>>=0,t===0?32:31-(vx(t)/_x|0)|0}var Ta=64,Sa=4194304;function Bi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Bi(l):(i&=o,i!==0&&(r=Bi(i)))}else o=n&~s,o!==0?r=Bi(o):i!==0&&(r=Bi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xn(e),s=1<<n,r|=t[n],e&=~s;return r}function xx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ex(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-xn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=xx(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Hc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function k0(){var t=Ta;return Ta<<=1,!(Ta&4194240)&&(Ta=64),t}function Wu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xn(e),t[e]=n}function Ix(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-xn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function sh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ke=0;function C0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var A0,ih,R0,N0,P0,Wc=!1,ba=[],xr=null,Er=null,Ir=null,fo=new Map,po=new Map,gr=[],Tx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vp(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":fo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(e.pointerId)}}function Di(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ho(e),e!==null&&ih(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Sx(t,e,n,r,s){switch(e){case"focusin":return xr=Di(xr,t,e,n,r,s),!0;case"dragenter":return Er=Di(Er,t,e,n,r,s),!0;case"mouseover":return Ir=Di(Ir,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return fo.set(i,Di(fo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,po.set(i,Di(po.get(i)||null,t,e,n,r,s)),!0}return!1}function D0(t){var e=Jr(t.target);if(e!==null){var n=ps(e);if(n!==null){if(e=n.tag,e===13){if(e=x0(n),e!==null){t.blockedOn=e,P0(t.priority,function(){R0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zc=r,n.target.dispatchEvent(r),zc=null}else return e=Ho(n),e!==null&&ih(e),t.blockedOn=n,!1;e.shift()}return!0}function Op(t,e,n){Wa(t)&&n.delete(e)}function bx(){Wc=!1,xr!==null&&Wa(xr)&&(xr=null),Er!==null&&Wa(Er)&&(Er=null),Ir!==null&&Wa(Ir)&&(Ir=null),fo.forEach(Op),po.forEach(Op)}function Vi(t,e){t.blockedOn===e&&(t.blockedOn=null,Wc||(Wc=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,bx)))}function mo(t){function e(s){return Vi(s,t)}if(0<ba.length){Vi(ba[0],t);for(var n=1;n<ba.length;n++){var r=ba[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&Vi(xr,t),Er!==null&&Vi(Er,t),Ir!==null&&Vi(Ir,t),fo.forEach(e),po.forEach(e),n=0;n<gr.length;n++)r=gr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gr.length&&(n=gr[0],n.blockedOn===null);)D0(n),n.blockedOn===null&&gr.shift()}var $s=or.ReactCurrentBatchConfig,hl=!0;function kx(t,e,n,r){var s=ke,i=$s.transition;$s.transition=null;try{ke=1,oh(t,e,n,r)}finally{ke=s,$s.transition=i}}function Cx(t,e,n,r){var s=ke,i=$s.transition;$s.transition=null;try{ke=4,oh(t,e,n,r)}finally{ke=s,$s.transition=i}}function oh(t,e,n,r){if(hl){var s=qc(t,e,n,r);if(s===null)tc(t,e,r,fl,n),Vp(t,r);else if(Sx(s,t,e,n,r))r.stopPropagation();else if(Vp(t,r),e&4&&-1<Tx.indexOf(t)){for(;s!==null;){var i=Ho(s);if(i!==null&&A0(i),i=qc(t,e,n,r),i===null&&tc(t,e,r,fl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else tc(t,e,r,null,n)}}var fl=null;function qc(t,e,n,r){if(fl=null,t=nh(r),t=Jr(t),t!==null)if(e=ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=x0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fl=t,null}function V0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mx()){case rh:return 1;case S0:return 4;case cl:case gx:return 16;case b0:return 536870912;default:return 16}default:return 16}}var vr=null,ah=null,qa=null;function O0(){if(qa)return qa;var t,e=ah,n=e.length,r,s="value"in vr?vr.value:vr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return qa=s.slice(t,1<r?1-r:void 0)}function Ga(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ka(){return!0}function Lp(){return!1}function Jt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ka:Lp,this.isPropagationStopped=Lp,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ka)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ka)},persist:function(){},isPersistent:ka}),e}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lh=Jt(fi),$o=Me({},fi,{view:0,detail:0}),Ax=Jt($o),qu,Gu,Oi,Jl=Me({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oi&&(Oi&&t.type==="mousemove"?(qu=t.screenX-Oi.screenX,Gu=t.screenY-Oi.screenY):Gu=qu=0,Oi=t),qu)},movementY:function(t){return"movementY"in t?t.movementY:Gu}}),Mp=Jt(Jl),Rx=Me({},Jl,{dataTransfer:0}),Nx=Jt(Rx),Px=Me({},$o,{relatedTarget:0}),Ku=Jt(Px),Dx=Me({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),Vx=Jt(Dx),Ox=Me({},fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lx=Jt(Ox),Mx=Me({},fi,{data:0}),jp=Jt(Mx),jx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ux(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zx[t])?!!e[t]:!1}function uh(){return Ux}var Bx=Me({},$o,{key:function(t){if(t.key){var e=jx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ga(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uh,charCode:function(t){return t.type==="keypress"?Ga(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ga(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$x=Jt(Bx),Hx=Me({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fp=Jt(Hx),Wx=Me({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uh}),qx=Jt(Wx),Gx=Me({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kx=Jt(Gx),Qx=Me({},Jl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yx=Jt(Qx),Xx=[9,13,27,32],ch=Zn&&"CompositionEvent"in window,Qi=null;Zn&&"documentMode"in document&&(Qi=document.documentMode);var Jx=Zn&&"TextEvent"in window&&!Qi,L0=Zn&&(!ch||Qi&&8<Qi&&11>=Qi),zp=" ",Up=!1;function M0(t,e){switch(t){case"keyup":return Xx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var As=!1;function Zx(t,e){switch(t){case"compositionend":return j0(e);case"keypress":return e.which!==32?null:(Up=!0,zp);case"textInput":return t=e.data,t===zp&&Up?null:t;default:return null}}function eE(t,e){if(As)return t==="compositionend"||!ch&&M0(t,e)?(t=O0(),qa=ah=vr=null,As=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return L0&&e.locale!=="ko"?null:e.data;default:return null}}var tE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tE[t.type]:e==="textarea"}function F0(t,e,n,r){g0(r),e=pl(e,"onChange"),0<e.length&&(n=new lh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yi=null,go=null;function nE(t){Y0(t,0)}function Zl(t){var e=Ps(t);if(u0(e))return t}function rE(t,e){if(t==="change")return e}var z0=!1;if(Zn){var Qu;if(Zn){var Yu="oninput"in document;if(!Yu){var $p=document.createElement("div");$p.setAttribute("oninput","return;"),Yu=typeof $p.oninput=="function"}Qu=Yu}else Qu=!1;z0=Qu&&(!document.documentMode||9<document.documentMode)}function Hp(){Yi&&(Yi.detachEvent("onpropertychange",U0),go=Yi=null)}function U0(t){if(t.propertyName==="value"&&Zl(go)){var e=[];F0(e,go,t,nh(t)),w0(nE,e)}}function sE(t,e,n){t==="focusin"?(Hp(),Yi=e,go=n,Yi.attachEvent("onpropertychange",U0)):t==="focusout"&&Hp()}function iE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zl(go)}function oE(t,e){if(t==="click")return Zl(e)}function aE(t,e){if(t==="input"||t==="change")return Zl(e)}function lE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var In=typeof Object.is=="function"?Object.is:lE;function yo(t,e){if(In(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Cc.call(e,s)||!In(t[s],e[s]))return!1}return!0}function Wp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qp(t,e){var n=Wp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wp(n)}}function B0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?B0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $0(){for(var t=window,e=al();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=al(t.document)}return e}function dh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uE(t){var e=$0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&B0(n.ownerDocument.documentElement,n)){if(r!==null&&dh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=qp(n,i);var o=qp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cE=Zn&&"documentMode"in document&&11>=document.documentMode,Rs=null,Gc=null,Xi=null,Kc=!1;function Gp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kc||Rs==null||Rs!==al(r)||(r=Rs,"selectionStart"in r&&dh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xi&&yo(Xi,r)||(Xi=r,r=pl(Gc,"onSelect"),0<r.length&&(e=new lh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Rs)))}function Ca(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ns={animationend:Ca("Animation","AnimationEnd"),animationiteration:Ca("Animation","AnimationIteration"),animationstart:Ca("Animation","AnimationStart"),transitionend:Ca("Transition","TransitionEnd")},Xu={},H0={};Zn&&(H0=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function eu(t){if(Xu[t])return Xu[t];if(!Ns[t])return t;var e=Ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in H0)return Xu[t]=e[n];return t}var W0=eu("animationend"),q0=eu("animationiteration"),G0=eu("animationstart"),K0=eu("transitionend"),Q0=new Map,Kp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(t,e){Q0.set(t,e),fs(e,[t])}for(var Ju=0;Ju<Kp.length;Ju++){var Zu=Kp[Ju],dE=Zu.toLowerCase(),hE=Zu[0].toUpperCase()+Zu.slice(1);jr(dE,"on"+hE)}jr(W0,"onAnimationEnd");jr(q0,"onAnimationIteration");jr(G0,"onAnimationStart");jr("dblclick","onDoubleClick");jr("focusin","onFocus");jr("focusout","onBlur");jr(K0,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fE=new Set("cancel close invalid load scroll toggle".split(" ").concat($i));function Qp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dx(r,e,void 0,t),t.currentTarget=null}function Y0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Qp(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Qp(s,l,d),i=u}}}if(ul)throw t=$c,ul=!1,$c=null,t}function Pe(t,e){var n=e[Zc];n===void 0&&(n=e[Zc]=new Set);var r=t+"__bubble";n.has(r)||(X0(e,t,2,!1),n.add(r))}function ec(t,e,n){var r=0;e&&(r|=4),X0(n,t,r,e)}var Aa="_reactListening"+Math.random().toString(36).slice(2);function vo(t){if(!t[Aa]){t[Aa]=!0,s0.forEach(function(n){n!=="selectionchange"&&(fE.has(n)||ec(n,!1,t),ec(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Aa]||(e[Aa]=!0,ec("selectionchange",!1,e))}}function X0(t,e,n,r){switch(V0(e)){case 1:var s=kx;break;case 4:s=Cx;break;default:s=oh}n=s.bind(null,e,n,t),s=void 0,!Bc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function tc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Jr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}w0(function(){var d=i,f=nh(n),m=[];e:{var g=Q0.get(t);if(g!==void 0){var E=lh,A=t;switch(t){case"keypress":if(Ga(n)===0)break e;case"keydown":case"keyup":E=$x;break;case"focusin":A="focus",E=Ku;break;case"focusout":A="blur",E=Ku;break;case"beforeblur":case"afterblur":E=Ku;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Mp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=Nx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=qx;break;case W0:case q0:case G0:E=Vx;break;case K0:E=Kx;break;case"scroll":E=Ax;break;case"wheel":E=Yx;break;case"copy":case"cut":case"paste":E=Lx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Fp}var C=(e&4)!==0,N=!C&&t==="scroll",I=C?g!==null?g+"Capture":null:g;C=[];for(var _=d,S;_!==null;){S=_;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,I!==null&&(D=ho(_,I),D!=null&&C.push(_o(_,D,S)))),N)break;_=_.return}0<C.length&&(g=new E(g,A,null,n,f),m.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",g&&n!==zc&&(A=n.relatedTarget||n.fromElement)&&(Jr(A)||A[er]))break e;if((E||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,E?(A=n.relatedTarget||n.toElement,E=d,A=A?Jr(A):null,A!==null&&(N=ps(A),A!==N||A.tag!==5&&A.tag!==6)&&(A=null)):(E=null,A=d),E!==A)){if(C=Mp,D="onMouseLeave",I="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(C=Fp,D="onPointerLeave",I="onPointerEnter",_="pointer"),N=E==null?g:Ps(E),S=A==null?g:Ps(A),g=new C(D,_+"leave",E,n,f),g.target=N,g.relatedTarget=S,D=null,Jr(f)===d&&(C=new C(I,_+"enter",A,n,f),C.target=S,C.relatedTarget=N,D=C),N=D,E&&A)t:{for(C=E,I=A,_=0,S=C;S;S=Is(S))_++;for(S=0,D=I;D;D=Is(D))S++;for(;0<_-S;)C=Is(C),_--;for(;0<S-_;)I=Is(I),S--;for(;_--;){if(C===I||I!==null&&C===I.alternate)break t;C=Is(C),I=Is(I)}C=null}else C=null;E!==null&&Yp(m,g,E,C,!1),A!==null&&N!==null&&Yp(m,N,A,C,!0)}}e:{if(g=d?Ps(d):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var L=rE;else if(Bp(g))if(z0)L=aE;else{L=iE;var j=sE}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=oE);if(L&&(L=L(t,d))){F0(m,L,n,f);break e}j&&j(t,g,d),t==="focusout"&&(j=g._wrapperState)&&j.controlled&&g.type==="number"&&Oc(g,"number",g.value)}switch(j=d?Ps(d):window,t){case"focusin":(Bp(j)||j.contentEditable==="true")&&(Rs=j,Gc=d,Xi=null);break;case"focusout":Xi=Gc=Rs=null;break;case"mousedown":Kc=!0;break;case"contextmenu":case"mouseup":case"dragend":Kc=!1,Gp(m,n,f);break;case"selectionchange":if(cE)break;case"keydown":case"keyup":Gp(m,n,f)}var w;if(ch)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else As?M0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(L0&&n.locale!=="ko"&&(As||y!=="onCompositionStart"?y==="onCompositionEnd"&&As&&(w=O0()):(vr=f,ah="value"in vr?vr.value:vr.textContent,As=!0)),j=pl(d,y),0<j.length&&(y=new jp(y,t,null,n,f),m.push({event:y,listeners:j}),w?y.data=w:(w=j0(n),w!==null&&(y.data=w)))),(w=Jx?Zx(t,n):eE(t,n))&&(d=pl(d,"onBeforeInput"),0<d.length&&(f=new jp("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=w))}Y0(m,e)})}function _o(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ho(t,n),i!=null&&r.unshift(_o(t,i,s)),i=ho(t,e),i!=null&&r.push(_o(t,i,s))),t=t.return}return r}function Is(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=ho(n,i),u!=null&&o.unshift(_o(n,u,l))):s||(u=ho(n,i),u!=null&&o.push(_o(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pE=/\r\n?/g,mE=/\u0000|\uFFFD/g;function Xp(t){return(typeof t=="string"?t:""+t).replace(pE,`
`).replace(mE,"")}function Ra(t,e,n){if(e=Xp(e),Xp(t)!==e&&n)throw Error($(425))}function ml(){}var Qc=null,Yc=null;function Xc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jc=typeof setTimeout=="function"?setTimeout:void 0,gE=typeof clearTimeout=="function"?clearTimeout:void 0,Jp=typeof Promise=="function"?Promise:void 0,yE=typeof queueMicrotask=="function"?queueMicrotask:typeof Jp<"u"?function(t){return Jp.resolve(null).then(t).catch(vE)}:Jc;function vE(t){setTimeout(function(){throw t})}function nc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),mo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);mo(e)}function Tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var pi=Math.random().toString(36).slice(2),An="__reactFiber$"+pi,wo="__reactProps$"+pi,er="__reactContainer$"+pi,Zc="__reactEvents$"+pi,_E="__reactListeners$"+pi,wE="__reactHandles$"+pi;function Jr(t){var e=t[An];if(e)return e;for(var n=t.parentNode;n;){if(e=n[er]||n[An]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zp(t);t!==null;){if(n=t[An])return n;t=Zp(t)}return e}t=n,n=t.parentNode}return null}function Ho(t){return t=t[An]||t[er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ps(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function tu(t){return t[wo]||null}var ed=[],Ds=-1;function Fr(t){return{current:t}}function De(t){0>Ds||(t.current=ed[Ds],ed[Ds]=null,Ds--)}function Re(t,e){Ds++,ed[Ds]=t.current,t.current=e}var Pr={},kt=Fr(Pr),zt=Fr(!1),is=Pr;function Qs(t,e){var n=t.type.contextTypes;if(!n)return Pr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ut(t){return t=t.childContextTypes,t!=null}function gl(){De(zt),De(kt)}function em(t,e,n){if(kt.current!==Pr)throw Error($(168));Re(kt,e),Re(zt,n)}function J0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,sx(t)||"Unknown",s));return Me({},n,r)}function yl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,is=kt.current,Re(kt,t),Re(zt,zt.current),!0}function tm(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=J0(t,e,is),r.__reactInternalMemoizedMergedChildContext=t,De(zt),De(kt),Re(kt,t)):De(zt),Re(zt,n)}var Wn=null,nu=!1,rc=!1;function Z0(t){Wn===null?Wn=[t]:Wn.push(t)}function xE(t){nu=!0,Z0(t)}function zr(){if(!rc&&Wn!==null){rc=!0;var t=0,e=ke;try{var n=Wn;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wn=null,nu=!1}catch(s){throw Wn!==null&&(Wn=Wn.slice(t+1)),T0(rh,zr),s}finally{ke=e,rc=!1}}return null}var Vs=[],Os=0,vl=null,_l=0,tn=[],nn=0,os=null,Gn=1,Kn="";function Qr(t,e){Vs[Os++]=_l,Vs[Os++]=vl,vl=t,_l=e}function ey(t,e,n){tn[nn++]=Gn,tn[nn++]=Kn,tn[nn++]=os,os=t;var r=Gn;t=Kn;var s=32-xn(r)-1;r&=~(1<<s),n+=1;var i=32-xn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Gn=1<<32-xn(e)+s|n<<s|r,Kn=i+t}else Gn=1<<i|n<<s|r,Kn=t}function hh(t){t.return!==null&&(Qr(t,1),ey(t,1,0))}function fh(t){for(;t===vl;)vl=Vs[--Os],Vs[Os]=null,_l=Vs[--Os],Vs[Os]=null;for(;t===os;)os=tn[--nn],tn[nn]=null,Kn=tn[--nn],tn[nn]=null,Gn=tn[--nn],tn[nn]=null}var Qt=null,Kt=null,Ve=!1,_n=null;function ty(t,e){var n=sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=Tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=os!==null?{id:Gn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Kt=null,!0):!1;default:return!1}}function td(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nd(t){if(Ve){var e=Kt;if(e){var n=e;if(!nm(t,e)){if(td(t))throw Error($(418));e=Tr(n.nextSibling);var r=Qt;e&&nm(t,e)?ty(r,n):(t.flags=t.flags&-4097|2,Ve=!1,Qt=t)}}else{if(td(t))throw Error($(418));t.flags=t.flags&-4097|2,Ve=!1,Qt=t}}}function rm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function Na(t){if(t!==Qt)return!1;if(!Ve)return rm(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xc(t.type,t.memoizedProps)),e&&(e=Kt)){if(td(t))throw ny(),Error($(418));for(;e;)ty(t,e),e=Tr(e.nextSibling)}if(rm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kt=Tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kt=null}}else Kt=Qt?Tr(t.stateNode.nextSibling):null;return!0}function ny(){for(var t=Kt;t;)t=Tr(t.nextSibling)}function Ys(){Kt=Qt=null,Ve=!1}function ph(t){_n===null?_n=[t]:_n.push(t)}var EE=or.ReactCurrentBatchConfig;function Li(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Pa(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sm(t){var e=t._init;return e(t._payload)}function ry(t){function e(I,_){if(t){var S=I.deletions;S===null?(I.deletions=[_],I.flags|=16):S.push(_)}}function n(I,_){if(!t)return null;for(;_!==null;)e(I,_),_=_.sibling;return null}function r(I,_){for(I=new Map;_!==null;)_.key!==null?I.set(_.key,_):I.set(_.index,_),_=_.sibling;return I}function s(I,_){return I=Cr(I,_),I.index=0,I.sibling=null,I}function i(I,_,S){return I.index=S,t?(S=I.alternate,S!==null?(S=S.index,S<_?(I.flags|=2,_):S):(I.flags|=2,_)):(I.flags|=1048576,_)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,_,S,D){return _===null||_.tag!==6?(_=cc(S,I.mode,D),_.return=I,_):(_=s(_,S),_.return=I,_)}function u(I,_,S,D){var L=S.type;return L===Cs?f(I,_,S.props.children,D,S.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===fr&&sm(L)===_.type)?(D=s(_,S.props),D.ref=Li(I,_,S),D.return=I,D):(D=el(S.type,S.key,S.props,null,I.mode,D),D.ref=Li(I,_,S),D.return=I,D)}function d(I,_,S,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=dc(S,I.mode,D),_.return=I,_):(_=s(_,S.children||[]),_.return=I,_)}function f(I,_,S,D,L){return _===null||_.tag!==7?(_=rs(S,I.mode,D,L),_.return=I,_):(_=s(_,S),_.return=I,_)}function m(I,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=cc(""+_,I.mode,S),_.return=I,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case xa:return S=el(_.type,_.key,_.props,null,I.mode,S),S.ref=Li(I,null,_),S.return=I,S;case ks:return _=dc(_,I.mode,S),_.return=I,_;case fr:var D=_._init;return m(I,D(_._payload),S)}if(Ui(_)||Ni(_))return _=rs(_,I.mode,S,null),_.return=I,_;Pa(I,_)}return null}function g(I,_,S,D){var L=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return L!==null?null:l(I,_,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case xa:return S.key===L?u(I,_,S,D):null;case ks:return S.key===L?d(I,_,S,D):null;case fr:return L=S._init,g(I,_,L(S._payload),D)}if(Ui(S)||Ni(S))return L!==null?null:f(I,_,S,D,null);Pa(I,S)}return null}function E(I,_,S,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return I=I.get(S)||null,l(_,I,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case xa:return I=I.get(D.key===null?S:D.key)||null,u(_,I,D,L);case ks:return I=I.get(D.key===null?S:D.key)||null,d(_,I,D,L);case fr:var j=D._init;return E(I,_,S,j(D._payload),L)}if(Ui(D)||Ni(D))return I=I.get(S)||null,f(_,I,D,L,null);Pa(_,D)}return null}function A(I,_,S,D){for(var L=null,j=null,w=_,y=_=0,x=null;w!==null&&y<S.length;y++){w.index>y?(x=w,w=null):x=w.sibling;var T=g(I,w,S[y],D);if(T===null){w===null&&(w=x);break}t&&w&&T.alternate===null&&e(I,w),_=i(T,_,y),j===null?L=T:j.sibling=T,j=T,w=x}if(y===S.length)return n(I,w),Ve&&Qr(I,y),L;if(w===null){for(;y<S.length;y++)w=m(I,S[y],D),w!==null&&(_=i(w,_,y),j===null?L=w:j.sibling=w,j=w);return Ve&&Qr(I,y),L}for(w=r(I,w);y<S.length;y++)x=E(w,I,y,S[y],D),x!==null&&(t&&x.alternate!==null&&w.delete(x.key===null?y:x.key),_=i(x,_,y),j===null?L=x:j.sibling=x,j=x);return t&&w.forEach(function(k){return e(I,k)}),Ve&&Qr(I,y),L}function C(I,_,S,D){var L=Ni(S);if(typeof L!="function")throw Error($(150));if(S=L.call(S),S==null)throw Error($(151));for(var j=L=null,w=_,y=_=0,x=null,T=S.next();w!==null&&!T.done;y++,T=S.next()){w.index>y?(x=w,w=null):x=w.sibling;var k=g(I,w,T.value,D);if(k===null){w===null&&(w=x);break}t&&w&&k.alternate===null&&e(I,w),_=i(k,_,y),j===null?L=k:j.sibling=k,j=k,w=x}if(T.done)return n(I,w),Ve&&Qr(I,y),L;if(w===null){for(;!T.done;y++,T=S.next())T=m(I,T.value,D),T!==null&&(_=i(T,_,y),j===null?L=T:j.sibling=T,j=T);return Ve&&Qr(I,y),L}for(w=r(I,w);!T.done;y++,T=S.next())T=E(w,I,y,T.value,D),T!==null&&(t&&T.alternate!==null&&w.delete(T.key===null?y:T.key),_=i(T,_,y),j===null?L=T:j.sibling=T,j=T);return t&&w.forEach(function(P){return e(I,P)}),Ve&&Qr(I,y),L}function N(I,_,S,D){if(typeof S=="object"&&S!==null&&S.type===Cs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case xa:e:{for(var L=S.key,j=_;j!==null;){if(j.key===L){if(L=S.type,L===Cs){if(j.tag===7){n(I,j.sibling),_=s(j,S.props.children),_.return=I,I=_;break e}}else if(j.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===fr&&sm(L)===j.type){n(I,j.sibling),_=s(j,S.props),_.ref=Li(I,j,S),_.return=I,I=_;break e}n(I,j);break}else e(I,j);j=j.sibling}S.type===Cs?(_=rs(S.props.children,I.mode,D,S.key),_.return=I,I=_):(D=el(S.type,S.key,S.props,null,I.mode,D),D.ref=Li(I,_,S),D.return=I,I=D)}return o(I);case ks:e:{for(j=S.key;_!==null;){if(_.key===j)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(I,_.sibling),_=s(_,S.children||[]),_.return=I,I=_;break e}else{n(I,_);break}else e(I,_);_=_.sibling}_=dc(S,I.mode,D),_.return=I,I=_}return o(I);case fr:return j=S._init,N(I,_,j(S._payload),D)}if(Ui(S))return A(I,_,S,D);if(Ni(S))return C(I,_,S,D);Pa(I,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(I,_.sibling),_=s(_,S),_.return=I,I=_):(n(I,_),_=cc(S,I.mode,D),_.return=I,I=_),o(I)):n(I,_)}return N}var Xs=ry(!0),sy=ry(!1),wl=Fr(null),xl=null,Ls=null,mh=null;function gh(){mh=Ls=xl=null}function yh(t){var e=wl.current;De(wl),t._currentValue=e}function rd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hs(t,e){xl=t,mh=Ls=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ft=!0),t.firstContext=null)}function un(t){var e=t._currentValue;if(mh!==t)if(t={context:t,memoizedValue:e,next:null},Ls===null){if(xl===null)throw Error($(308));Ls=t,xl.dependencies={lanes:0,firstContext:t}}else Ls=Ls.next=t;return e}var Zr=null;function vh(t){Zr===null?Zr=[t]:Zr.push(t)}function iy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,vh(e)):(n.next=s.next,s.next=n),e.interleaved=n,tr(t,r)}function tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pr=!1;function _h(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Sr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,tr(t,n)}return s=r.interleaved,s===null?(e.next=e,vh(r)):(e.next=s.next,s.next=e),r.interleaved=e,tr(t,n)}function Ka(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sh(t,n)}}function im(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function El(t,e,n,r){var s=t.updateQueue;pr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,l=i;do{var g=l.lane,E=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:E,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=t,C=l;switch(g=e,E=n,C.tag){case 1:if(A=C.payload,typeof A=="function"){m=A.call(E,m,g);break e}m=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=C.payload,g=typeof A=="function"?A.call(E,m,g):A,g==null)break e;m=Me({},m,g);break e;case 2:pr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else E={eventTime:E,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=E,u=m):f=f.next=E,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ls|=o,t.lanes=o,t.memoizedState=m}}function om(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Wo={},Nn=Fr(Wo),xo=Fr(Wo),Eo=Fr(Wo);function es(t){if(t===Wo)throw Error($(174));return t}function wh(t,e){switch(Re(Eo,e),Re(xo,t),Re(Nn,Wo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mc(e,t)}De(Nn),Re(Nn,e)}function Js(){De(Nn),De(xo),De(Eo)}function ay(t){es(Eo.current);var e=es(Nn.current),n=Mc(e,t.type);e!==n&&(Re(xo,t),Re(Nn,n))}function xh(t){xo.current===t&&(De(Nn),De(xo))}var Oe=Fr(0);function Il(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sc=[];function Eh(){for(var t=0;t<sc.length;t++)sc[t]._workInProgressVersionPrimary=null;sc.length=0}var Qa=or.ReactCurrentDispatcher,ic=or.ReactCurrentBatchConfig,as=0,Le=null,Ye=null,nt=null,Tl=!1,Ji=!1,Io=0,IE=0;function xt(){throw Error($(321))}function Ih(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!In(t[n],e[n]))return!1;return!0}function Th(t,e,n,r,s,i){if(as=i,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qa.current=t===null||t.memoizedState===null?kE:CE,t=n(r,s),Ji){i=0;do{if(Ji=!1,Io=0,25<=i)throw Error($(301));i+=1,nt=Ye=null,e.updateQueue=null,Qa.current=AE,t=n(r,s)}while(Ji)}if(Qa.current=Sl,e=Ye!==null&&Ye.next!==null,as=0,nt=Ye=Le=null,Tl=!1,e)throw Error($(300));return t}function Sh(){var t=Io!==0;return Io=0,t}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?Le.memoizedState=nt=t:nt=nt.next=t,nt}function cn(){if(Ye===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=nt===null?Le.memoizedState:nt.next;if(e!==null)nt=e,Ye=t;else{if(t===null)throw Error($(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},nt===null?Le.memoizedState=nt=t:nt=nt.next=t}return nt}function To(t,e){return typeof e=="function"?e(t):e}function oc(t){var e=cn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ye,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if((as&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Le.lanes|=f,ls|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,In(r,e.memoizedState)||(Ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Le.lanes|=i,ls|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ac(t){var e=cn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);In(i,e.memoizedState)||(Ft=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function ly(){}function uy(t,e){var n=Le,r=cn(),s=e(),i=!In(r.memoizedState,s);if(i&&(r.memoizedState=s,Ft=!0),r=r.queue,bh(hy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,So(9,dy.bind(null,n,r,s,e),void 0,null),st===null)throw Error($(349));as&30||cy(n,e,s)}return s}function cy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dy(t,e,n,r){e.value=n,e.getSnapshot=r,fy(e)&&py(t)}function hy(t,e,n){return n(function(){fy(e)&&py(t)})}function fy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!In(t,n)}catch{return!0}}function py(t){var e=tr(t,1);e!==null&&En(e,t,1,-1)}function am(t){var e=Cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:t},e.queue=t,t=t.dispatch=bE.bind(null,Le,t),[e.memoizedState,t]}function So(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function my(){return cn().memoizedState}function Ya(t,e,n,r){var s=Cn();Le.flags|=t,s.memoizedState=So(1|e,n,void 0,r===void 0?null:r)}function ru(t,e,n,r){var s=cn();r=r===void 0?null:r;var i=void 0;if(Ye!==null){var o=Ye.memoizedState;if(i=o.destroy,r!==null&&Ih(r,o.deps)){s.memoizedState=So(e,n,i,r);return}}Le.flags|=t,s.memoizedState=So(1|e,n,i,r)}function lm(t,e){return Ya(8390656,8,t,e)}function bh(t,e){return ru(2048,8,t,e)}function gy(t,e){return ru(4,2,t,e)}function yy(t,e){return ru(4,4,t,e)}function vy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _y(t,e,n){return n=n!=null?n.concat([t]):null,ru(4,4,vy.bind(null,e,t),n)}function kh(){}function wy(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ih(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function xy(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ih(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ey(t,e,n){return as&21?(In(n,e)||(n=k0(),Le.lanes|=n,ls|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=n)}function TE(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=ic.transition;ic.transition={};try{t(!1),e()}finally{ke=n,ic.transition=r}}function Iy(){return cn().memoizedState}function SE(t,e,n){var r=kr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ty(t))Sy(e,n);else if(n=iy(t,e,n,r),n!==null){var s=Ot();En(n,t,r,s),by(n,e,r)}}function bE(t,e,n){var r=kr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ty(t))Sy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,In(l,o)){var u=e.interleaved;u===null?(s.next=s,vh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=iy(t,e,s,r),n!==null&&(s=Ot(),En(n,t,r,s),by(n,e,r))}}function Ty(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function Sy(t,e){Ji=Tl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function by(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sh(t,n)}}var Sl={readContext:un,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},kE={readContext:un,useCallback:function(t,e){return Cn().memoizedState=[t,e===void 0?null:e],t},useContext:un,useEffect:lm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ya(4194308,4,vy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ya(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ya(4,2,t,e)},useMemo:function(t,e){var n=Cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=SE.bind(null,Le,t),[r.memoizedState,t]},useRef:function(t){var e=Cn();return t={current:t},e.memoizedState=t},useState:am,useDebugValue:kh,useDeferredValue:function(t){return Cn().memoizedState=t},useTransition:function(){var t=am(!1),e=t[0];return t=TE.bind(null,t[1]),Cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Le,s=Cn();if(Ve){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),st===null)throw Error($(349));as&30||cy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,lm(hy.bind(null,r,i,t),[t]),r.flags|=2048,So(9,dy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Cn(),e=st.identifierPrefix;if(Ve){var n=Kn,r=Gn;n=(r&~(1<<32-xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Io++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=IE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CE={readContext:un,useCallback:wy,useContext:un,useEffect:bh,useImperativeHandle:_y,useInsertionEffect:gy,useLayoutEffect:yy,useMemo:xy,useReducer:oc,useRef:my,useState:function(){return oc(To)},useDebugValue:kh,useDeferredValue:function(t){var e=cn();return Ey(e,Ye.memoizedState,t)},useTransition:function(){var t=oc(To)[0],e=cn().memoizedState;return[t,e]},useMutableSource:ly,useSyncExternalStore:uy,useId:Iy,unstable_isNewReconciler:!1},AE={readContext:un,useCallback:wy,useContext:un,useEffect:bh,useImperativeHandle:_y,useInsertionEffect:gy,useLayoutEffect:yy,useMemo:xy,useReducer:ac,useRef:my,useState:function(){return ac(To)},useDebugValue:kh,useDeferredValue:function(t){var e=cn();return Ye===null?e.memoizedState=t:Ey(e,Ye.memoizedState,t)},useTransition:function(){var t=ac(To)[0],e=cn().memoizedState;return[t,e]},useMutableSource:ly,useSyncExternalStore:uy,useId:Iy,unstable_isNewReconciler:!1};function yn(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var su={isMounted:function(t){return(t=t._reactInternals)?ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ot(),s=kr(t),i=Yn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Sr(t,i,s),e!==null&&(En(e,t,s,r),Ka(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ot(),s=kr(t),i=Yn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Sr(t,i,s),e!==null&&(En(e,t,s,r),Ka(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ot(),r=kr(t),s=Yn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Sr(t,s,r),e!==null&&(En(e,t,r,n),Ka(e,t,r))}};function um(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!yo(n,r)||!yo(s,i):!0}function ky(t,e,n){var r=!1,s=Pr,i=e.contextType;return typeof i=="object"&&i!==null?i=un(i):(s=Ut(e)?is:kt.current,r=e.contextTypes,i=(r=r!=null)?Qs(t,s):Pr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=su,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function cm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&su.enqueueReplaceState(e,e.state,null)}function id(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},_h(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=un(i):(i=Ut(e)?is:kt.current,s.context=Qs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&su.enqueueReplaceState(s,s.state,null),El(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Zs(t,e){try{var n="",r=e;do n+=rx(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function lc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function od(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RE=typeof WeakMap=="function"?WeakMap:Map;function Cy(t,e,n){n=Yn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){kl||(kl=!0,gd=r),od(t,e)},n}function Ay(t,e,n){n=Yn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){od(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){od(t,e),typeof r!="function"&&(br===null?br=new Set([this]):br.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function dm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=HE.bind(null,t,e,n),e.then(t,t))}function hm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yn(-1,1),e.tag=2,Sr(n,e,1))),n.lanes|=1),t)}var NE=or.ReactCurrentOwner,Ft=!1;function Dt(t,e,n,r){e.child=t===null?sy(e,null,n,r):Xs(e,t.child,n,r)}function pm(t,e,n,r,s){n=n.render;var i=e.ref;return Hs(e,s),r=Th(t,e,n,r,i,s),n=Sh(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(Ve&&n&&hh(e),e.flags|=1,Dt(t,e,r,s),e.child)}function mm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Oh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ry(t,e,i,r,s)):(t=el(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:yo,n(o,r)&&t.ref===e.ref)return nr(t,e,s)}return e.flags|=1,t=Cr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Ry(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(yo(i,r)&&t.ref===e.ref)if(Ft=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ft=!0);else return e.lanes=t.lanes,nr(t,e,s)}return ad(t,e,n,r,s)}function Ny(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(js,Gt),Gt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(js,Gt),Gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Re(js,Gt),Gt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Re(js,Gt),Gt|=r;return Dt(t,e,s,n),e.child}function Py(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ad(t,e,n,r,s){var i=Ut(n)?is:kt.current;return i=Qs(e,i),Hs(e,s),n=Th(t,e,n,r,i,s),r=Sh(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(Ve&&r&&hh(e),e.flags|=1,Dt(t,e,n,s),e.child)}function gm(t,e,n,r,s){if(Ut(n)){var i=!0;yl(e)}else i=!1;if(Hs(e,s),e.stateNode===null)Xa(t,e),ky(e,n,r),id(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=un(d):(d=Ut(n)?is:kt.current,d=Qs(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&cm(e,o,r,d),pr=!1;var g=e.memoizedState;o.state=g,El(e,r,o,s),u=e.memoizedState,l!==r||g!==u||zt.current||pr?(typeof f=="function"&&(sd(e,n,f,r),u=e.memoizedState),(l=pr||um(e,n,l,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,oy(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:yn(e.type,l),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=un(u):(u=Ut(n)?is:kt.current,u=Qs(e,u));var E=n.getDerivedStateFromProps;(f=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&cm(e,o,r,u),pr=!1,g=e.memoizedState,o.state=g,El(e,r,o,s);var A=e.memoizedState;l!==m||g!==A||zt.current||pr?(typeof E=="function"&&(sd(e,n,E,r),A=e.memoizedState),(d=pr||um(e,n,d,r,g,A,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return ld(t,e,n,r,i,s)}function ld(t,e,n,r,s,i){Py(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&tm(e,n,!1),nr(t,e,i);r=e.stateNode,NE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Xs(e,t.child,null,i),e.child=Xs(e,null,l,i)):Dt(t,e,l,i),e.memoizedState=r.state,s&&tm(e,n,!0),e.child}function Dy(t){var e=t.stateNode;e.pendingContext?em(t,e.pendingContext,e.pendingContext!==e.context):e.context&&em(t,e.context,!1),wh(t,e.containerInfo)}function ym(t,e,n,r,s){return Ys(),ph(s),e.flags|=256,Dt(t,e,n,r),e.child}var ud={dehydrated:null,treeContext:null,retryLane:0};function cd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vy(t,e,n){var r=e.pendingProps,s=Oe.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Re(Oe,s&1),t===null)return nd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=au(o,r,0,null),t=rs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=cd(n),e.memoizedState=ud,t):Ch(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return PE(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Cr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Cr(l,i):(i=rs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?cd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ud,r}return i=t.child,t=i.sibling,r=Cr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ch(t,e){return e=au({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Da(t,e,n,r){return r!==null&&ph(r),Xs(e,t.child,null,n),t=Ch(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=lc(Error($(422))),Da(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=au({mode:"visible",children:r.children},s,0,null),i=rs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Xs(e,t.child,null,o),e.child.memoizedState=cd(o),e.memoizedState=ud,i);if(!(e.mode&1))return Da(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=lc(i,r,void 0),Da(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ft||l){if(r=st,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,tr(t,s),En(r,t,s,-1))}return Vh(),r=lc(Error($(421))),Da(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=WE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Kt=Tr(s.nextSibling),Qt=e,Ve=!0,_n=null,t!==null&&(tn[nn++]=Gn,tn[nn++]=Kn,tn[nn++]=os,Gn=t.id,Kn=t.overflow,os=e),e=Ch(e,r.children),e.flags|=4096,e)}function vm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rd(t.return,e,n)}function uc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Oy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Dt(t,e,r.children,n),r=Oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vm(t,n,e);else if(t.tag===19)vm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Re(Oe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Il(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),uc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Il(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}uc(e,!0,n,null,i);break;case"together":uc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ls|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Cr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DE(t,e,n){switch(e.tag){case 3:Dy(e),Ys();break;case 5:ay(e);break;case 1:Ut(e.type)&&yl(e);break;case 4:wh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Re(wl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Re(Oe,Oe.current&1),e.flags|=128,null):n&e.child.childLanes?Vy(t,e,n):(Re(Oe,Oe.current&1),t=nr(t,e,n),t!==null?t.sibling:null);Re(Oe,Oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Oy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Re(Oe,Oe.current),r)break;return null;case 22:case 23:return e.lanes=0,Ny(t,e,n)}return nr(t,e,n)}var Ly,dd,My,jy;Ly=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dd=function(){};My=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,es(Nn.current);var i=null;switch(n){case"input":s=Dc(t,s),r=Dc(t,r),i=[];break;case"select":s=Me({},s,{value:void 0}),r=Me({},r,{value:void 0}),i=[];break;case"textarea":s=Lc(t,s),r=Lc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ml)}jc(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(uo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(uo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Pe("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};jy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mi(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function VE(t,e,n){var r=e.pendingProps;switch(fh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return Ut(e.type)&&gl(),Et(e),null;case 3:return r=e.stateNode,Js(),De(zt),De(kt),Eh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Na(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_n!==null&&(_d(_n),_n=null))),dd(t,e),Et(e),null;case 5:xh(e);var s=es(Eo.current);if(n=e.type,t!==null&&e.stateNode!=null)My(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Et(e),null}if(t=es(Nn.current),Na(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[An]=e,r[wo]=i,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(s=0;s<$i.length;s++)Pe($i[s],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":kp(r,i),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Pe("invalid",r);break;case"textarea":Ap(r,i),Pe("invalid",r)}jc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ra(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ra(r.textContent,l,t),s=["children",""+l]):uo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Pe("scroll",r)}switch(n){case"input":Ea(r),Cp(r,i,!0);break;case"textarea":Ea(r),Rp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ml)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=h0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[An]=e,t[wo]=r,Ly(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fc(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),s=r;break;case"iframe":case"object":case"embed":Pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<$i.length;s++)Pe($i[s],t);s=r;break;case"source":Pe("error",t),s=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),s=r;break;case"details":Pe("toggle",t),s=r;break;case"input":kp(t,r),s=Dc(t,r),Pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Me({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":Ap(t,r),s=Lc(t,r),Pe("invalid",t);break;default:s=r}jc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?m0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&f0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&co(t,u):typeof u=="number"&&co(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(uo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Pe("scroll",t):u!=null&&Jd(t,i,u,o))}switch(n){case"input":Ea(t),Cp(t,r,!1);break;case"textarea":Ea(t),Rp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Nr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?zs(t,!!r.multiple,i,!1):r.defaultValue!=null&&zs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ml)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)jy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=es(Eo.current),es(Nn.current),Na(e)){if(r=e.stateNode,n=e.memoizedProps,r[An]=e,(i=r.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:Ra(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ra(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[An]=e,e.stateNode=r}return Et(e),null;case 13:if(De(Oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&Kt!==null&&e.mode&1&&!(e.flags&128))ny(),Ys(),e.flags|=98560,i=!1;else if(i=Na(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[An]=e}else Ys(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),i=!1}else _n!==null&&(_d(_n),_n=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?Ze===0&&(Ze=3):Vh())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return Js(),dd(t,e),t===null&&vo(e.stateNode.containerInfo),Et(e),null;case 10:return yh(e.type._context),Et(e),null;case 17:return Ut(e.type)&&gl(),Et(e),null;case 19:if(De(Oe),i=e.memoizedState,i===null)return Et(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Mi(i,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Il(t),o!==null){for(e.flags|=128,Mi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re(Oe,Oe.current&1|2),e.child}t=t.sibling}i.tail!==null&&He()>ei&&(e.flags|=128,r=!0,Mi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Il(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ve)return Et(e),null}else 2*He()-i.renderingStartTime>ei&&n!==1073741824&&(e.flags|=128,r=!0,Mi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=He(),e.sibling=null,n=Oe.current,Re(Oe,r?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return Dh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gt&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function OE(t,e){switch(fh(e),e.tag){case 1:return Ut(e.type)&&gl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Js(),De(zt),De(kt),Eh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xh(e),null;case 13:if(De(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Ys()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De(Oe),null;case 4:return Js(),null;case 10:return yh(e.type._context),null;case 22:case 23:return Dh(),null;case 24:return null;default:return null}}var Va=!1,St=!1,LE=typeof WeakSet=="function"?WeakSet:Set,K=null;function Ms(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function hd(t,e,n){try{n()}catch(r){ze(t,e,r)}}var _m=!1;function ME(t,e){if(Qc=hl,t=$0(),dh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var E;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(E=m.firstChild)!==null;)g=m,m=E;for(;;){if(m===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(u=o),(E=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=E}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yc={focusedElem:t,selectionRange:n},hl=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var C=A.memoizedProps,N=A.memoizedState,I=e.stateNode,_=I.getSnapshotBeforeUpdate(e.elementType===e.type?C:yn(e.type,C),N);I.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(D){ze(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return A=_m,_m=!1,A}function Zi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&hd(e,n,i)}s=s.next}while(s!==r)}}function iu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Fy(t){var e=t.alternate;e!==null&&(t.alternate=null,Fy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[An],delete e[wo],delete e[Zc],delete e[_E],delete e[wE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zy(t){return t.tag===5||t.tag===3||t.tag===4}function wm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ml));else if(r!==4&&(t=t.child,t!==null))for(pd(t,e,n),t=t.sibling;t!==null;)pd(t,e,n),t=t.sibling}function md(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(md(t,e,n),t=t.sibling;t!==null;)md(t,e,n),t=t.sibling}var lt=null,vn=!1;function hr(t,e,n){for(n=n.child;n!==null;)Uy(t,e,n),n=n.sibling}function Uy(t,e,n){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(Xl,n)}catch{}switch(n.tag){case 5:St||Ms(n,e);case 6:var r=lt,s=vn;lt=null,hr(t,e,n),lt=r,vn=s,lt!==null&&(vn?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(vn?(t=lt,n=n.stateNode,t.nodeType===8?nc(t.parentNode,n):t.nodeType===1&&nc(t,n),mo(t)):nc(lt,n.stateNode));break;case 4:r=lt,s=vn,lt=n.stateNode.containerInfo,vn=!0,hr(t,e,n),lt=r,vn=s;break;case 0:case 11:case 14:case 15:if(!St&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hd(n,e,o),s=s.next}while(s!==r)}hr(t,e,n);break;case 1:if(!St&&(Ms(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ze(n,e,l)}hr(t,e,n);break;case 21:hr(t,e,n);break;case 22:n.mode&1?(St=(r=St)||n.memoizedState!==null,hr(t,e,n),St=r):hr(t,e,n);break;default:hr(t,e,n)}}function xm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new LE),e.forEach(function(r){var s=qE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:lt=l.stateNode,vn=!1;break e;case 3:lt=l.stateNode.containerInfo,vn=!0;break e;case 4:lt=l.stateNode.containerInfo,vn=!0;break e}l=l.return}if(lt===null)throw Error($(160));Uy(i,o,s),lt=null,vn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){ze(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)By(e,t),e=e.sibling}function By(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gn(e,t),kn(t),r&4){try{Zi(3,t,t.return),iu(3,t)}catch(C){ze(t,t.return,C)}try{Zi(5,t,t.return)}catch(C){ze(t,t.return,C)}}break;case 1:gn(e,t),kn(t),r&512&&n!==null&&Ms(n,n.return);break;case 5:if(gn(e,t),kn(t),r&512&&n!==null&&Ms(n,n.return),t.flags&32){var s=t.stateNode;try{co(s,"")}catch(C){ze(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&c0(s,i),Fc(l,o);var d=Fc(l,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?m0(s,m):f==="dangerouslySetInnerHTML"?f0(s,m):f==="children"?co(s,m):Jd(s,f,m,d)}switch(l){case"input":Vc(s,i);break;case"textarea":d0(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?zs(s,!!i.multiple,E,!1):g!==!!i.multiple&&(i.defaultValue!=null?zs(s,!!i.multiple,i.defaultValue,!0):zs(s,!!i.multiple,i.multiple?[]:"",!1))}s[wo]=i}catch(C){ze(t,t.return,C)}}break;case 6:if(gn(e,t),kn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){ze(t,t.return,C)}}break;case 3:if(gn(e,t),kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mo(e.containerInfo)}catch(C){ze(t,t.return,C)}break;case 4:gn(e,t),kn(t);break;case 13:gn(e,t),kn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Nh=He())),r&4&&xm(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(St=(d=St)||f,gn(e,t),St=d):gn(e,t),kn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(K=t,f=t.child;f!==null;){for(m=K=f;K!==null;){switch(g=K,E=g.child,g.tag){case 0:case 11:case 14:case 15:Zi(4,g,g.return);break;case 1:Ms(g,g.return);var A=g.stateNode;if(typeof A.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(C){ze(r,n,C)}}break;case 5:Ms(g,g.return);break;case 22:if(g.memoizedState!==null){Im(m);continue}}E!==null?(E.return=g,K=E):Im(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=p0("display",o))}catch(C){ze(t,t.return,C)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(C){ze(t,t.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:gn(e,t),kn(t),r&4&&xm(t);break;case 21:break;default:gn(e,t),kn(t)}}function kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zy(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(co(s,""),r.flags&=-33);var i=wm(t);md(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=wm(t);pd(t,l,o);break;default:throw Error($(161))}}catch(u){ze(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jE(t,e,n){K=t,$y(t)}function $y(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var s=K,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Va;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||St;l=Va;var d=St;if(Va=o,(St=u)&&!d)for(K=s;K!==null;)o=K,u=o.child,o.tag===22&&o.memoizedState!==null?Tm(s):u!==null?(u.return=o,K=u):Tm(s);for(;i!==null;)K=i,$y(i),i=i.sibling;K=s,Va=l,St=d}Em(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,K=i):Em(t)}}function Em(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:St||iu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!St)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:yn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&om(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}om(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&mo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}St||e.flags&512&&fd(e)}catch(g){ze(e,e.return,g)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Im(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Tm(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{iu(4,e)}catch(u){ze(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){ze(e,s,u)}}var i=e.return;try{fd(e)}catch(u){ze(e,i,u)}break;case 5:var o=e.return;try{fd(e)}catch(u){ze(e,o,u)}}}catch(u){ze(e,e.return,u)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var FE=Math.ceil,bl=or.ReactCurrentDispatcher,Ah=or.ReactCurrentOwner,on=or.ReactCurrentBatchConfig,_e=0,st=null,Qe=null,dt=0,Gt=0,js=Fr(0),Ze=0,bo=null,ls=0,ou=0,Rh=0,eo=null,jt=null,Nh=0,ei=1/0,Hn=null,kl=!1,gd=null,br=null,Oa=!1,_r=null,Cl=0,to=0,yd=null,Ja=-1,Za=0;function Ot(){return _e&6?He():Ja!==-1?Ja:Ja=He()}function kr(t){return t.mode&1?_e&2&&dt!==0?dt&-dt:EE.transition!==null?(Za===0&&(Za=k0()),Za):(t=ke,t!==0||(t=window.event,t=t===void 0?16:V0(t.type)),t):1}function En(t,e,n,r){if(50<to)throw to=0,yd=null,Error($(185));Bo(t,n,r),(!(_e&2)||t!==st)&&(t===st&&(!(_e&2)&&(ou|=n),Ze===4&&yr(t,dt)),Bt(t,r),n===1&&_e===0&&!(e.mode&1)&&(ei=He()+500,nu&&zr()))}function Bt(t,e){var n=t.callbackNode;Ex(t,e);var r=dl(t,t===st?dt:0);if(r===0)n!==null&&Dp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Dp(n),e===1)t.tag===0?xE(Sm.bind(null,t)):Z0(Sm.bind(null,t)),yE(function(){!(_e&6)&&zr()}),n=null;else{switch(C0(r)){case 1:n=rh;break;case 4:n=S0;break;case 16:n=cl;break;case 536870912:n=b0;break;default:n=cl}n=Xy(n,Hy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Hy(t,e){if(Ja=-1,Za=0,_e&6)throw Error($(327));var n=t.callbackNode;if(Ws()&&t.callbackNode!==n)return null;var r=dl(t,t===st?dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Al(t,r);else{e=r;var s=_e;_e|=2;var i=qy();(st!==t||dt!==e)&&(Hn=null,ei=He()+500,ns(t,e));do try{BE();break}catch(l){Wy(t,l)}while(!0);gh(),bl.current=i,_e=s,Qe!==null?e=0:(st=null,dt=0,e=Ze)}if(e!==0){if(e===2&&(s=Hc(t),s!==0&&(r=s,e=vd(t,s))),e===1)throw n=bo,ns(t,0),yr(t,r),Bt(t,He()),n;if(e===6)yr(t,r);else{if(s=t.current.alternate,!(r&30)&&!zE(s)&&(e=Al(t,r),e===2&&(i=Hc(t),i!==0&&(r=i,e=vd(t,i))),e===1))throw n=bo,ns(t,0),yr(t,r),Bt(t,He()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Yr(t,jt,Hn);break;case 3:if(yr(t,r),(r&130023424)===r&&(e=Nh+500-He(),10<e)){if(dl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ot(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Jc(Yr.bind(null,t,jt,Hn),e);break}Yr(t,jt,Hn);break;case 4:if(yr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-xn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FE(r/1960))-r,10<r){t.timeoutHandle=Jc(Yr.bind(null,t,jt,Hn),r);break}Yr(t,jt,Hn);break;case 5:Yr(t,jt,Hn);break;default:throw Error($(329))}}}return Bt(t,He()),t.callbackNode===n?Hy.bind(null,t):null}function vd(t,e){var n=eo;return t.current.memoizedState.isDehydrated&&(ns(t,e).flags|=256),t=Al(t,e),t!==2&&(e=jt,jt=n,e!==null&&_d(e)),t}function _d(t){jt===null?jt=t:jt.push.apply(jt,t)}function zE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!In(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yr(t,e){for(e&=~Rh,e&=~ou,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xn(e),r=1<<n;t[n]=-1,e&=~r}}function Sm(t){if(_e&6)throw Error($(327));Ws();var e=dl(t,0);if(!(e&1))return Bt(t,He()),null;var n=Al(t,e);if(t.tag!==0&&n===2){var r=Hc(t);r!==0&&(e=r,n=vd(t,r))}if(n===1)throw n=bo,ns(t,0),yr(t,e),Bt(t,He()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yr(t,jt,Hn),Bt(t,He()),null}function Ph(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(ei=He()+500,nu&&zr())}}function us(t){_r!==null&&_r.tag===0&&!(_e&6)&&Ws();var e=_e;_e|=1;var n=on.transition,r=ke;try{if(on.transition=null,ke=1,t)return t()}finally{ke=r,on.transition=n,_e=e,!(_e&6)&&zr()}}function Dh(){Gt=js.current,De(js)}function ns(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gE(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(fh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gl();break;case 3:Js(),De(zt),De(kt),Eh();break;case 5:xh(r);break;case 4:Js();break;case 13:De(Oe);break;case 19:De(Oe);break;case 10:yh(r.type._context);break;case 22:case 23:Dh()}n=n.return}if(st=t,Qe=t=Cr(t.current,null),dt=Gt=e,Ze=0,bo=null,Rh=ou=ls=0,jt=eo=null,Zr!==null){for(e=0;e<Zr.length;e++)if(n=Zr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Zr=null}return t}function Wy(t,e){do{var n=Qe;try{if(gh(),Qa.current=Sl,Tl){for(var r=Le.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Tl=!1}if(as=0,nt=Ye=Le=null,Ji=!1,Io=0,Ah.current=null,n===null||n.return===null){Ze=1,bo=e,Qe=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=dt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var E=hm(o);if(E!==null){E.flags&=-257,fm(E,o,l,i,e),E.mode&1&&dm(i,d,e),e=E,u=d;var A=e.updateQueue;if(A===null){var C=new Set;C.add(u),e.updateQueue=C}else A.add(u);break e}else{if(!(e&1)){dm(i,d,e),Vh();break e}u=Error($(426))}}else if(Ve&&l.mode&1){var N=hm(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),fm(N,o,l,i,e),ph(Zs(u,l));break e}}i=u=Zs(u,l),Ze!==4&&(Ze=2),eo===null?eo=[i]:eo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=Cy(i,u,e);im(i,I);break e;case 1:l=u;var _=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(br===null||!br.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=Ay(i,l,e);im(i,D);break e}}i=i.return}while(i!==null)}Ky(n)}catch(L){e=L,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function qy(){var t=bl.current;return bl.current=Sl,t===null?Sl:t}function Vh(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),st===null||!(ls&268435455)&&!(ou&268435455)||yr(st,dt)}function Al(t,e){var n=_e;_e|=2;var r=qy();(st!==t||dt!==e)&&(Hn=null,ns(t,e));do try{UE();break}catch(s){Wy(t,s)}while(!0);if(gh(),_e=n,bl.current=r,Qe!==null)throw Error($(261));return st=null,dt=0,Ze}function UE(){for(;Qe!==null;)Gy(Qe)}function BE(){for(;Qe!==null&&!fx();)Gy(Qe)}function Gy(t){var e=Yy(t.alternate,t,Gt);t.memoizedProps=t.pendingProps,e===null?Ky(t):Qe=e,Ah.current=null}function Ky(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=OE(n,e),n!==null){n.flags&=32767,Qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Qe=null;return}}else if(n=VE(n,e,Gt),n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);Ze===0&&(Ze=5)}function Yr(t,e,n){var r=ke,s=on.transition;try{on.transition=null,ke=1,$E(t,e,n,r)}finally{on.transition=s,ke=r}return null}function $E(t,e,n,r){do Ws();while(_r!==null);if(_e&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Ix(t,i),t===st&&(Qe=st=null,dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oa||(Oa=!0,Xy(cl,function(){return Ws(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=on.transition,on.transition=null;var o=ke;ke=1;var l=_e;_e|=4,Ah.current=null,ME(t,n),By(n,t),uE(Yc),hl=!!Qc,Yc=Qc=null,t.current=n,jE(n),px(),_e=l,ke=o,on.transition=i}else t.current=n;if(Oa&&(Oa=!1,_r=t,Cl=s),i=t.pendingLanes,i===0&&(br=null),yx(n.stateNode),Bt(t,He()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(kl)throw kl=!1,t=gd,gd=null,t;return Cl&1&&t.tag!==0&&Ws(),i=t.pendingLanes,i&1?t===yd?to++:(to=0,yd=t):to=0,zr(),null}function Ws(){if(_r!==null){var t=C0(Cl),e=on.transition,n=ke;try{if(on.transition=null,ke=16>t?16:t,_r===null)var r=!1;else{if(t=_r,_r=null,Cl=0,_e&6)throw Error($(331));var s=_e;for(_e|=4,K=t.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(K=d;K!==null;){var f=K;switch(f.tag){case 0:case 11:case 15:Zi(8,f,i)}var m=f.child;if(m!==null)m.return=f,K=m;else for(;K!==null;){f=K;var g=f.sibling,E=f.return;if(Fy(f),f===d){K=null;break}if(g!==null){g.return=E,K=g;break}K=E}}}var A=i.alternate;if(A!==null){var C=A.child;if(C!==null){A.child=null;do{var N=C.sibling;C.sibling=null,C=N}while(C!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zi(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,K=I;break e}K=i.return}}var _=t.current;for(K=_;K!==null;){o=K;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,K=S;else e:for(o=_;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:iu(9,l)}}catch(L){ze(l,l.return,L)}if(l===o){K=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,K=D;break e}K=l.return}}if(_e=s,zr(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(Xl,t)}catch{}r=!0}return r}finally{ke=n,on.transition=e}}return!1}function bm(t,e,n){e=Zs(n,e),e=Cy(t,e,1),t=Sr(t,e,1),e=Ot(),t!==null&&(Bo(t,1,e),Bt(t,e))}function ze(t,e,n){if(t.tag===3)bm(t,t,n);else for(;e!==null;){if(e.tag===3){bm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(br===null||!br.has(r))){t=Zs(n,t),t=Ay(e,t,1),e=Sr(e,t,1),t=Ot(),e!==null&&(Bo(e,1,t),Bt(e,t));break}}e=e.return}}function HE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ot(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(dt&n)===n&&(Ze===4||Ze===3&&(dt&130023424)===dt&&500>He()-Nh?ns(t,0):Rh|=n),Bt(t,e)}function Qy(t,e){e===0&&(t.mode&1?(e=Sa,Sa<<=1,!(Sa&130023424)&&(Sa=4194304)):e=1);var n=Ot();t=tr(t,e),t!==null&&(Bo(t,e,n),Bt(t,n))}function WE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Qy(t,n)}function qE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),Qy(t,n)}var Yy;Yy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zt.current)Ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ft=!1,DE(t,e,n);Ft=!!(t.flags&131072)}else Ft=!1,Ve&&e.flags&1048576&&ey(e,_l,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xa(t,e),t=e.pendingProps;var s=Qs(e,kt.current);Hs(e,n),s=Th(null,e,r,t,s,n);var i=Sh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ut(r)?(i=!0,yl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_h(e),s.updater=su,e.stateNode=s,s._reactInternals=e,id(e,r,t,n),e=ld(null,e,r,!0,i,n)):(e.tag=0,Ve&&i&&hh(e),Dt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=KE(r),t=yn(r,t),s){case 0:e=ad(null,e,r,t,n);break e;case 1:e=gm(null,e,r,t,n);break e;case 11:e=pm(null,e,r,t,n);break e;case 14:e=mm(null,e,r,yn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),ad(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),gm(t,e,r,s,n);case 3:e:{if(Dy(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,oy(t,e),El(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Zs(Error($(423)),e),e=ym(t,e,r,n,s);break e}else if(r!==s){s=Zs(Error($(424)),e),e=ym(t,e,r,n,s);break e}else for(Kt=Tr(e.stateNode.containerInfo.firstChild),Qt=e,Ve=!0,_n=null,n=sy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ys(),r===s){e=nr(t,e,n);break e}Dt(t,e,r,n)}e=e.child}return e;case 5:return ay(e),t===null&&nd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Xc(r,s)?o=null:i!==null&&Xc(r,i)&&(e.flags|=32),Py(t,e),Dt(t,e,o,n),e.child;case 6:return t===null&&nd(e),null;case 13:return Vy(t,e,n);case 4:return wh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xs(e,null,r,n):Dt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),pm(t,e,r,s,n);case 7:return Dt(t,e,e.pendingProps,n),e.child;case 8:return Dt(t,e,e.pendingProps.children,n),e.child;case 12:return Dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Re(wl,r._currentValue),r._currentValue=o,i!==null)if(In(i.value,o)){if(i.children===s.children&&!zt.current){e=nr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Yn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),rd(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),rd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Dt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Hs(e,n),s=un(s),r=r(s),e.flags|=1,Dt(t,e,r,n),e.child;case 14:return r=e.type,s=yn(r,e.pendingProps),s=yn(r.type,s),mm(t,e,r,s,n);case 15:return Ry(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),Xa(t,e),e.tag=1,Ut(r)?(t=!0,yl(e)):t=!1,Hs(e,n),ky(e,r,s),id(e,r,s,n),ld(null,e,r,!0,t,n);case 19:return Oy(t,e,n);case 22:return Ny(t,e,n)}throw Error($(156,e.tag))};function Xy(t,e){return T0(t,e)}function GE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(t,e,n,r){return new GE(t,e,n,r)}function Oh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KE(t){if(typeof t=="function")return Oh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eh)return 11;if(t===th)return 14}return 2}function Cr(t,e){var n=t.alternate;return n===null?(n=sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function el(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Oh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cs:return rs(n.children,s,i,e);case Zd:o=8,s|=8;break;case Ac:return t=sn(12,n,e,s|2),t.elementType=Ac,t.lanes=i,t;case Rc:return t=sn(13,n,e,s),t.elementType=Rc,t.lanes=i,t;case Nc:return t=sn(19,n,e,s),t.elementType=Nc,t.lanes=i,t;case a0:return au(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case i0:o=10;break e;case o0:o=9;break e;case eh:o=11;break e;case th:o=14;break e;case fr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=sn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function rs(t,e,n,r){return t=sn(7,t,r,e),t.lanes=n,t}function au(t,e,n,r){return t=sn(22,t,r,e),t.elementType=a0,t.lanes=n,t.stateNode={isHidden:!1},t}function cc(t,e,n){return t=sn(6,t,null,e),t.lanes=n,t}function dc(t,e,n){return e=sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wu(0),this.expirationTimes=Wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lh(t,e,n,r,s,i,o,l,u){return t=new QE(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=sn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_h(i),t}function YE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ks,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Jy(t){if(!t)return Pr;t=t._reactInternals;e:{if(ps(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Ut(n))return J0(t,n,e)}return e}function Zy(t,e,n,r,s,i,o,l,u){return t=Lh(n,r,!0,t,s,i,o,l,u),t.context=Jy(null),n=t.current,r=Ot(),s=kr(n),i=Yn(r,s),i.callback=e??null,Sr(n,i,s),t.current.lanes=s,Bo(t,s,r),Bt(t,r),t}function lu(t,e,n,r){var s=e.current,i=Ot(),o=kr(s);return n=Jy(n),e.context===null?e.context=n:e.pendingContext=n,e=Yn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Sr(s,e,o),t!==null&&(En(t,s,o,i),Ka(t,s,o)),o}function Rl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function km(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mh(t,e){km(t,e),(t=t.alternate)&&km(t,e)}function XE(){return null}var ev=typeof reportError=="function"?reportError:function(t){console.error(t)};function jh(t){this._internalRoot=t}uu.prototype.render=jh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));lu(t,e,null,null)};uu.prototype.unmount=jh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;us(function(){lu(null,t,null,null)}),e[er]=null}};function uu(t){this._internalRoot=t}uu.prototype.unstable_scheduleHydration=function(t){if(t){var e=N0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gr.length&&e!==0&&e<gr[n].priority;n++);gr.splice(n,0,t),n===0&&D0(t)}};function Fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cm(){}function JE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Rl(o);i.call(d)}}var o=Zy(e,r,t,0,null,!1,!1,"",Cm);return t._reactRootContainer=o,t[er]=o.current,vo(t.nodeType===8?t.parentNode:t),us(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Rl(u);l.call(d)}}var u=Lh(t,0,!1,null,null,!1,!1,"",Cm);return t._reactRootContainer=u,t[er]=u.current,vo(t.nodeType===8?t.parentNode:t),us(function(){lu(e,u,n,r)}),u}function du(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Rl(o);l.call(u)}}lu(e,o,t,s)}else o=JE(n,e,t,s,r);return Rl(o)}A0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bi(e.pendingLanes);n!==0&&(sh(e,n|1),Bt(e,He()),!(_e&6)&&(ei=He()+500,zr()))}break;case 13:us(function(){var r=tr(t,1);if(r!==null){var s=Ot();En(r,t,1,s)}}),Mh(t,1)}};ih=function(t){if(t.tag===13){var e=tr(t,134217728);if(e!==null){var n=Ot();En(e,t,134217728,n)}Mh(t,134217728)}};R0=function(t){if(t.tag===13){var e=kr(t),n=tr(t,e);if(n!==null){var r=Ot();En(n,t,e,r)}Mh(t,e)}};N0=function(){return ke};P0=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};Uc=function(t,e,n){switch(e){case"input":if(Vc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=tu(r);if(!s)throw Error($(90));u0(r),Vc(r,s)}}}break;case"textarea":d0(t,n);break;case"select":e=n.value,e!=null&&zs(t,!!n.multiple,e,!1)}};v0=Ph;_0=us;var ZE={usingClientEntryPoint:!1,Events:[Ho,Ps,tu,g0,y0,Ph]},ji={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e1={bundleType:ji.bundleType,version:ji.version,rendererPackageName:ji.rendererPackageName,rendererConfig:ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:or.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=E0(t),t===null?null:t.stateNode},findFiberByHostInstance:ji.findFiberByHostInstance||XE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var La=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!La.isDisabled&&La.supportsFiber)try{Xl=La.inject(e1),Rn=La}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZE;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fh(e))throw Error($(200));return YE(t,e,null,n)};Xt.createRoot=function(t,e){if(!Fh(t))throw Error($(299));var n=!1,r="",s=ev;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lh(t,1,!1,null,null,n,!1,r,s),t[er]=e.current,vo(t.nodeType===8?t.parentNode:t),new jh(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=E0(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return us(t)};Xt.hydrate=function(t,e,n){if(!cu(e))throw Error($(200));return du(null,t,e,!0,n)};Xt.hydrateRoot=function(t,e,n){if(!Fh(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ev;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Zy(e,null,t,1,n??null,s,!1,i,o),t[er]=e.current,vo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new uu(e)};Xt.render=function(t,e,n){if(!cu(e))throw Error($(200));return du(null,t,e,!1,n)};Xt.unmountComponentAtNode=function(t){if(!cu(t))throw Error($(40));return t._reactRootContainer?(us(function(){du(null,null,t,!1,function(){t._reactRootContainer=null,t[er]=null})}),!0):!1};Xt.unstable_batchedUpdates=Ph;Xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!cu(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return du(t,e,n,!1,r)};Xt.version="18.3.1-next-f1338f8080-20240426";function tv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tv)}catch(t){console.error(t)}}tv(),t0.exports=Xt;var Fs=t0.exports,Am=Fs;kc.createRoot=Am.createRoot,kc.hydrateRoot=Am.hydrateRoot;const Ie=()=>Math.random().toString(36).substring(2,9),ce="folder_default",he="group_default",wd="trip_group_default",hc=[{name:"Amber",class:"bg-amber-50 text-amber-700 border-amber-200"},{name:"Blue",class:"bg-blue-50 text-blue-700 border-blue-200"},{name:"Purple",class:"bg-purple-50 text-purple-700 border-purple-200"},{name:"Emerald",class:"bg-emerald-50 text-emerald-700 border-emerald-200"},{name:"Slate",class:"bg-slate-50 text-slate-700 border-slate-200"},{name:"Red",class:"bg-red-50 text-red-700 border-red-200"},{name:"Orange",class:"bg-orange-50 text-orange-700 border-orange-200"},{name:"Teal",class:"bg-teal-50 text-teal-700 border-teal-200"},{name:"Pink",class:"bg-pink-50 text-pink-700 border-pink-200"},{name:"Indigo",class:"bg-indigo-50 text-indigo-700 border-indigo-200"}],fc=[{id:"cat_tools",name:"/",color:"bg-amber-50 text-amber-700 border-amber-200"},{id:"cat_hardware",name:"/PCBA",color:"bg-blue-50 text-blue-700 border-blue-200"},{id:"cat_cables",name:"/",color:"bg-purple-50 text-purple-700 border-purple-200"},{id:"cat_software",name:"/",color:"bg-emerald-50 text-emerald-700 border-emerald-200"},{id:"cat_docs",name:"/",color:"bg-slate-50 text-slate-700 border-slate-200"}],t1=[{id:ce,name:" (Business)",isSystem:!0},{id:"folder_travel",name:" (Travel)",isSystem:!1}],n1=[{id:he,folderId:ce,name:"",isSystem:!0},{id:"group_travel_default",folderId:"folder_travel",name:"",isSystem:!0}],r1=[{id:Ie(),folderId:ce,groupId:he,category:"cat_tools",name:"ST-Link (U2-04)",defaultVersion:""},{id:Ie(),folderId:ce,groupId:he,category:"cat_tools",name:"U-4P-10",defaultVersion:""},{id:Ie(),folderId:ce,groupId:he,category:"cat_tools",name:"3.3v PWR-5",defaultVersion:""},{id:Ie(),folderId:ce,groupId:he,category:"cat_tools",name:"U-TTL-4 (WIFI)",defaultVersion:""},{id:Ie(),folderId:ce,groupId:he,category:"cat_tools",name:"",defaultVersion:""},{id:Ie(),folderId:ce,groupId:he,category:"cat_tools",name:"-2",defaultVersion:""},{id:Ie(),folderId:ce,groupId:he,category:"cat_tools",name:"USB-3p -1",defaultVersion:""},{id:Ie(),folderId:ce,groupId:he,category:"cat_tools",name:"USB-3p -2",defaultVersion:""},{id:Ie(),folderId:ce,groupId:he,category:"cat_tools",name:"",defaultVersion:""},{id:Ie(),folderId:ce,groupId:he,category:"cat_tools",name:"ROS3 (UR8UR10)",defaultVersion:""},{id:Ie(),folderId:ce,groupId:he,category:"cat_hardware",name:"OSG PCBA ++",defaultVersion:"V1.6"},{id:Ie(),folderId:ce,groupId:he,category:"cat_hardware",name:"ROS PVBA +Ozon",defaultVersion:"V1.73"},{id:Ie(),folderId:ce,groupId:he,category:"cat_hardware",name:"ROSV",defaultVersion:"1.7"},{id:Ie(),folderId:ce,groupId:he,category:"cat_hardware",name:"Ozone",defaultVersion:"122"},{id:Ie(),folderId:ce,groupId:he,category:"cat_hardware",name:"ROS",defaultVersion:"9"},{id:Ie(),folderId:ce,groupId:he,category:"cat_hardware",name:"Alpha Sensor",defaultVersion:""},{id:Ie(),folderId:ce,groupId:he,category:"cat_hardware",name:"PCB (/)",defaultVersion:""},{id:Ie(),folderId:ce,groupId:he,category:"cat_cables",name:" (1316)",defaultVersion:""},{id:Ie(),folderId:ce,groupId:he,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C1"},{id:Ie(),folderId:ce,groupId:he,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C2"},{id:Ie(),folderId:ce,groupId:he,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C1"},{id:Ie(),folderId:ce,groupId:he,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C1"},{id:Ie(),folderId:ce,groupId:he,category:"cat_cables",name:"USB PORT Hub",defaultVersion:"*1"},{id:Ie(),folderId:ce,groupId:he,category:"cat_cables",name:"",defaultVersion:""},{id:Ie(),folderId:ce,groupId:he,category:"cat_cables",name:"",defaultVersion:"8"},{id:Ie(),folderId:ce,groupId:he,category:"cat_cables",name:" (CL+S1+)",defaultVersion:"2"},{id:Ie(),folderId:ce,groupId:he,category:"cat_software",name:"S1_DFU",defaultVersion:"0624"},{id:Ie(),folderId:ce,groupId:he,category:"cat_software",name:"S1_AP",defaultVersion:"0804"},{id:Ie(),folderId:ce,groupId:he,category:"cat_software",name:"ROS_DFU",defaultVersion:"0624"},{id:Ie(),folderId:ce,groupId:he,category:"cat_software",name:"ROS_AP",defaultVersion:"0730"},{id:Ie(),folderId:ce,groupId:he,category:"cat_software",name:"OSG_DFU",defaultVersion:"0624"},{id:Ie(),folderId:ce,groupId:he,category:"cat_software",name:"OSG_AP",defaultVersion:"0723"}];/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var s1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),we=(t,e)=>{const n=R.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...d},f)=>R.createElement("svg",{ref:f,...s1,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${i1(t)}`,l].join(" "),...d},[...e.map(([m,g])=>R.createElement(m,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=we("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=we("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=we("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=we("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=we("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=we("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=we("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=we("DownloadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=we("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=we("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=we("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=we("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=we("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=we("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=we("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=we("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=we("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=we("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=we("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=we("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=we("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=we("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=we("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=we("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=we("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=we("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),C1=({items:t,setItems:e,folders:n,setFolders:r,groups:s,setGroups:i,categories:o,setCategories:l})=>{var Mn,Rt,Sn,jn,Fn;const[u,d]=R.useState(((Mn=n[0])==null?void 0:Mn.id)||ce),[f,m]=R.useState("ALL"),[g,E]=R.useState(""),[A,C]=R.useState("ALL"),[N,I]=R.useState(!1),[_,S]=R.useState(""),[D,L]=R.useState(((Rt=o[0])==null?void 0:Rt.id)||""),[j,w]=R.useState(""),[y,x]=R.useState(!1),[T,k]=R.useState(""),[P,b]=R.useState(!1),[Se,We]=R.useState(""),[mt,xe]=R.useState(!1),[H,G]=R.useState(!1),[M,Y]=R.useState(null),[q,Q]=R.useState(""),[oe,be]=R.useState(hc[0].class);R.useEffect(()=>{m("ALL")},[u]),R.useEffect(()=>{!D&&o.length>0&&L(o[0].id)},[o,D]);const F=((Sn=n.find(z=>z.id===u))==null?void 0:Sn.name)||"",J=s.filter(z=>z.folderId===u),le=((jn=J.find(z=>z.isSystem))==null?void 0:jn.id)||(J.length>0?J[0].id:he),me=z=>{window.confirm("")&&e(ue=>ue.filter(ie=>ie.id!==z))},te=()=>{if(!_.trim())return;const z={id:Math.random().toString(36).substring(2,9),folderId:u,groupId:f==="ALL"?le:f,name:_,category:D,defaultVersion:j};e(ue=>[...ue,z]),S(""),w(""),I(!1)},Ct=()=>{if(!T.trim())return;const z=Math.random().toString(36).substring(2,9),ue={id:z,name:T,isSystem:!1};r(ae=>[...ae,ue]);const ie={id:Math.random().toString(36).substring(2,9),folderId:z,name:"",isSystem:!0};i(ae=>[...ae,ie]),k(""),x(!1),d(ue.id)},qe=(z,ue)=>{z.stopPropagation(),window.confirm("")&&(e(ie=>ie.map(ae=>ae.folderId===ue?{...ae,folderId:ce,groupId:he}:ae)),i(ie=>ie.filter(ae=>ae.folderId!==ue)),r(ie=>ie.filter(ae=>ae.id!==ue)),u===ue&&d(ce))},Ht=()=>{if(!Se.trim())return;const z={id:Math.random().toString(36).substring(2,9),folderId:u,name:Se,isSystem:!1};i(ue=>[...ue,z]),We(""),b(!1),m(z.id)},At=(z,ue)=>{z.stopPropagation(),window.confirm("")&&(e(ie=>ie.map(ae=>ae.groupId===ue?{...ae,groupId:le}:ae)),i(ie=>ie.filter(ae=>ae.id!==ue)),f===ue&&m("ALL"))},Zt=()=>{q.trim()&&(l(z=>[...z,{id:Math.random().toString(36).substring(2,9),name:q,color:oe}]),Q(""),G(!1))},dn=()=>{!q.trim()||!M||(l(z=>z.map(ue=>ue.id===M?{...ue,name:q,color:oe}:ue)),Y(null),Q(""))},vs=z=>{window.confirm("")&&l(ue=>ue.filter(ie=>ie.id!==z))},ar=t.filter(z=>{if(z.folderId!==u||f!=="ALL"&&z.groupId!==f)return!1;const ue=z.name.toLowerCase().includes(g.toLowerCase()),ie=A==="ALL"||z.category===A;return ue&&ie});return p.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 min-h-[600px]",children:[mt&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-lg shadow-2xl max-h-[80vh] flex flex-col border border-slate-200 dark:border-slate-700",children:[p.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[p.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2 text-slate-800 dark:text-white",children:[p.jsx(Vm,{size:20})," "]}),p.jsx("button",{onClick:()=>xe(!1),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full text-slate-500",children:p.jsx(Qn,{size:20})})]}),p.jsxs("div",{className:"p-4 overflow-y-auto flex-1 space-y-4",children:[(H||M)&&p.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-3 rounded-lg border border-slate-200 dark:border-slate-700 space-y-3",children:[p.jsx("h4",{className:"text-sm font-bold text-slate-500 dark:text-slate-400",children:M?"":""}),p.jsx("div",{className:"flex gap-2",children:p.jsx("input",{autoFocus:!0,className:"flex-1 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white rounded px-2 py-1 text-sm outline-none focus:border-blue-500",placeholder:"",value:q,onChange:z=>Q(z.target.value)})}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:""}),p.jsx("div",{className:"flex flex-wrap gap-2",children:hc.map((z,ue)=>p.jsx("button",{onClick:()=>be(z.class),className:`w-6 h-6 rounded-full border ${z.class.replace("bg-","bg-").replace("text-","text-").split(" ")[0]} ${oe===z.class?"ring-2 ring-offset-1 ring-slate-400":""}`,title:z.name},ue))}),p.jsx("div",{className:`mt-2 text-xs px-2 py-1 rounded border w-fit ${oe}`,children:""})]}),p.jsxs("div",{className:"flex gap-2 pt-2",children:[p.jsx("button",{onClick:M?dn:Zt,className:"flex-1 bg-blue-600 text-white py-1 rounded text-sm hover:bg-blue-700",children:M?"":""}),p.jsx("button",{onClick:()=>{G(!1),Y(null),Q("")},className:"flex-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-200 py-1 rounded text-sm hover:bg-slate-50 dark:hover:bg-slate-600",children:""})]})]}),!H&&!M&&p.jsxs("button",{onClick:()=>{G(!0),Q(""),be(hc[0].class)},className:"w-full py-2 border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-lg text-slate-400 hover:border-blue-300 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-slate-700 flex items-center justify-center gap-1 text-sm",children:[p.jsx(qn,{size:16})," "]}),p.jsx("div",{className:"space-y-2",children:o.map(z=>p.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-lg shadow-sm group",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:`w-4 h-4 rounded-full ${z.color.split(" ")[0].replace("text-","bg-").replace("border-","")} border opacity-50`}),p.jsx("span",{className:`text-sm px-2 py-0.5 rounded border ${z.color}`,children:z.name})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:()=>{Y(z.id),Q(z.name),be(z.color),G(!1)},className:"p-1 text-slate-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-slate-700 rounded",children:p.jsx(x1,{size:16})}),p.jsx("button",{onClick:()=>vs(z.id),className:"p-1 text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-slate-700 rounded",children:p.jsx(tl,{size:16})})]})]},z.id))})]})]})}),p.jsx("div",{className:"w-full lg:w-64 flex-shrink-0 space-y-4",children:p.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("h2",{className:"font-bold text-slate-700 dark:text-slate-200 flex items-center gap-2",children:[p.jsx(Rm,{size:18}),""]}),p.jsx("button",{onClick:()=>x(!0),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded text-blue-600 dark:text-blue-400",title:"",children:p.jsx(f1,{size:18})})]}),y&&p.jsxs("div",{className:"mb-4 bg-blue-50 dark:bg-slate-700 p-2 rounded-lg border border-blue-100 dark:border-slate-600",children:[p.jsx("input",{autoFocus:!0,type:"text",placeholder:"...",value:T,onChange:z=>k(z.target.value),onKeyDown:z=>z.key==="Enter"&&Ct(),className:"w-full text-sm p-1.5 border border-blue-200 dark:border-slate-500 bg-white dark:bg-slate-800 text-slate-900 dark:text-white rounded mb-2 outline-none"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:Ct,className:"flex-1 bg-blue-600 text-white text-xs py-1 rounded",children:""}),p.jsx("button",{onClick:()=>x(!1),className:"flex-1 bg-white dark:bg-slate-600 text-slate-500 dark:text-slate-200 text-xs py-1 rounded border dark:border-slate-500",children:""})]})]}),p.jsx("div",{className:"space-y-1 max-h-[300px] lg:max-h-none overflow-y-auto",children:n.map(z=>p.jsxs("div",{onClick:()=>d(z.id),className:`group flex items-center justify-between p-2.5 rounded-lg cursor-pointer transition-all border ${u===z.id?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-400 shadow-sm":"hover:bg-slate-50 dark:hover:bg-slate-700 border-transparent text-slate-600 dark:text-slate-400"}`,children:[p.jsxs("div",{className:"flex items-center gap-2 truncate",children:[p.jsx(Rm,{size:16,className:u===z.id?"fill-blue-200 dark:fill-blue-900":""}),p.jsx("span",{className:"text-sm font-medium truncate",children:z.name})]}),!z.isSystem&&p.jsx("button",{onClick:ue=>qe(ue,z.id),className:"opacity-0 group-hover:opacity-100 text-slate-400 hover:text-red-500 transition-opacity p-1",children:p.jsx(tl,{size:14})})]},z.id))})]})}),p.jsxs("div",{className:"flex-1 space-y-4",children:[p.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col gap-4",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:F}),p.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:[ar.length," "]})]}),p.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-2 bg-slate-800 dark:bg-slate-700 text-white px-4 py-2 rounded-lg hover:bg-slate-700 dark:hover:bg-slate-600 transition-colors shadow-md text-sm",children:[p.jsx(qn,{size:16}),p.jsx("span",{children:""})]})]}),p.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-4",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(m1,{size:14,className:"text-slate-400"}),p.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:""})]}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsx("button",{onClick:()=>m("ALL"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${f==="ALL"?"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-white border-slate-300 dark:border-slate-600":"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-700"}`,children:""}),J.map(z=>p.jsxs("div",{className:`group flex items-center gap-1 pl-3 pr-2 py-1.5 rounded-lg border transition-all ${f===z.id?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-400":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:border-blue-200 dark:hover:border-blue-700"}`,onClick:()=>m(z.id),children:[p.jsx("span",{className:"text-sm font-medium cursor-pointer",children:z.name}),!z.isSystem&&p.jsx("button",{onClick:ue=>At(ue,z.id),className:"ml-1 p-0.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-slate-700 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(Qn,{size:12})})]},z.id)),P?p.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 dark:bg-slate-700 p-1 rounded-lg border border-slate-200 dark:border-slate-600 animate-in fade-in",children:[p.jsx("input",{autoFocus:!0,className:"w-24 text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-2 py-0.5 rounded border border-slate-200 dark:border-slate-600 outline-none focus:border-blue-300",placeholder:"",value:Se,onChange:z=>We(z.target.value),onKeyDown:z=>z.key==="Enter"&&Ht()}),p.jsx("button",{onClick:Ht,className:"bg-blue-500 text-white p-0.5 rounded hover:bg-blue-600",children:p.jsx(qn,{size:14})}),p.jsx("button",{onClick:()=>b(!1),className:"text-slate-400 hover:text-slate-600 p-0.5",children:p.jsx(Qn,{size:14})})]}):p.jsxs("button",{onClick:()=>b(!0),className:"px-2 py-1.5 rounded-lg border border-dashed border-slate-300 dark:border-slate-600 text-slate-400 hover:text-blue-600 hover:border-blue-300 hover:bg-blue-50 dark:hover:bg-slate-700 transition-all flex items-center gap-1 text-sm",children:[p.jsx(qn,{size:14}),""]})]})]})]}),N&&p.jsxs("div",{className:"bg-blue-50 dark:bg-slate-700/50 border border-blue-200 dark:border-slate-600 p-6 rounded-xl shadow-inner animate-in fade-in slide-in-from-top-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("h3",{className:"font-bold text-blue-900 dark:text-blue-200 flex items-center gap-2",children:[p.jsx(qn,{size:18}),"",F,"",f!=="ALL"&&p.jsx("span",{className:"text-blue-600 dark:text-blue-300 text-sm bg-white dark:bg-slate-800 px-2 py-0.5 rounded-full shadow-sm",children:(Fn=J.find(z=>z.id===f))==null?void 0:Fn.name})]}),p.jsx("button",{onClick:()=>I(!1),className:"text-blue-500 hover:text-blue-700",children:p.jsx(Qn,{size:20})})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[p.jsxs("div",{className:"md:col-span-4",children:[p.jsx("label",{className:"block text-sm font-medium text-blue-900 dark:text-blue-200 mb-1",children:""}),p.jsx("input",{type:"text",value:_,onChange:z=>S(z.target.value),placeholder:": ST-Link",className:"w-full bg-white dark:bg-slate-800 border border-blue-200 dark:border-slate-600 rounded-lg px-3 py-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),p.jsxs("div",{className:"md:col-span-3",children:[p.jsx("label",{className:"block text-sm font-medium text-blue-900 dark:text-blue-200 mb-1",children:""}),p.jsx("select",{value:D,onChange:z=>L(z.target.value),className:"w-full bg-white dark:bg-slate-800 border border-blue-200 dark:border-slate-600 rounded-lg px-3 py-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:o.map(z=>p.jsx("option",{value:z.id,children:z.name},z.id))})]}),p.jsxs("div",{className:"md:col-span-3",children:[p.jsx("label",{className:"block text-sm font-medium text-blue-900 dark:text-blue-200 mb-1",children:"/"}),p.jsx("input",{type:"text",value:j,onChange:z=>w(z.target.value),placeholder:": V1.6",className:"w-full bg-white dark:bg-slate-800 border border-blue-200 dark:border-slate-600 rounded-lg px-3 py-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),p.jsx("div",{className:"md:col-span-2 flex items-end",children:p.jsx("button",{onClick:te,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 font-medium shadow-sm",children:""})})]})]}),p.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[p.jsxs("div",{className:"relative flex-1 w-full",children:[p.jsx(zh,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),p.jsx("input",{type:"text",placeholder:"...",value:g,onChange:z=>E(z.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-slate-400 outline-none shadow-sm"})]}),p.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[p.jsxs("select",{value:A,onChange:z=>C(z.target.value),className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg px-4 py-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-slate-400 outline-none shadow-sm cursor-pointer flex-1 md:flex-none",children:[p.jsx("option",{value:"ALL",children:""}),o.map(z=>p.jsx("option",{value:z.id,children:z.name},z.id))]}),p.jsx("button",{onClick:()=>xe(!0),className:"px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 hover:text-blue-600 transition-colors shadow-sm flex items-center gap-2 whitespace-nowrap",title:"",children:p.jsx(Vm,{size:18})})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ar.map(z=>{var hn;const ue=((hn=J.find(zn=>zn.id===z.groupId))==null?void 0:hn.name)||"",ie=o.find(zn=>zn.id===z.category),ae=(ie==null?void 0:ie.color)||"bg-gray-100 text-gray-600 border-gray-200",Wt=(ie==null?void 0:ie.name)||"";return p.jsxs("div",{className:"group bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${ae}`,children:Wt}),p.jsx("span",{className:"text-xs px-2 py-1 rounded-full border border-slate-100 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400",children:ue})]}),p.jsx("button",{onClick:()=>me(z.id),className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(tl,{size:16})})]}),p.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-lg",children:z.name}),z.defaultVersion&&p.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[": ",p.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1 rounded text-slate-700 dark:text-slate-300",children:z.defaultVersion})]})]},z.id)}),ar.length===0&&p.jsx("div",{className:"col-span-full text-center py-12 text-slate-400 bg-slate-50 dark:bg-slate-800 rounded-xl border border-dashed border-slate-200 dark:border-slate-700",children:g||A!=="ALL"||f!=="ALL"?"":""})]})]})]})};function A1(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return R.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const hu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function mi(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Uh(t){return"nodeType"in t}function $t(t){var e,n;return t?mi(t)?t:Uh(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Bh(t){const{Document:e}=$t(t);return t instanceof e}function qo(t){return mi(t)?!1:t instanceof $t(t).HTMLElement}function rv(t){return t instanceof $t(t).SVGElement}function gi(t){return t?mi(t)?t.document:Uh(t)?Bh(t)?t:qo(t)||rv(t)?t.ownerDocument:document:document:document}const Vn=hu?R.useLayoutEffect:R.useEffect;function $h(t){const e=R.useRef(t);return Vn(()=>{e.current=t}),R.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function R1(){const t=R.useRef(null),e=R.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=R.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function ko(t,e){e===void 0&&(e=[t]);const n=R.useRef(t);return Vn(()=>{n.current!==t&&(n.current=t)},e),n}function Go(t,e){const n=R.useRef();return R.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Nl(t){const e=$h(t),n=R.useRef(null),r=R.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Ed(t){const e=R.useRef();return R.useEffect(()=>{e.current=t},[t]),e.current}let pc={};function Ko(t,e){return R.useMemo(()=>{if(e)return e;const n=pc[t]==null?0:pc[t]+1;return pc[t]=n,t+"-"+n},[t,e])}function sv(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const l=Object.entries(o);for(const[u,d]of l){const f=i[u];f!=null&&(i[u]=f+t*d)}return i},{...e})}}const qs=sv(1),Co=sv(-1);function N1(t){return"clientX"in t&&"clientY"in t}function Hh(t){if(!t)return!1;const{KeyboardEvent:e}=$t(t.target);return e&&t instanceof e}function P1(t){if(!t)return!1;const{TouchEvent:e}=$t(t.target);return e&&t instanceof e}function Id(t){if(P1(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return N1(t)?{x:t.clientX,y:t.clientY}:null}const Ao=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ao.Translate.toString(t),Ao.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Om="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function D1(t){return t.matches(Om)?t:t.querySelector(Om)}const V1={display:"none"};function O1(t){let{id:e,value:n}=t;return Vt.createElement("div",{id:e,style:V1},n)}function L1(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Vt.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function M1(){const[t,e]=R.useState("");return{announce:R.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const iv=R.createContext(null);function j1(t){const e=R.useContext(iv);R.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function F1(){const[t]=R.useState(()=>new Set),e=R.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[R.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,i)})},[t]),e]}const z1={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},U1={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function B1(t){let{announcements:e=U1,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=z1}=t;const{announce:i,announcement:o}=M1(),l=Ko("DndLiveRegion"),[u,d]=R.useState(!1);if(R.useEffect(()=>{d(!0)},[]),j1(R.useMemo(()=>({onDragStart(m){let{active:g}=m;i(e.onDragStart({active:g}))},onDragMove(m){let{active:g,over:E}=m;e.onDragMove&&i(e.onDragMove({active:g,over:E}))},onDragOver(m){let{active:g,over:E}=m;i(e.onDragOver({active:g,over:E}))},onDragEnd(m){let{active:g,over:E}=m;i(e.onDragEnd({active:g,over:E}))},onDragCancel(m){let{active:g,over:E}=m;i(e.onDragCancel({active:g,over:E}))}}),[i,e])),!u)return null;const f=Vt.createElement(Vt.Fragment,null,Vt.createElement(O1,{id:r,value:s.draggable}),Vt.createElement(L1,{id:l,announcement:o}));return n?Fs.createPortal(f,n):f}var Xe;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Xe||(Xe={}));function Pl(){}function Lm(t,e){return R.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function $1(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return R.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Tn=Object.freeze({x:0,y:0});function ov(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function av(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function H1(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Mm(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function lv(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function jm(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const W1=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=jm(e,e.left,e.top),i=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const d=ov(jm(u),s);i.push({id:l,data:{droppableContainer:o,value:d}})}}return i.sort(av)},q1=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Mm(e),i=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const d=Mm(u),f=s.reduce((g,E,A)=>g+ov(d[A],E),0),m=Number((f/4).toFixed(4));i.push({id:l,data:{droppableContainer:o,value:m}})}}return i.sort(av)};function G1(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,l=i-n;if(r<s&&n<i){const u=e.width*e.height,d=t.width*t.height,f=o*l,m=f/(u+d-f);return Number(m.toFixed(4))}return 0}const K1=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,l=n.get(o);if(l){const u=G1(l,e);u>0&&s.push({id:o,data:{droppableContainer:i,value:u}})}}return s.sort(H1)};function Q1(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function uv(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Tn}function Y1(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const X1=Y1(1);function J1(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Z1(t,e,n){const r=J1(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:l}=r,u=t.left-o-(1-s)*parseFloat(n),d=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),f=s?t.width/s:t.width,m=i?t.height/i:t.height;return{width:f,height:m,top:d,right:u+f,bottom:d+m,left:u}}const eI={ignoreTransform:!1};function yi(t,e){e===void 0&&(e=eI);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:f}=$t(t).getComputedStyle(t);d&&(n=Z1(n,d,f))}const{top:r,left:s,width:i,height:o,bottom:l,right:u}=n;return{top:r,left:s,width:i,height:o,bottom:l,right:u}}function Fm(t){return yi(t,{ignoreTransform:!0})}function tI(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function nI(t,e){return e===void 0&&(e=$t(t).getComputedStyle(t)),e.position==="fixed"}function rI(t,e){e===void 0&&(e=$t(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function fu(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(Bh(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!qo(s)||rv(s)||n.includes(s))return n;const i=$t(t).getComputedStyle(s);return s!==t&&rI(s,i)&&n.push(s),nI(s,i)?n:r(s.parentNode)}return t?r(t):n}function cv(t){const[e]=fu(t,1);return e??null}function mc(t){return!hu||!t?null:mi(t)?t:Uh(t)?Bh(t)||t===gi(t).scrollingElement?window:qo(t)?t:null:null}function dv(t){return mi(t)?t.scrollX:t.scrollLeft}function hv(t){return mi(t)?t.scrollY:t.scrollTop}function Td(t){return{x:dv(t),y:hv(t)}}var rt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(rt||(rt={}));function fv(t){return!hu||!t?!1:t===document.scrollingElement}function pv(t){const e={x:0,y:0},n=fv(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const sI={x:.2,y:.2};function iI(t,e,n,r,s){let{top:i,left:o,right:l,bottom:u}=n;r===void 0&&(r=10),s===void 0&&(s=sI);const{isTop:d,isBottom:f,isLeft:m,isRight:g}=pv(t),E={x:0,y:0},A={x:0,y:0},C={height:e.height*s.y,width:e.width*s.x};return!d&&i<=e.top+C.height?(E.y=rt.Backward,A.y=r*Math.abs((e.top+C.height-i)/C.height)):!f&&u>=e.bottom-C.height&&(E.y=rt.Forward,A.y=r*Math.abs((e.bottom-C.height-u)/C.height)),!g&&l>=e.right-C.width?(E.x=rt.Forward,A.x=r*Math.abs((e.right-C.width-l)/C.width)):!m&&o<=e.left+C.width&&(E.x=rt.Backward,A.x=r*Math.abs((e.left+C.width-o)/C.width)),{direction:E,speed:A}}function oI(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function mv(t){return t.reduce((e,n)=>qs(e,Td(n)),Tn)}function aI(t){return t.reduce((e,n)=>e+dv(n),0)}function lI(t){return t.reduce((e,n)=>e+hv(n),0)}function uI(t,e){if(e===void 0&&(e=yi),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);cv(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const cI=[["x",["left","right"],aI],["y",["top","bottom"],lI]];class Wh{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=fu(n),s=mv(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of cI)for(const u of o)Object.defineProperty(this,u,{get:()=>{const d=l(r),f=s[i]-d;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class no{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function dI(t){const{EventTarget:e}=$t(t);return t instanceof e?t:gi(t)}function gc(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var en;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(en||(en={}));function zm(t){t.preventDefault()}function hI(t){t.stopPropagation()}var pe;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(pe||(pe={}));const gv={start:[pe.Space,pe.Enter],cancel:[pe.Esc],end:[pe.Space,pe.Enter,pe.Tab]},fI=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case pe.Right:return{...n,x:n.x+25};case pe.Left:return{...n,x:n.x-25};case pe.Down:return{...n,y:n.y+25};case pe.Up:return{...n,y:n.y-25}}};class qh{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new no(gi(n)),this.windowListeners=new no($t(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(en.Resize,this.handleCancel),this.windowListeners.add(en.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(en.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&uI(r),n(Tn)}handleKeyDown(e){if(Hh(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=gv,coordinateGetter:o=fI,scrollBehavior:l="smooth"}=s,{code:u}=e;if(i.end.includes(u)){this.handleEnd(e);return}if(i.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:d}=r.current,f=d?{x:d.left,y:d.top}:Tn;this.referenceCoordinates||(this.referenceCoordinates=f);const m=o(e,{active:n,context:r.current,currentCoordinates:f});if(m){const g=Co(m,f),E={x:0,y:0},{scrollableAncestors:A}=r.current;for(const C of A){const N=e.code,{isTop:I,isRight:_,isLeft:S,isBottom:D,maxScroll:L,minScroll:j}=pv(C),w=oI(C),y={x:Math.min(N===pe.Right?w.right-w.width/2:w.right,Math.max(N===pe.Right?w.left:w.left+w.width/2,m.x)),y:Math.min(N===pe.Down?w.bottom-w.height/2:w.bottom,Math.max(N===pe.Down?w.top:w.top+w.height/2,m.y))},x=N===pe.Right&&!_||N===pe.Left&&!S,T=N===pe.Down&&!D||N===pe.Up&&!I;if(x&&y.x!==m.x){const k=C.scrollLeft+g.x,P=N===pe.Right&&k<=L.x||N===pe.Left&&k>=j.x;if(P&&!g.y){C.scrollTo({left:k,behavior:l});return}P?E.x=C.scrollLeft-k:E.x=N===pe.Right?C.scrollLeft-L.x:C.scrollLeft-j.x,E.x&&C.scrollBy({left:-E.x,behavior:l});break}else if(T&&y.y!==m.y){const k=C.scrollTop+g.y,P=N===pe.Down&&k<=L.y||N===pe.Up&&k>=j.y;if(P&&!g.x){C.scrollTo({top:k,behavior:l});return}P?E.y=C.scrollTop-k:E.y=N===pe.Down?C.scrollTop-L.y:C.scrollTop-j.y,E.y&&C.scrollBy({top:-E.y,behavior:l});break}}this.handleMove(e,qs(Co(m,this.referenceCoordinates),E))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}qh.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=gv,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function Um(t){return!!(t&&"distance"in t)}function Bm(t){return!!(t&&"delay"in t)}class Gh{constructor(e,n,r){var s;r===void 0&&(r=dI(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=gi(o),this.documentListeners=new no(this.document),this.listeners=new no(r),this.windowListeners=new no($t(o)),this.initialCoordinates=(s=Id(i))!=null?s:Tn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(en.Resize,this.handleCancel),this.windowListeners.add(en.DragStart,zm),this.windowListeners.add(en.VisibilityChange,this.handleCancel),this.windowListeners.add(en.ContextMenu,zm),this.documentListeners.add(en.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Bm(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Um(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(en.Click,hI,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(en.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!s)return;const u=(n=Id(e))!=null?n:Tn,d=Co(s,u);if(!r&&l){if(Um(l)){if(l.tolerance!=null&&gc(d,l.tolerance))return this.handleCancel();if(gc(d,l.distance))return this.handleStart()}if(Bm(l)&&gc(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===pe.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const pI={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Kh extends Gh{constructor(e){const{event:n}=e,r=gi(n.target);super(e,pI,r)}}Kh.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const mI={move:{name:"mousemove"},end:{name:"mouseup"}};var Sd;(function(t){t[t.RightClick=2]="RightClick"})(Sd||(Sd={}));class gI extends Gh{constructor(e){super(e,mI,gi(e.event.target))}}gI.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Sd.RightClick?!1:(r==null||r({event:n}),!0)}}];const yc={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class yI extends Gh{constructor(e){super(e,yc)}static setup(){return window.addEventListener(yc.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(yc.move.name,e)};function e(){}}}yI.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var ro;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(ro||(ro={}));var Dl;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Dl||(Dl={}));function vI(t){let{acceleration:e,activator:n=ro.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:l=Dl.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:f,delta:m,threshold:g}=t;const E=wI({delta:m,disabled:!i}),[A,C]=R1(),N=R.useRef({x:0,y:0}),I=R.useRef({x:0,y:0}),_=R.useMemo(()=>{switch(n){case ro.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case ro.DraggableRect:return s}},[n,s,u]),S=R.useRef(null),D=R.useCallback(()=>{const j=S.current;if(!j)return;const w=N.current.x*I.current.x,y=N.current.y*I.current.y;j.scrollBy(w,y)},[]),L=R.useMemo(()=>l===Dl.TreeOrder?[...d].reverse():d,[l,d]);R.useEffect(()=>{if(!i||!d.length||!_){C();return}for(const j of L){if((r==null?void 0:r(j))===!1)continue;const w=d.indexOf(j),y=f[w];if(!y)continue;const{direction:x,speed:T}=iI(j,y,_,e,g);for(const k of["x","y"])E[k][x[k]]||(T[k]=0,x[k]=0);if(T.x>0||T.y>0){C(),S.current=j,A(D,o),N.current=T,I.current=x;return}}N.current={x:0,y:0},I.current={x:0,y:0},C()},[e,D,r,C,i,o,JSON.stringify(_),JSON.stringify(E),A,d,L,f,JSON.stringify(g)])}const _I={x:{[rt.Backward]:!1,[rt.Forward]:!1},y:{[rt.Backward]:!1,[rt.Forward]:!1}};function wI(t){let{delta:e,disabled:n}=t;const r=Ed(e);return Go(s=>{if(n||!r||!s)return _I;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[rt.Backward]:s.x[rt.Backward]||i.x===-1,[rt.Forward]:s.x[rt.Forward]||i.x===1},y:{[rt.Backward]:s.y[rt.Backward]||i.y===-1,[rt.Forward]:s.y[rt.Forward]||i.y===1}}},[n,e,r])}function xI(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Go(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function EI(t,e){return R.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var Ro;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Ro||(Ro={}));var bd;(function(t){t.Optimized="optimized"})(bd||(bd={}));const $m=new Map;function II(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=R.useState(null),{frequency:l,measure:u,strategy:d}=s,f=R.useRef(t),m=N(),g=ko(m),E=R.useCallback(function(I){I===void 0&&(I=[]),!g.current&&o(_=>_===null?I:_.concat(I.filter(S=>!_.includes(S))))},[g]),A=R.useRef(null),C=Go(I=>{if(m&&!n)return $m;if(!I||I===$m||f.current!==t||i!=null){const _=new Map;for(let S of t){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){_.set(S.id,S.rect.current);continue}const D=S.node.current,L=D?new Wh(u(D),D):null;S.rect.current=L,L&&_.set(S.id,L)}return _}return I},[t,i,n,m,u]);return R.useEffect(()=>{f.current=t},[t]),R.useEffect(()=>{m||E()},[n,m]),R.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),R.useEffect(()=>{m||typeof l!="number"||A.current!==null||(A.current=setTimeout(()=>{E(),A.current=null},l))},[l,m,E,...r]),{droppableRects:C,measureDroppableContainers:E,measuringScheduled:i!=null};function N(){switch(d){case Ro.Always:return!1;case Ro.BeforeDragging:return n;default:return!n}}}function yv(t,e){return Go(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function TI(t,e){return yv(t,e)}function SI(t){let{callback:e,disabled:n}=t;const r=$h(e),s=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return R.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function pu(t){let{callback:e,disabled:n}=t;const r=$h(e),s=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return R.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function bI(t){return new Wh(yi(t),t)}function Hm(t,e,n){e===void 0&&(e=bI);const[r,s]=R.useState(null);function i(){s(u=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=u??n)!=null?d:null}const f=e(t);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const o=SI({callback(u){if(t)for(const d of u){const{type:f,target:m}=d;if(f==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),l=pu({callback:i});return Vn(()=>{i(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),r}function kI(t){const e=yv(t);return uv(t,e)}const Wm=[];function CI(t){const e=R.useRef(t),n=Go(r=>t?r&&r!==Wm&&t&&e.current&&t.parentNode===e.current.parentNode?r:fu(t):Wm,[t]);return R.useEffect(()=>{e.current=t},[t]),n}function AI(t){const[e,n]=R.useState(null),r=R.useRef(t),s=R.useCallback(i=>{const o=mc(i.target);o&&n(l=>l?(l.set(o,Td(o)),new Map(l)):null)},[]);return R.useEffect(()=>{const i=r.current;if(t!==i){o(i);const l=t.map(u=>{const d=mc(u);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,Td(d)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(u=>{const d=mc(u);d==null||d.removeEventListener("scroll",s)})}},[s,t]),R.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>qs(i,o),Tn):mv(t):Tn,[t,e])}function qm(t,e){e===void 0&&(e=[]);const n=R.useRef(null);return R.useEffect(()=>{n.current=null},e),R.useEffect(()=>{const r=t!==Tn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Co(t,n.current):Tn}function RI(t){R.useEffect(()=>{if(!hu)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function NI(t,e){return R.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function vv(t){return R.useMemo(()=>t?tI(t):null,[t])}const Gm=[];function PI(t,e){e===void 0&&(e=yi);const[n]=t,r=vv(n?$t(n):null),[s,i]=R.useState(Gm);function o(){i(()=>t.length?t.map(u=>fv(u)?r:new Wh(e(u),u)):Gm)}const l=pu({callback:o});return Vn(()=>{l==null||l.disconnect(),o(),t.forEach(u=>l==null?void 0:l.observe(u))},[t]),s}function DI(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return qo(e)?e:t}function VI(t){let{measure:e}=t;const[n,r]=R.useState(null),s=R.useCallback(d=>{for(const{target:f}of d)if(qo(f)){r(m=>{const g=e(f);return m?{...m,width:g.width,height:g.height}:g});break}},[e]),i=pu({callback:s}),o=R.useCallback(d=>{const f=DI(d);i==null||i.disconnect(),f&&(i==null||i.observe(f)),r(f?e(f):null)},[e,i]),[l,u]=Nl(o);return R.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const OI=[{sensor:Kh,options:{}},{sensor:qh,options:{}}],LI={current:{}},nl={draggable:{measure:Fm},droppable:{measure:Fm,strategy:Ro.WhileDragging,frequency:bd.Optimized},dragOverlay:{measure:yi}};class so extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const MI={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new so,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Pl},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:nl,measureDroppableContainers:Pl,windowRect:null,measuringScheduled:!1},jI={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Pl,draggableNodes:new Map,over:null,measureDroppableContainers:Pl},mu=R.createContext(jI),_v=R.createContext(MI);function FI(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new so}}}function zI(t,e){switch(e.type){case Xe.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Xe.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Xe.DragEnd:case Xe.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Xe.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new so(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Xe.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new so(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case Xe.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new so(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function UI(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=R.useContext(mu),i=Ed(r),o=Ed(n==null?void 0:n.id);return R.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!Hh(i)||document.activeElement===i.target)return;const l=s.get(o);if(!l)return;const{activatorNode:u,node:d}=l;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const f of[u.current,d.current]){if(!f)continue;const m=D1(f);if(m){m.focus();break}}})}},[r,e,s,o,i]),null}function BI(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function $I(t){return R.useMemo(()=>({draggable:{...nl.draggable,...t==null?void 0:t.draggable},droppable:{...nl.droppable,...t==null?void 0:t.droppable},dragOverlay:{...nl.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function HI(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=R.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Vn(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!r)return;const d=e==null?void 0:e.node.current;if(!d||d.isConnected===!1)return;const f=n(d),m=uv(f,r);if(o||(m.x=0),l||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const g=cv(d);g&&g.scrollBy({top:m.y,left:m.x})}},[e,o,l,r,n])}const wv=R.createContext({...Tn,scaleX:1,scaleY:1});var mr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(mr||(mr={}));const WI=R.memo(function(e){var n,r,s,i;let{id:o,accessibility:l,autoScroll:u=!0,children:d,sensors:f=OI,collisionDetection:m=K1,measuring:g,modifiers:E,...A}=e;const C=R.useReducer(zI,void 0,FI),[N,I]=C,[_,S]=F1(),[D,L]=R.useState(mr.Uninitialized),j=D===mr.Initialized,{draggable:{active:w,nodes:y,translate:x},droppable:{containers:T}}=N,k=w!=null?y.get(w):null,P=R.useRef({initial:null,translated:null}),b=R.useMemo(()=>{var Ge;return w!=null?{id:w,data:(Ge=k==null?void 0:k.data)!=null?Ge:LI,rect:P}:null},[w,k]),Se=R.useRef(null),[We,mt]=R.useState(null),[xe,H]=R.useState(null),G=ko(A,Object.values(A)),M=Ko("DndDescribedBy",o),Y=R.useMemo(()=>T.getEnabled(),[T]),q=$I(g),{droppableRects:Q,measureDroppableContainers:oe,measuringScheduled:be}=II(Y,{dragging:j,dependencies:[x.x,x.y],config:q.droppable}),F=xI(y,w),J=R.useMemo(()=>xe?Id(xe):null,[xe]),le=Br(),me=TI(F,q.draggable.measure);HI({activeNode:w!=null?y.get(w):null,config:le.layoutShiftCompensation,initialRect:me,measure:q.draggable.measure});const te=Hm(F,q.draggable.measure,me),Ct=Hm(F?F.parentElement:null),qe=R.useRef({activatorEvent:null,active:null,activeNode:F,collisionRect:null,collisions:null,droppableRects:Q,draggableNodes:y,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ht=T.getNodeFor((n=qe.current.over)==null?void 0:n.id),At=VI({measure:q.dragOverlay.measure}),Zt=(r=At.nodeRef.current)!=null?r:F,dn=j?(s=At.rect)!=null?s:te:null,vs=!!(At.nodeRef.current&&At.rect),ar=kI(vs?null:te),Mn=vv(Zt?$t(Zt):null),Rt=CI(j?Ht??F:null),Sn=PI(Rt),jn=BI(E,{transform:{x:x.x-ar.x,y:x.y-ar.y,scaleX:1,scaleY:1},activatorEvent:xe,active:b,activeNodeRect:te,containerNodeRect:Ct,draggingNodeRect:dn,over:qe.current.over,overlayNodeRect:At.rect,scrollableAncestors:Rt,scrollableAncestorRects:Sn,windowRect:Mn}),Fn=J?qs(J,x):null,z=AI(Rt),ue=qm(z),ie=qm(z,[te]),ae=qs(jn,ue),Wt=dn?X1(dn,jn):null,hn=b&&Wt?m({active:b,collisionRect:Wt,droppableRects:Q,droppableContainers:Y,pointerCoordinates:Fn}):null,zn=lv(hn,"id"),[bn,lr]=R.useState(null),ta=vs?jn:qs(jn,ie),na=Q1(ta,(i=bn==null?void 0:bn.rect)!=null?i:null,te),Ur=R.useRef(null),ra=R.useCallback((Ge,it)=>{let{sensor:Be,options:fn}=it;if(Se.current==null)return;const ot=y.get(Se.current);if(!ot)return;const gt=Ge.nativeEvent,yt=new Be({active:Se.current,activeNode:ot,event:gt,options:fn,context:qe,onAbort(ve){if(!y.get(ve))return;const{onDragAbort:vt}=G.current,Nt={id:ve};vt==null||vt(Nt),_({type:"onDragAbort",event:Nt})},onPending(ve,pn,vt,Nt){if(!y.get(ve))return;const{onDragPending:Hr}=G.current,Pt={id:ve,constraint:pn,initialCoordinates:vt,offset:Nt};Hr==null||Hr(Pt),_({type:"onDragPending",event:Pt})},onStart(ve){const pn=Se.current;if(pn==null)return;const vt=y.get(pn);if(!vt)return;const{onDragStart:Nt}=G.current,$r={activatorEvent:gt,active:{id:pn,data:vt.data,rect:P}};Fs.unstable_batchedUpdates(()=>{Nt==null||Nt($r),L(mr.Initializing),I({type:Xe.DragStart,initialCoordinates:ve,active:pn}),_({type:"onDragStart",event:$r}),mt(Ur.current),H(gt)})},onMove(ve){I({type:Xe.DragMove,coordinates:ve})},onEnd:Un(Xe.DragEnd),onCancel:Un(Xe.DragCancel)});Ur.current=yt;function Un(ve){return async function(){const{active:vt,collisions:Nt,over:$r,scrollAdjustedTranslate:Hr}=qe.current;let Pt=null;if(vt&&Hr){const{cancelDrop:Wr}=G.current;Pt={activatorEvent:gt,active:vt,collisions:Nt,delta:Hr,over:$r},ve===Xe.DragEnd&&typeof Wr=="function"&&await Promise.resolve(Wr(Pt))&&(ve=Xe.DragCancel)}Se.current=null,Fs.unstable_batchedUpdates(()=>{I({type:ve}),L(mr.Uninitialized),lr(null),mt(null),H(null),Ur.current=null;const Wr=ve===Xe.DragEnd?"onDragEnd":"onDragCancel";if(Pt){const Ei=G.current[Wr];Ei==null||Ei(Pt),_({type:Wr,event:Pt})}})}}},[y]),ku=R.useCallback((Ge,it)=>(Be,fn)=>{const ot=Be.nativeEvent,gt=y.get(fn);if(Se.current!==null||!gt||ot.dndKit||ot.defaultPrevented)return;const yt={active:gt};Ge(Be,it.options,yt)===!0&&(ot.dndKit={capturedBy:it.sensor},Se.current=fn,ra(Be,it))},[y,ra]),_s=EI(f,ku);RI(f),Vn(()=>{te&&D===mr.Initializing&&L(mr.Initialized)},[te,D]),R.useEffect(()=>{const{onDragMove:Ge}=G.current,{active:it,activatorEvent:Be,collisions:fn,over:ot}=qe.current;if(!it||!Be)return;const gt={active:it,activatorEvent:Be,collisions:fn,delta:{x:ae.x,y:ae.y},over:ot};Fs.unstable_batchedUpdates(()=>{Ge==null||Ge(gt),_({type:"onDragMove",event:gt})})},[ae.x,ae.y]),R.useEffect(()=>{const{active:Ge,activatorEvent:it,collisions:Be,droppableContainers:fn,scrollAdjustedTranslate:ot}=qe.current;if(!Ge||Se.current==null||!it||!ot)return;const{onDragOver:gt}=G.current,yt=fn.get(zn),Un=yt&&yt.rect.current?{id:yt.id,rect:yt.rect.current,data:yt.data,disabled:yt.disabled}:null,ve={active:Ge,activatorEvent:it,collisions:Be,delta:{x:ot.x,y:ot.y},over:Un};Fs.unstable_batchedUpdates(()=>{lr(Un),gt==null||gt(ve),_({type:"onDragOver",event:ve})})},[zn]),Vn(()=>{qe.current={activatorEvent:xe,active:b,activeNode:F,collisionRect:Wt,collisions:hn,droppableRects:Q,draggableNodes:y,draggingNode:Zt,draggingNodeRect:dn,droppableContainers:T,over:bn,scrollableAncestors:Rt,scrollAdjustedTranslate:ae},P.current={initial:dn,translated:Wt}},[b,F,hn,Wt,y,Zt,dn,Q,T,bn,Rt,ae]),vI({...le,delta:x,draggingRect:Wt,pointerCoordinates:Fn,scrollableAncestors:Rt,scrollableAncestorRects:Sn});const sa=R.useMemo(()=>({active:b,activeNode:F,activeNodeRect:te,activatorEvent:xe,collisions:hn,containerNodeRect:Ct,dragOverlay:At,draggableNodes:y,droppableContainers:T,droppableRects:Q,over:bn,measureDroppableContainers:oe,scrollableAncestors:Rt,scrollableAncestorRects:Sn,measuringConfiguration:q,measuringScheduled:be,windowRect:Mn}),[b,F,te,xe,hn,Ct,At,y,T,Q,bn,oe,Rt,Sn,q,be,Mn]),ia=R.useMemo(()=>({activatorEvent:xe,activators:_s,active:b,activeNodeRect:te,ariaDescribedById:{draggable:M},dispatch:I,draggableNodes:y,over:bn,measureDroppableContainers:oe}),[xe,_s,b,te,I,M,y,bn,oe]);return Vt.createElement(iv.Provider,{value:S},Vt.createElement(mu.Provider,{value:ia},Vt.createElement(_v.Provider,{value:sa},Vt.createElement(wv.Provider,{value:na},d)),Vt.createElement(UI,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Vt.createElement(B1,{...l,hiddenTextDescribedById:M}));function Br(){const Ge=(We==null?void 0:We.autoScrollEnabled)===!1,it=typeof u=="object"?u.enabled===!1:u===!1,Be=j&&!Ge&&!it;return typeof u=="object"?{...u,enabled:Be}:{enabled:Be}}}),qI=R.createContext(null),Km="button",GI="Draggable";function KI(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Ko(GI),{activators:o,activatorEvent:l,active:u,activeNodeRect:d,ariaDescribedById:f,draggableNodes:m,over:g}=R.useContext(mu),{role:E=Km,roleDescription:A="draggable",tabIndex:C=0}=s??{},N=(u==null?void 0:u.id)===e,I=R.useContext(N?wv:qI),[_,S]=Nl(),[D,L]=Nl(),j=NI(o,e),w=ko(n);Vn(()=>(m.set(e,{id:e,key:i,node:_,activatorNode:D,data:w}),()=>{const x=m.get(e);x&&x.key===i&&m.delete(e)}),[m,e]);const y=R.useMemo(()=>({role:E,tabIndex:C,"aria-disabled":r,"aria-pressed":N&&E===Km?!0:void 0,"aria-roledescription":A,"aria-describedby":f.draggable}),[r,E,C,N,A,f.draggable]);return{active:u,activatorEvent:l,activeNodeRect:d,attributes:y,isDragging:N,listeners:r?void 0:j,node:_,over:g,setNodeRef:S,setActivatorNodeRef:L,transform:I}}function QI(){return R.useContext(_v)}const YI="Droppable",XI={timeout:25};function JI(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Ko(YI),{active:o,dispatch:l,over:u,measureDroppableContainers:d}=R.useContext(mu),f=R.useRef({disabled:n}),m=R.useRef(!1),g=R.useRef(null),E=R.useRef(null),{disabled:A,updateMeasurementsFor:C,timeout:N}={...XI,...s},I=ko(C??r),_=R.useCallback(()=>{if(!m.current){m.current=!0;return}E.current!=null&&clearTimeout(E.current),E.current=setTimeout(()=>{d(Array.isArray(I.current)?I.current:[I.current]),E.current=null},N)},[N]),S=pu({callback:_,disabled:A||!o}),D=R.useCallback((y,x)=>{S&&(x&&(S.unobserve(x),m.current=!1),y&&S.observe(y))},[S]),[L,j]=Nl(D),w=ko(e);return R.useEffect(()=>{!S||!L.current||(S.disconnect(),m.current=!1,S.observe(L.current))},[L,S]),R.useEffect(()=>(l({type:Xe.RegisterDroppable,element:{id:r,key:i,disabled:n,node:L,rect:g,data:w}}),()=>l({type:Xe.UnregisterDroppable,key:i,id:r})),[r]),R.useEffect(()=>{n!==f.current.disabled&&(l({type:Xe.SetDroppableDisabled,id:r,key:i,disabled:n}),f.current.disabled=n)},[r,i,n,l]),{active:o,rect:g,isOver:(u==null?void 0:u.id)===r,node:L,over:u,setNodeRef:j}}function Qh(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function ZI(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Ma(t){return t!==null&&t>=0}function eT(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function tT(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const xv=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=Qh(e,r,n),o=e[s],l=i[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},ja={scaleX:1,scaleY:1},nT=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const d=i[o];return d?{x:0,y:n<o?d.top+d.height-(l.top+l.height):d.top-l.top,...ja}:null}const u=rT(i,s,n);return s>n&&s<=o?{x:0,y:-l.height-u,...ja}:s<n&&s>=o?{x:0,y:l.height+u,...ja}:{x:0,y:0,...ja}};function rT(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Ev="Sortable",Iv=Vt.createContext({activeIndex:-1,containerId:Ev,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:xv,disabled:{draggable:!1,droppable:!1}});function sT(t){let{children:e,id:n,items:r,strategy:s=xv,disabled:i=!1}=t;const{active:o,dragOverlay:l,droppableRects:u,over:d,measureDroppableContainers:f}=QI(),m=Ko(Ev,n),g=l.rect!==null,E=R.useMemo(()=>r.map(j=>typeof j=="object"&&"id"in j?j.id:j),[r]),A=o!=null,C=o?E.indexOf(o.id):-1,N=d?E.indexOf(d.id):-1,I=R.useRef(E),_=!eT(E,I.current),S=N!==-1&&C===-1||_,D=tT(i);Vn(()=>{_&&A&&f(E)},[_,E,A,f]),R.useEffect(()=>{I.current=E},[E]);const L=R.useMemo(()=>({activeIndex:C,containerId:m,disabled:D,disableTransforms:S,items:E,overIndex:N,useDragOverlay:g,sortedRects:ZI(E,u),strategy:s}),[C,m,D.draggable,D.droppable,S,E,N,u,g,s]);return Vt.createElement(Iv.Provider,{value:L},e)}const iT=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return Qh(n,r,s).indexOf(e)},oT=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:l,previousContainerId:u,transition:d}=t;return!d||!r||l!==i&&s===o?!1:n?!0:o!==s&&e===u},aT={duration:200,easing:"ease"},Tv="transform",lT=Ao.Transition.toString({property:Tv,duration:0,easing:"linear"}),uT={roleDescription:"sortable"};function cT(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=R.useState(null),l=R.useRef(n);return Vn(()=>{if(!e&&n!==l.current&&r.current){const u=s.current;if(u){const d=yi(r.current,{ignoreTransform:!0}),f={x:u.left-d.left,y:u.top-d.top,scaleX:u.width/d.width,scaleY:u.height/d.height};(f.x||f.y)&&o(f)}}n!==l.current&&(l.current=n)},[e,n,r,s]),R.useEffect(()=>{i&&o(null)},[i]),i}function dT(t){let{animateLayoutChanges:e=oT,attributes:n,disabled:r,data:s,getNewIndex:i=iT,id:o,strategy:l,resizeObserverConfig:u,transition:d=aT}=t;const{items:f,containerId:m,activeIndex:g,disabled:E,disableTransforms:A,sortedRects:C,overIndex:N,useDragOverlay:I,strategy:_}=R.useContext(Iv),S=hT(r,E),D=f.indexOf(o),L=R.useMemo(()=>({sortable:{containerId:m,index:D,items:f},...s}),[m,s,D,f]),j=R.useMemo(()=>f.slice(f.indexOf(o)),[f,o]),{rect:w,node:y,isOver:x,setNodeRef:T}=JI({id:o,data:L,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...u}}),{active:k,activatorEvent:P,activeNodeRect:b,attributes:Se,setNodeRef:We,listeners:mt,isDragging:xe,over:H,setActivatorNodeRef:G,transform:M}=KI({id:o,data:L,attributes:{...uT,...n},disabled:S.draggable}),Y=A1(T,We),q=!!k,Q=q&&!A&&Ma(g)&&Ma(N),oe=!I&&xe,be=oe&&Q?M:null,J=Q?be??(l??_)({rects:C,activeNodeRect:b,activeIndex:g,overIndex:N,index:D}):null,le=Ma(g)&&Ma(N)?i({id:o,items:f,activeIndex:g,overIndex:N}):D,me=k==null?void 0:k.id,te=R.useRef({activeId:me,items:f,newIndex:le,containerId:m}),Ct=f!==te.current.items,qe=e({active:k,containerId:m,isDragging:xe,isSorting:q,id:o,index:D,items:f,newIndex:te.current.newIndex,previousItems:te.current.items,previousContainerId:te.current.containerId,transition:d,wasDragging:te.current.activeId!=null}),Ht=cT({disabled:!qe,index:D,node:y,rect:w});return R.useEffect(()=>{q&&te.current.newIndex!==le&&(te.current.newIndex=le),m!==te.current.containerId&&(te.current.containerId=m),f!==te.current.items&&(te.current.items=f)},[q,le,m,f]),R.useEffect(()=>{if(me===te.current.activeId)return;if(me&&!te.current.activeId){te.current.activeId=me;return}const Zt=setTimeout(()=>{te.current.activeId=me},50);return()=>clearTimeout(Zt)},[me]),{active:k,activeIndex:g,attributes:Se,data:L,rect:w,index:D,newIndex:le,items:f,isOver:x,isSorting:q,isDragging:xe,listeners:mt,node:y,overIndex:N,over:H,setNodeRef:Y,setActivatorNodeRef:G,setDroppableNodeRef:T,setDraggableNodeRef:We,transform:Ht??J,transition:At()};function At(){if(Ht||Ct&&te.current.newIndex===D)return lT;if(!(oe&&!Hh(P)||!d)&&(q||qe))return Ao.Transition.toString({...d,property:Tv})}}function hT(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Vl(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const fT=[pe.Down,pe.Right,pe.Up,pe.Left],pT=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:i,over:o,scrollableAncestors:l}}=e;if(fT.includes(t.code)){if(t.preventDefault(),!n||!r)return;const u=[];i.getEnabled().forEach(m=>{if(!m||m!=null&&m.disabled)return;const g=s.get(m.id);if(g)switch(t.code){case pe.Down:r.top<g.top&&u.push(m);break;case pe.Up:r.top>g.top&&u.push(m);break;case pe.Left:r.left>g.left&&u.push(m);break;case pe.Right:r.left<g.left&&u.push(m);break}});const d=q1({collisionRect:r,droppableRects:s,droppableContainers:u});let f=lv(d,"id");if(f===(o==null?void 0:o.id)&&d.length>1&&(f=d[1].id),f!=null){const m=i.get(n.id),g=i.get(f),E=g?s.get(g.id):null,A=g==null?void 0:g.node.current;if(A&&E&&m&&g){const N=fu(A).some((j,w)=>l[w]!==j),I=Sv(m,g),_=mT(m,g),S=N||!I?{x:0,y:0}:{x:_?r.width-E.width:0,y:_?r.height-E.height:0},D={x:E.left,y:E.top};return S.x&&S.y?D:Co(D,S)}}}};function Sv(t,e){return!Vl(t)||!Vl(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function mT(t,e){return!Vl(t)||!Vl(e)||!Sv(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const gT=({item:t,info:e,updateItem:n,handleRemoveItem:r})=>{const{attributes:s,listeners:i,setNodeRef:o,transform:l,transition:u,isDragging:d}=dT({id:t.id}),f={transform:Ao.Transform.toString(l),transition:u,zIndex:d?50:"auto",opacity:d?.5:1,touchAction:"none"};return p.jsxs("div",{ref:o,style:f,className:"flex gap-3 items-start bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[p.jsx("div",{...s,...i,className:"mt-1 text-slate-300 dark:text-slate-600 cursor-grab active:cursor-grabbing hover:text-slate-500 dark:hover:text-slate-400 p-1",children:p.jsx(p1,{size:20})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${e.color} whitespace-nowrap`,children:e.name}),p.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 truncate",children:t.name})]}),p.jsx("div",{className:"flex gap-2",children:p.jsx("div",{className:"flex-1",children:p.jsx("textarea",{value:t.version,onChange:m=>n(t.id,"version",m.target.value),placeholder:" ()...",rows:2,className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded px-2 py-1 text-sm text-slate-900 dark:text-slate-100 focus:ring-1 focus:ring-blue-500 outline-none resize-none"})})})]}),p.jsxs("div",{className:"flex flex-col items-end gap-2",children:[p.jsxs("div",{className:"flex items-center border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden bg-slate-50 dark:bg-slate-900",children:[p.jsx("input",{type:"number",min:"1",value:t.qty,onChange:m=>n(t.id,"qty",parseInt(m.target.value)||1),className:"w-12 text-center bg-white dark:bg-slate-800 border-x border-slate-200 dark:border-slate-700 py-1 text-slate-900 dark:text-white font-bold outline-none"}),p.jsx("span",{className:"text-xs text-slate-400 px-1",children:"Qty"})]}),p.jsx("button",{onClick:()=>r(t.id),className:"text-slate-300 hover:text-red-500 p-1",children:p.jsx(tl,{size:16})})]})]})},yT=({inventory:t,folders:e,groups:n,categories:r,currentTrip:s,onSave:i,onCancel:o})=>{var be;const[l,u]=R.useState((s==null?void 0:s.name)||` ${new Date().toLocaleDateString()}`),[d,f]=R.useState((s==null?void 0:s.date)||new Date().toISOString().split("T")[0]),[m,g]=R.useState((s==null?void 0:s.items)||[]),[E,A]=R.useState((s==null?void 0:s.groups)||[{id:wd,name:""}]),[C,N]=R.useState(E[0].id),[I,_]=R.useState(""),[S,D]=R.useState(!1),[L,j]=R.useState(""),[w,y]=R.useState("ALL"),[x,T]=R.useState("ALL"),[k,P]=R.useState("ALL"),b=$1(Lm(Kh,{activationConstraint:{distance:8}}),Lm(qh,{coordinateGetter:pT})),Se=F=>{const{active:J,over:le}=F;J.id!==(le==null?void 0:le.id)&&g(me=>{const te=me.findIndex(qe=>qe.id===J.id),Ct=me.findIndex(qe=>qe.id===(le==null?void 0:le.id));return Qh(me,te,Ct)})},We=F=>{const J={id:Math.random().toString(36).substring(2,9),inventoryId:F.id,tripGroupId:C,name:F.name,category:F.category,qty:1,version:F.defaultVersion||"",checked:!1};g(le=>[...le,J])},mt=F=>g(J=>J.filter(le=>le.id!==F)),xe=(F,J,le)=>g(me=>me.map(te=>te.id===F?{...te,[J]:le}:te)),H=()=>{if(!I.trim())return;const F=Math.random().toString(36).substring(2,9);A(J=>[...J,{id:F,name:I}]),N(F),_(""),D(!1)},G=(F,J)=>{if(F.stopPropagation(),E.length<=1){alert("");return}window.confirm("")&&(A(le=>le.filter(me=>me.id!==J)),g(le=>le.filter(me=>me.tripGroupId!==J)),C===J&&N(E[0].id))},M=()=>{if(!l.trim()){alert("");return}m.length===0&&!window.confirm("")||i({id:(s==null?void 0:s.id)||Math.random().toString(36).substring(2,9),userId:(s==null?void 0:s.userId)||"unknown",name:l,date:d,status:(s==null?void 0:s.status)||"planning",groups:E,items:m})},Y=t.filter(F=>F.name.toLowerCase().includes(L.toLowerCase())&&(w==="ALL"||F.category===w)&&(x==="ALL"||F.folderId===x)&&(k==="ALL"||F.groupId===k)),q=x==="ALL"?n:n.filter(F=>F.folderId===x),Q=m.filter(F=>F.tripGroupId===C),oe=F=>{const J=r.find(le=>le.id===F);return{name:(J==null?void 0:J.name)||"",color:(J==null?void 0:J.color)||"bg-gray-100 text-gray-600 border-gray-200"}};return p.jsxs("div",{className:"h-[calc(100vh-100px)] flex flex-col gap-4",children:[p.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col md:flex-row justify-between items-start md:items-center gap-4 shrink-0",children:[p.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[p.jsx("button",{onClick:o,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full text-slate-500",children:p.jsx(nv,{size:24})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-xs text-slate-400 font-bold uppercase tracking-wider",children:""}),p.jsx("input",{type:"text",value:l,onChange:F=>u(F.target.value),className:"text-xl font-bold text-slate-900 dark:text-white bg-transparent border-b border-transparent hover:border-slate-300 focus:border-blue-500 focus:outline-none w-full"})]})]}),p.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[p.jsx("input",{type:"date",value:d,onChange:F=>f(F.target.value),className:"bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 text-slate-700 dark:text-slate-200 focus:ring-2 focus:ring-blue-500"}),p.jsxs("button",{onClick:M,className:"flex items-center gap-2 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 shadow-md transition-transform active:scale-95",children:[p.jsx(E1,{size:18}),p.jsx("span",{children:""})]})]})]}),p.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-4 overflow-hidden",children:[p.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col overflow-hidden",children:[p.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(xd,{className:"text-slate-500",size:20}),p.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-200",children:""})]}),p.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded-full",children:["  ",(be=E.find(F=>F.id===C))==null?void 0:be.name]})]}),p.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx(zh,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),p.jsx("input",{type:"text",placeholder:"...",value:L,onChange:F=>j(F.target.value),className:"w-full pl-9 pr-3 py-1.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded text-sm text-slate-900 dark:text-white focus:ring-1 focus:ring-blue-500 outline-none"})]}),p.jsxs("select",{value:x,onChange:F=>{T(F.target.value),P("ALL")},className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded px-2 py-1 text-sm text-slate-700 dark:text-slate-200 focus:ring-1 focus:ring-blue-500 outline-none",children:[p.jsx("option",{value:"ALL",children:" "}),e.map(F=>p.jsx("option",{value:F.id,children:F.name},F.id))]}),p.jsxs("select",{value:k,onChange:F=>P(F.target.value),className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded px-2 py-1 text-sm text-slate-700 dark:text-slate-200 focus:ring-1 focus:ring-blue-500 outline-none max-w-[150px]",children:[p.jsx("option",{value:"ALL",children:" "}),q.map(F=>p.jsx("option",{value:F.id,children:F.name},F.id))]})]}),p.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[p.jsx("button",{onClick:()=>y("ALL"),className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-colors ${w==="ALL"?"bg-slate-800 dark:bg-white text-white dark:text-slate-900":"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:bg-slate-100"}`,children:""}),r.map(F=>p.jsx("button",{onClick:()=>y(F.id),className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-colors ${w===F.id?"bg-slate-800 dark:bg-white text-white dark:text-slate-900":"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:bg-slate-100"}`,children:F.name},F.id))]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 grid grid-cols-1 lg:grid-cols-2 gap-3 content-start",children:[Y.map(F=>{const J=oe(F.category);return p.jsxs("button",{onClick:()=>We(F),className:"group flex flex-col items-start p-3 rounded-lg border border-slate-100 dark:border-slate-700 hover:border-blue-300 hover:bg-blue-50 dark:hover:bg-slate-700 transition-all text-left bg-white dark:bg-slate-800 shadow-sm",children:[p.jsxs("div",{className:"flex justify-between w-full mb-1",children:[p.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${J.color}`,children:J.name}),p.jsx(qn,{size:16,className:"text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity"})]}),p.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200 text-sm",children:F.name}),F.defaultVersion&&p.jsxs("span",{className:"text-xs text-slate-400 mt-1",children:[": ",F.defaultVersion]})]},F.id)}),Y.length===0&&p.jsx("div",{className:"col-span-full text-center text-slate-400 text-sm py-8",children:""})]})]}),p.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col overflow-hidden",children:[p.jsxs("div",{className:"p-2 border-b border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 flex overflow-x-auto gap-2 scrollbar-hide items-center",children:[E.map(F=>p.jsxs("div",{onClick:()=>N(F.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-all whitespace-nowrap border ${C===F.id?"bg-white dark:bg-slate-800 border-blue-200 dark:border-blue-500/50 text-blue-700 dark:text-blue-400 shadow-sm font-medium":"bg-slate-100 dark:bg-slate-800 border-transparent text-slate-500 hover:bg-white hover:border-slate-200"}`,children:[p.jsx("span",{children:F.name}),p.jsx("span",{className:"text-xs bg-opacity-20 bg-slate-500 px-1.5 rounded-full",children:m.filter(J=>J.tripGroupId===F.id).length}),C===F.id&&p.jsx("button",{onClick:J=>G(J,F.id),className:"ml-1 p-0.5 hover:text-red-500 rounded hover:bg-red-50",children:p.jsx(Qn,{size:12})})]},F.id)),S?p.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-800 p-1 rounded-lg border border-blue-200 shadow-sm animate-in fade-in",children:[p.jsx("input",{autoFocus:!0,className:"w-24 text-sm px-2 py-0.5 outline-none bg-transparent dark:text-white",placeholder:"",value:I,onChange:F=>_(F.target.value),onKeyDown:F=>F.key==="Enter"&&H()}),p.jsx("button",{onClick:H,className:"text-blue-600 hover:bg-blue-50 p-1 rounded",children:p.jsx(qn,{size:14})}),p.jsx("button",{onClick:()=>D(!1),className:"text-slate-400 hover:text-slate-600 p-1",children:p.jsx(Qn,{size:14})})]}):p.jsx("button",{onClick:()=>D(!0),className:"p-1.5 rounded-lg text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-slate-600 transition-colors",title:"",children:p.jsx(qn,{size:18})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50/50 dark:bg-slate-900/30",children:Q.length===0?p.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-300",children:[p.jsx(xd,{size:48,className:"mb-4 opacity-50"}),p.jsx("p",{children:""})]}):p.jsx(WI,{sensors:b,collisionDetection:W1,onDragEnd:Se,children:p.jsx(sT,{items:Q.map(F=>F.id),strategy:nT,children:Q.map(F=>p.jsx(gT,{item:F,info:oe(F.category),updateItem:xe,handleRemoveItem:mt},F.id))})})})]})]})]})},vT=({trip:t,categories:e,onUpdateTrip:n,onBack:r,onEdit:s})=>{const[i,o]=R.useState(t),[l,u]=R.useState(!1);R.useEffect(()=>{o(t)},[t]);const d=A=>{const C=i.items.map(_=>_.id===A?{..._,checked:!_.checked}:_),N={...i,items:C},I=C.every(_=>_.checked);N.status=I?"completed":"active",o(N),n(N)},f=Math.round(i.items.filter(A=>A.checked).length/i.items.length*100)||0,m=A=>{const C=e.find(N=>N.id===A);return{name:(C==null?void 0:C.name)||"",color:(C==null?void 0:C.color)||"bg-gray-100 text-gray-600 border-gray-200"}},g=()=>{const A=[],C={};return i.items.forEach(N=>{C[N.category]||(C[N.category]=[]),C[N.category].push(N)}),Object.keys(C).forEach(N=>{const I=C[N],_={};I.forEach(D=>{_[D.name]||(_[D.name]=[]),_[D.name].push(D)});const S=Object.keys(_).map(D=>{const L=_[D],j=L.reduce((x,T)=>x+T.qty,0),w={};L.forEach(x=>{const T=x.version||"()";w[T]=(w[T]||0)+x.qty});const y=Object.keys(w).map(x=>({version:x,qty:w[x]}));return{name:D,totalQty:j,details:y}});A.push({categoryId:N,items:S})}),A},E=()=>{let A=`# ${i.name}
 ${i.date}

`;i.groups.forEach(S=>{const D=i.items.filter(L=>L.tripGroupId===S.id);D.length>0&&(A+=`## ${S.name}
`,D.forEach(L=>{const j=L.checked?"[x]":"[ ]",w=L.version?` (${L.version.replace(/\n/g," ")})`:"";A+=`- ${j} ${L.name} x${L.qty}${w}
`}),A+=`
`)});const C=i.items.length,N=i.items.filter(S=>S.checked).length,I=Math.round(N/C*100)||0;A+=`---
`,A+=`###  
`,g().forEach(S=>{const D=m(S.categoryId).name;A+=`**${D}**
`,S.items.forEach(L=>{A+=`- ${L.name}: ${L.totalQty}
`}),A+=`
`}),A+=`---
`,A+=`${I}% (${N}/${C})`,navigator.clipboard.writeText(A).then(()=>alert(" Markdown  () "))};return p.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-20",children:[l&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-2xl shadow-2xl max-h-[85vh] flex flex-col border border-slate-200 dark:border-slate-700",children:[p.jsxs("div",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50 rounded-t-xl",children:[p.jsxs("h3",{className:"font-bold text-xl flex items-center gap-2 text-slate-800 dark:text-white",children:[p.jsx(Dm,{className:"text-blue-600"})," "]}),p.jsx("button",{onClick:()=>u(!1),className:"p-1 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-full transition-colors",children:p.jsx(Qn,{size:24,className:"text-slate-500"})})]}),p.jsxs("div",{className:"p-6 overflow-y-auto flex-1 space-y-6",children:[g().map(A=>{const C=m(A.categoryId);return p.jsxs("div",{className:"border border-slate-100 dark:border-slate-700 rounded-xl overflow-hidden shadow-sm",children:[p.jsx("div",{className:`px-4 py-2 font-bold text-sm uppercase tracking-wider border-b dark:border-slate-700 ${C.color.replace("text-","bg-opacity-10 bg-").split(" ")[0]} ${C.color.split(" ")[1]}`,children:C.name}),p.jsx("div",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:A.items.map((N,I)=>p.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 flex flex-col sm:flex-row sm:justify-between gap-2",children:[p.jsxs("div",{className:"flex items-baseline gap-2",children:[p.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg",children:N.name}),p.jsxs("span",{className:"text-xs bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 px-2 py-0.5 rounded-full font-medium",children:[": ",N.totalQty]})]}),p.jsx("div",{className:"flex flex-col gap-1 sm:items-end",children:N.details.map((_,S)=>p.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 flex items-center gap-2",children:[p.jsx("span",{className:`px-2 py-0.5 rounded text-xs border ${_.version==="()"?"bg-slate-50 dark:bg-slate-700 border-slate-200 dark:border-slate-600 text-slate-400":"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-700 dark:text-yellow-500"}`,children:_.version}),p.jsxs("span",{className:"font-mono",children:["x",_.qty]})]},S))})]},I))})]},A.categoryId)}),i.items.length===0&&p.jsx("p",{className:"text-center text-slate-400 py-8",children:""})]}),p.jsx("div",{className:"p-4 border-t dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 text-center rounded-b-xl",children:p.jsx("button",{onClick:()=>u(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-sm",children:""})})]})}),p.jsxs("div",{className:"sticky top-0 z-10 bg-slate-50/95 dark:bg-slate-950/95 backdrop-blur-sm pt-4 pb-2 border-b border-slate-200 dark:border-slate-800",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("button",{onClick:r,className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white",children:[p.jsx(nv,{size:20,className:"mr-1"})," "]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-all",title:"",children:[p.jsx(I1,{size:16}),p.jsx("span",{className:"hidden sm:inline",children:""})]}),p.jsx("div",{className:"h-4 w-px bg-slate-300 dark:bg-slate-600 mx-1"}),p.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 font-medium shadow-sm transition-all",title:"",children:[p.jsx(Dm,{size:16}),p.jsx("span",{className:"hidden sm:inline",children:""})]}),p.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-all",children:[p.jsx(w1,{size:16}),""]}),p.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${i.status==="completed"?"bg-green-500 text-white":"bg-blue-600 text-white"}`,children:i.status==="completed"?"":""})]})]}),p.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:i.name}),p.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex items-center gap-4",children:[p.jsx("div",{className:"flex-1 h-3 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-green-500 transition-all duration-500 ease-out",style:{width:`${f}%`}})}),p.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300 min-w-[3rem] text-right",children:[f,"%"]})]})]}),i.groups.map(A=>{const C=i.items.filter(N=>N.tripGroupId===A.id);return C.length===0?null:p.jsxs("div",{className:"space-y-3",children:[p.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-300 text-lg flex items-center gap-2 border-l-4 border-blue-500 pl-3",children:[p.jsx(Nm,{size:18,className:"text-blue-500"}),A.name]}),p.jsx("div",{className:"grid grid-cols-1 gap-3",children:C.map(N=>{const I=m(N.category);return p.jsxs("div",{onClick:()=>d(N.id),className:`relative cursor-pointer transition-all duration-200 p-4 rounded-xl border-2 shadow-sm flex items-start gap-4 ${N.checked?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 opacity-70":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md"}`,children:[p.jsxs("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center transition-colors mt-1 ${N.checked?"bg-green-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-300 dark:text-slate-500"}`,children:[p.jsx(a1,{size:20,className:N.checked?"opacity-100":"opacity-0"}),!N.checked&&p.jsx(u1,{size:20,className:"absolute"})]}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex justify-between items-start mb-1",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:`text-lg font-bold break-words ${N.checked?"text-slate-500 dark:text-slate-500 line-through":"text-slate-800 dark:text-slate-200"}`,children:N.name}),p.jsx("span",{className:`text-[10px] w-fit px-1.5 py-0.5 rounded border mt-1 ${I.color}`,children:I.name})]}),p.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 font-bold px-2 py-1 rounded text-sm whitespace-nowrap ml-2",children:["x",N.qty]})]}),N.version&&p.jsx("div",{className:`text-sm mt-2 font-medium px-3 py-2 rounded w-full whitespace-pre-wrap break-words leading-relaxed ${N.checked?"bg-slate-100 dark:bg-slate-700 text-slate-400 dark:text-slate-500":"bg-yellow-50 dark:bg-yellow-900/10 text-yellow-800 dark:text-yellow-200 border border-yellow-200 dark:border-yellow-800"}`,children:N.version})]})]},N.id)})})]},A.id)}),i.items.length===0&&p.jsxs("div",{className:"text-center py-20 text-slate-400",children:[p.jsx(Nm,{size:48,className:"mx-auto mb-4 opacity-50"}),p.jsx("p",{children:""})]})]})};var Qm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},_T=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},kv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,E=d&63;u||(E=64,o||(g=64)),r.push(n[f],n[m],n[g],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_T(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new wT;const g=i<<2|l>>4;if(r.push(g),d!==64){const E=l<<4&240|d>>2;if(r.push(E),m!==64){const A=d<<6&192|m;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xT=function(t){const e=bv(t);return kv.encodeByteArray(e,!0)},Ol=function(t){return xT(t).replace(/\./g,"")},ET=function(t){try{return kv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ll(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!IT(n)||(t[n]=Ll(t[n],e[n]));return t}function IT(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=()=>Cv().__FIREBASE_DEFAULTS__,ST=()=>{if(typeof process>"u"||typeof Qm>"u")return;const t=Qm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ET(t[1]);return e&&JSON.parse(e)},Yh=()=>{try{return TT()||ST()||bT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kT=t=>{var e,n;return(n=(e=Yh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},CT=t=>{const e=kT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Av=()=>{var t;return(t=Yh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ol(JSON.stringify(n)),Ol(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PT(){var t;const e=(t=Yh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DT(){return typeof window<"u"||Rv()}function Rv(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function VT(){return!PT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OT(){try{return typeof indexedDB=="object"}catch{return!1}}function LT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="FirebaseError";class ms extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MT,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gu.prototype.create)}}class gu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?jT(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ms(s,l,r)}}function jT(t,e){return t.replace(FT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const FT=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function kd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Xm(i)&&Xm(o)){if(!kd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Xm(t){return t!==null&&typeof t=="object"}function zT(t,e){const n=new UT(t,e);return n.subscribe.bind(n)}class UT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=vc),s.error===void 0&&(s.error=vc),s.complete===void 0&&(s.complete=vc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){return t&&t._delegate?t._delegate:t}class ti{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new AT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WT(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HT(t){return t===Xr?void 0:t}function WT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $T(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh=[];var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const Pv={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},qT=ye.INFO,GT={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},KT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=GT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jh{constructor(e){this.name=e,this._logLevel=qT,this._logHandler=KT,this._userLogHandler=null,Xh.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Pv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}function QT(t){Xh.forEach(e=>{e.setLogLevel(t)})}function YT(t,e){for(const n of Xh){let r=null;e&&e.level&&(r=Pv[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const l=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");i>=(r??s.logLevel)&&t({level:ye[i].toLowerCase(),message:l,args:o,type:s.name})}}}const XT=(t,e)=>e.some(n=>t instanceof n);let Jm,Zm;function JT(){return Jm||(Jm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZT(){return Zm||(Zm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dv=new WeakMap,Cd=new WeakMap,Vv=new WeakMap,_c=new WeakMap,Zh=new WeakMap;function eS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ar(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Dv.set(n,t)}).catch(()=>{}),Zh.set(e,t),e}function tS(t){if(Cd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Cd.set(t,e)}let Ad={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Vv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nS(t){Ad=t(Ad)}function rS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wc(this),e,...n);return Vv.set(r,e.sort?e.sort():[e]),Ar(r)}:ZT().includes(t)?function(...e){return t.apply(wc(this),e),Ar(Dv.get(this))}:function(...e){return Ar(t.apply(wc(this),e))}}function sS(t){return typeof t=="function"?rS(t):(t instanceof IDBTransaction&&tS(t),XT(t,JT())?new Proxy(t,Ad):t)}function Ar(t){if(t instanceof IDBRequest)return eS(t);if(_c.has(t))return _c.get(t);const e=sS(t);return e!==t&&(_c.set(t,e),Zh.set(e,t)),e}const wc=t=>Zh.get(t);function iS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Ar(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ar(o.result),u.oldVersion,u.newVersion,Ar(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const oS=["get","getKey","getAll","getAllKeys","count"],aS=["put","add","delete","clear"],xc=new Map;function eg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xc.get(e))return xc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=aS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||oS.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return xc.set(e,i),i}nS(t=>({...t,get:(e,n,r)=>eg(e,n)||t.get(e,n,r),has:(e,n)=>!!eg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function uS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jl="@firebase/app",Rd="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new Jh("@firebase/app"),cS="@firebase/app-compat",dS="@firebase/analytics-compat",hS="@firebase/analytics",fS="@firebase/app-check-compat",pS="@firebase/app-check",mS="@firebase/auth",gS="@firebase/auth-compat",yS="@firebase/database",vS="@firebase/data-connect",_S="@firebase/database-compat",wS="@firebase/functions",xS="@firebase/functions-compat",ES="@firebase/installations",IS="@firebase/installations-compat",TS="@firebase/messaging",SS="@firebase/messaging-compat",bS="@firebase/performance",kS="@firebase/performance-compat",CS="@firebase/remote-config",AS="@firebase/remote-config-compat",RS="@firebase/storage",NS="@firebase/storage-compat",PS="@firebase/firestore",DS="@firebase/vertexai-preview",VS="@firebase/firestore-compat",OS="firebase",LS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="[DEFAULT]",MS={[jl]:"fire-core",[cS]:"fire-core-compat",[hS]:"fire-analytics",[dS]:"fire-analytics-compat",[pS]:"fire-app-check",[fS]:"fire-app-check-compat",[mS]:"fire-auth",[gS]:"fire-auth-compat",[yS]:"fire-rtdb",[vS]:"fire-data-connect",[_S]:"fire-rtdb-compat",[wS]:"fire-fn",[xS]:"fire-fn-compat",[ES]:"fire-iid",[IS]:"fire-iid-compat",[TS]:"fire-fcm",[SS]:"fire-fcm-compat",[bS]:"fire-perf",[kS]:"fire-perf-compat",[CS]:"fire-rc",[AS]:"fire-rc-compat",[RS]:"fire-gcs",[NS]:"fire-gcs-compat",[PS]:"fire-fst",[VS]:"fire-fst-compat",[DS]:"fire-vertex","fire-js":"fire-js",[OS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new Map,ni=new Map,ri=new Map;function No(t,e){try{t.container.addComponent(e)}catch(n){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ov(t,e){t.container.addOrOverwriteComponent(e)}function si(t){const e=t.name;if(ri.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;ri.set(e,t);for(const n of Vr.values())No(n,t);for(const n of ni.values())No(n,t);return!0}function ef(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jS(t,e,n=Dr){ef(t,e).clearInstance(n)}function Lv(t){return t.options!==void 0}function FS(t){return t.settings!==void 0}function zS(){ri.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},an=new gu("app","Firebase",US);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mv=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ti("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS extends Mv{constructor(e,n,r,s){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,o,s);else{const l=e;super(l.options,o,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Xn(jl,Rd,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){rf(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw an.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=LS;function nf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Dr,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw an.create("bad-app-name",{appName:String(s)});if(n||(n=Av()),!n)throw an.create("no-options");const i=Vr.get(s);if(i){if(kd(n,i.options)&&kd(r,i.config))return i;throw an.create("duplicate-app",{appName:s})}const o=new Nv(s);for(const u of ri.values())o.addComponent(u);const l=new Mv(n,r,o);return Vr.set(s,l),l}function $S(t,e){if(DT()&&!Rv())throw an.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;Lv(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=d=>[...d].reduce((f,m)=>Math.imul(31,f)+m.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw an.create("finalization-registry-not-supported",{});const i=""+s(JSON.stringify(r)),o=ni.get(i);if(o)return o.incRefCount(e.releaseOnDeref),o;const l=new Nv(i);for(const d of ri.values())l.addComponent(d);const u=new BS(n,e,i,l);return ni.set(i,u),u}function jv(t=Dr){const e=Vr.get(t);if(!e&&t===Dr&&Av())return nf();if(!e)throw an.create("no-app",{appName:t});return e}function HS(){return Array.from(Vr.values())}async function rf(t){let e=!1;const n=t.name;Vr.has(n)?(e=!0,Vr.delete(n)):ni.has(n)&&t.decRefCount()<=0&&(ni.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Xn(t,e,n){var r;let s=(r=MS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(l.join(" "));return}si(new ti(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function Fv(t,e){if(t!==null&&typeof t!="function")throw an.create("invalid-log-argument");YT(t,e)}function zv(t){QT(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="firebase-heartbeat-database",qS=1,Po="firebase-heartbeat-store";let Ec=null;function Uv(){return Ec||(Ec=iS(WS,qS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Po)}catch(n){console.warn(n)}}}}).catch(t=>{throw an.create("idb-open",{originalErrorMessage:t.message})})),Ec}async function GS(t){try{const n=(await Uv()).transaction(Po),r=await n.objectStore(Po).get(Bv(t));return await n.done,r}catch(e){if(e instanceof ms)rr.warn(e.message);else{const n=an.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rr.warn(n.message)}}}async function tg(t,e){try{const r=(await Uv()).transaction(Po,"readwrite");await r.objectStore(Po).put(e,Bv(t)),await r.done}catch(n){if(n instanceof ms)rr.warn(n.message);else{const r=an.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rr.warn(r.message)}}}function Bv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=1024,QS=30*24*60*60*1e3;class YS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ng();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=QS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ng(),{heartbeatsToSend:r,unsentEntries:s}=XS(this._heartbeatsCache.heartbeats),i=Ol(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return rr.warn(n),""}}}function ng(){return new Date().toISOString().substring(0,10)}function XS(t,e=KS){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),rg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),rg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OT()?LT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return tg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return tg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rg(t){return Ol(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t){si(new ti("platform-logger",e=>new lS(e),"PRIVATE")),si(new ti("heartbeat",e=>new YS(e),"PRIVATE")),Xn(jl,Rd,t),Xn(jl,Rd,"esm2017"),Xn("fire-js","")}ZS("");const eb=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ms,SDK_VERSION:tf,_DEFAULT_ENTRY_NAME:Dr,_addComponent:No,_addOrOverwriteComponent:Ov,_apps:Vr,_clearComponents:zS,_components:ri,_getProvider:ef,_isFirebaseApp:Lv,_isFirebaseServerApp:FS,_registerComponent:si,_removeServiceInstance:jS,_serverApps:ni,deleteApp:rf,getApp:jv,getApps:HS,initializeApp:nf,initializeServerApp:$S,onLog:Fv,registerVersion:Xn,setLogLevel:zv},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,n){this._delegate=e,this.firebase=n,No(e,new ti("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),rf(this._delegate)))}_getService(e,n=Dr){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=Dr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){No(this._delegate,e)}_addOrOverwriteComponent(e){Ov(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},sg=new gu("app-compat","Firebase",nb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:Xn,setLogLevel:zv,onLog:Fv,apps:null,SDK_VERSION:tf,INTERNAL:{registerComponent:l,removeApp:r,useAsService:u,modularAPIs:eb}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(d){delete e[d]}function s(d){if(d=d||Dr,!Ym(e,d))throw sg.create("no-app",{appName:d});return e[d]}s.App=t;function i(d,f={}){const m=nf(d,f);if(Ym(e,m.name))return e[m.name];const g=new t(m,n);return e[m.name]=g,g}function o(){return Object.keys(e).map(d=>e[d])}function l(d){const f=d.name,m=f.replace("-compat","");if(si(d)&&d.type==="PUBLIC"){const g=(E=s())=>{if(typeof E[m]!="function")throw sg.create("invalid-app-argument",{appName:f});return E[m]()};d.serviceProps!==void 0&&Ll(g,d.serviceProps),n[m]=g,t.prototype[m]=function(...E){return this._getService.bind(this,f).apply(this,d.multipleInstances?E:[])}}return d.type==="PUBLIC"?n[m]:null}function u(d,f){return f==="serverAuth"?null:f}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(){const t=rb(tb);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:$v,extendNamespace:e,createSubscribe:zT,ErrorFactory:gu,deepExtend:Ll});function e(n){Ll(t,n)}return t}const sb=$v();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=new Jh("@firebase/app-compat"),ib="@firebase/app-compat",ob="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t){Xn(ib,ob,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=Cv();if(t.firebase!==void 0){ig.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ig.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Hv=sb;ab();var lb="firebase",ub="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hv.registerVersion(lb,ub,"app-compat");var og=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ss,Wv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,y){function x(){}x.prototype=y.prototype,w.D=y.prototype,w.prototype=new x,w.prototype.constructor=w,w.C=function(T,k,P){for(var b=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)b[Se-2]=arguments[Se];return y.prototype[k].apply(T,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,y,x){x||(x=0);var T=Array(16);if(typeof y=="string")for(var k=0;16>k;++k)T[k]=y.charCodeAt(x++)|y.charCodeAt(x++)<<8|y.charCodeAt(x++)<<16|y.charCodeAt(x++)<<24;else for(k=0;16>k;++k)T[k]=y[x++]|y[x++]<<8|y[x++]<<16|y[x++]<<24;y=w.g[0],x=w.g[1],k=w.g[2];var P=w.g[3],b=y+(P^x&(k^P))+T[0]+3614090360&4294967295;y=x+(b<<7&4294967295|b>>>25),b=P+(k^y&(x^k))+T[1]+3905402710&4294967295,P=y+(b<<12&4294967295|b>>>20),b=k+(x^P&(y^x))+T[2]+606105819&4294967295,k=P+(b<<17&4294967295|b>>>15),b=x+(y^k&(P^y))+T[3]+3250441966&4294967295,x=k+(b<<22&4294967295|b>>>10),b=y+(P^x&(k^P))+T[4]+4118548399&4294967295,y=x+(b<<7&4294967295|b>>>25),b=P+(k^y&(x^k))+T[5]+1200080426&4294967295,P=y+(b<<12&4294967295|b>>>20),b=k+(x^P&(y^x))+T[6]+2821735955&4294967295,k=P+(b<<17&4294967295|b>>>15),b=x+(y^k&(P^y))+T[7]+4249261313&4294967295,x=k+(b<<22&4294967295|b>>>10),b=y+(P^x&(k^P))+T[8]+1770035416&4294967295,y=x+(b<<7&4294967295|b>>>25),b=P+(k^y&(x^k))+T[9]+2336552879&4294967295,P=y+(b<<12&4294967295|b>>>20),b=k+(x^P&(y^x))+T[10]+4294925233&4294967295,k=P+(b<<17&4294967295|b>>>15),b=x+(y^k&(P^y))+T[11]+2304563134&4294967295,x=k+(b<<22&4294967295|b>>>10),b=y+(P^x&(k^P))+T[12]+1804603682&4294967295,y=x+(b<<7&4294967295|b>>>25),b=P+(k^y&(x^k))+T[13]+4254626195&4294967295,P=y+(b<<12&4294967295|b>>>20),b=k+(x^P&(y^x))+T[14]+2792965006&4294967295,k=P+(b<<17&4294967295|b>>>15),b=x+(y^k&(P^y))+T[15]+1236535329&4294967295,x=k+(b<<22&4294967295|b>>>10),b=y+(k^P&(x^k))+T[1]+4129170786&4294967295,y=x+(b<<5&4294967295|b>>>27),b=P+(x^k&(y^x))+T[6]+3225465664&4294967295,P=y+(b<<9&4294967295|b>>>23),b=k+(y^x&(P^y))+T[11]+643717713&4294967295,k=P+(b<<14&4294967295|b>>>18),b=x+(P^y&(k^P))+T[0]+3921069994&4294967295,x=k+(b<<20&4294967295|b>>>12),b=y+(k^P&(x^k))+T[5]+3593408605&4294967295,y=x+(b<<5&4294967295|b>>>27),b=P+(x^k&(y^x))+T[10]+38016083&4294967295,P=y+(b<<9&4294967295|b>>>23),b=k+(y^x&(P^y))+T[15]+3634488961&4294967295,k=P+(b<<14&4294967295|b>>>18),b=x+(P^y&(k^P))+T[4]+3889429448&4294967295,x=k+(b<<20&4294967295|b>>>12),b=y+(k^P&(x^k))+T[9]+568446438&4294967295,y=x+(b<<5&4294967295|b>>>27),b=P+(x^k&(y^x))+T[14]+3275163606&4294967295,P=y+(b<<9&4294967295|b>>>23),b=k+(y^x&(P^y))+T[3]+4107603335&4294967295,k=P+(b<<14&4294967295|b>>>18),b=x+(P^y&(k^P))+T[8]+1163531501&4294967295,x=k+(b<<20&4294967295|b>>>12),b=y+(k^P&(x^k))+T[13]+2850285829&4294967295,y=x+(b<<5&4294967295|b>>>27),b=P+(x^k&(y^x))+T[2]+4243563512&4294967295,P=y+(b<<9&4294967295|b>>>23),b=k+(y^x&(P^y))+T[7]+1735328473&4294967295,k=P+(b<<14&4294967295|b>>>18),b=x+(P^y&(k^P))+T[12]+2368359562&4294967295,x=k+(b<<20&4294967295|b>>>12),b=y+(x^k^P)+T[5]+4294588738&4294967295,y=x+(b<<4&4294967295|b>>>28),b=P+(y^x^k)+T[8]+2272392833&4294967295,P=y+(b<<11&4294967295|b>>>21),b=k+(P^y^x)+T[11]+1839030562&4294967295,k=P+(b<<16&4294967295|b>>>16),b=x+(k^P^y)+T[14]+4259657740&4294967295,x=k+(b<<23&4294967295|b>>>9),b=y+(x^k^P)+T[1]+2763975236&4294967295,y=x+(b<<4&4294967295|b>>>28),b=P+(y^x^k)+T[4]+1272893353&4294967295,P=y+(b<<11&4294967295|b>>>21),b=k+(P^y^x)+T[7]+4139469664&4294967295,k=P+(b<<16&4294967295|b>>>16),b=x+(k^P^y)+T[10]+3200236656&4294967295,x=k+(b<<23&4294967295|b>>>9),b=y+(x^k^P)+T[13]+681279174&4294967295,y=x+(b<<4&4294967295|b>>>28),b=P+(y^x^k)+T[0]+3936430074&4294967295,P=y+(b<<11&4294967295|b>>>21),b=k+(P^y^x)+T[3]+3572445317&4294967295,k=P+(b<<16&4294967295|b>>>16),b=x+(k^P^y)+T[6]+76029189&4294967295,x=k+(b<<23&4294967295|b>>>9),b=y+(x^k^P)+T[9]+3654602809&4294967295,y=x+(b<<4&4294967295|b>>>28),b=P+(y^x^k)+T[12]+3873151461&4294967295,P=y+(b<<11&4294967295|b>>>21),b=k+(P^y^x)+T[15]+530742520&4294967295,k=P+(b<<16&4294967295|b>>>16),b=x+(k^P^y)+T[2]+3299628645&4294967295,x=k+(b<<23&4294967295|b>>>9),b=y+(k^(x|~P))+T[0]+4096336452&4294967295,y=x+(b<<6&4294967295|b>>>26),b=P+(x^(y|~k))+T[7]+1126891415&4294967295,P=y+(b<<10&4294967295|b>>>22),b=k+(y^(P|~x))+T[14]+2878612391&4294967295,k=P+(b<<15&4294967295|b>>>17),b=x+(P^(k|~y))+T[5]+4237533241&4294967295,x=k+(b<<21&4294967295|b>>>11),b=y+(k^(x|~P))+T[12]+1700485571&4294967295,y=x+(b<<6&4294967295|b>>>26),b=P+(x^(y|~k))+T[3]+2399980690&4294967295,P=y+(b<<10&4294967295|b>>>22),b=k+(y^(P|~x))+T[10]+4293915773&4294967295,k=P+(b<<15&4294967295|b>>>17),b=x+(P^(k|~y))+T[1]+2240044497&4294967295,x=k+(b<<21&4294967295|b>>>11),b=y+(k^(x|~P))+T[8]+1873313359&4294967295,y=x+(b<<6&4294967295|b>>>26),b=P+(x^(y|~k))+T[15]+4264355552&4294967295,P=y+(b<<10&4294967295|b>>>22),b=k+(y^(P|~x))+T[6]+2734768916&4294967295,k=P+(b<<15&4294967295|b>>>17),b=x+(P^(k|~y))+T[13]+1309151649&4294967295,x=k+(b<<21&4294967295|b>>>11),b=y+(k^(x|~P))+T[4]+4149444226&4294967295,y=x+(b<<6&4294967295|b>>>26),b=P+(x^(y|~k))+T[11]+3174756917&4294967295,P=y+(b<<10&4294967295|b>>>22),b=k+(y^(P|~x))+T[2]+718787259&4294967295,k=P+(b<<15&4294967295|b>>>17),b=x+(P^(k|~y))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(k+(b<<21&4294967295|b>>>11))&4294967295,w.g[2]=w.g[2]+k&4294967295,w.g[3]=w.g[3]+P&4294967295}r.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var x=y-this.blockSize,T=this.B,k=this.h,P=0;P<y;){if(k==0)for(;P<=x;)s(this,w,P),P+=this.blockSize;if(typeof w=="string"){for(;P<y;)if(T[k++]=w.charCodeAt(P++),k==this.blockSize){s(this,T),k=0;break}}else for(;P<y;)if(T[k++]=w[P++],k==this.blockSize){s(this,T),k=0;break}}this.h=k,this.o+=y},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var x=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=x&255,x/=256;for(this.u(w),w=Array(16),y=x=0;4>y;++y)for(var T=0;32>T;T+=8)w[x++]=this.g[y]>>>T&255;return w};function i(w,y){var x=l;return Object.prototype.hasOwnProperty.call(x,w)?x[w]:x[w]=y(w)}function o(w,y){this.h=y;for(var x=[],T=!0,k=w.length-1;0<=k;k--){var P=w[k]|0;T&&P==y||(x[k]=P,T=!1)}this.g=x}var l={};function u(w){return-128<=w&&128>w?i(w,function(y){return new o([y|0],0>y?-1:0)}):new o([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return N(d(-w));for(var y=[],x=1,T=0;w>=x;T++)y[T]=w/x|0,x*=4294967296;return new o(y,0)}function f(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return N(f(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=d(Math.pow(y,8)),T=m,k=0;k<w.length;k+=8){var P=Math.min(8,w.length-k),b=parseInt(w.substring(k,k+P),y);8>P?(P=d(Math.pow(y,P)),T=T.j(P).add(d(b))):(T=T.j(x),T=T.add(d(b)))}return T}var m=u(0),g=u(1),E=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-N(this).m();for(var w=0,y=1,x=0;x<this.g.length;x++){var T=this.i(x);w+=(0<=T?T:4294967296+T)*y,y*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(A(this))return"0";if(C(this))return"-"+N(this).toString(w);for(var y=d(Math.pow(w,6)),x=this,T="";;){var k=D(x,y).g;x=I(x,k.j(y));var P=((0<x.g.length?x.g[0]:x.h)>>>0).toString(w);if(x=k,A(x))return P+T;for(;6>P.length;)P="0"+P;T=P+T}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function A(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function C(w){return w.h==-1}t.l=function(w){return w=I(this,w),C(w)?-1:A(w)?0:1};function N(w){for(var y=w.g.length,x=[],T=0;T<y;T++)x[T]=~w.g[T];return new o(x,~w.h).add(g)}t.abs=function(){return C(this)?N(this):this},t.add=function(w){for(var y=Math.max(this.g.length,w.g.length),x=[],T=0,k=0;k<=y;k++){var P=T+(this.i(k)&65535)+(w.i(k)&65535),b=(P>>>16)+(this.i(k)>>>16)+(w.i(k)>>>16);T=b>>>16,P&=65535,b&=65535,x[k]=b<<16|P}return new o(x,x[x.length-1]&-2147483648?-1:0)};function I(w,y){return w.add(N(y))}t.j=function(w){if(A(this)||A(w))return m;if(C(this))return C(w)?N(this).j(N(w)):N(N(this).j(w));if(C(w))return N(this.j(N(w)));if(0>this.l(E)&&0>w.l(E))return d(this.m()*w.m());for(var y=this.g.length+w.g.length,x=[],T=0;T<2*y;T++)x[T]=0;for(T=0;T<this.g.length;T++)for(var k=0;k<w.g.length;k++){var P=this.i(T)>>>16,b=this.i(T)&65535,Se=w.i(k)>>>16,We=w.i(k)&65535;x[2*T+2*k]+=b*We,_(x,2*T+2*k),x[2*T+2*k+1]+=P*We,_(x,2*T+2*k+1),x[2*T+2*k+1]+=b*Se,_(x,2*T+2*k+1),x[2*T+2*k+2]+=P*Se,_(x,2*T+2*k+2)}for(T=0;T<y;T++)x[T]=x[2*T+1]<<16|x[2*T];for(T=y;T<2*y;T++)x[T]=0;return new o(x,0)};function _(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function S(w,y){this.g=w,this.h=y}function D(w,y){if(A(y))throw Error("division by zero");if(A(w))return new S(m,m);if(C(w))return y=D(N(w),y),new S(N(y.g),N(y.h));if(C(y))return y=D(w,N(y)),new S(N(y.g),y.h);if(30<w.g.length){if(C(w)||C(y))throw Error("slowDivide_ only works with positive integers.");for(var x=g,T=y;0>=T.l(w);)x=L(x),T=L(T);var k=j(x,1),P=j(T,1);for(T=j(T,2),x=j(x,2);!A(T);){var b=P.add(T);0>=b.l(w)&&(k=k.add(x),P=b),T=j(T,1),x=j(x,1)}return y=I(w,k.j(y)),new S(k,y)}for(k=m;0<=w.l(y);){for(x=Math.max(1,Math.floor(w.m()/y.m())),T=Math.ceil(Math.log(x)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),P=d(x),b=P.j(y);C(b)||0<b.l(w);)x-=T,P=d(x),b=P.j(y);A(P)&&(P=g),k=k.add(P),w=I(w,b)}return new S(k,w)}t.A=function(w){return D(this,w).h},t.and=function(w){for(var y=Math.max(this.g.length,w.g.length),x=[],T=0;T<y;T++)x[T]=this.i(T)&w.i(T);return new o(x,this.h&w.h)},t.or=function(w){for(var y=Math.max(this.g.length,w.g.length),x=[],T=0;T<y;T++)x[T]=this.i(T)|w.i(T);return new o(x,this.h|w.h)},t.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),x=[],T=0;T<y;T++)x[T]=this.i(T)^w.i(T);return new o(x,this.h^w.h)};function L(w){for(var y=w.g.length+1,x=[],T=0;T<y;T++)x[T]=w.i(T)<<1|w.i(T-1)>>>31;return new o(x,w.h)}function j(w,y){var x=y>>5;y%=32;for(var T=w.g.length-x,k=[],P=0;P<T;P++)k[P]=0<y?w.i(P+x)>>>y|w.i(P+x+1)<<32-y:w.i(P+x);return new o(k,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Wv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,ss=o}).apply(typeof og<"u"?og:typeof self<"u"?self:typeof window<"u"?window:{});var Fa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qv,Hi,Gv,rl,Nd,Kv,Qv,Yv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,h){return a==Array.prototype||a==Object.prototype||(a[c]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fa=="object"&&Fa];for(var c=0;c<a.length;++c){var h=a[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(a,c){if(c)e:{var h=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var V=a[v];if(!(V in h))break e;h=h[V]}a=a[a.length-1],v=h[a],c=c(v),c!=v&&c!=null&&e(h,a,{configurable:!0,writable:!0,value:c})}}function i(a,c){a instanceof String&&(a+="");var h=0,v=!1,V={next:function(){if(!v&&h<a.length){var O=h++;return{value:c(O,a[O]),done:!1}}return v=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(a){return a||function(){return i(this,function(c,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function d(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function f(a,c,h){return a.call.apply(a.bind,arguments)}function m(a,c,h){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,v),a.apply(c,V)}}return function(){return a.apply(c,arguments)}}function g(a,c,h){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function E(a,c){var h=Array.prototype.slice.call(arguments,1);return function(){var v=h.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function A(a,c){function h(){}h.prototype=c.prototype,a.aa=c.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(v,V,O){for(var W=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)W[Ae-2]=arguments[Ae];return c.prototype[V].apply(v,W)}}function C(a){const c=a.length;if(0<c){const h=Array(c);for(let v=0;v<c;v++)h[v]=a[v];return h}return[]}function N(a,c){for(let h=1;h<arguments.length;h++){const v=arguments[h];if(u(v)){const V=a.length||0,O=v.length||0;a.length=V+O;for(let W=0;W<O;W++)a[V+W]=v[W]}else a.push(v)}}class I{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function _(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var L=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function j(a,c,h){for(const v in a)c.call(h,a[v],v,a)}function w(a,c){for(const h in a)c.call(void 0,a[h],h,a)}function y(a){const c={};for(const h in a)c[h]=a[h];return c}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,c){let h,v;for(let V=1;V<arguments.length;V++){v=arguments[V];for(h in v)a[h]=v[h];for(let O=0;O<x.length;O++)h=x[O],Object.prototype.hasOwnProperty.call(v,h)&&(a[h]=v[h])}}function k(a){var c=1;a=a.split(":");const h=[];for(;0<c&&a.length;)h.push(a.shift()),c--;return a.length&&h.push(a.join(":")),h}function P(a){l.setTimeout(()=>{throw a},0)}function b(){var a=G;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class Se{constructor(){this.h=this.g=null}add(c,h){const v=We.get();v.set(c,h),this.h?this.h.next=v:this.g=v,this.h=v}}var We=new I(()=>new mt,a=>a.reset());class mt{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,H=!1,G=new Se,M=()=>{const a=l.Promise.resolve(void 0);xe=()=>{a.then(Y)}};var Y=()=>{for(var a;a=b();){try{a.h.call(a.g)}catch(h){P(h)}var c=We;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}H=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const h=()=>{};l.addEventListener("test",h,c),l.removeEventListener("test",h,c)}catch{}return a}();function be(a,c){if(Q.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(L){e:{try{D(c.nodeName);var V=!0;break e}catch{}V=!1}V||(c=null)}}else h=="mouseover"?c=a.fromElement:h=="mouseout"&&(c=a.toElement);this.relatedTarget=c,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:F[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&be.aa.h.call(this)}}A(be,Q);var F={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var J="closure_listenable_"+(1e6*Math.random()|0),le=0;function me(a,c,h,v,V){this.listener=a,this.proxy=null,this.src=c,this.type=h,this.capture=!!v,this.ha=V,this.key=++le,this.da=this.fa=!1}function te(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ct(a){this.src=a,this.g={},this.h=0}Ct.prototype.add=function(a,c,h,v,V){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var W=Ht(a,c,v,V);return-1<W?(c=a[W],h||(c.fa=!1)):(c=new me(c,this.src,O,!!v,V),c.fa=h,a.push(c)),c};function qe(a,c){var h=c.type;if(h in a.g){var v=a.g[h],V=Array.prototype.indexOf.call(v,c,void 0),O;(O=0<=V)&&Array.prototype.splice.call(v,V,1),O&&(te(c),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Ht(a,c,h,v){for(var V=0;V<a.length;++V){var O=a[V];if(!O.da&&O.listener==c&&O.capture==!!h&&O.ha==v)return V}return-1}var At="closure_lm_"+(1e6*Math.random()|0),Zt={};function dn(a,c,h,v,V){if(Array.isArray(c)){for(var O=0;O<c.length;O++)dn(a,c[O],h,v,V);return null}return h=ue(h),a&&a[J]?a.K(c,h,d(v)?!!v.capture:!1,V):vs(a,c,h,!1,v,V)}function vs(a,c,h,v,V,O){if(!c)throw Error("Invalid event type");var W=d(V)?!!V.capture:!!V,Ae=Fn(a);if(Ae||(a[At]=Ae=new Ct(a)),h=Ae.add(c,h,v,W,O),h.proxy)return h;if(v=ar(),h.proxy=v,v.src=a,v.listener=h,a.addEventListener)oe||(V=W),V===void 0&&(V=!1),a.addEventListener(c.toString(),v,V);else if(a.attachEvent)a.attachEvent(Sn(c.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return h}function ar(){function a(h){return c.call(a.src,a.listener,h)}const c=jn;return a}function Mn(a,c,h,v,V){if(Array.isArray(c))for(var O=0;O<c.length;O++)Mn(a,c[O],h,v,V);else v=d(v)?!!v.capture:!!v,h=ue(h),a&&a[J]?(a=a.i,c=String(c).toString(),c in a.g&&(O=a.g[c],h=Ht(O,h,v,V),-1<h&&(te(O[h]),Array.prototype.splice.call(O,h,1),O.length==0&&(delete a.g[c],a.h--)))):a&&(a=Fn(a))&&(c=a.g[c.toString()],a=-1,c&&(a=Ht(c,h,v,V)),(h=-1<a?c[a]:null)&&Rt(h))}function Rt(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[J])qe(c.i,a);else{var h=a.type,v=a.proxy;c.removeEventListener?c.removeEventListener(h,v,a.capture):c.detachEvent?c.detachEvent(Sn(h),v):c.addListener&&c.removeListener&&c.removeListener(v),(h=Fn(c))?(qe(h,a),h.h==0&&(h.src=null,c[At]=null)):te(a)}}}function Sn(a){return a in Zt?Zt[a]:Zt[a]="on"+a}function jn(a,c){if(a.da)a=!0;else{c=new be(c,this);var h=a.listener,v=a.ha||a.src;a.fa&&Rt(a),a=h.call(v,c)}return a}function Fn(a){return a=a[At],a instanceof Ct?a:null}var z="__closure_events_fn_"+(1e9*Math.random()>>>0);function ue(a){return typeof a=="function"?a:(a[z]||(a[z]=function(c){return a.handleEvent(c)}),a[z])}function ie(){q.call(this),this.i=new Ct(this),this.M=this,this.F=null}A(ie,q),ie.prototype[J]=!0,ie.prototype.removeEventListener=function(a,c,h,v){Mn(this,a,c,h,v)};function ae(a,c){var h,v=a.F;if(v)for(h=[];v;v=v.F)h.push(v);if(a=a.M,v=c.type||c,typeof c=="string")c=new Q(c,a);else if(c instanceof Q)c.target=c.target||a;else{var V=c;c=new Q(v,a),T(c,V)}if(V=!0,h)for(var O=h.length-1;0<=O;O--){var W=c.g=h[O];V=Wt(W,v,!0,c)&&V}if(W=c.g=a,V=Wt(W,v,!0,c)&&V,V=Wt(W,v,!1,c)&&V,h)for(O=0;O<h.length;O++)W=c.g=h[O],V=Wt(W,v,!1,c)&&V}ie.prototype.N=function(){if(ie.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var h=a.g[c],v=0;v<h.length;v++)te(h[v]);delete a.g[c],a.h--}}this.F=null},ie.prototype.K=function(a,c,h,v){return this.i.add(String(a),c,!1,h,v)},ie.prototype.L=function(a,c,h,v){return this.i.add(String(a),c,!0,h,v)};function Wt(a,c,h,v){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var V=!0,O=0;O<c.length;++O){var W=c[O];if(W&&!W.da&&W.capture==h){var Ae=W.listener,at=W.ha||W.src;W.fa&&qe(a.i,W),V=Ae.call(at,v)!==!1&&V}}return V&&!v.defaultPrevented}function hn(a,c,h){if(typeof a=="function")h&&(a=g(a,h));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function zn(a){a.g=hn(()=>{a.g=null,a.i&&(a.i=!1,zn(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class bn extends q{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:zn(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lr(a){q.call(this),this.h=a,this.g={}}A(lr,q);var ta=[];function na(a){j(a.g,function(c,h){this.g.hasOwnProperty(h)&&Rt(c)},a),a.g={}}lr.prototype.N=function(){lr.aa.N.call(this),na(this)},lr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ur=l.JSON.stringify,ra=l.JSON.parse,ku=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function _s(){}_s.prototype.h=null;function sa(a){return a.h||(a.h=a.i())}function ia(){}var Br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ge(){Q.call(this,"d")}A(Ge,Q);function it(){Q.call(this,"c")}A(it,Q);var Be={},fn=null;function ot(){return fn=fn||new ie}Be.La="serverreachability";function gt(a){Q.call(this,Be.La,a)}A(gt,Q);function yt(a){const c=ot();ae(c,new gt(c))}Be.STAT_EVENT="statevent";function Un(a,c){Q.call(this,Be.STAT_EVENT,a),this.stat=c}A(Un,Q);function ve(a){const c=ot();ae(c,new Un(c,a))}Be.Ma="timingevent";function pn(a,c){Q.call(this,Be.Ma,a),this.size=c}A(pn,Q);function vt(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function Nt(){this.g=!0}Nt.prototype.xa=function(){this.g=!1};function $r(a,c,h,v,V,O){a.info(function(){if(a.g)if(O)for(var W="",Ae=O.split("&"),at=0;at<Ae.length;at++){var Ee=Ae[at].split("=");if(1<Ee.length){var _t=Ee[0];Ee=Ee[1];var wt=_t.split("_");W=2<=wt.length&&wt[1]=="type"?W+(_t+"="+Ee+"&"):W+(_t+"=redacted&")}}else W=null;else W=O;return"XMLHTTP REQ ("+v+") [attempt "+V+"]: "+c+`
`+h+`
`+W})}function Hr(a,c,h,v,V,O,W){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+V+"]: "+c+`
`+h+`
`+O+" "+W})}function Pt(a,c,h,v){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+Ei(a,h)+(v?" "+v:"")})}function Wr(a,c){a.info(function(){return"TIMEOUT: "+c})}Nt.prototype.info=function(){};function Ei(a,c){if(!a.g)return c;if(!c)return null;try{var h=JSON.parse(c);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var v=h[a];if(!(2>v.length)){var V=v[1];if(Array.isArray(V)&&!(1>V.length)){var O=V[0];if(O!="noop"&&O!="stop"&&O!="close")for(var W=1;W<V.length;W++)V[W]=""}}}}return Ur(h)}catch{return c}}var oa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cu;function aa(){}A(aa,_s),aa.prototype.g=function(){return new XMLHttpRequest},aa.prototype.i=function(){return{}},Cu=new aa;function ur(a,c,h,v){this.j=a,this.i=c,this.l=h,this.R=v||1,this.U=new lr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mf}function Mf(){this.i=null,this.g="",this.h=!1}var jf={},Au={};function Ru(a,c,h){a.L=1,a.v=da(Bn(c)),a.m=h,a.P=!0,Ff(a,null)}function Ff(a,c){a.F=Date.now(),la(a),a.A=Bn(a.v);var h=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Zf(h.i,"t",v),a.C=0,h=a.j.J,a.h=new Mf,a.g=yp(a.j,h?c:null,!a.m),0<a.O&&(a.M=new bn(g(a.Y,a,a.g),a.O)),c=a.U,h=a.g,v=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(ta[0]=V.toString()),V=ta);for(var O=0;O<V.length;O++){var W=dn(h,V[O],v||c.handleEvent,!1,c.h||c);if(!W)break;c.g[W.key]=W}c=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),yt(),$r(a.i,a.u,a.A,a.l,a.R,a.m)}ur.prototype.ca=function(a){a=a.target;const c=this.M;c&&$n(a)==3?c.j():this.Y(a)},ur.prototype.Y=function(a){try{if(a==this.g)e:{const wt=$n(this.g);var c=this.g.Ba();const Es=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||op(this.g)))){this.J||wt!=4||c==7||(c==8||0>=Es?yt(3):yt(2)),Nu(this);var h=this.g.Z();this.X=h;t:if(zf(this)){var v=op(this.g);a="";var V=v.length,O=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),Ii(this);var W="";break t}this.h.i=new l.TextDecoder}for(c=0;c<V;c++)this.h.h=!0,a+=this.h.i.decode(v[c],{stream:!(O&&c==V-1)});v.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=h==200,Hr(this.i,this.u,this.A,this.l,this.R,wt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,at=this.g;if((Ae=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Ae)){var Ee=Ae;break t}}Ee=null}if(h=Ee)Pt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pu(this,h);else{this.o=!1,this.s=3,ve(12),qr(this),Ii(this);break e}}if(this.P){h=!0;let mn;for(;!this.J&&this.C<W.length;)if(mn=cw(this,W),mn==Au){wt==4&&(this.s=4,ve(14),h=!1),Pt(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==jf){this.s=4,ve(15),Pt(this.i,this.l,W,"[Invalid Chunk]"),h=!1;break}else Pt(this.i,this.l,mn,null),Pu(this,mn);if(zf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||W.length!=0||this.h.h||(this.s=1,ve(16),h=!1),this.o=this.o&&h,!h)Pt(this.i,this.l,W,"[Invalid Chunked Response]"),qr(this),Ii(this);else if(0<W.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),ju(_t),_t.M=!0,ve(11))}}else Pt(this.i,this.l,W,null),Pu(this,W);wt==4&&qr(this),this.o&&!this.J&&(wt==4?fp(this.j,this):(this.o=!1,la(this)))}else kw(this.g),h==400&&0<W.indexOf("Unknown SID")?(this.s=3,ve(12)):(this.s=0,ve(13)),qr(this),Ii(this)}}}catch{}finally{}};function zf(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function cw(a,c){var h=a.C,v=c.indexOf(`
`,h);return v==-1?Au:(h=Number(c.substring(h,v)),isNaN(h)?jf:(v+=1,v+h>c.length?Au:(c=c.slice(v,v+h),a.C=v+h,c)))}ur.prototype.cancel=function(){this.J=!0,qr(this)};function la(a){a.S=Date.now()+a.I,Uf(a,a.I)}function Uf(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=vt(g(a.ba,a),c)}function Nu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}ur.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Wr(this.i,this.A),this.L!=2&&(yt(),ve(17)),qr(this),this.s=2,Ii(this)):Uf(this,this.S-a)};function Ii(a){a.j.G==0||a.J||fp(a.j,a)}function qr(a){Nu(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,na(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function Pu(a,c){try{var h=a.j;if(h.G!=0&&(h.g==a||Du(h.h,a))){if(!a.K&&Du(h.h,a)&&h.G==3){try{var v=h.Da.g.parse(c)}catch{v=null}if(Array.isArray(v)&&v.length==3){var V=v;if(V[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)ya(h),ma(h);else break e;Mu(h),ve(18)}}else h.za=V[1],0<h.za-h.T&&37500>V[2]&&h.F&&h.v==0&&!h.C&&(h.C=vt(g(h.Za,h),6e3));if(1>=Hf(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Kr(h,11)}else if((a.K||h.g==a)&&ya(h),!_(c))for(V=h.Da.g.parse(c),c=0;c<V.length;c++){let Ee=V[c];if(h.T=Ee[0],Ee=Ee[1],h.G==2)if(Ee[0]=="c"){h.K=Ee[1],h.ia=Ee[2];const _t=Ee[3];_t!=null&&(h.la=_t,h.j.info("VER="+h.la));const wt=Ee[4];wt!=null&&(h.Aa=wt,h.j.info("SVER="+h.Aa));const Es=Ee[5];Es!=null&&typeof Es=="number"&&0<Es&&(v=1.5*Es,h.L=v,h.j.info("backChannelRequestTimeoutMs_="+v)),v=h;const mn=a.g;if(mn){const _a=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_a){var O=v.h;O.g||_a.indexOf("spdy")==-1&&_a.indexOf("quic")==-1&&_a.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Vu(O,O.h),O.h=null))}if(v.D){const Fu=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fu&&(v.ya=Fu,Ne(v.I,v.D,Fu))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),v=h;var W=a;if(v.qa=gp(v,v.J?v.ia:null,v.W),W.K){Wf(v.h,W);var Ae=W,at=v.L;at&&(Ae.I=at),Ae.B&&(Nu(Ae),la(Ae)),v.g=W}else dp(v);0<h.i.length&&ga(h)}else Ee[0]!="stop"&&Ee[0]!="close"||Kr(h,7);else h.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Kr(h,7):Lu(h):Ee[0]!="noop"&&h.l&&h.l.ta(Ee),h.v=0)}}yt(4)}catch{}}var dw=class{constructor(a,c){this.g=a,this.map=c}};function Bf(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $f(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Hf(a){return a.h?1:a.g?a.g.size:0}function Du(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Vu(a,c){a.g?a.g.add(c):a.h=c}function Wf(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}Bf.prototype.cancel=function(){if(this.i=qf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function qf(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const h of a.g.values())c=c.concat(h.D);return c}return C(a.i)}function hw(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],h=a.length,v=0;v<h;v++)c.push(a[v]);return c}c=[],h=0;for(v in a)c[h++]=a[v];return c}function fw(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var h=0;h<a;h++)c.push(h);return c}c=[],h=0;for(const v in a)c[h++]=v;return c}}}function Gf(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var h=fw(a),v=hw(a),V=v.length,O=0;O<V;O++)c.call(void 0,v[O],h&&h[O],a)}var Kf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pw(a,c){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var v=a[h].indexOf("="),V=null;if(0<=v){var O=a[h].substring(0,v);V=a[h].substring(v+1)}else O=a[h];c(O,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Gr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Gr){this.h=a.h,ua(this,a.j),this.o=a.o,this.g=a.g,ca(this,a.s),this.l=a.l;var c=a.i,h=new bi;h.i=c.i,c.g&&(h.g=new Map(c.g),h.h=c.h),Qf(this,h),this.m=a.m}else a&&(c=String(a).match(Kf))?(this.h=!1,ua(this,c[1]||"",!0),this.o=Ti(c[2]||""),this.g=Ti(c[3]||"",!0),ca(this,c[4]),this.l=Ti(c[5]||"",!0),Qf(this,c[6]||"",!0),this.m=Ti(c[7]||"")):(this.h=!1,this.i=new bi(null,this.h))}Gr.prototype.toString=function(){var a=[],c=this.j;c&&a.push(Si(c,Yf,!0),":");var h=this.g;return(h||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Si(c,Yf,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Si(h,h.charAt(0)=="/"?yw:gw,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Si(h,_w)),a.join("")};function Bn(a){return new Gr(a)}function ua(a,c,h){a.j=h?Ti(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function ca(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function Qf(a,c,h){c instanceof bi?(a.i=c,ww(a.i,a.h)):(h||(c=Si(c,vw)),a.i=new bi(c,a.h))}function Ne(a,c,h){a.i.set(c,h)}function da(a){return Ne(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ti(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Si(a,c,h){return typeof a=="string"?(a=encodeURI(a).replace(c,mw),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function mw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Yf=/[#\/\?@]/g,gw=/[#\?:]/g,yw=/[#\?]/g,vw=/[#\?@]/g,_w=/#/g;function bi(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function cr(a){a.g||(a.g=new Map,a.h=0,a.i&&pw(a.i,function(c,h){a.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}t=bi.prototype,t.add=function(a,c){cr(this),this.i=null,a=ws(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(c),this.h+=1,this};function Xf(a,c){cr(a),c=ws(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function Jf(a,c){return cr(a),c=ws(a,c),a.g.has(c)}t.forEach=function(a,c){cr(this),this.g.forEach(function(h,v){h.forEach(function(V){a.call(c,V,v,this)},this)},this)},t.na=function(){cr(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),h=[];for(let v=0;v<c.length;v++){const V=a[v];for(let O=0;O<V.length;O++)h.push(c[v])}return h},t.V=function(a){cr(this);let c=[];if(typeof a=="string")Jf(this,a)&&(c=c.concat(this.g.get(ws(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)c=c.concat(a[h])}return c},t.set=function(a,c){return cr(this),this.i=null,a=ws(this,a),Jf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function Zf(a,c,h){Xf(a,c),0<h.length&&(a.i=null,a.g.set(ws(a,c),C(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var h=0;h<c.length;h++){var v=c[h];const O=encodeURIComponent(String(v)),W=this.V(v);for(v=0;v<W.length;v++){var V=O;W[v]!==""&&(V+="="+encodeURIComponent(String(W[v]))),a.push(V)}}return this.i=a.join("&")};function ws(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function ww(a,c){c&&!a.j&&(cr(a),a.i=null,a.g.forEach(function(h,v){var V=v.toLowerCase();v!=V&&(Xf(this,v),Zf(this,V,h))},a)),a.j=c}function xw(a,c){const h=new Nt;if(l.Image){const v=new Image;v.onload=E(dr,h,"TestLoadImage: loaded",!0,c,v),v.onerror=E(dr,h,"TestLoadImage: error",!1,c,v),v.onabort=E(dr,h,"TestLoadImage: abort",!1,c,v),v.ontimeout=E(dr,h,"TestLoadImage: timeout",!1,c,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else c(!1)}function Ew(a,c){const h=new Nt,v=new AbortController,V=setTimeout(()=>{v.abort(),dr(h,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:v.signal}).then(O=>{clearTimeout(V),O.ok?dr(h,"TestPingServer: ok",!0,c):dr(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(V),dr(h,"TestPingServer: error",!1,c)})}function dr(a,c,h,v,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),v(h)}catch{}}function Iw(){this.g=new ku}function Tw(a,c,h){const v=h||"";try{Gf(a,function(V,O){let W=V;d(V)&&(W=Ur(V)),c.push(v+O+"="+encodeURIComponent(W))})}catch(V){throw c.push(v+"type="+encodeURIComponent("_badmap")),V}}function ha(a){this.l=a.Ub||null,this.j=a.eb||!1}A(ha,_s),ha.prototype.g=function(){return new fa(this.l,this.j)},ha.prototype.i=function(a){return function(){return a}}({});function fa(a,c){ie.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(fa,ie),t=fa.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,Ci(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ki(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ep(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function ep(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?ki(this):Ci(this),this.readyState==3&&ep(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ki(this))},t.Qa=function(a){this.g&&(this.response=a,ki(this))},t.ga=function(){this.g&&ki(this)};function ki(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ci(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=c.next();return a.join(`\r
`)};function Ci(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function tp(a){let c="";return j(a,function(h,v){c+=v,c+=":",c+=h,c+=`\r
`}),c}function Ou(a,c,h){e:{for(v in h){var v=!1;break e}v=!0}v||(h=tp(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Ne(a,c,h))}function Fe(a){ie.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Fe,ie);var Sw=/^https?$/i,bw=["POST","PUT"];t=Fe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,h,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cu.g(),this.v=this.o?sa(this.o):sa(Cu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(O){np(this,O);return}if(a=h||"",h=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var V in v)h.set(V,v[V]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const O of v.keys())h.set(O,v.get(O));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(h.keys()).find(O=>O.toLowerCase()=="content-type"),V=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(bw,c,void 0))||v||V||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,W]of h)this.g.setRequestHeader(O,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ip(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){np(this,O)}};function np(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,rp(a),pa(a)}function rp(a){a.A||(a.A=!0,ae(a,"complete"),ae(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ae(this,"complete"),ae(this,"abort"),pa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pa(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sp(this):this.bb())},t.bb=function(){sp(this)};function sp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||$n(a)!=4||a.Z()!=2)){if(a.u&&$n(a)==4)hn(a.Ea,0,a);else if(ae(a,"readystatechange"),$n(a)==4){a.h=!1;try{const W=a.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var h;if(!(h=c)){var v;if(v=W===0){var V=String(a.D).match(Kf)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),v=!Sw.test(V?V.toLowerCase():"")}h=v}if(h)ae(a,"complete"),ae(a,"success");else{a.m=6;try{var O=2<$n(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",rp(a)}}finally{pa(a)}}}}function pa(a,c){if(a.g){ip(a);const h=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||ae(a,"ready");try{h.onreadystatechange=v}catch{}}}function ip(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function $n(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),ra(c)}};function op(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function kw(a){const c={};a=(a.g&&2<=$n(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(_(a[v]))continue;var h=k(a[v]);const V=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const O=c[V]||[];c[V]=O,O.push(h)}w(c,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ai(a,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||c}function ap(a){this.Aa=0,this.i=[],this.j=new Nt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ai("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ai("baseRetryDelayMs",5e3,a),this.cb=Ai("retryDelaySeedMs",1e4,a),this.Wa=Ai("forwardChannelMaxRetries",2,a),this.wa=Ai("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Bf(a&&a.concurrentRequestLimit),this.Da=new Iw,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ap.prototype,t.la=8,t.G=1,t.connect=function(a,c,h,v){ve(0),this.W=a,this.H=c||{},h&&v!==void 0&&(this.H.OSID=h,this.H.OAID=v),this.F=this.X,this.I=gp(this,null,this.W),ga(this)};function Lu(a){if(lp(a),a.G==3){var c=a.U++,h=Bn(a.I);if(Ne(h,"SID",a.K),Ne(h,"RID",c),Ne(h,"TYPE","terminate"),Ri(a,h),c=new ur(a,a.j,c),c.L=2,c.v=da(Bn(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=c.v,h=!0),h||(c.g=yp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),la(c)}mp(a)}function ma(a){a.g&&(ju(a),a.g.cancel(),a.g=null)}function lp(a){ma(a),a.u&&(l.clearTimeout(a.u),a.u=null),ya(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function ga(a){if(!$f(a.h)&&!a.s){a.s=!0;var c=a.Ga;xe||M(),H||(xe(),H=!0),G.add(c,a),a.B=0}}function Cw(a,c){return Hf(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=vt(g(a.Ga,a,c),pp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new ur(this,this.j,a);let O=this.o;if(this.S&&(O?(O=y(O),T(O,this.S)):O=this.S),this.m!==null||this.O||(V.H=O,O=null),this.P)e:{for(var c=0,h=0;h<this.i.length;h++){t:{var v=this.i[h];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(c+=v,4096<c){c=h;break e}if(c===4096||h===this.i.length-1){c=h+1;break e}}c=1e3}else c=1e3;c=cp(this,V,c),h=Bn(this.I),Ne(h,"RID",a),Ne(h,"CVER",22),this.D&&Ne(h,"X-HTTP-Session-Id",this.D),Ri(this,h),O&&(this.O?c="headers="+encodeURIComponent(String(tp(O)))+"&"+c:this.m&&Ou(h,this.m,O)),Vu(this.h,V),this.Ua&&Ne(h,"TYPE","init"),this.P?(Ne(h,"$req",c),Ne(h,"SID","null"),V.T=!0,Ru(V,h,null)):Ru(V,h,c),this.G=2}}else this.G==3&&(a?up(this,a):this.i.length==0||$f(this.h)||up(this))};function up(a,c){var h;c?h=c.l:h=a.U++;const v=Bn(a.I);Ne(v,"SID",a.K),Ne(v,"RID",h),Ne(v,"AID",a.T),Ri(a,v),a.m&&a.o&&Ou(v,a.m,a.o),h=new ur(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),c&&(a.i=c.D.concat(a.i)),c=cp(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Vu(a.h,h),Ru(h,v,c)}function Ri(a,c){a.H&&j(a.H,function(h,v){Ne(c,v,h)}),a.l&&Gf({},function(h,v){Ne(c,v,h)})}function cp(a,c,h){h=Math.min(a.i.length,h);var v=a.l?g(a.l.Na,a.l,a):null;e:{var V=a.i;let O=-1;for(;;){const W=["count="+h];O==-1?0<h?(O=V[0].g,W.push("ofs="+O)):O=0:W.push("ofs="+O);let Ae=!0;for(let at=0;at<h;at++){let Ee=V[at].g;const _t=V[at].map;if(Ee-=O,0>Ee)O=Math.max(0,V[at].g-100),Ae=!1;else try{Tw(_t,W,"req"+Ee+"_")}catch{v&&v(_t)}}if(Ae){v=W.join("&");break e}}}return a=a.i.splice(0,h),c.D=a,v}function dp(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;xe||M(),H||(xe(),H=!0),G.add(c,a),a.v=0}}function Mu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=vt(g(a.Fa,a),pp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,hp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=vt(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ve(10),ma(this),hp(this))};function ju(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function hp(a){a.g=new ur(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=Bn(a.qa);Ne(c,"RID","rpc"),Ne(c,"SID",a.K),Ne(c,"AID",a.T),Ne(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ne(c,"TO",a.ja),Ne(c,"TYPE","xmlhttp"),Ri(a,c),a.m&&a.o&&Ou(c,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=da(Bn(c)),h.m=null,h.P=!0,Ff(h,a)}t.Za=function(){this.C!=null&&(this.C=null,ma(this),Mu(this),ve(19))};function ya(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function fp(a,c){var h=null;if(a.g==c){ya(a),ju(a),a.g=null;var v=2}else if(Du(a.h,c))h=c.D,Wf(a.h,c),v=1;else return;if(a.G!=0){if(c.o)if(v==1){h=c.m?c.m.length:0,c=Date.now()-c.F;var V=a.B;v=ot(),ae(v,new pn(v,h)),ga(a)}else dp(a);else if(V=c.s,V==3||V==0&&0<c.X||!(v==1&&Cw(a,c)||v==2&&Mu(a)))switch(h&&0<h.length&&(c=a.h,c.i=c.i.concat(h)),V){case 1:Kr(a,5);break;case 4:Kr(a,10);break;case 3:Kr(a,6);break;default:Kr(a,2)}}}function pp(a,c){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*c}function Kr(a,c){if(a.j.info("Error code "+c),c==2){var h=g(a.fb,a),v=a.Xa;const V=!v;v=new Gr(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ua(v,"https"),da(v),V?xw(v.toString(),h):Ew(v.toString(),h)}else ve(2);a.G=0,a.l&&a.l.sa(c),mp(a),lp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ve(2)):(this.j.info("Failed to ping google.com"),ve(1))};function mp(a){if(a.G=0,a.ka=[],a.l){const c=qf(a.h);(c.length!=0||a.i.length!=0)&&(N(a.ka,c),N(a.ka,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.ra()}}function gp(a,c,h){var v=h instanceof Gr?Bn(h):new Gr(h);if(v.g!="")c&&(v.g=c+"."+v.g),ca(v,v.s);else{var V=l.location;v=V.protocol,c=c?c+"."+V.hostname:V.hostname,V=+V.port;var O=new Gr(null);v&&ua(O,v),c&&(O.g=c),V&&ca(O,V),h&&(O.l=h),v=O}return h=a.D,c=a.ya,h&&c&&Ne(v,h,c),Ne(v,"VER",a.la),Ri(a,v),v}function yp(a,c,h){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new Fe(new ha({eb:h})):new Fe(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vp(){}t=vp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function va(){}va.prototype.g=function(a,c){return new qt(a,c)};function qt(a,c){ie.call(this),this.g=new ap(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!_(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!_(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new xs(this)}A(qt,ie),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Lu(this.g)},qt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Ur(a),a=h);c.i.push(new dw(c.Ya++,a)),c.G==3&&ga(c)},qt.prototype.N=function(){this.g.l=null,delete this.j,Lu(this.g),delete this.g,qt.aa.N.call(this)};function _p(a){Ge.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const h in c){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}A(_p,Ge);function wp(){it.call(this),this.status=1}A(wp,it);function xs(a){this.g=a}A(xs,vp),xs.prototype.ua=function(){ae(this.g,"a")},xs.prototype.ta=function(a){ae(this.g,new _p(a))},xs.prototype.sa=function(a){ae(this.g,new wp)},xs.prototype.ra=function(){ae(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,Yv=function(){return new va},Qv=function(){return ot()},Kv=Be,Nd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oa.NO_ERROR=0,oa.TIMEOUT=8,oa.HTTP_ERROR=6,rl=oa,Lf.COMPLETE="complete",Gv=Lf,ia.EventType=Br,Br.OPEN="a",Br.CLOSE="b",Br.ERROR="c",Br.MESSAGE="d",ie.prototype.listen=ie.prototype.K,Hi=ia,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,qv=Fe}).apply(typeof Fa<"u"?Fa:typeof self<"u"?self:typeof window<"u"?window:{});const ag="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=new Jh("@firebase/firestore");function Fi(){return cs.logLevel}function X(t,...e){if(cs.logLevel<=ye.DEBUG){const n=e.map(sf);cs.debug(`Firestore (${vi}): ${t}`,...n)}}function sr(t,...e){if(cs.logLevel<=ye.ERROR){const n=e.map(sf);cs.error(`Firestore (${vi}): ${t}`,...n)}}function ii(t,...e){if(cs.logLevel<=ye.WARN){const n=e.map(sf);cs.warn(`Firestore (${vi}): ${t}`,...n)}}function sf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${vi}) INTERNAL ASSERTION FAILED: `+t;throw sr(e),new Error(e)}function Ce(t,e){t||ne()}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends ms{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class db{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class hb{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new Xv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new Tt(e)}}class fb{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pb{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new fb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gb{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ce(this.o===void 0);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new mb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=yb(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Te(t,e){return t<e?-1:t>e?1:0}function oi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new et(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new re(e)}static min(){return new re(new et(0,0))}static max(){return new re(new et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Do.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Do?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ue extends Do{construct(e,n,r){return new Ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const vb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends Do{construct(e,n,r){return new ct(e,n,r)}static isValidIdentifier(e){return vb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ct(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Z(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Z(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Z(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ct(n)}static emptyPath(){return new ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Ue.fromString(e))}static fromName(e){return new ee(Ue.fromString(e).popFirst(5))}static empty(){return new ee(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Ue(e.slice()))}}function _b(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=re.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new Or(s,ee.empty(),e)}function wb(t){return new Or(t.readTime,t.key,-1)}class Or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Or(re.min(),ee.empty(),-1)}static max(){return new Or(re.max(),ee.empty(),-1)}}function xb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ib{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==Eb)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Tb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}of.oe=-1;function yu(t){return t==null}function Fl(t){return t===0&&1/t==-1/0}function Sb(t){return typeof t=="number"&&Number.isInteger(t)&&!Fl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _i(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){this.comparator=e,this.root=n||ut.EMPTY}insert(e,n){return new je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new za(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new za(this.root,e,this.comparator,!1)}getReverseIterator(){return new za(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new za(this.root,e,this.comparator,!0)}}class za{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ut.RED,this.left=s??ut.EMPTY,this.right=i??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ut(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ug(this.data.getIterator())}getIteratorFrom(e){return new ug(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ht(this.comparator);return n.data=e,n}}class ug{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new wn([])}unionWith(e){let n=new ht(ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new e_("Invalid base64 string: "+i):i}}(e);return new pt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const bb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(Ce(!!t),typeof t=="string"){let e=0;const n=bb.exec(t);if(Ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ds(t){return typeof t=="string"?pt.fromBase64String(t):pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function lf(t){const e=t.mapValue.fields.__previous_value__;return af(e)?lf(e):e}function Vo(t){const e=Lr(t.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Oo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Oo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua={mapValue:{}};function hs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?af(t)?4:Ab(t)?9007199254740991:Cb(t)?10:11:ne()}function On(t,e){if(t===e)return!0;const n=hs(t);if(n!==hs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vo(t).isEqual(Vo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Lr(s.timestampValue),l=Lr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ds(s.bytesValue).isEqual(ds(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return $e(s.geoPointValue.latitude)===$e(i.geoPointValue.latitude)&&$e(s.geoPointValue.longitude)===$e(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return $e(s.integerValue)===$e(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=$e(s.doubleValue),l=$e(i.doubleValue);return o===l?Fl(o)===Fl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return oi(t.arrayValue.values||[],e.arrayValue.values||[],On);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(lg(o)!==lg(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!On(o[u],l[u])))return!1;return!0}(t,e);default:return ne()}}function Lo(t,e){return(t.values||[]).find(n=>On(n,e))!==void 0}function ai(t,e){if(t===e)return 0;const n=hs(t),r=hs(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=$e(i.integerValue||i.doubleValue),u=$e(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return cg(t.timestampValue,e.timestampValue);case 4:return cg(Vo(t),Vo(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ds(i),u=ds(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=Te(l[d],u[d]);if(f!==0)return f}return Te(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Te($e(i.latitude),$e(o.latitude));return l!==0?l:Te($e(i.longitude),$e(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return dg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,f;const m=i.fields||{},g=o.fields||{},E=(l=m.value)===null||l===void 0?void 0:l.arrayValue,A=(u=g.value)===null||u===void 0?void 0:u.arrayValue,C=Te(((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0,((f=A==null?void 0:A.values)===null||f===void 0?void 0:f.length)||0);return C!==0?C:dg(E,A)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ua.mapValue&&o===Ua.mapValue)return 0;if(i===Ua.mapValue)return 1;if(o===Ua.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=Te(u[m],f[m]);if(g!==0)return g;const E=ai(l[u[m]],d[f[m]]);if(E!==0)return E}return Te(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ne()}}function cg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=Lr(t),r=Lr(e),s=Te(n.seconds,r.seconds);return s!==0?s:Te(n.nanos,r.nanos)}function dg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ai(n[s],r[s]);if(i)return i}return Te(n.length,r.length)}function li(t){return Pd(t)}function Pd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ds(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Pd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Pd(n.fields[o])}`;return s+"}"}(t.mapValue):ne()}function Dd(t){return!!t&&"integerValue"in t}function uf(t){return!!t&&"arrayValue"in t}function hg(t){return!!t&&"nullValue"in t}function fg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sl(t){return!!t&&"mapValue"in t}function Cb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function io(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _i(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=io(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=io(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Ab(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=io(n)}setAll(e){let n=ct.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=io(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());sl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return On(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];sl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){_i(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new rn(io(this.value))}}function t_(t){const e=[];return _i(t.fields,(n,r)=>{const s=new ct([n]);if(sl(r)){const i=t_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new bt(e,0,re.min(),re.min(),re.min(),rn.empty(),0)}static newFoundDocument(e,n,r,s){return new bt(e,1,n,re.min(),r,s,0)}static newNoDocument(e,n){return new bt(e,2,n,re.min(),re.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,re.min(),re.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n){this.position=e,this.inclusive=n}}function pg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=ai(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function mg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!On(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n="asc"){this.field=e,this.dir=n}}function Rb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{}class Je extends n_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Pb(e,n,r):n==="array-contains"?new Ob(e,r):n==="in"?new Lb(e,r):n==="not-in"?new Mb(e,r):n==="array-contains-any"?new jb(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Db(e,r):new Vb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ai(n,this.value)):n!==null&&hs(this.value)===hs(n)&&this.matchesComparison(ai(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends n_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ln(e,n)}matches(e){return r_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function r_(t){return t.op==="and"}function s_(t){return Nb(t)&&r_(t)}function Nb(t){for(const e of t.filters)if(e instanceof Ln)return!1;return!0}function Vd(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+li(t.value);if(s_(t))return t.filters.map(e=>Vd(e)).join(",");{const e=t.filters.map(n=>Vd(n)).join(",");return`${t.op}(${e})`}}function i_(t,e){return t instanceof Je?function(r,s){return s instanceof Je&&r.op===s.op&&r.field.isEqual(s.field)&&On(r.value,s.value)}(t,e):t instanceof Ln?function(r,s){return s instanceof Ln&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&i_(o,s.filters[l]),!0):!1}(t,e):void ne()}function o_(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${li(n.value)}`}(t):t instanceof Ln?function(n){return n.op.toString()+" {"+n.getFilters().map(o_).join(" ,")+"}"}(t):"Filter"}class Pb extends Je{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class Db extends Je{constructor(e,n){super(e,"in",n),this.keys=a_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Vb extends Je{constructor(e,n){super(e,"not-in",n),this.keys=a_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function a_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class Ob extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return uf(n)&&Lo(n.arrayValue,this.value)}}class Lb extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lo(this.value.arrayValue,n)}}class Mb extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Lo(this.value.arrayValue,n)}}class jb extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!uf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function gg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Fb(t,e,n,r,s,i,o)}function cf(t){const e=se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Vd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),yu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>li(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>li(r)).join(",")),e.ue=n}return e.ue}function df(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Rb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!i_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mg(t.startAt,e.startAt)&&mg(t.endAt,e.endAt)}function Od(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zb(t,e,n,r,s,i,o,l){return new vu(t,e,n,r,s,i,o,l)}function hf(t){return new vu(t)}function yg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ub(t){return t.collectionGroup!==null}function oo(t){const e=se(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ht(ct.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ul(i,r))}),n.has(ct.keyField().canonicalString())||e.ce.push(new Ul(ct.keyField(),r))}return e.ce}function Pn(t){const e=se(t);return e.le||(e.le=Bb(e,oo(t))),e.le}function Bb(t,e){if(t.limitType==="F")return gg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ul(s.field,i)});const n=t.endAt?new zl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zl(t.startAt.position,t.startAt.inclusive):null;return gg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ld(t,e,n){return new vu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _u(t,e){return df(Pn(t),Pn(e))&&t.limitType===e.limitType}function l_(t){return`${cf(Pn(t))}|lt:${t.limitType}`}function Ts(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>o_(s)).join(", ")}]`),yu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>li(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>li(s)).join(",")),`Target(${r})`}(Pn(t))}; limitType=${t.limitType})`}function wu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of oo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=pg(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,oo(r),s)||r.endAt&&!function(o,l,u){const d=pg(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,oo(r),s))}(t,e)}function $b(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function u_(t){return(e,n)=>{let r=!1;for(const s of oo(t)){const i=Hb(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Hb(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?ai(u,d):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_i(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Zv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=new je(ee.comparator);function ir(){return Wb}const c_=new je(ee.comparator);function Wi(...t){let e=c_;for(const n of t)e=e.insert(n.key,n);return e}function d_(t){let e=c_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ts(){return ao()}function h_(){return ao()}function ao(){return new wi(t=>t.toString(),(t,e)=>t.isEqual(e))}const qb=new je(ee.comparator),Gb=new ht(ee.comparator);function fe(...t){let e=Gb;for(const n of t)e=e.add(n);return e}const Kb=new ht(Te);function Qb(){return Kb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fl(e)?"-0":e}}function f_(t){return{integerValue:""+t}}function Yb(t,e){return Sb(e)?f_(e):ff(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(){this._=void 0}}function Xb(t,e,n){return t instanceof Bl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&af(i)&&(i=lf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Mo?m_(t,e):t instanceof jo?g_(t,e):function(s,i){const o=p_(s,i),l=vg(o)+vg(s.Pe);return Dd(o)&&Dd(s.Pe)?f_(l):ff(s.serializer,l)}(t,e)}function Jb(t,e,n){return t instanceof Mo?m_(t,e):t instanceof jo?g_(t,e):n}function p_(t,e){return t instanceof $l?function(r){return Dd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Bl extends xu{}class Mo extends xu{constructor(e){super(),this.elements=e}}function m_(t,e){const n=y_(e);for(const r of t.elements)n.some(s=>On(s,r))||n.push(r);return{arrayValue:{values:n}}}class jo extends xu{constructor(e){super(),this.elements=e}}function g_(t,e){let n=y_(e);for(const r of t.elements)n=n.filter(s=>!On(s,r));return{arrayValue:{values:n}}}class $l extends xu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function vg(t){return $e(t.integerValue||t.doubleValue)}function y_(t){return uf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Zb(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Mo&&s instanceof Mo||r instanceof jo&&s instanceof jo?oi(r.elements,s.elements,On):r instanceof $l&&s instanceof $l?On(r.Pe,s.Pe):r instanceof Bl&&s instanceof Bl}(t.transform,e.transform)}class ek{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function il(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Eu{}function v_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new w_(t.key,Jn.none()):new Xo(t.key,t.data,Jn.none());{const n=t.data,r=rn.empty();let s=new ht(ct.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new gs(t.key,r,new wn(s.toArray()),Jn.none())}}function tk(t,e,n){t instanceof Xo?function(s,i,o){const l=s.value.clone(),u=wg(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof gs?function(s,i,o){if(!il(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=wg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(__(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function lo(t,e,n,r){return t instanceof Xo?function(i,o,l,u){if(!il(i.precondition,o))return l;const d=i.value.clone(),f=xg(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof gs?function(i,o,l,u){if(!il(i.precondition,o))return l;const d=xg(i.fieldTransforms,u,o),f=o.data;return f.setAll(__(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return il(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function nk(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=p_(r.transform,s||null);i!=null&&(n===null&&(n=rn.empty()),n.set(r.field,i))}return n||null}function _g(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&oi(r,s,(i,o)=>Zb(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xo extends Eu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class gs extends Eu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function __(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function wg(t,e,n){const r=new Map;Ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,Jb(o,l,n[s]))}return r}function xg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Xb(i,o,e))}return r}class w_ extends Eu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rk extends Eu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&tk(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=h_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=v_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&oi(this.mutations,e.mutations,(n,r)=>_g(n,r))&&oi(this.baseMutations,e.baseMutations,(n,r)=>_g(n,r))}}class pf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ce(e.mutations.length===r.length);let s=function(){return qb}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new pf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke,ge;function ak(t){switch(t){default:return ne();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function x_(t){if(t===void 0)return sr("GRPC error has no .code"),B.UNKNOWN;switch(t){case Ke.OK:return B.OK;case Ke.CANCELLED:return B.CANCELLED;case Ke.UNKNOWN:return B.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return B.INTERNAL;case Ke.UNAVAILABLE:return B.UNAVAILABLE;case Ke.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Ke.NOT_FOUND:return B.NOT_FOUND;case Ke.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Ke.ABORTED:return B.ABORTED;case Ke.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Ke.DATA_LOSS:return B.DATA_LOSS;default:return ne()}}(ge=Ke||(Ke={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=new ss([4294967295,4294967295],0);function Eg(t){const e=lk().encode(t),n=new Wv;return n.update(e),new Uint8Array(n.digest())}function Ig(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ss([n,r],0),new ss([s,i],0)]}class mf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qi(`Invalid padding: ${n}`);if(r<0)throw new qi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ss.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ss.fromNumber(r)));return s.compare(uk)===1&&(s=new ss([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Eg(e),[r,s]=Ig(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new mf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Eg(e),[r,s]=Ig(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Jo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Iu(re.min(),s,new je(Te),ir(),fe())}}class Jo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Jo(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class E_{constructor(e,n){this.targetId=e,this.me=n}}class I_{constructor(e,n,r=pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Tg{constructor(){this.fe=0,this.ge=bg(),this.pe=pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=fe(),n=fe(),r=fe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne()}}),new Jo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=bg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ck{constructor(e){this.Le=e,this.Be=new Map,this.ke=ir(),this.qe=Sg(),this.Qe=new je(Te)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Od(i))if(r===0){const o=new ee(i.path);this.Ue(n,o,bt.newNoDocument(o,re.min()))}else Ce(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=ds(r).toUint8Array()}catch(u){if(u instanceof e_)return ii("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new mf(o,s,i)}catch(u){return ii(u instanceof qi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Od(l.target)){const u=new ee(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,bt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=fe();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Iu(e,n,this.Qe,this.ke,r);return this.ke=ir(),this.qe=Sg(),this.Qe=new je(Te),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Tg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ht(Te),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Tg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Sg(){return new je(ee.comparator)}function bg(){return new je(ee.comparator)}const dk={asc:"ASCENDING",desc:"DESCENDING"},hk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fk={and:"AND",or:"OR"};class pk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Md(t,e){return t.useProto3Json||yu(e)?e:{value:e}}function Hl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function T_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mk(t,e){return Hl(t,e.toTimestamp())}function Dn(t){return Ce(!!t),re.fromTimestamp(function(n){const r=Lr(n);return new et(r.seconds,r.nanos)}(t))}function gf(t,e){return jd(t,e).canonicalString()}function jd(t,e){const n=function(s){return new Ue(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function S_(t){const e=Ue.fromString(t);return Ce(R_(e)),e}function Fd(t,e){return gf(t.databaseId,e.path)}function Ic(t,e){const n=S_(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(k_(n))}function b_(t,e){return gf(t.databaseId,e)}function gk(t){const e=S_(t);return e.length===4?Ue.emptyPath():k_(e)}function zd(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function k_(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function kg(t,e,n){return{name:Fd(t,e),fields:n.value.mapValue.fields}}function yk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(Ce(f===void 0||typeof f=="string"),pt.fromBase64String(f||"")):(Ce(f===void 0||f instanceof Buffer||f instanceof Uint8Array),pt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?B.UNKNOWN:x_(d.code);return new Z(f,d.message||"")}(o);n=new I_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ic(t,r.document.name),i=Dn(r.document.updateTime),o=r.document.createTime?Dn(r.document.createTime):re.min(),l=new rn({mapValue:{fields:r.document.fields}}),u=bt.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new ol(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ic(t,r.document),i=r.readTime?Dn(r.readTime):re.min(),o=bt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ol([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ic(t,r.document),i=r.removedTargetIds||[];n=new ol([],i,s,null)}else{if(!("filter"in e))return ne();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new ok(s,i),l=r.targetId;n=new E_(l,o)}}return n}function vk(t,e){let n;if(e instanceof Xo)n={update:kg(t,e.key,e.value)};else if(e instanceof w_)n={delete:Fd(t,e.key)};else if(e instanceof gs)n={update:kg(t,e.key,e.data),updateMask:kk(e.fieldMask)};else{if(!(e instanceof rk))return ne();n={verify:Fd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Bl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Mo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof jo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof $l)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:mk(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne()}(t,e.precondition)),n}function _k(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Dn(s.updateTime):Dn(i);return o.isEqual(re.min())&&(o=Dn(i)),new ek(o,s.transformResults||[])}(n,e))):[]}function wk(t,e){return{documents:[b_(t,e.path)]}}function xk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=b_(t,s);const i=function(d){if(d.length!==0)return A_(Ln.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Ss(g.field),direction:Tk(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Md(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function Ek(t){let e=gk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ce(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=C_(m);return g instanceof Ln&&s_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(A){return new Ul(bs(A.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,yu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,E=m.values||[];return new zl(E,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,E=m.values||[];return new zl(E,g)}(n.endAt)),zb(e,s,o,i,l,"F",u,d)}function Ik(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function C_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bs(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=bs(n.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bs(n.unaryFilter.field);return Je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bs(n.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return Je.create(bs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ln.create(n.compositeFilter.filters.map(r=>C_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function Tk(t){return dk[t]}function Sk(t){return hk[t]}function bk(t){return fk[t]}function Ss(t){return{fieldPath:t.canonicalString()}}function bs(t){return ct.fromServerFormat(t.fieldPath)}function A_(t){return t instanceof Je?function(n){if(n.op==="=="){if(fg(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NAN"}};if(hg(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fg(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NOT_NAN"}};if(hg(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ss(n.field),op:Sk(n.op),value:n.value}}}(t):t instanceof Ln?function(n){const r=n.getFilters().map(s=>A_(s));return r.length===1?r[0]:{compositeFilter:{op:bk(n.op),filters:r}}}(t):ne()}function kk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function R_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r,s,i=re.min(),o=re.min(),l=pt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.ct=e}}function Ak(t){const e=Ek({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ld(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.un=new Nk}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Or.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Or.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Nk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ht(Ue.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ht(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ui(0)}static kn(){return new ui(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.changes=new wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&lo(r.mutation,s,wn.empty(),et.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const s=ts();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Wi();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=ir();const o=ao(),l=function(){return ao()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof gs)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),lo(f.mutation,d,f.mutation.getFieldMask(),et.now())):o.set(d.key,wn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return l.set(d,new Dk(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ao();let s=new je((o,l)=>o-l),i=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||wn.empty();f=l.applyToLocalView(d,f),r.set(u,f);const m=(s.get(l.batchId)||fe()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,m=h_();f.forEach(g=>{if(!i.has(g)){const E=v_(n.get(g),r.get(g));E!==null&&m.set(g,E),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ub(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(ts());let l=-1,u=i;return o.next(d=>U.forEach(d,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,fe())).next(f=>({batchId:l,changes:d_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let s=Wi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Wi();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,u=>{const d=function(m,g){return new vu(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,bt.newInvalidDocument(f)))});let l=Wi();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&lo(f.mutation,d,wn.empty(),et.now()),wu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Dn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Ak(s.bundledQuery),readTime:Dn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.overlays=new je(ee.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ts();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=ts(),i=n.length+1,o=new ee(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new je((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=ts(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=ts(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return U.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ik(n,r));let i=this.Ir.get(n);i===void 0&&(i=fe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this.Tr=new ht(tt.Er),this.dr=new ht(tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new tt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new tt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ee(new Ue([])),r=new tt(n,e),s=new tt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ee(new Ue([])),r=new tt(n,e),s=new tt(n,e+1);let i=fe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new tt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ee.comparator(e.key,n.key)||Te(e.wr,n.wr)}static Ar(e,n){return Te(e.wr,n.wr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ht(tt.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sk(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new tt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tt(n,0),s=new tt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ht(Te);return n.forEach(s=>{const i=new tt(s,0),o=new tt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new tt(new ee(i),0);let l=new ht(Te);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new tt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new tt(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.Mr=e,this.docs=function(){return new je(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let r=ir();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():bt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ir();const o=n.path,l=new ee(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||xb(wb(f),r)<=0||(s.has(f.key)||wu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new zk(this)}getSize(e){return U.resolve(this.size)}}class zk extends Pk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e){this.persistence=e,this.Nr=new wi(n=>cf(n),df),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yf,this.targetCount=0,this.kr=ui.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ui(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new of(0),this.Kr=!1,this.Kr=!0,this.$r=new Mk,this.referenceDelegate=e(this),this.Ur=new Uk(this),this.indexManager=new Rk,this.remoteDocumentCache=function(s){return new Fk(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Ck(n),this.Gr=new Ok(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Lk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new jk(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new $k(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class $k extends Ib{constructor(e){super(),this.currentSequenceNumber=e}}class vf{constructor(e){this.persistence=e,this.Jr=new yf,this.Yr=null}static Zr(e){return new vf(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=ee.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=fe(),s=fe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new _f(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return VT()?8:Tb(NT())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Hk;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Fi()<=ye.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Ts(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Fi()<=ye.DEBUG&&X("QueryEngine","Query:",Ts(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Fi()<=ye.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Ts(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):U.resolve())}Yi(e,n){if(yg(n))return U.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ld(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=fe(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,Ld(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return yg(n)||s.isEqual(re.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(Fi()<=ye.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ts(n)),this.rs(e,o,n,_b(s,-1)).next(l=>l))})}ts(e,n){let r=new ht(u_(e));return n.forEach((s,i)=>{wu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Fi()<=ye.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Ts(n)),this.Ji.getDocumentsMatchingQuery(e,n,Or.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new je(Te),this._s=new wi(i=>cf(i),df),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Gk(t,e,n,r){return new qk(t,e,n,r)}async function N_(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=fe();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function Kk(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const m=d.batch,g=m.keys();let E=U.resolve();return g.forEach(A=>{E=E.next(()=>f.getEntry(u,A)).next(C=>{const N=d.docVersions.get(A);Ce(N!==null),C.version.compareTo(N)<0&&(m.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),f.addEntry(C)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=fe();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function P_(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Qk(t,e){const n=se(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,m)));let E=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(pt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),s=s.insert(m,E),function(C,N,I){return C.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(g,E,f)&&l.push(n.Ur.updateTargetData(i,E))});let u=ir(),d=fe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(Yk(i,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(re.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return U.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function Yk(t,e,n){let r=fe(),s=fe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ir();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):X("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function Xk(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Jk(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new wr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ud(t,e,n){const r=se(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Yo(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Cg(t,e,n){const r=se(t);let s=re.min(),i=fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=se(u),g=m._s.get(f);return g!==void 0?U.resolve(m.os.get(g)):m.Ur.getTargetData(d,f)}(r,o,Pn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:re.min(),n?i:fe())).next(l=>(Zk(r,$b(e),l),{documents:l,Ts:i})))}function Zk(t,e,n){let r=t.us.get(e)||re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Ag{constructor(){this.activeTargetIds=Qb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class e2{constructor(){this.so=new Ag,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ag,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba=null;function Tc(){return Ba===null?Ba=function(){return 268435456+Math.round(2147483648*Math.random())}():Ba++,"0x"+Ba.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class s2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Tc(),u=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(f=>(X("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw ii("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=n2[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Tc();return new Promise((o,l)=>{const u=new qv;u.setWithCredentials(!0),u.listenOnce(Gv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case rl.NO_ERROR:const f=u.getResponseJson();X(It,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case rl.TIMEOUT:X(It,`RPC '${e}' ${i} timed out`),l(new Z(B.DEADLINE_EXCEEDED,"Request time out"));break;case rl.HTTP_ERROR:const m=u.getStatus();if(X(It,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const E=g==null?void 0:g.error;if(E&&E.status&&E.message){const A=function(N){const I=N.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(I)>=0?I:B.UNKNOWN}(E.status);l(new Z(A,E.message))}else l(new Z(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Z(B.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{X(It,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);X(It,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Tc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Yv(),l=Qv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");X(It,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);let g=!1,E=!1;const A=new r2({Io:N=>{E?X(It,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(g||(X(It,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),X(It,`RPC '${e}' stream ${s} sending:`,N),m.send(N))},To:()=>m.close()}),C=(N,I,_)=>{N.listen(I,S=>{try{_(S)}catch(D){setTimeout(()=>{throw D},0)}})};return C(m,Hi.EventType.OPEN,()=>{E||(X(It,`RPC '${e}' stream ${s} transport opened.`),A.yo())}),C(m,Hi.EventType.CLOSE,()=>{E||(E=!0,X(It,`RPC '${e}' stream ${s} transport closed`),A.So())}),C(m,Hi.EventType.ERROR,N=>{E||(E=!0,ii(It,`RPC '${e}' stream ${s} transport errored:`,N),A.So(new Z(B.UNAVAILABLE,"The operation could not be completed")))}),C(m,Hi.EventType.MESSAGE,N=>{var I;if(!E){const _=N.data[0];Ce(!!_);const S=_,D=S.error||((I=S[0])===null||I===void 0?void 0:I.error);if(D){X(It,`RPC '${e}' stream ${s} received error:`,D);const L=D.status;let j=function(x){const T=Ke[x];if(T!==void 0)return x_(T)}(L),w=D.message;j===void 0&&(j=B.INTERNAL,w="Unknown error status: "+L+" with message "+D.message),E=!0,A.So(new Z(j,w)),m.close()}else X(It,`RPC '${e}' stream ${s} received:`,_),A.bo(_)}}),C(l,Kv.STAT_EVENT,N=>{N.stat===Nd.PROXY?X(It,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===Nd.NOPROXY&&X(It,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function Sc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t){return new pk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new D_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(sr(n.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Z(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i2 extends V_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=yk(this.serializer,e),r=function(i){if(!("targetChange"in i))return re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Dn(o.readTime):re.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=zd(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Od(u)?{documents:wk(i,u)}:{query:xk(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=T_(i,o.resumeToken);const d=Md(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(re.min())>0){l.readTime=Hl(i,o.snapshotVersion.toTimestamp());const d=Md(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=Ik(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=zd(this.serializer),n.removeTarget=e,this.a_(n)}}class o2 extends V_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=_k(e.writeResults,e.commitTime),r=Dn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=zd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>vk(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,jd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(B.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,jd(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class l2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(sr(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ys(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=se(u);d.L_.add(4),await Zo(d),d.q_.set("Unknown"),d.L_.delete(4),await Su(d)}(this))})}),this.q_=new l2(r,s)}}async function Su(t){if(ys(t))for(const e of t.B_)await e(!0)}async function Zo(t){for(const e of t.B_)await e(!1)}function O_(t,e){const n=se(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),If(n)?Ef(n):xi(n).r_()&&xf(n,e))}function wf(t,e){const n=se(t),r=xi(n);n.N_.delete(e),r.r_()&&L_(n,e),n.N_.size===0&&(r.r_()?r.o_():ys(n)&&n.q_.set("Unknown"))}function xf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xi(t).A_(e)}function L_(t,e){t.Q_.xe(e),xi(t).R_(e)}function Ef(t){t.Q_=new ck({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),xi(t).start(),t.q_.v_()}function If(t){return ys(t)&&!xi(t).n_()&&t.N_.size>0}function ys(t){return se(t).L_.size===0}function M_(t){t.Q_=void 0}async function c2(t){t.q_.set("Online")}async function d2(t){t.N_.forEach((e,n)=>{xf(t,e)})}async function h2(t,e){M_(t),If(t)?(t.q_.M_(e),Ef(t)):t.q_.set("Unknown")}async function f2(t,e,n){if(t.q_.set("Online"),e instanceof I_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wl(t,r)}else if(e instanceof ol?t.Q_.Ke(e):e instanceof E_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(re.min()))try{const r=await P_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(pt.EMPTY_BYTE_STRING,f.snapshotVersion)),L_(i,u);const m=new wr(f.target,u,d,f.sequenceNumber);xf(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await Wl(t,r)}}async function Wl(t,e,n){if(!Yo(e))throw e;t.L_.add(1),await Zo(t),t.q_.set("Offline"),n||(n=()=>P_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Su(t)})}function j_(t,e){return e().catch(n=>Wl(t,n,e))}async function bu(t){const e=se(t),n=Mr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;p2(e);)try{const s=await Xk(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,m2(e,s)}catch(s){await Wl(e,s)}F_(e)&&z_(e)}function p2(t){return ys(t)&&t.O_.length<10}function m2(t,e){t.O_.push(e);const n=Mr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function F_(t){return ys(t)&&!Mr(t).n_()&&t.O_.length>0}function z_(t){Mr(t).start()}async function g2(t){Mr(t).p_()}async function y2(t){const e=Mr(t);for(const n of t.O_)e.m_(n.mutations)}async function v2(t,e,n){const r=t.O_.shift(),s=pf.from(r,e,n);await j_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await bu(t)}async function _2(t,e){e&&Mr(t).V_&&await async function(r,s){if(function(o){return ak(o)&&o!==B.ABORTED}(s.code)){const i=r.O_.shift();Mr(r).s_(),await j_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await bu(r)}}(t,e),F_(t)&&z_(t)}async function Ng(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=ys(n);n.L_.add(3),await Zo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Su(n)}async function w2(t,e){const n=se(t);e?(n.L_.delete(2),await Su(n)):e||(n.L_.add(2),await Zo(n),n.q_.set("Unknown"))}function xi(t){return t.K_||(t.K_=function(n,r,s){const i=se(n);return i.w_(),new i2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:c2.bind(null,t),Ro:d2.bind(null,t),mo:h2.bind(null,t),d_:f2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),If(t)?Ef(t):t.q_.set("Unknown")):(await t.K_.stop(),M_(t))})),t.K_}function Mr(t){return t.U_||(t.U_=function(n,r,s){const i=se(n);return i.w_(),new o2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:g2.bind(null,t),mo:_2.bind(null,t),f_:y2.bind(null,t),g_:v2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await bu(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Tf(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sf(t,e){if(sr("AsyncQueue",`${e}: ${t}`),Yo(t))return new Z(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=Wi(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new Gs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Gs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Gs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(){this.W_=new je(ee.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ne():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ci{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ci(e,n,Gs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class E2{constructor(){this.queries=Dg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=se(n),i=s.queries;s.queries=Dg(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Z(B.ABORTED,"Firestore shutting down"))}}function Dg(){return new wi(t=>l_(t),_u)}async function I2(t,e){const n=se(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new x2,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Sf(o,`Initialization of query '${Ts(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&bf(n)}async function T2(t,e){const n=se(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function S2(t,e){const n=se(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&bf(n)}function b2(t,e,n){const r=se(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function bf(t){t.Y_.forEach(e=>{e.next()})}var Bd,Vg;(Vg=Bd||(Bd={})).ea="default",Vg.Cache="cache";class k2{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ci(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ci.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Bd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e){this.key=e}}class B_{constructor(e){this.key=e}}class C2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=fe(),this.mutatedKeys=fe(),this.Aa=u_(e),this.Ra=new Gs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Pg,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),E=wu(this.query,m)?m:null,A=!!g&&this.mutatedKeys.has(g.key),C=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let N=!1;g&&E?g.data.isEqual(E.data)?A!==C&&(r.track({type:3,doc:E}),N=!0):this.ga(g,E)||(r.track({type:2,doc:E}),N=!0,(u&&this.Aa(E,u)>0||d&&this.Aa(E,d)<0)&&(l=!0)):!g&&E?(r.track({type:0,doc:E}),N=!0):g&&!E&&(r.track({type:1,doc:g}),N=!0,(u||d)&&(l=!0)),N&&(E?(o=o.add(E),i=C?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,m)=>function(E,A){const C=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return C(E)-C(A)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new ci(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Pg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=fe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new B_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new U_(r))}),n}ba(e){this.Ta=e.Ts,this.da=fe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ci.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class A2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class R2{constructor(e){this.key=e,this.va=!1}}class N2{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new wi(l=>l_(l),_u),this.Ma=new Map,this.xa=new Set,this.Oa=new je(ee.comparator),this.Na=new Map,this.La=new yf,this.Ba={},this.ka=new Map,this.qa=ui.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function P2(t,e,n=!0){const r=K_(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await $_(r,e,n,!0),s}async function D2(t,e){const n=K_(t);await $_(n,e,!0,!1)}async function $_(t,e,n,r){const s=await Jk(t.localStore,Pn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await V2(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&O_(t.remoteStore,s),l}async function V2(t,e,n,r,s){t.Ka=(m,g,E)=>async function(C,N,I,_){let S=N.view.ma(I);S.ns&&(S=await Cg(C.localStore,N.query,!1).then(({documents:w})=>N.view.ma(w,S)));const D=_&&_.targetChanges.get(N.targetId),L=_&&_.targetMismatches.get(N.targetId)!=null,j=N.view.applyChanges(S,C.isPrimaryClient,D,L);return Lg(C,N.targetId,j.wa),j.snapshot}(t,m,g,E);const i=await Cg(t.localStore,e,!0),o=new C2(e,i.Ts),l=o.ma(i.documents),u=Jo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Lg(t,n,d.wa);const f=new A2(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function O2(t,e,n){const r=se(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!_u(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ud(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&wf(r.remoteStore,s.targetId),$d(r,s.targetId)}).catch(Qo)):($d(r,s.targetId),await Ud(r.localStore,s.targetId,!0))}async function L2(t,e){const n=se(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wf(n.remoteStore,r.targetId))}async function M2(t,e,n){const r=H2(t);try{const s=await function(o,l){const u=se(o),d=et.now(),f=l.reduce((E,A)=>E.add(A.key),fe());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let A=ir(),C=fe();return u.cs.getEntries(E,f).next(N=>{A=N,A.forEach((I,_)=>{_.isValidDocument()||(C=C.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,A)).next(N=>{m=N;const I=[];for(const _ of l){const S=nk(_,m.get(_.key).overlayedDocument);S!=null&&I.push(new gs(_.key,S,t_(S.value.mapValue),Jn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,d,I,l)}).next(N=>{g=N;const I=N.applyToLocalDocumentSet(m,C);return u.documentOverlayCache.saveOverlays(E,N.batchId,I)})}).then(()=>({batchId:g.batchId,changes:d_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new je(Te)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await ea(r,s.changes),await bu(r.remoteStore)}catch(s){const i=Sf(s,"Failed to persist write");n.reject(i)}}async function H_(t,e){const n=se(t);try{const r=await Qk(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ce(o.va):s.removedDocuments.size>0&&(Ce(o.va),o.va=!1))}),await ea(n,r,e)}catch(r){await Qo(r)}}function Og(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=se(o);u.onlineState=l;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.j_)g.Z_(l)&&(d=!0)}),d&&bf(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function j2(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new je(ee.comparator);o=o.insert(i,bt.newNoDocument(i,re.min()));const l=fe().add(i),u=new Iu(re.min(),new Map,new je(Te),o,l);await H_(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),kf(r)}else await Ud(r.localStore,e,!1).then(()=>$d(r,e,n)).catch(Qo)}async function F2(t,e){const n=se(t),r=e.batch.batchId;try{const s=await Kk(n.localStore,e);q_(n,r,null),W_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ea(n,s)}catch(s){await Qo(s)}}async function z2(t,e,n){const r=se(t);try{const s=await function(o,l){const u=se(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(Ce(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);q_(r,e,n),W_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ea(r,s)}catch(s){await Qo(s)}}function W_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function q_(t,e,n){const r=se(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function $d(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||G_(t,r)})}function G_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(wf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),kf(t))}function Lg(t,e,n){for(const r of n)r instanceof U_?(t.La.addReference(r.key,e),U2(t,r)):r instanceof B_?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||G_(t,r.key)):ne()}function U2(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),kf(t))}function kf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ee(Ue.fromString(e)),r=t.qa.next();t.Na.set(r,new R2(n)),t.Oa=t.Oa.insert(n,r),O_(t.remoteStore,new wr(Pn(hf(n.path)),r,"TargetPurposeLimboResolution",of.oe))}}async function ea(t,e,n){const r=se(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=_f.Wi(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=se(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(d,g=>U.forEach(g.$i,E=>f.persistence.referenceDelegate.addReference(m,g.targetId,E)).next(()=>U.forEach(g.Ui,E=>f.persistence.referenceDelegate.removeReference(m,g.targetId,E)))))}catch(m){if(!Yo(m))throw m;X("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const E=f.os.get(g),A=E.snapshotVersion,C=E.withLastLimboFreeSnapshotVersion(A);f.os=f.os.insert(g,C)}}}(r.localStore,i))}async function B2(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await N_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new Z(B.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ea(n,r.hs)}}function $2(t,e){const n=se(t),r=n.Na.get(e);if(r&&r.va)return fe().add(r.key);{let s=fe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function K_(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=H_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j2.bind(null,e),e.Ca.d_=S2.bind(null,e.eventManager),e.Ca.$a=b2.bind(null,e.eventManager),e}function H2(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=z2.bind(null,e),e}class ql{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Gk(this.persistence,new Wk,e.initialUser,this.serializer)}Ga(e){return new Bk(vf.Zr,this.serializer)}Wa(e){return new e2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ql.provider={build:()=>new ql};class Hd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Og(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=B2.bind(null,this.syncEngine),await w2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new E2}()}createDatastore(e){const n=Tu(e.databaseInfo.databaseId),r=function(i){return new s2(i)}(e.databaseInfo);return function(i,o,l,u){return new a2(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new u2(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Og(this.syncEngine,n,0),function(){return Rg.D()?new Rg:new t2}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,f){const m=new N2(s,i,o,l,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=se(s);X("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Zo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Hd.provider={build:()=>new Hd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Tt.UNAUTHENTICATED,this.clientId=Jv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{X("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Sf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bc(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await N_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Mg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await G2(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ng(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ng(e.remoteStore,s)),t._onlineComponents=e}async function G2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await bc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ii("Error using user provided cache. Falling back to memory cache: "+n),await bc(t,new ql)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await bc(t,new ql);return t._offlineComponents}async function Q_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await Mg(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await Mg(t,new Hd))),t._onlineComponents}function K2(t){return Q_(t).then(e=>e.syncEngine)}async function Q2(t){const e=await Q_(t),n=e.eventManager;return n.onListen=P2.bind(null,e.syncEngine),n.onUnlisten=O2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=D2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=L2.bind(null,e.syncEngine),n}function Y2(t,e,n={}){const r=new Rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new W2({next:g=>{f.Za(),o.enqueueAndForget(()=>T2(i,m));const E=g.docs.has(l);!E&&g.fromCache?d.reject(new Z(B.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&g.fromCache&&u&&u.source==="server"?d.reject(new Z(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new k2(hf(l.path),f,{includeMetadataChanges:!0,_a:!0});return I2(i,m)}(await Q2(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t,e,n){if(!n)throw new Z(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function J2(t,e,n,r){if(e===!0&&r===!0)throw new Z(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Fg(t){if(!ee.isDocumentKey(t))throw new Z(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function Fo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cf(t);throw new Z(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}J2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Y_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Af{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cb;switch(r.type){case"firstParty":return new pb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jg.get(n);r&&(X("ComponentProvider","Removing Datastore"),jg.delete(n),r.terminate())}(this),Promise.resolve()}}function Z2(t,e,n,r={}){var s;const i=(t=Fo(t,Af))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Tt.MOCK_USER;else{l=RT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Z(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Tt(d)}t._authCredentials=new db(new Xv(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rf(this.firestore,e,this._query)}}class ln{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}}class zo extends Rf{constructor(e,n,r){super(e,n,hf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new ee(e))}withConverter(e){return new zo(this.firestore,e,this._path)}}function Gl(t,e,...n){if(t=Ml(t),arguments.length===1&&(e=Jv.newId()),X2("doc","path",e),t instanceof Af){const r=Ue.fromString(e,...n);return Fg(r),new ln(t,null,new ee(r))}{if(!(t instanceof ln||t instanceof zo))throw new Z(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return Fg(r),new ln(t.firestore,t instanceof zo?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new D_(this,"async_queue_retry"),this.Vu=()=>{const r=Sc();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Sc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Sc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Rr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yo(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw sr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Tf.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Nf extends Af{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Ug,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ug(e),this._firestoreClient=void 0,await e}}}function eC(t,e){const n=typeof t=="object"?t:jv(),r=typeof t=="string"?t:"(default)",s=ef(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=CT("firestore");i&&Z2(s,...i)}return s}function X_(t){if(t._terminated)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tC(t),t._firestoreClient}function tC(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,f){return new kb(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Y_(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new q2(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new di(pt.fromBase64String(e))}catch(n){throw new Z(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new di(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=/^__.*__$/;class rC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new gs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xo(e,this.data,n,this.fieldTransforms)}}function Z_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class Of{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Of(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Kl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Z_(this.Cu)&&nC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class sC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tu(e)}Qu(e,n,r,s=!1){return new Of({Cu:e,methodName:n,qu:r,path:ct.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iC(t){const e=t._freezeSettings(),n=Tu(t._databaseId);return new sC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oC(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);rw("Data must be an object, but it was:",o,r);const l=tw(r,o);let u,d;if(i.merge)u=new wn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=aC(e,m,n);if(!o.contains(g))throw new Z(B.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);uC(f,g)||f.push(g)}u=new wn(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new rC(new rn(l),u,d)}function ew(t,e){if(nw(t=Ml(t)))return rw("Unsupported field value:",e,t),tw(t,e);if(t instanceof J_)return function(r,s){if(!Z_(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=ew(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ml(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Yb(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=et.fromDate(r);return{timestampValue:Hl(s.serializer,i)}}if(r instanceof et){const i=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hl(s.serializer,i)}}if(r instanceof Df)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof di)return{bytesValue:T_(s.serializer,r._byteString)};if(r instanceof ln){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:gf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Vf)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return ff(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Cf(r)}`)}(t,e)}function tw(t,e){const n={};return Zv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_i(t,(r,s)=>{const i=ew(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function nw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Df||t instanceof di||t instanceof ln||t instanceof J_||t instanceof Vf)}function rw(t,e,n){if(!nw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Cf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function aC(t,e,n){if((e=Ml(e))instanceof Pf)return e._internalPath;if(typeof e=="string")return sw(t,e);throw Kl("Field path arguments must be of type string or ",t,!1,void 0,n)}const lC=new RegExp("[~\\*/\\[\\]]");function sw(t,e,n){if(e.search(lC)>=0)throw Kl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pf(...e.split("."))._internalPath}catch{throw Kl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Z(B.INVALID_ARGUMENT,l+t+u)}function uC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ow("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cC extends iw{data(){return super.data()}}function ow(t,e){return typeof e=="string"?sw(t,e):e instanceof Pf?e._internalPath:e._delegate._internalPath}class dC{convertValue(e,n="none"){switch(hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _i(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>$e(o.doubleValue));return new Vf(i)}convertGeoPoint(e){return new Df($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vo(e));default:return null}}convertTimestamp(e){const n=Lr(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ue.fromString(e);Ce(R_(r));const s=new Oo(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||sr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class aw extends iw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ow("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class pC extends aw{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t){t=Fo(t,ln);const e=Fo(t.firestore,Nf);return Y2(X_(e),t._key).then(n=>yC(e,t,n))}class mC extends dC{constructor(e){super(),this.firestore=e}convertBytes(e){return new di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,n)}}function lw(t,e,n){t=Fo(t,ln);const r=Fo(t.firestore,Nf),s=hC(t.converter,e);return gC(r,[oC(iC(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Jn.none())])}function gC(t,e){return function(r,s){const i=new Rr;return r.asyncQueue.enqueueAndForget(async()=>M2(await K2(r),s,i)),i.promise}(X_(t),e)}function yC(t,e,n){const r=n.docs.get(e._key),s=new mC(t);return new aw(t,s,e._key,r,new fC(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){vi=s})(tf),si(new ti("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Nf(new hb(r.getProvider("auth-internal")),new gb(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Z(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oo(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Xn(ag,"4.7.3",e),Xn(ag,"4.7.3","esm2017")})();const vC={apiKey:"AIzaSyBAInv4O5MVcOE3kb8ztIM9U2Q1OOmnjJk",authDomain:"mission-ready-30e27.firebaseapp.com",projectId:"mission-ready-30e27",storageBucket:"mission-ready-30e27.firebasestorage.app",messagingSenderId:"421602206314",appId:"1:421602206314:web:6f24797d13a78609532013",measurementId:"G-QQ21XL2Y9H"},_C=Hv.initializeApp(vC),Ql=eC(_C),Bg={register:async(t,e)=>{try{const n=Gl(Ql,"user_accounts",t);if((await Wd(n)).exists())return{success:!1,error:""};const s=Math.random().toString(36).substring(2,15);return await lw(n,{password:e,userId:s,createdAt:new Date().toISOString()}),{success:!0,userId:s}}catch(n){return console.error("Register failed:",n),{success:!1,error:n.message}}},login:async(t,e)=>{try{const n=Gl(Ql,"user_accounts",t),r=await Wd(n);if(!r.exists())return{success:!1,error:""};const s=r.data();return s.password!==e?{success:!1,error:""}:{success:!0,userId:s.userId}}catch(n){return console.error("Login failed:",n),{success:!1,error:n.message}}}},$g={upload:async(t,e)=>{try{return await lw(Gl(Ql,"users",t),{lastUpdated:new Date().toISOString(),data:JSON.stringify(e)}),{success:!0}}catch(n){return console.error("Upload failed:",n),{success:!1,error:n}}},download:async t=>{try{const e=Gl(Ql,"users",t),n=await Wd(e);if(n.exists()){const r=n.data().data;return{success:!0,data:JSON.parse(r)}}else return{success:!1,error:"No data found"}}catch(e){return console.error("Download failed:",e),{success:!1,error:e}}}},wC=({onLogin:t})=>{const[e,n]=R.useState(!1),[r,s]=R.useState(""),[i,o]=R.useState(""),[l,u]=R.useState(""),[d,f]=R.useState(!1),m=async g=>{if(g.preventDefault(),u(""),f(!0),!r.trim()||!i.trim()){u(""),f(!1);return}try{if(e){const E=await Bg.register(r,i);if(E.success&&E.userId){localStorage.setItem("mission_ready_active_user_id",E.userId);const A=JSON.parse(localStorage.getItem("mission_ready_users")||"[]");A.some(C=>C.username===r)||localStorage.setItem("mission_ready_users",JSON.stringify([...A,{id:E.userId,username:r,password:i}])),t({id:E.userId,username:r})}else u(E.error||"")}else{const E=await Bg.login(r,i);if(E.success&&E.userId)localStorage.setItem("mission_ready_active_user_id",E.userId),t({id:E.userId,username:r});else{const C=JSON.parse(localStorage.getItem("mission_ready_users")||"[]").find(N=>N.username===r&&N.password===i);C?(console.log("Cloud login failed, using local credentials"),t({id:C.id,username:C.username})):u(E.error||"")}}}catch{u("")}finally{f(!1)}};return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900 p-4 transition-colors duration-200",children:p.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("div",{className:"bg-blue-600 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-blue-200 dark:shadow-none",children:p.jsx(Pm,{className:"text-white",size:32})}),p.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Mission Ready"}),p.jsxs("p",{className:"text-slate-500 dark:text-slate-400 flex items-center justify-center gap-1 mt-1",children:["",p.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-2 py-0.5 rounded-full flex items-center gap-1",children:[p.jsx(c1,{size:10})," Cloud Sync"]})]})]}),p.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg mb-6",children:[p.jsx("button",{onClick:()=>{n(!1),u("")},className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${e?"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200":"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm"}`,children:""}),p.jsx("button",{onClick:()=>{n(!0),u("")},className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${e?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:""})]}),p.jsxs("form",{onSubmit:m,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:""}),p.jsxs("div",{className:"relative",children:[p.jsx(b1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),p.jsx("input",{type:"text",value:r,onChange:g=>s(g.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-slate-800 outline-none transition-all text-slate-900 dark:text-white placeholder-slate-400",placeholder:""})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:""}),p.jsxs("div",{className:"relative",children:[p.jsx(Pm,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),p.jsx("input",{type:"password",value:i,onChange:g=>o(g.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-slate-800 outline-none transition-all text-slate-900 dark:text-white placeholder-slate-400",placeholder:""})]})]}),l&&p.jsxs("div",{className:"text-red-500 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg border border-red-100 dark:border-red-900/30 flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 dark:bg-red-400 rounded-full"}),l]}),p.jsx("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-500 text-white font-bold py-3 rounded-xl shadow-lg shadow-blue-200 dark:shadow-none active:scale-[0.98] transition-all flex items-center justify-center gap-2 mt-2 disabled:opacity-70 disabled:cursor-not-allowed",children:d?"...":e?"":""})]})]})})};function xC(){const[t,e]=R.useState(null),[n,r]=R.useState("DASHBOARD"),[s,i]=R.useState([]),[o,l]=R.useState([]),[u,d]=R.useState([]),[f,m]=R.useState([]),[g,E]=R.useState([]),[A,C]=R.useState(null),[N,I]=R.useState(!1),[_,S]=R.useState(!1),[D,L]=R.useState("");R.useEffect(()=>{localStorage.getItem("mission_ready_theme")==="dark"&&(S(!0),document.documentElement.classList.add("dark"))},[]);const j=()=>{const M=!_;S(M),M?(document.documentElement.classList.add("dark"),localStorage.setItem("mission_ready_theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("mission_ready_theme","light"))};R.useEffect(()=>{const M=localStorage.getItem("mission_ready_active_user_id"),Y=JSON.parse(localStorage.getItem("mission_ready_users")||"[]");if(M&&Y.length>0){const q=Y.find(Q=>Q.id===M);q&&y({id:q.id,username:q.username})}},[]);const w=M=>{const Y=localStorage.getItem(`mission_ready_categories_${M}`);E(Y?JSON.parse(Y):fc);const q=localStorage.getItem(`mission_ready_inventory_${M}`);let Q=[];q?(Q=JSON.parse(q),Q=Q.map(le=>{let me=le.category;return!me.startsWith("cat_")&&!fc.some(te=>te.id===me)&&(me="cat_tools"),{...le,category:me,folderId:le.folderId||ce,groupId:le.groupId||he}})):Q=r1,i(Q);const oe=localStorage.getItem(`mission_ready_trips_${M}`);let be=oe?JSON.parse(oe):[];be=be.map(le=>({...le,groups:le.groups||[{id:wd,name:""}],items:le.items.map(me=>({...me,category:!me.category.startsWith("cat_")&&!fc.some(te=>te.id===me.category)?"cat_tools":me.category,tripGroupId:me.tripGroupId||wd}))})),l(be);const F=localStorage.getItem(`mission_ready_folders_${M}`);d(F?JSON.parse(F):t1);const J=localStorage.getItem(`mission_ready_groups_${M}`);m(J?JSON.parse(J):n1)};R.useEffect(()=>{t&&localStorage.setItem(`mission_ready_inventory_${t.id}`,JSON.stringify(s))},[s,t]),R.useEffect(()=>{t&&localStorage.setItem(`mission_ready_trips_${t.id}`,JSON.stringify(o))},[o,t]),R.useEffect(()=>{t&&localStorage.setItem(`mission_ready_folders_${t.id}`,JSON.stringify(u))},[u,t]),R.useEffect(()=>{t&&localStorage.setItem(`mission_ready_groups_${t.id}`,JSON.stringify(f))},[f,t]),R.useEffect(()=>{t&&localStorage.setItem(`mission_ready_categories_${t.id}`,JSON.stringify(g))},[g,t]);const y=M=>{e(M),localStorage.setItem("mission_ready_active_user_id",M.id),w(M.id),r("DASHBOARD")},x=()=>{e(null),localStorage.removeItem("mission_ready_active_user_id"),i([]),l([]),d([]),m([]),E([])},T=M=>{if(!t)return;const Y={...M,userId:t.id};l(q=>q.find(oe=>oe.id===M.id)?q.map(oe=>oe.id===M.id?Y:oe):[Y,...q]),C(M.id),r("TRIP_RUN")},k=(M,Y)=>{if(M.stopPropagation(),!!t&&window.confirm(`${Y.name}`)){const q={...Y,id:Math.random().toString(36).substring(2,9),name:`${Y.name} (Copy)`,date:new Date().toISOString().split("T")[0],status:"planning",items:Y.items.map(Q=>({...Q,id:Math.random().toString(36).substring(2,9),checked:!1}))};l(Q=>[q,...Q])}},P=()=>{C(null),r("TRIP_EDIT")},b=M=>{C(M),r("TRIP_RUN")},Se=(M,Y)=>{M.stopPropagation(),window.confirm("")&&(l(q=>q.filter(Q=>Q.id!==Y)),A===Y&&(C(null),r("DASHBOARD")))},We=async()=>{if(!t)return;I(!0);const M={inventory:s,trips:o,folders:u,groups:f,categories:g};try{const Y=await $g.upload(t.id,M);Y.success?alert(" "):alert(" "+JSON.stringify(Y.error))}catch(Y){console.error(Y),alert(" ")}finally{I(!1)}},mt=async()=>{if(t&&window.confirm(` 

`)){I(!0);try{const M=await $g.download(t.id);if(M.success&&M.data){const{inventory:Y,trips:q,folders:Q,groups:oe,categories:be}=M.data;be&&E(be),Y&&i(Y),q&&l(q),Q&&d(Q),oe&&m(oe),alert(" ")}else alert(" ")}catch(M){console.error(M),alert(" ")}finally{I(!1)}}};if(!t)return p.jsx(wC,{onLogin:y});const xe=o.find(M=>M.id===A)||null,H=s.filter(M=>M.name.toLowerCase().includes(D.toLowerCase())),G=o.filter(M=>M.name.toLowerCase().includes(D.toLowerCase()));return p.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900 font-sans dark:bg-slate-950 dark:text-slate-100 transition-colors duration-200",children:[p.jsx("nav",{className:"bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-20 shadow-sm",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between",children:[p.jsxs("div",{onClick:()=>r("DASHBOARD"),className:"flex items-center gap-2 cursor-pointer",children:[p.jsx("div",{className:"bg-slate-900 dark:bg-slate-700 text-white p-1.5 rounded-lg",children:p.jsx(g1,{size:20})}),p.jsx("span",{className:"font-bold text-lg tracking-tight text-slate-800 dark:text-white hidden md:block",children:"Mission Ready"})]}),p.jsxs("div",{className:"flex items-center gap-1 md:gap-4",children:[p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:()=>r("DASHBOARD"),className:`px-3 md:px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="DASHBOARD"?"text-blue-600 bg-blue-50 dark:bg-blue-900/30 dark:text-blue-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:""}),p.jsx("button",{onClick:()=>r("INVENTORY"),className:`px-3 md:px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="INVENTORY"?"text-blue-600 bg-blue-50 dark:bg-blue-900/30 dark:text-blue-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:""})]}),p.jsx("div",{className:"h-6 w-px bg-slate-200 dark:bg-slate-700 mx-1"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:j,className:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:_?p.jsx(T1,{size:20}):p.jsx(_1,{size:20})}),N?p.jsx(y1,{size:18,className:"animate-spin text-slate-400"}):p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:We,className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-slate-800 rounded-lg transition-colors",title:"",children:p.jsx(S1,{size:20})}),p.jsx("button",{onClick:mt,className:"p-2 text-slate-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-slate-800 rounded-lg transition-colors",title:"",children:p.jsx(h1,{size:20})})]}),p.jsx("div",{className:"h-4 w-px bg-slate-200 dark:bg-slate-700 mx-1"}),p.jsxs("div",{className:"hidden md:flex items-center gap-2 text-slate-600 dark:text-slate-300 text-sm font-medium px-2",children:[p.jsx(k1,{size:16}),p.jsx("span",{children:t.username})]}),p.jsx("button",{onClick:x,className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-slate-800 rounded-lg transition-colors",children:p.jsx(v1,{size:20})})]})]})]})}),p.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[n==="DASHBOARD"&&p.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[p.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 dark:from-slate-900 dark:to-slate-800 rounded-2xl p-8 text-white shadow-lg flex flex-col md:flex-row justify-between items-center gap-6 border border-slate-700",children:[p.jsxs("div",{className:"flex-1 w-full",children:[p.jsx("h1",{className:"text-3xl font-bold mb-2",children:""}),p.jsxs("div",{className:"relative mt-4 max-w-md",children:[p.jsx(zh,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),p.jsx("input",{type:"text",placeholder:"...",value:D,onChange:M=>L(M.target.value),className:"w-full pl-10 pr-10 py-2 rounded-lg bg-slate-900/50 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),D&&p.jsx("button",{onClick:()=>L(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white",children:p.jsx(Qn,{size:16})})]})]}),p.jsxs("button",{onClick:P,className:"bg-blue-500 hover:bg-blue-400 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg hover:shadow-xl transition-all active:scale-95 whitespace-nowrap",children:[p.jsx(qn,{size:24})," "]})]}),D&&p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm",children:[p.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4",children:[': "',D,'"']}),p.jsxs("div",{className:"space-y-6",children:[G.length>0&&p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-bold text-blue-600 mb-2 uppercase",children:""}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:G.map(M=>p.jsxs("div",{onClick:()=>b(M.id),className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600 cursor-pointer hover:border-blue-400 transition-colors",children:[p.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:M.name}),p.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:M.date})]},M.id))})]}),H.length>0&&p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-bold text-green-600 mb-2 uppercase",children:""}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:H.map(M=>p.jsx("div",{className:"p-2 bg-slate-50 dark:bg-slate-700/50 rounded border border-slate-200 dark:border-slate-600 text-sm text-slate-700 dark:text-slate-200",children:M.name},M.id))})]}),H.length===0&&G.length===0&&p.jsx("p",{className:"text-slate-400",children:""})]})]}),!D&&p.jsxs("div",{children:[p.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[p.jsx(o1,{size:20,className:"text-slate-500"}),""]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.length===0?p.jsxs("div",{className:"col-span-full bg-white dark:bg-slate-800 border border-dashed border-slate-300 dark:border-slate-700 rounded-xl p-12 text-center text-slate-400",children:[p.jsx(xd,{size:48,className:"mx-auto mb-4 opacity-50"}),p.jsx("p",{children:""})]}):o.map(M=>{const Y=M.items.filter(oe=>oe.checked).length,q=M.items.length,Q=q===0?0:Math.round(Y/q*100);return p.jsxs("div",{onClick:()=>b(M.id),className:"group bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md hover:border-blue-200 dark:hover:border-blue-500/50 transition-all cursor-pointer relative",children:[p.jsxs("div",{className:"flex justify-between items-start mb-3",children:[p.jsxs("div",{className:"min-w-0 pr-4",children:[p.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-100 group-hover:text-blue-600 transition-colors truncate",children:M.name}),p.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:M.date})]}),p.jsxs("div",{className:"flex flex-col items-end shrink-0",children:[p.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${Q===100?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300"}`,children:Q===100?"":""}),p.jsxs("div",{className:"flex gap-1 mt-2 z-10",children:[p.jsx("button",{onClick:oe=>k(oe,M),className:"text-slate-300 hover:text-blue-500 p-1",title:"",children:p.jsx(d1,{size:14})}),p.jsx("button",{onClick:oe=>Se(oe,M.id),className:"text-slate-300 hover:text-red-500 p-1",title:"",children:p.jsx(Qn,{size:16})})]})]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400 font-medium",children:[p.jsx("span",{children:""}),p.jsxs("span",{children:[Y,"/",q," "]})]}),p.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${Q}%`}})})]}),p.jsx(l1,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-200 dark:text-slate-600 opacity-0 group-hover:opacity-100 transition-all transform group-hover:translate-x-1"})]},M.id)})})]})]}),n==="INVENTORY"&&p.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",children:p.jsx(C1,{items:s,setItems:i,folders:u,setFolders:d,groups:f,setGroups:m,categories:g,setCategories:E})}),n==="TRIP_EDIT"&&p.jsx("div",{className:"animate-in fade-in zoom-in-95 duration-200",children:p.jsx(yT,{inventory:s,folders:u,groups:f,categories:g,currentTrip:xe,onSave:T,onCancel:()=>r(A?"TRIP_RUN":"DASHBOARD")})}),n==="TRIP_RUN"&&xe&&p.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:p.jsx(vT,{trip:xe,categories:g,onUpdateTrip:T,onBack:()=>r("DASHBOARD"),onEdit:()=>r("TRIP_EDIT")})})]})]})}const uw=document.getElementById("root");if(!uw)throw new Error("Could not find root element to mount to");const EC=kc.createRoot(uw);EC.render(p.jsx(Vt.StrictMode,{children:p.jsx(xC,{})}));
