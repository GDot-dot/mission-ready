(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Pw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wg={exports:{}},Jl={},qg={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ko=Symbol.for("react.element"),Dw=Symbol.for("react.portal"),Vw=Symbol.for("react.fragment"),jw=Symbol.for("react.strict_mode"),Lw=Symbol.for("react.profiler"),Ow=Symbol.for("react.provider"),Mw=Symbol.for("react.context"),Fw=Symbol.for("react.forward_ref"),zw=Symbol.for("react.suspense"),Uw=Symbol.for("react.memo"),Bw=Symbol.for("react.lazy"),xp=Symbol.iterator;function $w(t){return t===null||typeof t!="object"?null:(t=xp&&t[xp]||t["@@iterator"],typeof t=="function"?t:null)}var Gg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kg=Object.assign,Qg={};function yi(t,e,n){this.props=t,this.context=e,this.refs=Qg,this.updater=n||Gg}yi.prototype.isReactComponent={};yi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yg(){}Yg.prototype=yi.prototype;function Gd(t,e,n){this.props=t,this.context=e,this.refs=Qg,this.updater=n||Gg}var Kd=Gd.prototype=new Yg;Kd.constructor=Gd;Kg(Kd,yi.prototype);Kd.isPureReactComponent=!0;var Ep=Array.isArray,Xg=Object.prototype.hasOwnProperty,Qd={current:null},Jg={key:!0,ref:!0,__self:!0,__source:!0};function Zg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Xg.call(e,r)&&!Jg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ko,type:t,key:i,ref:o,props:s,_owner:Qd.current}}function Hw(t,e){return{$$typeof:Ko,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ko}function Ww(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bp=/\/+/g;function Uu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ww(""+t.key):e.toString(36)}function Wa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ko:case Dw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Uu(o,0):r,Ep(s)?(n="",t!=null&&(n=t.replace(bp,"$&/")+"/"),Wa(s,e,n,"",function(d){return d})):s!=null&&(Yd(s)&&(s=Hw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(bp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ep(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Uu(i,l);o+=Wa(i,e,n,u,s)}else if(u=$w(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Uu(i,l++),o+=Wa(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ea(t,e,n){if(t==null)return t;var r=[],s=0;return Wa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function qw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},qa={transition:null},Gw={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:qa,ReactCurrentOwner:Qd};function e0(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Ea,forEach:function(t,e,n){Ea(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ea(t,function(){e++}),e},toArray:function(t){return Ea(t,function(e){return e})||[]},only:function(t){if(!Yd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=yi;pe.Fragment=Vw;pe.Profiler=Lw;pe.PureComponent=Gd;pe.StrictMode=jw;pe.Suspense=zw;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gw;pe.act=e0;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Kg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Qd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Xg.call(e,u)&&!Jg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Ko,type:t.type,key:s,ref:i,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:Mw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ow,_context:t},t.Consumer=t};pe.createElement=Zg;pe.createFactory=function(t){var e=Zg.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:Fw,render:t}};pe.isValidElement=Yd;pe.lazy=function(t){return{$$typeof:Bw,_payload:{_status:-1,_result:t},_init:qw}};pe.memo=function(t,e){return{$$typeof:Uw,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=qa.transition;qa.transition={};try{t()}finally{qa.transition=e}};pe.unstable_act=e0;pe.useCallback=function(t,e){return Mt.current.useCallback(t,e)};pe.useContext=function(t){return Mt.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Mt.current.useEffect(t,e)};pe.useId=function(){return Mt.current.useId()};pe.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Mt.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};pe.useRef=function(t){return Mt.current.useRef(t)};pe.useState=function(t){return Mt.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Mt.current.useTransition()};pe.version="18.3.1";qg.exports=pe;var N=qg.exports;const Lt=Pw(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw=N,Qw=Symbol.for("react.element"),Yw=Symbol.for("react.fragment"),Xw=Object.prototype.hasOwnProperty,Jw=Kw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zw={key:!0,ref:!0,__self:!0,__source:!0};function t0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Xw.call(e,r)&&!Zw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Qw,type:t,key:i,ref:o,props:s,_owner:Jw.current}}Jl.Fragment=Yw;Jl.jsx=t0;Jl.jsxs=t0;Wg.exports=Jl;var f=Wg.exports,Cc={},n0={exports:{}},en={},r0={exports:{}},s0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,Q){var X=H.length;H.push(Q);e:for(;0<X;){var fe=X-1>>>1,z=H[fe];if(0<s(z,Q))H[fe]=Q,H[X]=z,X=fe;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Q=H[0],X=H.pop();if(X!==Q){H[0]=X;e:for(var fe=0,z=H.length,G=z>>>1;fe<G;){var se=2*(fe+1)-1,ue=H[se],re=se+1,Se=H[re];if(0>s(ue,X))re<z&&0>s(Se,ue)?(H[fe]=Se,H[re]=X,fe=re):(H[fe]=ue,H[se]=X,fe=se);else if(re<z&&0>s(Se,X))H[fe]=Se,H[re]=X,fe=re;else break e}}return Q}function s(H,Q){var X=H.sortIndex-Q.sortIndex;return X!==0?X:H.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],p=1,m=null,g=3,x=!1,T=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(H){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=H)r(d),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(d)}}function D(H){if(C=!1,I(H),!T)if(n(u)!==null)T=!0,_t(O);else{var Q=n(d);Q!==null&&Ie(D,Q.startTime-H)}}function O(H,Q){T=!1,C&&(C=!1,b(y),y=-1),x=!0;var X=g;try{for(I(Q),m=n(u);m!==null&&(!(m.expirationTime>Q)||H&&!A());){var fe=m.callback;if(typeof fe=="function"){m.callback=null,g=m.priorityLevel;var z=fe(m.expirationTime<=Q);Q=t.unstable_now(),typeof z=="function"?m.callback=z:m===n(u)&&r(u),I(Q)}else r(u);m=n(u)}if(m!==null)var G=!0;else{var se=n(d);se!==null&&Ie(D,se.startTime-Q),G=!1}return G}finally{m=null,g=X,x=!1}}var F=!1,w=null,y=-1,E=5,k=-1;function A(){return!(t.unstable_now()-k<E)}function P(){if(w!==null){var H=t.unstable_now();k=H;var Q=!0;try{Q=w(!0,H)}finally{Q?S():(F=!1,w=null)}}else F=!1}var S;if(typeof _=="function")S=function(){_(P)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,He=ve.port2;ve.port1.onmessage=P,S=function(){He.postMessage(null)}}else S=function(){R(P,0)};function _t(H){w=H,F||(F=!0,S())}function Ie(H,Q){y=R(function(){H(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){T||x||(T=!0,_t(O))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var X=g;g=Q;try{return H()}finally{g=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,Q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var X=g;g=H;try{return Q()}finally{g=X}},t.unstable_scheduleCallback=function(H,Q,X){var fe=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?fe+X:fe):X=fe,H){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=X+z,H={id:p++,callback:Q,priorityLevel:H,startTime:X,expirationTime:z,sortIndex:-1},X>fe?(H.sortIndex=X,e(d,H),n(u)===null&&H===n(d)&&(C?(b(y),y=-1):C=!0,Ie(D,X-fe))):(H.sortIndex=z,e(u,H),T||x||(T=!0,_t(O))),H},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(H){var Q=g;return function(){var X=g;g=Q;try{return H.apply(this,arguments)}finally{g=X}}}})(s0);r0.exports=s0;var ex=r0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx=N,Zt=ex;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i0=new Set,yo={};function vs(t,e){Zs(t,e),Zs(t+"Capture",e)}function Zs(t,e){for(yo[t]=e,t=0;t<e.length;t++)i0.add(e[t])}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ac=Object.prototype.hasOwnProperty,nx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kp={},Ip={};function rx(t){return Ac.call(Ip,t)?!0:Ac.call(kp,t)?!1:nx.test(t)?Ip[t]=!0:(kp[t]=!0,!1)}function sx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ix(t,e,n,r){if(e===null||typeof e>"u"||sx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ft(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yt[t]=new Ft(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yt[e]=new Ft(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yt[t]=new Ft(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yt[t]=new Ft(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yt[t]=new Ft(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yt[t]=new Ft(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yt[t]=new Ft(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yt[t]=new Ft(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yt[t]=new Ft(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xd=/[\-:]([a-z])/g;function Jd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xd,Jd);yt[e]=new Ft(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xd,Jd);yt[e]=new Ft(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xd,Jd);yt[e]=new Ft(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yt[t]=new Ft(t,1,!1,t.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yt[t]=new Ft(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zd(t,e,n,r){var s=yt.hasOwnProperty(e)?yt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ix(e,n,s,r)&&(n=null),r||s===null?rx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var lr=tx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ba=Symbol.for("react.element"),Ps=Symbol.for("react.portal"),Ds=Symbol.for("react.fragment"),eh=Symbol.for("react.strict_mode"),Rc=Symbol.for("react.profiler"),o0=Symbol.for("react.provider"),a0=Symbol.for("react.context"),th=Symbol.for("react.forward_ref"),Nc=Symbol.for("react.suspense"),Pc=Symbol.for("react.suspense_list"),nh=Symbol.for("react.memo"),gr=Symbol.for("react.lazy"),l0=Symbol.for("react.offscreen"),Sp=Symbol.iterator;function Oi(t){return t===null||typeof t!="object"?null:(t=Sp&&t[Sp]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,Bu;function qi(t){if(Bu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Bu=e&&e[1]||""}return`
`+Bu+t}var $u=!1;function Hu(t,e){if(!t||$u)return"";$u=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{$u=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qi(t):""}function ox(t){switch(t.tag){case 5:return qi(t.type);case 16:return qi("Lazy");case 13:return qi("Suspense");case 19:return qi("SuspenseList");case 0:case 2:case 15:return t=Hu(t.type,!1),t;case 11:return t=Hu(t.type.render,!1),t;case 1:return t=Hu(t.type,!0),t;default:return""}}function Dc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ds:return"Fragment";case Ps:return"Portal";case Rc:return"Profiler";case eh:return"StrictMode";case Nc:return"Suspense";case Pc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case a0:return(t.displayName||"Context")+".Consumer";case o0:return(t._context.displayName||"Context")+".Provider";case th:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nh:return e=t.displayName||null,e!==null?e:Dc(t.type)||"Memo";case gr:e=t._payload,t=t._init;try{return Dc(t(e))}catch{}}return null}function ax(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dc(e);case 8:return e===eh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function u0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lx(t){var e=u0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ka(t){t._valueTracker||(t._valueTracker=lx(t))}function c0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=u0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ll(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vc(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function d0(t,e){e=e.checked,e!=null&&Zd(t,"checked",e,!1)}function jc(t,e){d0(t,e);var n=Vr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lc(t,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Cp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Lc(t,e,n){(e!=="number"||ll(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gi=Array.isArray;function Ws(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Oc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ap(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Gi(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vr(n)}}function h0(t,e){var n=Vr(e.value),r=Vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function f0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?f0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ia,p0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ia=Ia||document.createElement("div"),Ia.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ia.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var eo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ux=["Webkit","ms","Moz","O"];Object.keys(eo).forEach(function(t){ux.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),eo[e]=eo[t]})});function m0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||eo.hasOwnProperty(t)&&eo[t]?(""+e).trim():e+"px"}function g0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=m0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var cx=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fc(t,e){if(e){if(cx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function zc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uc=null;function rh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bc=null,qs=null,Gs=null;function Np(t){if(t=Xo(t)){if(typeof Bc!="function")throw Error($(280));var e=t.stateNode;e&&(e=ru(e),Bc(t.stateNode,t.type,e))}}function y0(t){qs?Gs?Gs.push(t):Gs=[t]:qs=t}function v0(){if(qs){var t=qs,e=Gs;if(Gs=qs=null,Np(t),e)for(t=0;t<e.length;t++)Np(e[t])}}function _0(t,e){return t(e)}function w0(){}var Wu=!1;function x0(t,e,n){if(Wu)return t(e,n);Wu=!0;try{return _0(t,e,n)}finally{Wu=!1,(qs!==null||Gs!==null)&&(w0(),v0())}}function _o(t,e){var n=t.stateNode;if(n===null)return null;var r=ru(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var $c=!1;if(tr)try{var Mi={};Object.defineProperty(Mi,"passive",{get:function(){$c=!0}}),window.addEventListener("test",Mi,Mi),window.removeEventListener("test",Mi,Mi)}catch{$c=!1}function dx(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var to=!1,ul=null,cl=!1,Hc=null,hx={onError:function(t){to=!0,ul=t}};function fx(t,e,n,r,s,i,o,l,u){to=!1,ul=null,dx.apply(hx,arguments)}function px(t,e,n,r,s,i,o,l,u){if(fx.apply(this,arguments),to){if(to){var d=ul;to=!1,ul=null}else throw Error($(198));cl||(cl=!0,Hc=d)}}function _s(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function E0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pp(t){if(_s(t)!==t)throw Error($(188))}function mx(t){var e=t.alternate;if(!e){if(e=_s(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Pp(s),t;if(i===r)return Pp(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function b0(t){return t=mx(t),t!==null?k0(t):null}function k0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=k0(t);if(e!==null)return e;t=t.sibling}return null}var I0=Zt.unstable_scheduleCallback,Dp=Zt.unstable_cancelCallback,gx=Zt.unstable_shouldYield,yx=Zt.unstable_requestPaint,Ye=Zt.unstable_now,vx=Zt.unstable_getCurrentPriorityLevel,sh=Zt.unstable_ImmediatePriority,S0=Zt.unstable_UserBlockingPriority,dl=Zt.unstable_NormalPriority,_x=Zt.unstable_LowPriority,T0=Zt.unstable_IdlePriority,Zl=null,Pn=null;function wx(t){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(Zl,t,void 0,(t.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:bx,xx=Math.log,Ex=Math.LN2;function bx(t){return t>>>=0,t===0?32:31-(xx(t)/Ex|0)|0}var Sa=64,Ta=4194304;function Ki(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Ki(l):(i&=o,i!==0&&(r=Ki(i)))}else o=n&~s,o!==0?r=Ki(o):i!==0&&(r=Ki(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xn(e),s=1<<n,r|=t[n],e&=~s;return r}function kx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ix(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-xn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=kx(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Wc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function C0(){var t=Sa;return Sa<<=1,!(Sa&4194240)&&(Sa=64),t}function qu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xn(e),t[e]=n}function Sx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-xn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ih(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ce=0;function A0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var R0,oh,N0,P0,D0,qc=!1,Ca=[],kr=null,Ir=null,Sr=null,wo=new Map,xo=new Map,_r=[],Tx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vp(t,e){switch(t){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":wo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xo.delete(e.pointerId)}}function Fi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Xo(e),e!==null&&oh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Cx(t,e,n,r,s){switch(e){case"focusin":return kr=Fi(kr,t,e,n,r,s),!0;case"dragenter":return Ir=Fi(Ir,t,e,n,r,s),!0;case"mouseover":return Sr=Fi(Sr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return wo.set(i,Fi(wo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,xo.set(i,Fi(xo.get(i)||null,t,e,n,r,s)),!0}return!1}function V0(t){var e=rs(t.target);if(e!==null){var n=_s(e);if(n!==null){if(e=n.tag,e===13){if(e=E0(n),e!==null){t.blockedOn=e,D0(t.priority,function(){N0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ga(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Uc=r,n.target.dispatchEvent(r),Uc=null}else return e=Xo(n),e!==null&&oh(e),t.blockedOn=n,!1;e.shift()}return!0}function jp(t,e,n){Ga(t)&&n.delete(e)}function Ax(){qc=!1,kr!==null&&Ga(kr)&&(kr=null),Ir!==null&&Ga(Ir)&&(Ir=null),Sr!==null&&Ga(Sr)&&(Sr=null),wo.forEach(jp),xo.forEach(jp)}function zi(t,e){t.blockedOn===e&&(t.blockedOn=null,qc||(qc=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,Ax)))}function Eo(t){function e(s){return zi(s,t)}if(0<Ca.length){zi(Ca[0],t);for(var n=1;n<Ca.length;n++){var r=Ca[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kr!==null&&zi(kr,t),Ir!==null&&zi(Ir,t),Sr!==null&&zi(Sr,t),wo.forEach(e),xo.forEach(e),n=0;n<_r.length;n++)r=_r[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_r.length&&(n=_r[0],n.blockedOn===null);)V0(n),n.blockedOn===null&&_r.shift()}var Ks=lr.ReactCurrentBatchConfig,fl=!0;function Rx(t,e,n,r){var s=Ce,i=Ks.transition;Ks.transition=null;try{Ce=1,ah(t,e,n,r)}finally{Ce=s,Ks.transition=i}}function Nx(t,e,n,r){var s=Ce,i=Ks.transition;Ks.transition=null;try{Ce=4,ah(t,e,n,r)}finally{Ce=s,Ks.transition=i}}function ah(t,e,n,r){if(fl){var s=Gc(t,e,n,r);if(s===null)nc(t,e,r,pl,n),Vp(t,r);else if(Cx(s,t,e,n,r))r.stopPropagation();else if(Vp(t,r),e&4&&-1<Tx.indexOf(t)){for(;s!==null;){var i=Xo(s);if(i!==null&&R0(i),i=Gc(t,e,n,r),i===null&&nc(t,e,r,pl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else nc(t,e,r,null,n)}}var pl=null;function Gc(t,e,n,r){if(pl=null,t=rh(r),t=rs(t),t!==null)if(e=_s(t),e===null)t=null;else if(n=e.tag,n===13){if(t=E0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pl=t,null}function j0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vx()){case sh:return 1;case S0:return 4;case dl:case _x:return 16;case T0:return 536870912;default:return 16}default:return 16}}var xr=null,lh=null,Ka=null;function L0(){if(Ka)return Ka;var t,e=lh,n=e.length,r,s="value"in xr?xr.value:xr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ka=s.slice(t,1<r?1-r:void 0)}function Qa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Aa(){return!0}function Lp(){return!1}function tn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Aa:Lp,this.isPropagationStopped=Lp,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Aa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Aa)},persist:function(){},isPersistent:Aa}),e}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uh=tn(vi),Yo=Be({},vi,{view:0,detail:0}),Px=tn(Yo),Gu,Ku,Ui,eu=Be({},Yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ch,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ui&&(Ui&&t.type==="mousemove"?(Gu=t.screenX-Ui.screenX,Ku=t.screenY-Ui.screenY):Ku=Gu=0,Ui=t),Gu)},movementY:function(t){return"movementY"in t?t.movementY:Ku}}),Op=tn(eu),Dx=Be({},eu,{dataTransfer:0}),Vx=tn(Dx),jx=Be({},Yo,{relatedTarget:0}),Qu=tn(jx),Lx=Be({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ox=tn(Lx),Mx=Be({},vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fx=tn(Mx),zx=Be({},vi,{data:0}),Mp=tn(zx),Ux={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$x={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$x[t])?!!e[t]:!1}function ch(){return Hx}var Wx=Be({},Yo,{key:function(t){if(t.key){var e=Ux[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ch,charCode:function(t){return t.type==="keypress"?Qa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qx=tn(Wx),Gx=Be({},eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fp=tn(Gx),Kx=Be({},Yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ch}),Qx=tn(Kx),Yx=Be({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xx=tn(Yx),Jx=Be({},eu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zx=tn(Jx),e1=[9,13,27,32],dh=tr&&"CompositionEvent"in window,no=null;tr&&"documentMode"in document&&(no=document.documentMode);var t1=tr&&"TextEvent"in window&&!no,O0=tr&&(!dh||no&&8<no&&11>=no),zp=" ",Up=!1;function M0(t,e){switch(t){case"keyup":return e1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vs=!1;function n1(t,e){switch(t){case"compositionend":return F0(e);case"keypress":return e.which!==32?null:(Up=!0,zp);case"textInput":return t=e.data,t===zp&&Up?null:t;default:return null}}function r1(t,e){if(Vs)return t==="compositionend"||!dh&&M0(t,e)?(t=L0(),Ka=lh=xr=null,Vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return O0&&e.locale!=="ko"?null:e.data;default:return null}}var s1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!s1[t.type]:e==="textarea"}function z0(t,e,n,r){y0(r),e=ml(e,"onChange"),0<e.length&&(n=new uh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ro=null,bo=null;function i1(t){X0(t,0)}function tu(t){var e=Os(t);if(c0(e))return t}function o1(t,e){if(t==="change")return e}var U0=!1;if(tr){var Yu;if(tr){var Xu="oninput"in document;if(!Xu){var $p=document.createElement("div");$p.setAttribute("oninput","return;"),Xu=typeof $p.oninput=="function"}Yu=Xu}else Yu=!1;U0=Yu&&(!document.documentMode||9<document.documentMode)}function Hp(){ro&&(ro.detachEvent("onpropertychange",B0),bo=ro=null)}function B0(t){if(t.propertyName==="value"&&tu(bo)){var e=[];z0(e,bo,t,rh(t)),x0(i1,e)}}function a1(t,e,n){t==="focusin"?(Hp(),ro=e,bo=n,ro.attachEvent("onpropertychange",B0)):t==="focusout"&&Hp()}function l1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tu(bo)}function u1(t,e){if(t==="click")return tu(e)}function c1(t,e){if(t==="input"||t==="change")return tu(e)}function d1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bn=typeof Object.is=="function"?Object.is:d1;function ko(t,e){if(bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ac.call(e,s)||!bn(t[s],e[s]))return!1}return!0}function Wp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qp(t,e){var n=Wp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wp(n)}}function $0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function H0(){for(var t=window,e=ll();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ll(t.document)}return e}function hh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function h1(t){var e=H0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$0(n.ownerDocument.documentElement,n)){if(r!==null&&hh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=qp(n,i);var o=qp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var f1=tr&&"documentMode"in document&&11>=document.documentMode,js=null,Kc=null,so=null,Qc=!1;function Gp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qc||js==null||js!==ll(r)||(r=js,"selectionStart"in r&&hh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),so&&ko(so,r)||(so=r,r=ml(Kc,"onSelect"),0<r.length&&(e=new uh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=js)))}function Ra(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ls={animationend:Ra("Animation","AnimationEnd"),animationiteration:Ra("Animation","AnimationIteration"),animationstart:Ra("Animation","AnimationStart"),transitionend:Ra("Transition","TransitionEnd")},Ju={},W0={};tr&&(W0=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function nu(t){if(Ju[t])return Ju[t];if(!Ls[t])return t;var e=Ls[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in W0)return Ju[t]=e[n];return t}var q0=nu("animationend"),G0=nu("animationiteration"),K0=nu("animationstart"),Q0=nu("transitionend"),Y0=new Map,Kp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(t,e){Y0.set(t,e),vs(e,[t])}for(var Zu=0;Zu<Kp.length;Zu++){var ec=Kp[Zu],p1=ec.toLowerCase(),m1=ec[0].toUpperCase()+ec.slice(1);Ur(p1,"on"+m1)}Ur(q0,"onAnimationEnd");Ur(G0,"onAnimationIteration");Ur(K0,"onAnimationStart");Ur("dblclick","onDoubleClick");Ur("focusin","onFocus");Ur("focusout","onBlur");Ur(Q0,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qi));function Qp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,px(r,e,void 0,t),t.currentTarget=null}function X0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Qp(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Qp(s,l,d),i=u}}}if(cl)throw t=Hc,cl=!1,Hc=null,t}function je(t,e){var n=e[ed];n===void 0&&(n=e[ed]=new Set);var r=t+"__bubble";n.has(r)||(J0(e,t,2,!1),n.add(r))}function tc(t,e,n){var r=0;e&&(r|=4),J0(n,t,r,e)}var Na="_reactListening"+Math.random().toString(36).slice(2);function Io(t){if(!t[Na]){t[Na]=!0,i0.forEach(function(n){n!=="selectionchange"&&(g1.has(n)||tc(n,!1,t),tc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Na]||(e[Na]=!0,tc("selectionchange",!1,e))}}function J0(t,e,n,r){switch(j0(e)){case 1:var s=Rx;break;case 4:s=Nx;break;default:s=ah}n=s.bind(null,e,n,t),s=void 0,!$c||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function nc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=rs(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}x0(function(){var d=i,p=rh(n),m=[];e:{var g=Y0.get(t);if(g!==void 0){var x=uh,T=t;switch(t){case"keypress":if(Qa(n)===0)break e;case"keydown":case"keyup":x=qx;break;case"focusin":T="focus",x=Qu;break;case"focusout":T="blur",x=Qu;break;case"beforeblur":case"afterblur":x=Qu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Op;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Vx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Qx;break;case q0:case G0:case K0:x=Ox;break;case Q0:x=Xx;break;case"scroll":x=Px;break;case"wheel":x=Zx;break;case"copy":case"cut":case"paste":x=Fx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Fp}var C=(e&4)!==0,R=!C&&t==="scroll",b=C?g!==null?g+"Capture":null:g;C=[];for(var _=d,I;_!==null;){I=_;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,b!==null&&(D=_o(_,b),D!=null&&C.push(So(_,D,I)))),R)break;_=_.return}0<C.length&&(g=new x(g,T,null,n,p),m.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==Uc&&(T=n.relatedTarget||n.fromElement)&&(rs(T)||T[nr]))break e;if((x||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,x?(T=n.relatedTarget||n.toElement,x=d,T=T?rs(T):null,T!==null&&(R=_s(T),T!==R||T.tag!==5&&T.tag!==6)&&(T=null)):(x=null,T=d),x!==T)){if(C=Op,D="onMouseLeave",b="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(C=Fp,D="onPointerLeave",b="onPointerEnter",_="pointer"),R=x==null?g:Os(x),I=T==null?g:Os(T),g=new C(D,_+"leave",x,n,p),g.target=R,g.relatedTarget=I,D=null,rs(p)===d&&(C=new C(b,_+"enter",T,n,p),C.target=I,C.relatedTarget=R,D=C),R=D,x&&T)t:{for(C=x,b=T,_=0,I=C;I;I=Cs(I))_++;for(I=0,D=b;D;D=Cs(D))I++;for(;0<_-I;)C=Cs(C),_--;for(;0<I-_;)b=Cs(b),I--;for(;_--;){if(C===b||b!==null&&C===b.alternate)break t;C=Cs(C),b=Cs(b)}C=null}else C=null;x!==null&&Yp(m,g,x,C,!1),T!==null&&R!==null&&Yp(m,R,T,C,!0)}}e:{if(g=d?Os(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var O=o1;else if(Bp(g))if(U0)O=c1;else{O=l1;var F=a1}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=u1);if(O&&(O=O(t,d))){z0(m,O,n,p);break e}F&&F(t,g,d),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&Lc(g,"number",g.value)}switch(F=d?Os(d):window,t){case"focusin":(Bp(F)||F.contentEditable==="true")&&(js=F,Kc=d,so=null);break;case"focusout":so=Kc=js=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,Gp(m,n,p);break;case"selectionchange":if(f1)break;case"keydown":case"keyup":Gp(m,n,p)}var w;if(dh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Vs?M0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(O0&&n.locale!=="ko"&&(Vs||y!=="onCompositionStart"?y==="onCompositionEnd"&&Vs&&(w=L0()):(xr=p,lh="value"in xr?xr.value:xr.textContent,Vs=!0)),F=ml(d,y),0<F.length&&(y=new Mp(y,t,null,n,p),m.push({event:y,listeners:F}),w?y.data=w:(w=F0(n),w!==null&&(y.data=w)))),(w=t1?n1(t,n):r1(t,n))&&(d=ml(d,"onBeforeInput"),0<d.length&&(p=new Mp("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=w))}X0(m,e)})}function So(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ml(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_o(t,n),i!=null&&r.unshift(So(t,i,s)),i=_o(t,e),i!=null&&r.push(So(t,i,s))),t=t.return}return r}function Cs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=_o(n,i),u!=null&&o.unshift(So(n,u,l))):s||(u=_o(n,i),u!=null&&o.push(So(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var y1=/\r\n?/g,v1=/\u0000|\uFFFD/g;function Xp(t){return(typeof t=="string"?t:""+t).replace(y1,`
`).replace(v1,"")}function Pa(t,e,n){if(e=Xp(e),Xp(t)!==e&&n)throw Error($(425))}function gl(){}var Yc=null,Xc=null;function Jc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zc=typeof setTimeout=="function"?setTimeout:void 0,_1=typeof clearTimeout=="function"?clearTimeout:void 0,Jp=typeof Promise=="function"?Promise:void 0,w1=typeof queueMicrotask=="function"?queueMicrotask:typeof Jp<"u"?function(t){return Jp.resolve(null).then(t).catch(x1)}:Zc;function x1(t){setTimeout(function(){throw t})}function rc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Eo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Eo(e)}function Tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _i=Math.random().toString(36).slice(2),Rn="__reactFiber$"+_i,To="__reactProps$"+_i,nr="__reactContainer$"+_i,ed="__reactEvents$"+_i,E1="__reactListeners$"+_i,b1="__reactHandles$"+_i;function rs(t){var e=t[Rn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nr]||n[Rn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zp(t);t!==null;){if(n=t[Rn])return n;t=Zp(t)}return e}t=n,n=t.parentNode}return null}function Xo(t){return t=t[Rn]||t[nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Os(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function ru(t){return t[To]||null}var td=[],Ms=-1;function Br(t){return{current:t}}function Le(t){0>Ms||(t.current=td[Ms],td[Ms]=null,Ms--)}function Ne(t,e){Ms++,td[Ms]=t.current,t.current=e}var jr={},Nt=Br(jr),Bt=Br(!1),cs=jr;function ei(t,e){var n=t.type.contextTypes;if(!n)return jr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $t(t){return t=t.childContextTypes,t!=null}function yl(){Le(Bt),Le(Nt)}function em(t,e,n){if(Nt.current!==jr)throw Error($(168));Ne(Nt,e),Ne(Bt,n)}function Z0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,ax(t)||"Unknown",s));return Be({},n,r)}function vl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jr,cs=Nt.current,Ne(Nt,t),Ne(Bt,Bt.current),!0}function tm(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=Z0(t,e,cs),r.__reactInternalMemoizedMergedChildContext=t,Le(Bt),Le(Nt),Ne(Nt,t)):Le(Bt),Ne(Bt,n)}var Kn=null,su=!1,sc=!1;function ey(t){Kn===null?Kn=[t]:Kn.push(t)}function k1(t){su=!0,ey(t)}function $r(){if(!sc&&Kn!==null){sc=!0;var t=0,e=Ce;try{var n=Kn;for(Ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kn=null,su=!1}catch(s){throw Kn!==null&&(Kn=Kn.slice(t+1)),I0(sh,$r),s}finally{Ce=e,sc=!1}}return null}var Fs=[],zs=0,_l=null,wl=0,sn=[],on=0,ds=null,Qn=1,Yn="";function es(t,e){Fs[zs++]=wl,Fs[zs++]=_l,_l=t,wl=e}function ty(t,e,n){sn[on++]=Qn,sn[on++]=Yn,sn[on++]=ds,ds=t;var r=Qn;t=Yn;var s=32-xn(r)-1;r&=~(1<<s),n+=1;var i=32-xn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Qn=1<<32-xn(e)+s|n<<s|r,Yn=i+t}else Qn=1<<i|n<<s|r,Yn=t}function fh(t){t.return!==null&&(es(t,1),ty(t,1,0))}function ph(t){for(;t===_l;)_l=Fs[--zs],Fs[zs]=null,wl=Fs[--zs],Fs[zs]=null;for(;t===ds;)ds=sn[--on],sn[on]=null,Yn=sn[--on],sn[on]=null,Qn=sn[--on],sn[on]=null}var Jt=null,Xt=null,Me=!1,_n=null;function ny(t,e){var n=ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jt=t,Xt=Tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jt=t,Xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ds!==null?{id:Qn,overflow:Yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jt=t,Xt=null,!0):!1;default:return!1}}function nd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rd(t){if(Me){var e=Xt;if(e){var n=e;if(!nm(t,e)){if(nd(t))throw Error($(418));e=Tr(n.nextSibling);var r=Jt;e&&nm(t,e)?ny(r,n):(t.flags=t.flags&-4097|2,Me=!1,Jt=t)}}else{if(nd(t))throw Error($(418));t.flags=t.flags&-4097|2,Me=!1,Jt=t}}}function rm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jt=t}function Da(t){if(t!==Jt)return!1;if(!Me)return rm(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jc(t.type,t.memoizedProps)),e&&(e=Xt)){if(nd(t))throw ry(),Error($(418));for(;e;)ny(t,e),e=Tr(e.nextSibling)}if(rm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xt=Tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xt=null}}else Xt=Jt?Tr(t.stateNode.nextSibling):null;return!0}function ry(){for(var t=Xt;t;)t=Tr(t.nextSibling)}function ti(){Xt=Jt=null,Me=!1}function mh(t){_n===null?_n=[t]:_n.push(t)}var I1=lr.ReactCurrentBatchConfig;function Bi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Va(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sm(t){var e=t._init;return e(t._payload)}function sy(t){function e(b,_){if(t){var I=b.deletions;I===null?(b.deletions=[_],b.flags|=16):I.push(_)}}function n(b,_){if(!t)return null;for(;_!==null;)e(b,_),_=_.sibling;return null}function r(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function s(b,_){return b=Nr(b,_),b.index=0,b.sibling=null,b}function i(b,_,I){return b.index=I,t?(I=b.alternate,I!==null?(I=I.index,I<_?(b.flags|=2,_):I):(b.flags|=2,_)):(b.flags|=1048576,_)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,_,I,D){return _===null||_.tag!==6?(_=dc(I,b.mode,D),_.return=b,_):(_=s(_,I),_.return=b,_)}function u(b,_,I,D){var O=I.type;return O===Ds?p(b,_,I.props.children,D,I.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===gr&&sm(O)===_.type)?(D=s(_,I.props),D.ref=Bi(b,_,I),D.return=b,D):(D=nl(I.type,I.key,I.props,null,b.mode,D),D.ref=Bi(b,_,I),D.return=b,D)}function d(b,_,I,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=hc(I,b.mode,D),_.return=b,_):(_=s(_,I.children||[]),_.return=b,_)}function p(b,_,I,D,O){return _===null||_.tag!==7?(_=ls(I,b.mode,D,O),_.return=b,_):(_=s(_,I),_.return=b,_)}function m(b,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=dc(""+_,b.mode,I),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ba:return I=nl(_.type,_.key,_.props,null,b.mode,I),I.ref=Bi(b,null,_),I.return=b,I;case Ps:return _=hc(_,b.mode,I),_.return=b,_;case gr:var D=_._init;return m(b,D(_._payload),I)}if(Gi(_)||Oi(_))return _=ls(_,b.mode,I,null),_.return=b,_;Va(b,_)}return null}function g(b,_,I,D){var O=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return O!==null?null:l(b,_,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ba:return I.key===O?u(b,_,I,D):null;case Ps:return I.key===O?d(b,_,I,D):null;case gr:return O=I._init,g(b,_,O(I._payload),D)}if(Gi(I)||Oi(I))return O!==null?null:p(b,_,I,D,null);Va(b,I)}return null}function x(b,_,I,D,O){if(typeof D=="string"&&D!==""||typeof D=="number")return b=b.get(I)||null,l(_,b,""+D,O);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ba:return b=b.get(D.key===null?I:D.key)||null,u(_,b,D,O);case Ps:return b=b.get(D.key===null?I:D.key)||null,d(_,b,D,O);case gr:var F=D._init;return x(b,_,I,F(D._payload),O)}if(Gi(D)||Oi(D))return b=b.get(I)||null,p(_,b,D,O,null);Va(_,D)}return null}function T(b,_,I,D){for(var O=null,F=null,w=_,y=_=0,E=null;w!==null&&y<I.length;y++){w.index>y?(E=w,w=null):E=w.sibling;var k=g(b,w,I[y],D);if(k===null){w===null&&(w=E);break}t&&w&&k.alternate===null&&e(b,w),_=i(k,_,y),F===null?O=k:F.sibling=k,F=k,w=E}if(y===I.length)return n(b,w),Me&&es(b,y),O;if(w===null){for(;y<I.length;y++)w=m(b,I[y],D),w!==null&&(_=i(w,_,y),F===null?O=w:F.sibling=w,F=w);return Me&&es(b,y),O}for(w=r(b,w);y<I.length;y++)E=x(w,b,y,I[y],D),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?y:E.key),_=i(E,_,y),F===null?O=E:F.sibling=E,F=E);return t&&w.forEach(function(A){return e(b,A)}),Me&&es(b,y),O}function C(b,_,I,D){var O=Oi(I);if(typeof O!="function")throw Error($(150));if(I=O.call(I),I==null)throw Error($(151));for(var F=O=null,w=_,y=_=0,E=null,k=I.next();w!==null&&!k.done;y++,k=I.next()){w.index>y?(E=w,w=null):E=w.sibling;var A=g(b,w,k.value,D);if(A===null){w===null&&(w=E);break}t&&w&&A.alternate===null&&e(b,w),_=i(A,_,y),F===null?O=A:F.sibling=A,F=A,w=E}if(k.done)return n(b,w),Me&&es(b,y),O;if(w===null){for(;!k.done;y++,k=I.next())k=m(b,k.value,D),k!==null&&(_=i(k,_,y),F===null?O=k:F.sibling=k,F=k);return Me&&es(b,y),O}for(w=r(b,w);!k.done;y++,k=I.next())k=x(w,b,y,k.value,D),k!==null&&(t&&k.alternate!==null&&w.delete(k.key===null?y:k.key),_=i(k,_,y),F===null?O=k:F.sibling=k,F=k);return t&&w.forEach(function(P){return e(b,P)}),Me&&es(b,y),O}function R(b,_,I,D){if(typeof I=="object"&&I!==null&&I.type===Ds&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case ba:e:{for(var O=I.key,F=_;F!==null;){if(F.key===O){if(O=I.type,O===Ds){if(F.tag===7){n(b,F.sibling),_=s(F,I.props.children),_.return=b,b=_;break e}}else if(F.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===gr&&sm(O)===F.type){n(b,F.sibling),_=s(F,I.props),_.ref=Bi(b,F,I),_.return=b,b=_;break e}n(b,F);break}else e(b,F);F=F.sibling}I.type===Ds?(_=ls(I.props.children,b.mode,D,I.key),_.return=b,b=_):(D=nl(I.type,I.key,I.props,null,b.mode,D),D.ref=Bi(b,_,I),D.return=b,b=D)}return o(b);case Ps:e:{for(F=I.key;_!==null;){if(_.key===F)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){n(b,_.sibling),_=s(_,I.children||[]),_.return=b,b=_;break e}else{n(b,_);break}else e(b,_);_=_.sibling}_=hc(I,b.mode,D),_.return=b,b=_}return o(b);case gr:return F=I._init,R(b,_,F(I._payload),D)}if(Gi(I))return T(b,_,I,D);if(Oi(I))return C(b,_,I,D);Va(b,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(n(b,_.sibling),_=s(_,I),_.return=b,b=_):(n(b,_),_=dc(I,b.mode,D),_.return=b,b=_),o(b)):n(b,_)}return R}var ni=sy(!0),iy=sy(!1),xl=Br(null),El=null,Us=null,gh=null;function yh(){gh=Us=El=null}function vh(t){var e=xl.current;Le(xl),t._currentValue=e}function sd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qs(t,e){El=t,gh=Us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ut=!0),t.firstContext=null)}function hn(t){var e=t._currentValue;if(gh!==t)if(t={context:t,memoizedValue:e,next:null},Us===null){if(El===null)throw Error($(308));Us=t,El.dependencies={lanes:0,firstContext:t}}else Us=Us.next=t;return e}var ss=null;function _h(t){ss===null?ss=[t]:ss.push(t)}function oy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,_h(e)):(n.next=s.next,s.next=n),e.interleaved=n,rr(t,r)}function rr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yr=!1;function wh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ay(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,rr(t,n)}return s=r.interleaved,s===null?(e.next=e,_h(r)):(e.next=s.next,s.next=e),r.interleaved=e,rr(t,n)}function Ya(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ih(t,n)}}function im(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bl(t,e,n,r){var s=t.updateQueue;yr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=d=u=null,l=i;do{var g=l.lane,x=l.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var T=t,C=l;switch(g=e,x=n,C.tag){case 1:if(T=C.payload,typeof T=="function"){m=T.call(x,m,g);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=C.payload,g=typeof T=="function"?T.call(x,m,g):T,g==null)break e;m=Be({},m,g);break e;case 2:yr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else x={eventTime:x,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=x,u=m):p=p.next=x,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);fs|=o,t.lanes=o,t.memoizedState=m}}function om(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Jo={},Dn=Br(Jo),Co=Br(Jo),Ao=Br(Jo);function is(t){if(t===Jo)throw Error($(174));return t}function xh(t,e){switch(Ne(Ao,e),Ne(Co,t),Ne(Dn,Jo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mc(e,t)}Le(Dn),Ne(Dn,e)}function ri(){Le(Dn),Le(Co),Le(Ao)}function ly(t){is(Ao.current);var e=is(Dn.current),n=Mc(e,t.type);e!==n&&(Ne(Co,t),Ne(Dn,n))}function Eh(t){Co.current===t&&(Le(Dn),Le(Co))}var ze=Br(0);function kl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ic=[];function bh(){for(var t=0;t<ic.length;t++)ic[t]._workInProgressVersionPrimary=null;ic.length=0}var Xa=lr.ReactCurrentDispatcher,oc=lr.ReactCurrentBatchConfig,hs=0,Ue=null,nt=null,lt=null,Il=!1,io=!1,Ro=0,S1=0;function It(){throw Error($(321))}function kh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bn(t[n],e[n]))return!1;return!0}function Ih(t,e,n,r,s,i){if(hs=i,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xa.current=t===null||t.memoizedState===null?R1:N1,t=n(r,s),io){i=0;do{if(io=!1,Ro=0,25<=i)throw Error($(301));i+=1,lt=nt=null,e.updateQueue=null,Xa.current=P1,t=n(r,s)}while(io)}if(Xa.current=Sl,e=nt!==null&&nt.next!==null,hs=0,lt=nt=Ue=null,Il=!1,e)throw Error($(300));return t}function Sh(){var t=Ro!==0;return Ro=0,t}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?Ue.memoizedState=lt=t:lt=lt.next=t,lt}function fn(){if(nt===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=lt===null?Ue.memoizedState:lt.next;if(e!==null)lt=e,nt=t;else{if(t===null)throw Error($(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},lt===null?Ue.memoizedState=lt=t:lt=lt.next=t}return lt}function No(t,e){return typeof e=="function"?e(t):e}function ac(t){var e=fn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=nt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var p=d.lane;if((hs&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ue.lanes|=p,fs|=p}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,bn(r,e.memoizedState)||(Ut=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ue.lanes|=i,fs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lc(t){var e=fn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);bn(i,e.memoizedState)||(Ut=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function uy(){}function cy(t,e){var n=Ue,r=fn(),s=e(),i=!bn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ut=!0),r=r.queue,Th(fy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||lt!==null&&lt.memoizedState.tag&1){if(n.flags|=2048,Po(9,hy.bind(null,n,r,s,e),void 0,null),ct===null)throw Error($(349));hs&30||dy(n,e,s)}return s}function dy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hy(t,e,n,r){e.value=n,e.getSnapshot=r,py(e)&&my(t)}function fy(t,e,n){return n(function(){py(e)&&my(t)})}function py(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bn(t,n)}catch{return!0}}function my(t){var e=rr(t,1);e!==null&&En(e,t,1,-1)}function am(t){var e=An();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:t},e.queue=t,t=t.dispatch=A1.bind(null,Ue,t),[e.memoizedState,t]}function Po(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gy(){return fn().memoizedState}function Ja(t,e,n,r){var s=An();Ue.flags|=t,s.memoizedState=Po(1|e,n,void 0,r===void 0?null:r)}function iu(t,e,n,r){var s=fn();r=r===void 0?null:r;var i=void 0;if(nt!==null){var o=nt.memoizedState;if(i=o.destroy,r!==null&&kh(r,o.deps)){s.memoizedState=Po(e,n,i,r);return}}Ue.flags|=t,s.memoizedState=Po(1|e,n,i,r)}function lm(t,e){return Ja(8390656,8,t,e)}function Th(t,e){return iu(2048,8,t,e)}function yy(t,e){return iu(4,2,t,e)}function vy(t,e){return iu(4,4,t,e)}function _y(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wy(t,e,n){return n=n!=null?n.concat([t]):null,iu(4,4,_y.bind(null,e,t),n)}function Ch(){}function xy(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ey(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function by(t,e,n){return hs&21?(bn(n,e)||(n=C0(),Ue.lanes|=n,fs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ut=!0),t.memoizedState=n)}function T1(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var r=oc.transition;oc.transition={};try{t(!1),e()}finally{Ce=n,oc.transition=r}}function ky(){return fn().memoizedState}function C1(t,e,n){var r=Rr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Iy(t))Sy(e,n);else if(n=oy(t,e,n,r),n!==null){var s=Ot();En(n,t,r,s),Ty(n,e,r)}}function A1(t,e,n){var r=Rr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Iy(t))Sy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,bn(l,o)){var u=e.interleaved;u===null?(s.next=s,_h(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=oy(t,e,s,r),n!==null&&(s=Ot(),En(n,t,r,s),Ty(n,e,r))}}function Iy(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function Sy(t,e){io=Il=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ty(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ih(t,n)}}var Sl={readContext:hn,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},R1={readContext:hn,useCallback:function(t,e){return An().memoizedState=[t,e===void 0?null:e],t},useContext:hn,useEffect:lm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ja(4194308,4,_y.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ja(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ja(4,2,t,e)},useMemo:function(t,e){var n=An();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=An();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=C1.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=An();return t={current:t},e.memoizedState=t},useState:am,useDebugValue:Ch,useDeferredValue:function(t){return An().memoizedState=t},useTransition:function(){var t=am(!1),e=t[0];return t=T1.bind(null,t[1]),An().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ue,s=An();if(Me){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),ct===null)throw Error($(349));hs&30||dy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,lm(fy.bind(null,r,i,t),[t]),r.flags|=2048,Po(9,hy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=An(),e=ct.identifierPrefix;if(Me){var n=Yn,r=Qn;n=(r&~(1<<32-xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ro++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=S1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},N1={readContext:hn,useCallback:xy,useContext:hn,useEffect:Th,useImperativeHandle:wy,useInsertionEffect:yy,useLayoutEffect:vy,useMemo:Ey,useReducer:ac,useRef:gy,useState:function(){return ac(No)},useDebugValue:Ch,useDeferredValue:function(t){var e=fn();return by(e,nt.memoizedState,t)},useTransition:function(){var t=ac(No)[0],e=fn().memoizedState;return[t,e]},useMutableSource:uy,useSyncExternalStore:cy,useId:ky,unstable_isNewReconciler:!1},P1={readContext:hn,useCallback:xy,useContext:hn,useEffect:Th,useImperativeHandle:wy,useInsertionEffect:yy,useLayoutEffect:vy,useMemo:Ey,useReducer:lc,useRef:gy,useState:function(){return lc(No)},useDebugValue:Ch,useDeferredValue:function(t){var e=fn();return nt===null?e.memoizedState=t:by(e,nt.memoizedState,t)},useTransition:function(){var t=lc(No)[0],e=fn().memoizedState;return[t,e]},useMutableSource:uy,useSyncExternalStore:cy,useId:ky,unstable_isNewReconciler:!1};function yn(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function id(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ou={isMounted:function(t){return(t=t._reactInternals)?_s(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ot(),s=Rr(t),i=Jn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(En(e,t,s,r),Ya(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ot(),s=Rr(t),i=Jn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(En(e,t,s,r),Ya(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ot(),r=Rr(t),s=Jn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Cr(t,s,r),e!==null&&(En(e,t,r,n),Ya(e,t,r))}};function um(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ko(n,r)||!ko(s,i):!0}function Cy(t,e,n){var r=!1,s=jr,i=e.contextType;return typeof i=="object"&&i!==null?i=hn(i):(s=$t(e)?cs:Nt.current,r=e.contextTypes,i=(r=r!=null)?ei(t,s):jr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ou,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function cm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ou.enqueueReplaceState(e,e.state,null)}function od(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},wh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=hn(i):(i=$t(e)?cs:Nt.current,s.context=ei(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(id(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ou.enqueueReplaceState(s,s.state,null),bl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function si(t,e){try{var n="",r=e;do n+=ox(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function uc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ad(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var D1=typeof WeakMap=="function"?WeakMap:Map;function Ay(t,e,n){n=Jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cl||(Cl=!0,yd=r),ad(t,e)},n}function Ry(t,e,n){n=Jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ad(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ad(t,e),typeof r!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function dm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new D1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=G1.bind(null,t,e,n),e.then(t,t))}function hm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Jn(-1,1),e.tag=2,Cr(n,e,1))),n.lanes|=1),t)}var V1=lr.ReactCurrentOwner,Ut=!1;function jt(t,e,n,r){e.child=t===null?iy(e,null,n,r):ni(e,t.child,n,r)}function pm(t,e,n,r,s){n=n.render;var i=e.ref;return Qs(e,s),r=Ih(t,e,n,r,i,s),n=Sh(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,sr(t,e,s)):(Me&&n&&fh(e),e.flags|=1,jt(t,e,r,s),e.child)}function mm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Lh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ny(t,e,i,r,s)):(t=nl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ko,n(o,r)&&t.ref===e.ref)return sr(t,e,s)}return e.flags|=1,t=Nr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Ny(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ko(i,r)&&t.ref===e.ref)if(Ut=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ut=!0);else return e.lanes=t.lanes,sr(t,e,s)}return ld(t,e,n,r,s)}function Py(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne($s,Yt),Yt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne($s,Yt),Yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ne($s,Yt),Yt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ne($s,Yt),Yt|=r;return jt(t,e,s,n),e.child}function Dy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ld(t,e,n,r,s){var i=$t(n)?cs:Nt.current;return i=ei(e,i),Qs(e,s),n=Ih(t,e,n,r,i,s),r=Sh(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,sr(t,e,s)):(Me&&r&&fh(e),e.flags|=1,jt(t,e,n,s),e.child)}function gm(t,e,n,r,s){if($t(n)){var i=!0;vl(e)}else i=!1;if(Qs(e,s),e.stateNode===null)Za(t,e),Cy(e,n,r),od(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=hn(d):(d=$t(n)?cs:Nt.current,d=ei(e,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&cm(e,o,r,d),yr=!1;var g=e.memoizedState;o.state=g,bl(e,r,o,s),u=e.memoizedState,l!==r||g!==u||Bt.current||yr?(typeof p=="function"&&(id(e,n,p,r),u=e.memoizedState),(l=yr||um(e,n,l,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ay(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:yn(e.type,l),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=hn(u):(u=$t(n)?cs:Nt.current,u=ei(e,u));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&cm(e,o,r,u),yr=!1,g=e.memoizedState,o.state=g,bl(e,r,o,s);var T=e.memoizedState;l!==m||g!==T||Bt.current||yr?(typeof x=="function"&&(id(e,n,x,r),T=e.memoizedState),(d=yr||um(e,n,d,r,g,T,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return ud(t,e,n,r,i,s)}function ud(t,e,n,r,s,i){Dy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&tm(e,n,!1),sr(t,e,i);r=e.stateNode,V1.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ni(e,t.child,null,i),e.child=ni(e,null,l,i)):jt(t,e,l,i),e.memoizedState=r.state,s&&tm(e,n,!0),e.child}function Vy(t){var e=t.stateNode;e.pendingContext?em(t,e.pendingContext,e.pendingContext!==e.context):e.context&&em(t,e.context,!1),xh(t,e.containerInfo)}function ym(t,e,n,r,s){return ti(),mh(s),e.flags|=256,jt(t,e,n,r),e.child}var cd={dehydrated:null,treeContext:null,retryLane:0};function dd(t){return{baseLanes:t,cachePool:null,transitions:null}}function jy(t,e,n){var r=e.pendingProps,s=ze.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ne(ze,s&1),t===null)return rd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=uu(o,r,0,null),t=ls(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=dd(n),e.memoizedState=cd,t):Ah(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return j1(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Nr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Nr(l,i):(i=ls(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?dd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=cd,r}return i=t.child,t=i.sibling,r=Nr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ah(t,e){return e=uu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ja(t,e,n,r){return r!==null&&mh(r),ni(e,t.child,null,n),t=Ah(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function j1(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=uc(Error($(422))),ja(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=uu({mode:"visible",children:r.children},s,0,null),i=ls(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ni(e,t.child,null,o),e.child.memoizedState=dd(o),e.memoizedState=cd,i);if(!(e.mode&1))return ja(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=uc(i,r,void 0),ja(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ut||l){if(r=ct,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,rr(t,s),En(r,t,s,-1))}return jh(),r=uc(Error($(421))),ja(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=K1.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Xt=Tr(s.nextSibling),Jt=e,Me=!0,_n=null,t!==null&&(sn[on++]=Qn,sn[on++]=Yn,sn[on++]=ds,Qn=t.id,Yn=t.overflow,ds=e),e=Ah(e,r.children),e.flags|=4096,e)}function vm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sd(t.return,e,n)}function cc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ly(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(jt(t,e,r.children,n),r=ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vm(t,n,e);else if(t.tag===19)vm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&kl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),cc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&kl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}cc(e,!0,n,null,i);break;case"together":cc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Za(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function L1(t,e,n){switch(e.tag){case 3:Vy(e),ti();break;case 5:ly(e);break;case 1:$t(e.type)&&vl(e);break;case 4:xh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ne(xl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?jy(t,e,n):(Ne(ze,ze.current&1),t=sr(t,e,n),t!==null?t.sibling:null);Ne(ze,ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ly(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ne(ze,ze.current),r)break;return null;case 22:case 23:return e.lanes=0,Py(t,e,n)}return sr(t,e,n)}var Oy,hd,My,Fy;Oy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hd=function(){};My=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,is(Dn.current);var i=null;switch(n){case"input":s=Vc(t,s),r=Vc(t,r),i=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),i=[];break;case"textarea":s=Oc(t,s),r=Oc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gl)}Fc(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(yo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(yo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&je("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Fy=function(t,e,n,r){n!==r&&(e.flags|=4)};function $i(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function St(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function O1(t,e,n){var r=e.pendingProps;switch(ph(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return $t(e.type)&&yl(),St(e),null;case 3:return r=e.stateNode,ri(),Le(Bt),Le(Nt),bh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Da(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_n!==null&&(wd(_n),_n=null))),hd(t,e),St(e),null;case 5:Eh(e);var s=is(Ao.current);if(n=e.type,t!==null&&e.stateNode!=null)My(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return St(e),null}if(t=is(Dn.current),Da(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Rn]=e,r[To]=i,t=(e.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<Qi.length;s++)je(Qi[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":Tp(r,i),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},je("invalid",r);break;case"textarea":Ap(r,i),je("invalid",r)}Fc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Pa(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Pa(r.textContent,l,t),s=["children",""+l]):yo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&je("scroll",r)}switch(n){case"input":ka(r),Cp(r,i,!0);break;case"textarea":ka(r),Rp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=gl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=f0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Rn]=e,t[To]=r,Oy(t,e,!1,!1),e.stateNode=t;e:{switch(o=zc(n,r),n){case"dialog":je("cancel",t),je("close",t),s=r;break;case"iframe":case"object":case"embed":je("load",t),s=r;break;case"video":case"audio":for(s=0;s<Qi.length;s++)je(Qi[s],t);s=r;break;case"source":je("error",t),s=r;break;case"img":case"image":case"link":je("error",t),je("load",t),s=r;break;case"details":je("toggle",t),s=r;break;case"input":Tp(t,r),s=Vc(t,r),je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),je("invalid",t);break;case"textarea":Ap(t,r),s=Oc(t,r),je("invalid",t);break;default:s=r}Fc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?g0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&p0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&vo(t,u):typeof u=="number"&&vo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(yo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&je("scroll",t):u!=null&&Zd(t,i,u,o))}switch(n){case"input":ka(t),Cp(t,r,!1);break;case"textarea":ka(t),Rp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ws(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ws(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=gl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(t&&e.stateNode!=null)Fy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=is(Ao.current),is(Dn.current),Da(e)){if(r=e.stateNode,n=e.memoizedProps,r[Rn]=e,(i=r.nodeValue!==n)&&(t=Jt,t!==null))switch(t.tag){case 3:Pa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rn]=e,e.stateNode=r}return St(e),null;case 13:if(Le(ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&Xt!==null&&e.mode&1&&!(e.flags&128))ry(),ti(),e.flags|=98560,i=!1;else if(i=Da(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Rn]=e}else ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),i=!1}else _n!==null&&(wd(_n),_n=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?it===0&&(it=3):jh())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return ri(),hd(t,e),t===null&&Io(e.stateNode.containerInfo),St(e),null;case 10:return vh(e.type._context),St(e),null;case 17:return $t(e.type)&&yl(),St(e),null;case 19:if(Le(ze),i=e.memoizedState,i===null)return St(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)$i(i,!1);else{if(it!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kl(t),o!==null){for(e.flags|=128,$i(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(ze,ze.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ye()>ii&&(e.flags|=128,r=!0,$i(i,!1),e.lanes=4194304)}else{if(!r)if(t=kl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$i(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Me)return St(e),null}else 2*Ye()-i.renderingStartTime>ii&&n!==1073741824&&(e.flags|=128,r=!0,$i(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ye(),e.sibling=null,n=ze.current,Ne(ze,r?n&1|2:n&1),e):(St(e),null);case 22:case 23:return Vh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yt&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function M1(t,e){switch(ph(e),e.tag){case 1:return $t(e.type)&&yl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ri(),Le(Bt),Le(Nt),bh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Eh(e),null;case 13:if(Le(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(ze),null;case 4:return ri(),null;case 10:return vh(e.type._context),null;case 22:case 23:return Vh(),null;case 24:return null;default:return null}}var La=!1,At=!1,F1=typeof WeakSet=="function"?WeakSet:Set,K=null;function Bs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qe(t,e,r)}else n.current=null}function fd(t,e,n){try{n()}catch(r){qe(t,e,r)}}var _m=!1;function z1(t,e){if(Yc=fl,t=H0(),hh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,p=0,m=t,g=null;t:for(;;){for(var x;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(x=m.firstChild)!==null;)g=m,m=x;for(;;){if(m===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++p===r&&(u=o),(x=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=x}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xc={focusedElem:t,selectionRange:n},fl=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var C=T.memoizedProps,R=T.memoizedState,b=e.stateNode,_=b.getSnapshotBeforeUpdate(e.elementType===e.type?C:yn(e.type,C),R);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(D){qe(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return T=_m,_m=!1,T}function oo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&fd(e,n,i)}s=s.next}while(s!==r)}}function au(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function zy(t){var e=t.alternate;e!==null&&(t.alternate=null,zy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rn],delete e[To],delete e[ed],delete e[E1],delete e[b1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Uy(t){return t.tag===5||t.tag===3||t.tag===4}function wm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Uy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function md(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gl));else if(r!==4&&(t=t.child,t!==null))for(md(t,e,n),t=t.sibling;t!==null;)md(t,e,n),t=t.sibling}function gd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gd(t,e,n),t=t.sibling;t!==null;)gd(t,e,n),t=t.sibling}var ht=null,vn=!1;function mr(t,e,n){for(n=n.child;n!==null;)By(t,e,n),n=n.sibling}function By(t,e,n){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(Zl,n)}catch{}switch(n.tag){case 5:At||Bs(n,e);case 6:var r=ht,s=vn;ht=null,mr(t,e,n),ht=r,vn=s,ht!==null&&(vn?(t=ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ht.removeChild(n.stateNode));break;case 18:ht!==null&&(vn?(t=ht,n=n.stateNode,t.nodeType===8?rc(t.parentNode,n):t.nodeType===1&&rc(t,n),Eo(t)):rc(ht,n.stateNode));break;case 4:r=ht,s=vn,ht=n.stateNode.containerInfo,vn=!0,mr(t,e,n),ht=r,vn=s;break;case 0:case 11:case 14:case 15:if(!At&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&fd(n,e,o),s=s.next}while(s!==r)}mr(t,e,n);break;case 1:if(!At&&(Bs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){qe(n,e,l)}mr(t,e,n);break;case 21:mr(t,e,n);break;case 22:n.mode&1?(At=(r=At)||n.memoizedState!==null,mr(t,e,n),At=r):mr(t,e,n);break;default:mr(t,e,n)}}function xm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new F1),e.forEach(function(r){var s=Q1.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ht=l.stateNode,vn=!1;break e;case 3:ht=l.stateNode.containerInfo,vn=!0;break e;case 4:ht=l.stateNode.containerInfo,vn=!0;break e}l=l.return}if(ht===null)throw Error($(160));By(i,o,s),ht=null,vn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){qe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$y(e,t),e=e.sibling}function $y(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gn(e,t),Cn(t),r&4){try{oo(3,t,t.return),au(3,t)}catch(C){qe(t,t.return,C)}try{oo(5,t,t.return)}catch(C){qe(t,t.return,C)}}break;case 1:gn(e,t),Cn(t),r&512&&n!==null&&Bs(n,n.return);break;case 5:if(gn(e,t),Cn(t),r&512&&n!==null&&Bs(n,n.return),t.flags&32){var s=t.stateNode;try{vo(s,"")}catch(C){qe(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&d0(s,i),zc(l,o);var d=zc(l,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?g0(s,m):p==="dangerouslySetInnerHTML"?p0(s,m):p==="children"?vo(s,m):Zd(s,p,m,d)}switch(l){case"input":jc(s,i);break;case"textarea":h0(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Ws(s,!!i.multiple,x,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ws(s,!!i.multiple,i.defaultValue,!0):Ws(s,!!i.multiple,i.multiple?[]:"",!1))}s[To]=i}catch(C){qe(t,t.return,C)}}break;case 6:if(gn(e,t),Cn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){qe(t,t.return,C)}}break;case 3:if(gn(e,t),Cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Eo(e.containerInfo)}catch(C){qe(t,t.return,C)}break;case 4:gn(e,t),Cn(t);break;case 13:gn(e,t),Cn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ph=Ye())),r&4&&xm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(At=(d=At)||p,gn(e,t),At=d):gn(e,t),Cn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(K=t,p=t.child;p!==null;){for(m=K=p;K!==null;){switch(g=K,x=g.child,g.tag){case 0:case 11:case 14:case 15:oo(4,g,g.return);break;case 1:Bs(g,g.return);var T=g.stateNode;if(typeof T.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(C){qe(r,n,C)}}break;case 5:Bs(g,g.return);break;case 22:if(g.memoizedState!==null){bm(m);continue}}x!==null?(x.return=g,K=x):bm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=m0("display",o))}catch(C){qe(t,t.return,C)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(C){qe(t,t.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:gn(e,t),Cn(t),r&4&&xm(t);break;case 21:break;default:gn(e,t),Cn(t)}}function Cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Uy(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(vo(s,""),r.flags&=-33);var i=wm(t);gd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=wm(t);md(t,l,o);break;default:throw Error($(161))}}catch(u){qe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function U1(t,e,n){K=t,Hy(t)}function Hy(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var s=K,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||La;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||At;l=La;var d=At;if(La=o,(At=u)&&!d)for(K=s;K!==null;)o=K,u=o.child,o.tag===22&&o.memoizedState!==null?km(s):u!==null?(u.return=o,K=u):km(s);for(;i!==null;)K=i,Hy(i),i=i.sibling;K=s,La=l,At=d}Em(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,K=i):Em(t)}}function Em(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||au(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!At)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:yn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&om(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}om(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Eo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}At||e.flags&512&&pd(e)}catch(g){qe(e,e.return,g)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function bm(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function km(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{au(4,e)}catch(u){qe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){qe(e,s,u)}}var i=e.return;try{pd(e)}catch(u){qe(e,i,u)}break;case 5:var o=e.return;try{pd(e)}catch(u){qe(e,o,u)}}}catch(u){qe(e,e.return,u)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var B1=Math.ceil,Tl=lr.ReactCurrentDispatcher,Rh=lr.ReactCurrentOwner,un=lr.ReactCurrentBatchConfig,Ee=0,ct=null,et=null,mt=0,Yt=0,$s=Br(0),it=0,Do=null,fs=0,lu=0,Nh=0,ao=null,zt=null,Ph=0,ii=1/0,Gn=null,Cl=!1,yd=null,Ar=null,Oa=!1,Er=null,Al=0,lo=0,vd=null,el=-1,tl=0;function Ot(){return Ee&6?Ye():el!==-1?el:el=Ye()}function Rr(t){return t.mode&1?Ee&2&&mt!==0?mt&-mt:I1.transition!==null?(tl===0&&(tl=C0()),tl):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:j0(t.type)),t):1}function En(t,e,n,r){if(50<lo)throw lo=0,vd=null,Error($(185));Qo(t,n,r),(!(Ee&2)||t!==ct)&&(t===ct&&(!(Ee&2)&&(lu|=n),it===4&&wr(t,mt)),Ht(t,r),n===1&&Ee===0&&!(e.mode&1)&&(ii=Ye()+500,su&&$r()))}function Ht(t,e){var n=t.callbackNode;Ix(t,e);var r=hl(t,t===ct?mt:0);if(r===0)n!==null&&Dp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Dp(n),e===1)t.tag===0?k1(Im.bind(null,t)):ey(Im.bind(null,t)),w1(function(){!(Ee&6)&&$r()}),n=null;else{switch(A0(r)){case 1:n=sh;break;case 4:n=S0;break;case 16:n=dl;break;case 536870912:n=T0;break;default:n=dl}n=Jy(n,Wy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Wy(t,e){if(el=-1,tl=0,Ee&6)throw Error($(327));var n=t.callbackNode;if(Ys()&&t.callbackNode!==n)return null;var r=hl(t,t===ct?mt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Rl(t,r);else{e=r;var s=Ee;Ee|=2;var i=Gy();(ct!==t||mt!==e)&&(Gn=null,ii=Ye()+500,as(t,e));do try{W1();break}catch(l){qy(t,l)}while(!0);yh(),Tl.current=i,Ee=s,et!==null?e=0:(ct=null,mt=0,e=it)}if(e!==0){if(e===2&&(s=Wc(t),s!==0&&(r=s,e=_d(t,s))),e===1)throw n=Do,as(t,0),wr(t,r),Ht(t,Ye()),n;if(e===6)wr(t,r);else{if(s=t.current.alternate,!(r&30)&&!$1(s)&&(e=Rl(t,r),e===2&&(i=Wc(t),i!==0&&(r=i,e=_d(t,i))),e===1))throw n=Do,as(t,0),wr(t,r),Ht(t,Ye()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:ts(t,zt,Gn);break;case 3:if(wr(t,r),(r&130023424)===r&&(e=Ph+500-Ye(),10<e)){if(hl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ot(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Zc(ts.bind(null,t,zt,Gn),e);break}ts(t,zt,Gn);break;case 4:if(wr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-xn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*B1(r/1960))-r,10<r){t.timeoutHandle=Zc(ts.bind(null,t,zt,Gn),r);break}ts(t,zt,Gn);break;case 5:ts(t,zt,Gn);break;default:throw Error($(329))}}}return Ht(t,Ye()),t.callbackNode===n?Wy.bind(null,t):null}function _d(t,e){var n=ao;return t.current.memoizedState.isDehydrated&&(as(t,e).flags|=256),t=Rl(t,e),t!==2&&(e=zt,zt=n,e!==null&&wd(e)),t}function wd(t){zt===null?zt=t:zt.push.apply(zt,t)}function $1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!bn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wr(t,e){for(e&=~Nh,e&=~lu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xn(e),r=1<<n;t[n]=-1,e&=~r}}function Im(t){if(Ee&6)throw Error($(327));Ys();var e=hl(t,0);if(!(e&1))return Ht(t,Ye()),null;var n=Rl(t,e);if(t.tag!==0&&n===2){var r=Wc(t);r!==0&&(e=r,n=_d(t,r))}if(n===1)throw n=Do,as(t,0),wr(t,e),Ht(t,Ye()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ts(t,zt,Gn),Ht(t,Ye()),null}function Dh(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(ii=Ye()+500,su&&$r())}}function ps(t){Er!==null&&Er.tag===0&&!(Ee&6)&&Ys();var e=Ee;Ee|=1;var n=un.transition,r=Ce;try{if(un.transition=null,Ce=1,t)return t()}finally{Ce=r,un.transition=n,Ee=e,!(Ee&6)&&$r()}}function Vh(){Yt=$s.current,Le($s)}function as(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_1(n)),et!==null)for(n=et.return;n!==null;){var r=n;switch(ph(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yl();break;case 3:ri(),Le(Bt),Le(Nt),bh();break;case 5:Eh(r);break;case 4:ri();break;case 13:Le(ze);break;case 19:Le(ze);break;case 10:vh(r.type._context);break;case 22:case 23:Vh()}n=n.return}if(ct=t,et=t=Nr(t.current,null),mt=Yt=e,it=0,Do=null,Nh=lu=fs=0,zt=ao=null,ss!==null){for(e=0;e<ss.length;e++)if(n=ss[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ss=null}return t}function qy(t,e){do{var n=et;try{if(yh(),Xa.current=Sl,Il){for(var r=Ue.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Il=!1}if(hs=0,lt=nt=Ue=null,io=!1,Ro=0,Rh.current=null,n===null||n.return===null){it=1,Do=e,et=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=mt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=hm(o);if(x!==null){x.flags&=-257,fm(x,o,l,i,e),x.mode&1&&dm(i,d,e),e=x,u=d;var T=e.updateQueue;if(T===null){var C=new Set;C.add(u),e.updateQueue=C}else T.add(u);break e}else{if(!(e&1)){dm(i,d,e),jh();break e}u=Error($(426))}}else if(Me&&l.mode&1){var R=hm(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),fm(R,o,l,i,e),mh(si(u,l));break e}}i=u=si(u,l),it!==4&&(it=2),ao===null?ao=[i]:ao.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=Ay(i,u,e);im(i,b);break e;case 1:l=u;var _=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Ar===null||!Ar.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=Ry(i,l,e);im(i,D);break e}}i=i.return}while(i!==null)}Qy(n)}catch(O){e=O,et===n&&n!==null&&(et=n=n.return);continue}break}while(!0)}function Gy(){var t=Tl.current;return Tl.current=Sl,t===null?Sl:t}function jh(){(it===0||it===3||it===2)&&(it=4),ct===null||!(fs&268435455)&&!(lu&268435455)||wr(ct,mt)}function Rl(t,e){var n=Ee;Ee|=2;var r=Gy();(ct!==t||mt!==e)&&(Gn=null,as(t,e));do try{H1();break}catch(s){qy(t,s)}while(!0);if(yh(),Ee=n,Tl.current=r,et!==null)throw Error($(261));return ct=null,mt=0,it}function H1(){for(;et!==null;)Ky(et)}function W1(){for(;et!==null&&!gx();)Ky(et)}function Ky(t){var e=Xy(t.alternate,t,Yt);t.memoizedProps=t.pendingProps,e===null?Qy(t):et=e,Rh.current=null}function Qy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=M1(n,e),n!==null){n.flags&=32767,et=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{it=6,et=null;return}}else if(n=O1(n,e,Yt),n!==null){et=n;return}if(e=e.sibling,e!==null){et=e;return}et=e=t}while(e!==null);it===0&&(it=5)}function ts(t,e,n){var r=Ce,s=un.transition;try{un.transition=null,Ce=1,q1(t,e,n,r)}finally{un.transition=s,Ce=r}return null}function q1(t,e,n,r){do Ys();while(Er!==null);if(Ee&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Sx(t,i),t===ct&&(et=ct=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oa||(Oa=!0,Jy(dl,function(){return Ys(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=un.transition,un.transition=null;var o=Ce;Ce=1;var l=Ee;Ee|=4,Rh.current=null,z1(t,n),$y(n,t),h1(Xc),fl=!!Yc,Xc=Yc=null,t.current=n,U1(n),yx(),Ee=l,Ce=o,un.transition=i}else t.current=n;if(Oa&&(Oa=!1,Er=t,Al=s),i=t.pendingLanes,i===0&&(Ar=null),wx(n.stateNode),Ht(t,Ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Cl)throw Cl=!1,t=yd,yd=null,t;return Al&1&&t.tag!==0&&Ys(),i=t.pendingLanes,i&1?t===vd?lo++:(lo=0,vd=t):lo=0,$r(),null}function Ys(){if(Er!==null){var t=A0(Al),e=un.transition,n=Ce;try{if(un.transition=null,Ce=16>t?16:t,Er===null)var r=!1;else{if(t=Er,Er=null,Al=0,Ee&6)throw Error($(331));var s=Ee;for(Ee|=4,K=t.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(K=d;K!==null;){var p=K;switch(p.tag){case 0:case 11:case 15:oo(8,p,i)}var m=p.child;if(m!==null)m.return=p,K=m;else for(;K!==null;){p=K;var g=p.sibling,x=p.return;if(zy(p),p===d){K=null;break}if(g!==null){g.return=x,K=g;break}K=x}}}var T=i.alternate;if(T!==null){var C=T.child;if(C!==null){T.child=null;do{var R=C.sibling;C.sibling=null,C=R}while(C!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:oo(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,K=b;break e}K=i.return}}var _=t.current;for(K=_;K!==null;){o=K;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,K=I;else e:for(o=_;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:au(9,l)}}catch(O){qe(l,l.return,O)}if(l===o){K=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,K=D;break e}K=l.return}}if(Ee=s,$r(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(Zl,t)}catch{}r=!0}return r}finally{Ce=n,un.transition=e}}return!1}function Sm(t,e,n){e=si(n,e),e=Ay(t,e,1),t=Cr(t,e,1),e=Ot(),t!==null&&(Qo(t,1,e),Ht(t,e))}function qe(t,e,n){if(t.tag===3)Sm(t,t,n);else for(;e!==null;){if(e.tag===3){Sm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ar===null||!Ar.has(r))){t=si(n,t),t=Ry(e,t,1),e=Cr(e,t,1),t=Ot(),e!==null&&(Qo(e,1,t),Ht(e,t));break}}e=e.return}}function G1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ot(),t.pingedLanes|=t.suspendedLanes&n,ct===t&&(mt&n)===n&&(it===4||it===3&&(mt&130023424)===mt&&500>Ye()-Ph?as(t,0):Nh|=n),Ht(t,e)}function Yy(t,e){e===0&&(t.mode&1?(e=Ta,Ta<<=1,!(Ta&130023424)&&(Ta=4194304)):e=1);var n=Ot();t=rr(t,e),t!==null&&(Qo(t,e,n),Ht(t,n))}function K1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Yy(t,n)}function Q1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),Yy(t,n)}var Xy;Xy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bt.current)Ut=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ut=!1,L1(t,e,n);Ut=!!(t.flags&131072)}else Ut=!1,Me&&e.flags&1048576&&ty(e,wl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Za(t,e),t=e.pendingProps;var s=ei(e,Nt.current);Qs(e,n),s=Ih(null,e,r,t,s,n);var i=Sh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(r)?(i=!0,vl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wh(e),s.updater=ou,e.stateNode=s,s._reactInternals=e,od(e,r,t,n),e=ud(null,e,r,!0,i,n)):(e.tag=0,Me&&i&&fh(e),jt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Za(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=X1(r),t=yn(r,t),s){case 0:e=ld(null,e,r,t,n);break e;case 1:e=gm(null,e,r,t,n);break e;case 11:e=pm(null,e,r,t,n);break e;case 14:e=mm(null,e,r,yn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),ld(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),gm(t,e,r,s,n);case 3:e:{if(Vy(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,ay(t,e),bl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=si(Error($(423)),e),e=ym(t,e,r,n,s);break e}else if(r!==s){s=si(Error($(424)),e),e=ym(t,e,r,n,s);break e}else for(Xt=Tr(e.stateNode.containerInfo.firstChild),Jt=e,Me=!0,_n=null,n=iy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ti(),r===s){e=sr(t,e,n);break e}jt(t,e,r,n)}e=e.child}return e;case 5:return ly(e),t===null&&rd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Jc(r,s)?o=null:i!==null&&Jc(r,i)&&(e.flags|=32),Dy(t,e),jt(t,e,o,n),e.child;case 6:return t===null&&rd(e),null;case 13:return jy(t,e,n);case 4:return xh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ni(e,null,r,n):jt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),pm(t,e,r,s,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ne(xl,r._currentValue),r._currentValue=o,i!==null)if(bn(i.value,o)){if(i.children===s.children&&!Bt.current){e=sr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Jn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),sd(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),sd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}jt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Qs(e,n),s=hn(s),r=r(s),e.flags|=1,jt(t,e,r,n),e.child;case 14:return r=e.type,s=yn(r,e.pendingProps),s=yn(r.type,s),mm(t,e,r,s,n);case 15:return Ny(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yn(r,s),Za(t,e),e.tag=1,$t(r)?(t=!0,vl(e)):t=!1,Qs(e,n),Cy(e,r,s),od(e,r,s,n),ud(null,e,r,!0,t,n);case 19:return Ly(t,e,n);case 22:return Py(t,e,n)}throw Error($(156,e.tag))};function Jy(t,e){return I0(t,e)}function Y1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(t,e,n,r){return new Y1(t,e,n,r)}function Lh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function X1(t){if(typeof t=="function")return Lh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===th)return 11;if(t===nh)return 14}return 2}function Nr(t,e){var n=t.alternate;return n===null?(n=ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function nl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Lh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ds:return ls(n.children,s,i,e);case eh:o=8,s|=8;break;case Rc:return t=ln(12,n,e,s|2),t.elementType=Rc,t.lanes=i,t;case Nc:return t=ln(13,n,e,s),t.elementType=Nc,t.lanes=i,t;case Pc:return t=ln(19,n,e,s),t.elementType=Pc,t.lanes=i,t;case l0:return uu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case o0:o=10;break e;case a0:o=9;break e;case th:o=11;break e;case nh:o=14;break e;case gr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=ln(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ls(t,e,n,r){return t=ln(7,t,r,e),t.lanes=n,t}function uu(t,e,n,r){return t=ln(22,t,r,e),t.elementType=l0,t.lanes=n,t.stateNode={isHidden:!1},t}function dc(t,e,n){return t=ln(6,t,null,e),t.lanes=n,t}function hc(t,e,n){return e=ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function J1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qu(0),this.expirationTimes=qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Oh(t,e,n,r,s,i,o,l,u){return t=new J1(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ln(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wh(i),t}function Z1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ps,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Zy(t){if(!t)return jr;t=t._reactInternals;e:{if(_s(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if($t(n))return Z0(t,n,e)}return e}function ev(t,e,n,r,s,i,o,l,u){return t=Oh(n,r,!0,t,s,i,o,l,u),t.context=Zy(null),n=t.current,r=Ot(),s=Rr(n),i=Jn(r,s),i.callback=e??null,Cr(n,i,s),t.current.lanes=s,Qo(t,s,r),Ht(t,r),t}function cu(t,e,n,r){var s=e.current,i=Ot(),o=Rr(s);return n=Zy(n),e.context===null?e.context=n:e.pendingContext=n,e=Jn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cr(s,e,o),t!==null&&(En(t,s,o,i),Ya(t,s,o)),o}function Nl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mh(t,e){Tm(t,e),(t=t.alternate)&&Tm(t,e)}function eE(){return null}var tv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fh(t){this._internalRoot=t}du.prototype.render=Fh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));cu(t,e,null,null)};du.prototype.unmount=Fh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ps(function(){cu(null,t,null,null)}),e[nr]=null}};function du(t){this._internalRoot=t}du.prototype.unstable_scheduleHydration=function(t){if(t){var e=P0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_r.length&&e!==0&&e<_r[n].priority;n++);_r.splice(n,0,t),n===0&&V0(t)}};function zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cm(){}function tE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Nl(o);i.call(d)}}var o=ev(e,r,t,0,null,!1,!1,"",Cm);return t._reactRootContainer=o,t[nr]=o.current,Io(t.nodeType===8?t.parentNode:t),ps(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Nl(u);l.call(d)}}var u=Oh(t,0,!1,null,null,!1,!1,"",Cm);return t._reactRootContainer=u,t[nr]=u.current,Io(t.nodeType===8?t.parentNode:t),ps(function(){cu(e,u,n,r)}),u}function fu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Nl(o);l.call(u)}}cu(e,o,t,s)}else o=tE(n,e,t,s,r);return Nl(o)}R0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ki(e.pendingLanes);n!==0&&(ih(e,n|1),Ht(e,Ye()),!(Ee&6)&&(ii=Ye()+500,$r()))}break;case 13:ps(function(){var r=rr(t,1);if(r!==null){var s=Ot();En(r,t,1,s)}}),Mh(t,1)}};oh=function(t){if(t.tag===13){var e=rr(t,134217728);if(e!==null){var n=Ot();En(e,t,134217728,n)}Mh(t,134217728)}};N0=function(t){if(t.tag===13){var e=Rr(t),n=rr(t,e);if(n!==null){var r=Ot();En(n,t,e,r)}Mh(t,e)}};P0=function(){return Ce};D0=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};Bc=function(t,e,n){switch(e){case"input":if(jc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ru(r);if(!s)throw Error($(90));c0(r),jc(r,s)}}}break;case"textarea":h0(t,n);break;case"select":e=n.value,e!=null&&Ws(t,!!n.multiple,e,!1)}};_0=Dh;w0=ps;var nE={usingClientEntryPoint:!1,Events:[Xo,Os,ru,y0,v0,Dh]},Hi={findFiberByHostInstance:rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rE={bundleType:Hi.bundleType,version:Hi.version,rendererPackageName:Hi.rendererPackageName,rendererConfig:Hi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=b0(t),t===null?null:t.stateNode},findFiberByHostInstance:Hi.findFiberByHostInstance||eE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ma.isDisabled&&Ma.supportsFiber)try{Zl=Ma.inject(rE),Pn=Ma}catch{}}en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nE;en.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zh(e))throw Error($(200));return Z1(t,e,null,n)};en.createRoot=function(t,e){if(!zh(t))throw Error($(299));var n=!1,r="",s=tv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Oh(t,1,!1,null,null,n,!1,r,s),t[nr]=e.current,Io(t.nodeType===8?t.parentNode:t),new Fh(e)};en.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=b0(e),t=t===null?null:t.stateNode,t};en.flushSync=function(t){return ps(t)};en.hydrate=function(t,e,n){if(!hu(e))throw Error($(200));return fu(null,t,e,!0,n)};en.hydrateRoot=function(t,e,n){if(!zh(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=tv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ev(e,null,t,1,n??null,s,!1,i,o),t[nr]=e.current,Io(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new du(e)};en.render=function(t,e,n){if(!hu(e))throw Error($(200));return fu(null,t,e,!1,n)};en.unmountComponentAtNode=function(t){if(!hu(t))throw Error($(40));return t._reactRootContainer?(ps(function(){fu(null,null,t,!1,function(){t._reactRootContainer=null,t[nr]=null})}),!0):!1};en.unstable_batchedUpdates=Dh;en.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hu(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return fu(t,e,n,!1,r)};en.version="18.3.1-next-f1338f8080-20240426";function nv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nv)}catch(t){console.error(t)}}nv(),n0.exports=en;var Hs=n0.exports,Am=Hs;Cc.createRoot=Am.createRoot,Cc.hydrateRoot=Am.hydrateRoot;const Te=()=>Math.random().toString(36).substring(2,9),de="folder_default",me="group_default",xd="trip_group_default",fc=[{name:"Amber",class:"bg-amber-50 text-amber-700 border-amber-200"},{name:"Blue",class:"bg-blue-50 text-blue-700 border-blue-200"},{name:"Purple",class:"bg-purple-50 text-purple-700 border-purple-200"},{name:"Emerald",class:"bg-emerald-50 text-emerald-700 border-emerald-200"},{name:"Slate",class:"bg-slate-50 text-slate-700 border-slate-200"},{name:"Red",class:"bg-red-50 text-red-700 border-red-200"},{name:"Orange",class:"bg-orange-50 text-orange-700 border-orange-200"},{name:"Teal",class:"bg-teal-50 text-teal-700 border-teal-200"},{name:"Pink",class:"bg-pink-50 text-pink-700 border-pink-200"},{name:"Indigo",class:"bg-indigo-50 text-indigo-700 border-indigo-200"}],pc=[{id:"cat_tools",name:"/",color:"bg-amber-50 text-amber-700 border-amber-200"},{id:"cat_hardware",name:"/PCBA",color:"bg-blue-50 text-blue-700 border-blue-200"},{id:"cat_cables",name:"/",color:"bg-purple-50 text-purple-700 border-purple-200"},{id:"cat_software",name:"/",color:"bg-emerald-50 text-emerald-700 border-emerald-200"},{id:"cat_docs",name:"/",color:"bg-slate-50 text-slate-700 border-slate-200"}],sE=[{id:de,name:" (Business)",isSystem:!0},{id:"folder_travel",name:" (Travel)",isSystem:!1}],iE=[{id:me,folderId:de,name:"",isSystem:!0},{id:"group_travel_default",folderId:"folder_travel",name:"",isSystem:!0}],oE=[{id:"item_stlink",folderId:de,groupId:me,category:"cat_tools",name:"ST-Link (U2-04)",defaultVersion:""},{id:Te(),folderId:de,groupId:me,category:"cat_tools",name:"U-4P-10",defaultVersion:""},{id:Te(),folderId:de,groupId:me,category:"cat_tools",name:"3.3v PWR-5",defaultVersion:""},{id:Te(),folderId:de,groupId:me,category:"cat_tools",name:"U-TTL-4 (WIFI)",defaultVersion:""},{id:Te(),folderId:de,groupId:me,category:"cat_tools",name:"",defaultVersion:""},{id:Te(),folderId:de,groupId:me,category:"cat_tools",name:"-2",defaultVersion:""},{id:Te(),folderId:de,groupId:me,category:"cat_tools",name:"USB-3p -1",defaultVersion:""},{id:Te(),folderId:de,groupId:me,category:"cat_tools",name:"USB-3p -2",defaultVersion:""},{id:Te(),folderId:de,groupId:me,category:"cat_tools",name:"",defaultVersion:""},{id:Te(),folderId:de,groupId:me,category:"cat_tools",name:"ROS3 (UR8UR10)",defaultVersion:""},{id:Te(),folderId:de,groupId:me,category:"cat_hardware",name:"OSG PCBA ++",defaultVersion:"V1.6"},{id:Te(),folderId:de,groupId:me,category:"cat_hardware",name:"ROS PVBA +Ozon",defaultVersion:"V1.73"},{id:Te(),folderId:de,groupId:me,category:"cat_hardware",name:"ROSV",defaultVersion:"1.7"},{id:Te(),folderId:de,groupId:me,category:"cat_hardware",name:"Ozone",defaultVersion:"122"},{id:Te(),folderId:de,groupId:me,category:"cat_hardware",name:"ROS",defaultVersion:"9"},{id:Te(),folderId:de,groupId:me,category:"cat_hardware",name:"Alpha Sensor",defaultVersion:""},{id:Te(),folderId:de,groupId:me,category:"cat_hardware",name:"PCB (/)",defaultVersion:""},{id:"item_charger",folderId:de,groupId:me,category:"cat_cables",name:" (1316)",defaultVersion:""},{id:Te(),folderId:de,groupId:me,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C1"},{id:"item_cable_white",folderId:de,groupId:me,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C2"},{id:Te(),folderId:de,groupId:me,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C1"},{id:Te(),folderId:de,groupId:me,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C1"},{id:Te(),folderId:de,groupId:me,category:"cat_cables",name:"USB PORT Hub",defaultVersion:"*1"},{id:Te(),folderId:de,groupId:me,category:"cat_cables",name:"",defaultVersion:""},{id:Te(),folderId:de,groupId:me,category:"cat_cables",name:"",defaultVersion:"8"},{id:Te(),folderId:de,groupId:me,category:"cat_cables",name:" (CL+S1+)",defaultVersion:"2"},{id:Te(),folderId:de,groupId:me,category:"cat_software",name:"S1_DFU",defaultVersion:"0624"},{id:Te(),folderId:de,groupId:me,category:"cat_software",name:"S1_AP",defaultVersion:"0804"},{id:Te(),folderId:de,groupId:me,category:"cat_software",name:"ROS_DFU",defaultVersion:"0624"},{id:Te(),folderId:de,groupId:me,category:"cat_software",name:"ROS_AP",defaultVersion:"0730"},{id:Te(),folderId:de,groupId:me,category:"cat_software",name:"OSG_DFU",defaultVersion:"0624"},{id:Te(),folderId:de,groupId:me,category:"cat_software",name:"OSG_AP",defaultVersion:"0723"}],aE=[{id:"bundle_laptop",name:"",items:[{inventoryId:"item_charger",qty:1},{inventoryId:"item_cable_white",qty:1}]},{id:"bundle_burn",name:"",items:[{inventoryId:"item_stlink",qty:1}]}];/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),he=(t,e)=>{const n=N.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...d},p)=>N.createElement("svg",{ref:p,...lE,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${uE(t)}`,l].join(" "),...d},[...e.map(([m,g])=>N.createElement(m,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=he("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=he("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=he("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=he("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=he("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=he("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=he("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=he("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=he("DownloadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=he("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=he("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=he("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=he("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=he("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=he("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=he("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=he("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=he("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=he("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=he("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=he("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=he("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=he("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=he("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=he("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=he("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=he("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=he("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=he("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=he("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),VE=({items:t,setItems:e,folders:n,setFolders:r,groups:s,setGroups:i,categories:o,setCategories:l,bundles:u,setBundles:d})=>{var Hn,qr,Gr,Tn,Fe;const[p,m]=N.useState("ITEMS"),[g,x]=N.useState(((Hn=n[0])==null?void 0:Hn.id)||de),[T,C]=N.useState("ALL"),[R,b]=N.useState(""),[_,I]=N.useState("ALL"),[D,O]=N.useState(!1),[F,w]=N.useState(""),[y,E]=N.useState(((qr=o[0])==null?void 0:qr.id)||""),[k,A]=N.useState(""),[P,S]=N.useState(!1),[ve,He]=N.useState(""),[_t,Ie]=N.useState(!1),[H,Q]=N.useState(""),[X,fe]=N.useState(!1),[z,G]=N.useState(!1),[se,ue]=N.useState(null),[re,Se]=N.useState(""),[Pe,Ke]=N.useState(fc[0].class),[M,J]=N.useState(null),[Z,ce]=N.useState(!1),[De,wt]=N.useState(""),[xt,Fn]=N.useState([]);N.useEffect(()=>{C("ALL")},[g]),N.useEffect(()=>{!y&&o.length>0&&E(o[0].id)},[o,y]);const Hr=((Gr=n.find(j=>j.id===g))==null?void 0:Gr.name)||"",qt=s.filter(j=>j.folderId===g),Pt=((Tn=qt.find(j=>j.isSystem))==null?void 0:Tn.id)||(qt.length>0?qt[0].id:me),zn=j=>{window.confirm("")&&e(q=>q.filter(ie=>ie.id!==j))},ur=()=>{F.trim()&&(e(j=>[...j,{id:Math.random().toString(36).substring(2,9),folderId:g,groupId:T==="ALL"?Pt:T,name:F,category:y,defaultVersion:k}]),w(""),A(""),O(!1))},Un=()=>{if(!ve.trim())return;const j=Math.random().toString(36).substring(2,9);r(q=>[...q,{id:j,name:ve,isSystem:!1}]),i(q=>[...q,{id:Math.random().toString(36).substring(2,9),folderId:j,name:"",isSystem:!0}]),He(""),S(!1),x(j)},cr=(j,q)=>{j.stopPropagation(),window.confirm("")&&(e(ie=>ie.map(ee=>ee.folderId===q?{...ee,folderId:de,groupId:me}:ee)),i(ie=>ie.filter(ee=>ee.folderId!==q)),r(ie=>ie.filter(ee=>ee.id!==q)),g===q&&x(de))},Wr=()=>{if(!H.trim())return;const j={id:Math.random().toString(36).substring(2,9),folderId:g,name:H,isSystem:!1};i(q=>[...q,j]),Q(""),Ie(!1),C(j.id)},Xe=(j,q)=>{j.stopPropagation(),window.confirm("")&&(e(ie=>ie.map(ee=>ee.groupId===q?{...ee,groupId:Pt}:ee)),i(ie=>ie.filter(ee=>ee.id!==q)),T===q&&C("ALL"))},Oe=()=>{re.trim()&&(l(j=>[...j,{id:Math.random().toString(36).substring(2,9),name:re,color:Pe}]),Se(""),G(!1))},Gt=()=>{!re.trim()||!se||(l(j=>j.map(q=>q.id===se?{...q,name:re,color:Pe}:q)),ue(null),Se(""))},In=j=>{window.confirm("")&&l(q=>q.filter(ie=>ie.id!==j))},dr=()=>{ce(!0),J(null),wt(""),Fn([])},nn=j=>{ce(!0),J(j.id),wt(j.name),Fn([...j.items])},Sn=()=>{if(!De.trim()){alert("");return}const j={id:M||Math.random().toString(36).substring(2,9),name:De,items:xt};d(M?q=>q.map(ie=>ie.id===M?j:ie):q=>[...q,j]),ce(!1),J(null)},bs=(j,q)=>{j.stopPropagation(),window.confirm("")&&d(ie=>ie.filter(ee=>ee.id!==q)),M===q&&ce(!1)},ks=j=>{Fn(q=>q.find(ee=>ee.inventoryId===j)?q.filter(ee=>ee.inventoryId!==j):[...q,{inventoryId:j,qty:1}])},Bn=(j,q)=>{Fn(ie=>ie.map(ee=>ee.inventoryId===j?{...ee,qty:q}:ee))},$n=t.filter(j=>{if(p==="BUNDLES"&&Z){const ee=j.name.toLowerCase().includes(R.toLowerCase()),Je=_==="ALL"||j.category===_;return ee&&Je}if(j.folderId!==g||T!=="ALL"&&j.groupId!==T)return!1;const q=j.name.toLowerCase().includes(R.toLowerCase()),ie=_==="ALL"||j.category===_;return q&&ie}),Ti=j=>o.find(q=>q.id===j)||{name:"",color:"bg-gray-100 text-gray-600 border-gray-200"};return f.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 min-h-[600px]",children:[X&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:f.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-lg shadow-2xl max-h-[80vh] flex flex-col border border-slate-200 dark:border-slate-700",children:[f.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[f.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2 text-slate-800 dark:text-white",children:[f.jsx(jm,{size:20})," "]}),f.jsx("button",{onClick:()=>fe(!1),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full text-slate-500",children:f.jsx(Xn,{size:20})})]}),f.jsxs("div",{className:"p-4 overflow-y-auto flex-1 space-y-4",children:[(z||se)&&f.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-3 rounded-lg border border-slate-200 dark:border-slate-700 space-y-3",children:[f.jsx("h4",{className:"text-sm font-bold text-slate-500 dark:text-slate-400",children:se?"":""}),f.jsx("div",{className:"flex gap-2",children:f.jsx("input",{autoFocus:!0,className:"flex-1 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white rounded px-2 py-1 text-sm outline-none focus:border-blue-500",placeholder:"",value:re,onChange:j=>Se(j.target.value)})}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:""}),f.jsx("div",{className:"flex flex-wrap gap-2",children:fc.map((j,q)=>f.jsx("button",{onClick:()=>Ke(j.class),className:`w-6 h-6 rounded-full border ${j.class.replace("bg-","bg-").replace("text-","text-").split(" ")[0]} ${Pe===j.class?"ring-2 ring-offset-1 ring-slate-400":""}`,title:j.name},q))}),f.jsx("div",{className:`mt-2 text-xs px-2 py-1 rounded border w-fit ${Pe}`,children:""})]}),f.jsxs("div",{className:"flex gap-2 pt-2",children:[f.jsx("button",{onClick:se?Gt:Oe,className:"flex-1 bg-blue-600 text-white py-1 rounded text-sm hover:bg-blue-700",children:se?"":""}),f.jsx("button",{onClick:()=>{G(!1),ue(null),Se("")},className:"flex-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-200 py-1 rounded text-sm hover:bg-slate-50 dark:hover:bg-slate-600",children:""})]})]}),!z&&!se&&f.jsxs("button",{onClick:()=>{G(!0),Se(""),Ke(fc[0].class)},className:"w-full py-2 border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-lg text-slate-400 hover:border-blue-300 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-slate-700 flex items-center justify-center gap-1 text-sm",children:[f.jsx(Nn,{size:16})," "]}),f.jsx("div",{className:"space-y-2",children:o.map(j=>f.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-lg shadow-sm group",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:`w-4 h-4 rounded-full ${j.color.split(" ")[0].replace("text-","bg-").replace("border-","")} border opacity-50`}),f.jsx("span",{className:`text-sm px-2 py-0.5 rounded border ${j.color}`,children:j.name})]}),f.jsxs("div",{className:"flex gap-1",children:[f.jsx("button",{onClick:()=>{ue(j.id),Se(j.name),Ke(j.color),G(!1)},className:"p-1 text-slate-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-slate-700 rounded",children:f.jsx(TE,{size:16})}),f.jsx("button",{onClick:()=>In(j.id),className:"p-1 text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-slate-700 rounded",children:f.jsx(Yi,{size:16})})]})]},j.id))})]})]})}),f.jsx("div",{className:"w-full lg:w-64 flex-shrink-0 space-y-4",children:f.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col h-full min-h-[500px]",children:[f.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg mb-4 shrink-0",children:[f.jsx("button",{onClick:()=>m("ITEMS"),className:`flex-1 py-1.5 text-sm font-medium rounded-md transition-all ${p==="ITEMS"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:""}),f.jsx("button",{onClick:()=>{m("BUNDLES"),ce(!1)},className:`flex-1 py-1.5 text-sm font-medium rounded-md transition-all ${p==="BUNDLES"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:" "})]}),p==="ITEMS"?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[f.jsxs("h2",{className:"font-bold text-slate-700 dark:text-slate-200 flex items-center gap-2",children:[f.jsx(Nm,{size:18}),""]}),f.jsx("button",{onClick:()=>S(!0),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded text-blue-600 dark:text-blue-400",title:"",children:f.jsx(vE,{size:18})})]}),P&&f.jsxs("div",{className:"mb-4 bg-blue-50 dark:bg-slate-700 p-2 rounded-lg border border-blue-100 dark:border-slate-600 shrink-0",children:[f.jsx("input",{autoFocus:!0,type:"text",placeholder:"...",value:ve,onChange:j=>He(j.target.value),onKeyDown:j=>j.key==="Enter"&&Un(),className:"w-full text-sm p-1.5 border border-blue-200 dark:border-slate-500 bg-white dark:bg-slate-800 text-slate-900 dark:text-white rounded mb-2 outline-none"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:Un,className:"flex-1 bg-blue-600 text-white text-xs py-1 rounded",children:""}),f.jsx("button",{onClick:()=>S(!1),className:"flex-1 bg-white dark:bg-slate-600 text-slate-500 dark:text-slate-200 text-xs py-1 rounded border dark:border-slate-500",children:""})]})]}),f.jsx("div",{className:"space-y-1 overflow-y-auto flex-1",children:n.map(j=>f.jsxs("div",{onClick:()=>x(j.id),className:`group flex items-center justify-between p-2.5 rounded-lg cursor-pointer transition-all border ${g===j.id?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-400 shadow-sm":"hover:bg-slate-50 dark:hover:bg-slate-700 border-transparent text-slate-600 dark:text-slate-400"}`,children:[f.jsxs("div",{className:"flex items-center gap-2 truncate",children:[f.jsx(Nm,{size:16,className:g===j.id?"fill-blue-200 dark:fill-blue-900":""}),f.jsx("span",{className:"text-sm font-medium truncate",children:j.name})]}),!j.isSystem&&f.jsx("button",{onClick:q=>cr(q,j.id),className:"opacity-0 group-hover:opacity-100 text-slate-400 hover:text-red-500 transition-opacity p-1",children:f.jsx(Yi,{size:14})})]},j.id))})]}):f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:dr,className:"w-full mb-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 flex items-center justify-center gap-2 shrink-0",children:[f.jsx(IE,{size:16})," "]}),f.jsx("p",{className:"text-xs text-slate-400 mb-2 shrink-0",children:""}),f.jsx("div",{className:"space-y-2 overflow-y-auto flex-1",children:u.map(j=>f.jsx("div",{onClick:()=>nn(j),className:`group p-3 rounded-lg border cursor-pointer transition-all ${M===j.id&&Z?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 ring-1 ring-blue-300 dark:ring-blue-700":"bg-slate-50 dark:bg-slate-700/50 border-slate-200 dark:border-slate-600 hover:bg-white dark:hover:bg-slate-700"}`,children:f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h4",{className:`font-bold ${M===j.id&&Z?"text-blue-700 dark:text-blue-300":"text-slate-700 dark:text-slate-200"}`,children:j.name}),f.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[j.items.length," "]})]}),f.jsx("div",{className:"flex gap-1",children:f.jsx("button",{onClick:q=>bs(q,j.id),className:"p-1 text-slate-400 hover:text-red-600 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(Yi,{size:14})})})]})},j.id))})]})]})}),f.jsx("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col overflow-hidden",children:p==="BUNDLES"?Z?f.jsxs("div",{className:"flex flex-col h-full animate-in fade-in",children:[f.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[f.jsx(sv,{size:24,className:"text-blue-600 dark:text-blue-400"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-xs text-slate-400 font-bold uppercase tracking-wider mb-1",children:""}),f.jsx("input",{className:"w-full bg-transparent text-xl font-bold text-slate-800 dark:text-white border-b border-transparent hover:border-slate-300 focus:border-blue-500 focus:outline-none",placeholder:"...",value:De,onChange:j=>wt(j.target.value)})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>ce(!1),className:"px-4 py-2 text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700 rounded-lg",children:""}),f.jsxs("button",{onClick:Sn,className:"flex items-center gap-2 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 font-medium shadow-sm",children:[f.jsx(iv,{size:18})," "]})]})]}),f.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 flex flex-col md:flex-row gap-2 items-center bg-white dark:bg-slate-800",children:[f.jsxs("div",{className:"relative flex-1 w-full",children:[f.jsx(Pl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),f.jsx("input",{type:"text",placeholder:"...",value:R,onChange:j=>b(j.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white focus:ring-1 focus:ring-blue-500 outline-none"})]}),f.jsxs("select",{value:_,onChange:j=>I(j.target.value),className:"bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2 text-slate-900 dark:text-white focus:ring-1 focus:ring-blue-500 outline-none",children:[f.jsx("option",{value:"ALL",children:""}),o.map(j=>f.jsx("option",{value:j.id,children:j.name},j.id))]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-slate-50/50 dark:bg-slate-900/20",children:[f.jsxs("p",{className:"text-sm text-slate-500 mb-4 flex items-center gap-2",children:[f.jsx(Rm,{size:16})," "]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:$n.map(j=>{const q=xt.find(ee=>ee.inventoryId===j.id),ie=Ti(j.category);return f.jsxs("div",{onClick:()=>ks(j.id),className:`relative flex flex-col p-3 rounded-xl border cursor-pointer transition-all ${q?"bg-blue-50 dark:bg-blue-900/20 border-blue-400 dark:border-blue-500 ring-1 ring-blue-400 dark:ring-blue-500":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-blue-300"}`,children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${ie.color}`,children:ie.name}),q?f.jsx(Rm,{className:"text-blue-600 dark:text-blue-400",size:20}):f.jsx(AE,{className:"text-slate-300 dark:text-slate-600",size:20})]}),f.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-1",children:j.name}),q&&f.jsxs("div",{className:"mt-2 pt-2 border-t border-blue-200 dark:border-blue-800 flex items-center justify-between",onClick:ee=>ee.stopPropagation(),children:[f.jsx("span",{className:"text-xs font-bold text-blue-700 dark:text-blue-300",children:":"}),f.jsx("input",{type:"number",min:"1",value:q.qty,onChange:ee=>Bn(j.id,parseInt(ee.target.value)||1),className:"w-16 text-center text-sm font-bold bg-white dark:bg-slate-900 border border-blue-300 dark:border-blue-700 text-blue-800 dark:text-blue-100 rounded py-1 outline-none focus:ring-2 focus:ring-blue-500"})]})]},j.id)})})]})]}):f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[f.jsx(cE,{size:64,className:"mb-4 opacity-20"}),f.jsx("p",{className:"text-lg font-medium",children:""}),f.jsx("p",{className:"text-sm opacity-70 mb-6",children:""}),f.jsx("button",{onClick:dr,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:""})]}):f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800 flex flex-col gap-4",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:Hr}),f.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:[$n.length," "]})]}),f.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-2 bg-slate-800 dark:bg-slate-700 text-white px-4 py-2 rounded-lg hover:bg-slate-700 dark:hover:bg-slate-600 transition-colors shadow-md text-sm",children:[f.jsx(Nn,{size:16}),f.jsx("span",{children:""})]})]}),f.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(wE,{size:14,className:"text-slate-400"}),f.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:""})]}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx("button",{onClick:()=>C("ALL"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${T==="ALL"?"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-white border-slate-300 dark:border-slate-600":"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-700"}`,children:""}),qt.map(j=>f.jsxs("div",{className:`group flex items-center gap-1 pl-3 pr-2 py-1.5 rounded-lg border transition-all ${T===j.id?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-400":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:border-blue-200 dark:hover:border-blue-700"}`,onClick:()=>C(j.id),children:[f.jsx("span",{className:"text-sm font-medium cursor-pointer",children:j.name}),!j.isSystem&&f.jsx("button",{onClick:q=>Xe(q,j.id),className:"ml-1 p-0.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-slate-700 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(Xn,{size:12})})]},j.id)),_t?f.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 dark:bg-slate-700 p-1 rounded-lg border border-slate-200 dark:border-slate-600 animate-in fade-in",children:[f.jsx("input",{autoFocus:!0,className:"w-24 text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-2 py-0.5 rounded border border-slate-200 dark:border-slate-600 outline-none focus:border-blue-300",placeholder:"",value:H,onChange:j=>Q(j.target.value),onKeyDown:j=>j.key==="Enter"&&Wr()}),f.jsx("button",{onClick:Wr,className:"bg-blue-500 text-white p-0.5 rounded hover:bg-blue-600",children:f.jsx(Nn,{size:14})}),f.jsx("button",{onClick:()=>Ie(!1),className:"text-slate-400 hover:text-slate-600 p-0.5",children:f.jsx(Xn,{size:14})})]}):f.jsxs("button",{onClick:()=>Ie(!0),className:"px-2 py-1.5 rounded-lg border border-dashed border-slate-300 dark:border-slate-600 text-slate-400 hover:text-blue-600 hover:border-blue-300 hover:bg-blue-50 dark:hover:bg-slate-700 transition-all flex items-center gap-1 text-sm",children:[f.jsx(Nn,{size:14}),""]})]})]})]}),D&&f.jsxs("div",{className:"bg-blue-50 dark:bg-slate-700/50 border-b border-blue-200 dark:border-slate-600 p-6 shadow-inner animate-in fade-in slide-in-from-top-4",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsxs("h3",{className:"font-bold text-blue-900 dark:text-blue-200 flex items-center gap-2",children:[f.jsx(Nn,{size:18}),"",Hr,"",T!=="ALL"&&f.jsx("span",{className:"text-blue-600 dark:text-blue-300 text-sm bg-white dark:bg-slate-800 px-2 py-0.5 rounded-full shadow-sm",children:(Fe=qt.find(j=>j.id===T))==null?void 0:Fe.name})]}),f.jsx("button",{onClick:()=>O(!1),className:"text-blue-500 hover:text-blue-700",children:f.jsx(Xn,{size:20})})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[f.jsxs("div",{className:"md:col-span-4",children:[f.jsx("label",{className:"block text-sm font-medium text-blue-900 dark:text-blue-200 mb-1",children:""}),f.jsx("input",{type:"text",value:F,onChange:j=>w(j.target.value),placeholder:": ST-Link",className:"w-full bg-white dark:bg-slate-800 border border-blue-200 dark:border-slate-600 rounded-lg px-3 py-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),f.jsxs("div",{className:"md:col-span-3",children:[f.jsx("label",{className:"block text-sm font-medium text-blue-900 dark:text-blue-200 mb-1",children:""}),f.jsx("select",{value:y,onChange:j=>E(j.target.value),className:"w-full bg-white dark:bg-slate-800 border border-blue-200 dark:border-slate-600 rounded-lg px-3 py-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:o.map(j=>f.jsx("option",{value:j.id,children:j.name},j.id))})]}),f.jsxs("div",{className:"md:col-span-3",children:[f.jsx("label",{className:"block text-sm font-medium text-blue-900 dark:text-blue-200 mb-1",children:"/"}),f.jsx("input",{type:"text",value:k,onChange:j=>A(j.target.value),placeholder:": V1.6",className:"w-full bg-white dark:bg-slate-800 border border-blue-200 dark:border-slate-600 rounded-lg px-3 py-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),f.jsx("div",{className:"md:col-span-2 flex items-end",children:f.jsx("button",{onClick:ur,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 font-medium shadow-sm",children:""})})]})]}),f.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800 flex flex-col md:flex-row gap-4 items-center",children:[f.jsxs("div",{className:"relative flex-1 w-full",children:[f.jsx(Pl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),f.jsx("input",{type:"text",placeholder:"...",value:R,onChange:j=>b(j.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-slate-400 outline-none shadow-sm"})]}),f.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[f.jsxs("select",{value:_,onChange:j=>I(j.target.value),className:"bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg px-4 py-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-slate-400 outline-none shadow-sm cursor-pointer flex-1 md:flex-none",children:[f.jsx("option",{value:"ALL",children:""}),o.map(j=>f.jsx("option",{value:j.id,children:j.name},j.id))]}),f.jsx("button",{onClick:()=>fe(!0),className:"px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 hover:text-blue-600 transition-colors shadow-sm flex items-center gap-2 whitespace-nowrap",title:"",children:f.jsx(jm,{size:18})})]})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-slate-50/30 dark:bg-slate-900/30",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[$n.map(j=>{var tt;const q=((tt=qt.find(Kt=>Kt.id===j.groupId))==null?void 0:tt.name)||"",ie=o.find(Kt=>Kt.id===j.category),ee=(ie==null?void 0:ie.color)||"bg-gray-100 text-gray-600 border-gray-200",Je=(ie==null?void 0:ie.name)||"";return f.jsxs("div",{className:"group bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${ee}`,children:Je}),f.jsx("span",{className:"text-xs px-2 py-1 rounded-full border border-slate-100 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400",children:q})]}),f.jsx("button",{onClick:()=>zn(j.id),className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(Yi,{size:16})})]}),f.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-lg",children:j.name}),j.defaultVersion&&f.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[": ",f.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1 rounded text-slate-700 dark:text-slate-300",children:j.defaultVersion})]})]},j.id)}),$n.length===0&&f.jsx("div",{className:"col-span-full text-center py-12 text-slate-400 border border-dashed border-slate-200 dark:border-slate-700 rounded-xl",children:R||_!=="ALL"||T!=="ALL"?"":""})]})})]})})]})};function jE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const pu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function wi(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Uh(t){return"nodeType"in t}function Wt(t){var e,n;return t?wi(t)?t:Uh(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Bh(t){const{Document:e}=Wt(t);return t instanceof e}function Zo(t){return wi(t)?!1:t instanceof Wt(t).HTMLElement}function ov(t){return t instanceof Wt(t).SVGElement}function xi(t){return t?wi(t)?t.document:Uh(t)?Bh(t)?t:Zo(t)||ov(t)?t.ownerDocument:document:document:document}const Ln=pu?N.useLayoutEffect:N.useEffect;function $h(t){const e=N.useRef(t);return Ln(()=>{e.current=t}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function LE(){const t=N.useRef(null),e=N.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=N.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Vo(t,e){e===void 0&&(e=[t]);const n=N.useRef(t);return Ln(()=>{n.current!==t&&(n.current=t)},e),n}function ea(t,e){const n=N.useRef();return N.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Dl(t){const e=$h(t),n=N.useRef(null),r=N.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function bd(t){const e=N.useRef();return N.useEffect(()=>{e.current=t},[t]),e.current}let mc={};function ta(t,e){return N.useMemo(()=>{if(e)return e;const n=mc[t]==null?0:mc[t]+1;return mc[t]=n,t+"-"+n},[t,e])}function av(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const l=Object.entries(o);for(const[u,d]of l){const p=i[u];p!=null&&(i[u]=p+t*d)}return i},{...e})}}const Xs=av(1),jo=av(-1);function OE(t){return"clientX"in t&&"clientY"in t}function Hh(t){if(!t)return!1;const{KeyboardEvent:e}=Wt(t.target);return e&&t instanceof e}function ME(t){if(!t)return!1;const{TouchEvent:e}=Wt(t.target);return e&&t instanceof e}function kd(t){if(ME(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return OE(t)?{x:t.clientX,y:t.clientY}:null}const Lo=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Lo.Translate.toString(t),Lo.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Lm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function FE(t){return t.matches(Lm)?t:t.querySelector(Lm)}const zE={display:"none"};function UE(t){let{id:e,value:n}=t;return Lt.createElement("div",{id:e,style:zE},n)}function BE(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Lt.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function $E(){const[t,e]=N.useState("");return{announce:N.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const lv=N.createContext(null);function HE(t){const e=N.useContext(lv);N.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function WE(){const[t]=N.useState(()=>new Set),e=N.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[N.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,i)})},[t]),e]}const qE={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},GE={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function KE(t){let{announcements:e=GE,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=qE}=t;const{announce:i,announcement:o}=$E(),l=ta("DndLiveRegion"),[u,d]=N.useState(!1);if(N.useEffect(()=>{d(!0)},[]),HE(N.useMemo(()=>({onDragStart(m){let{active:g}=m;i(e.onDragStart({active:g}))},onDragMove(m){let{active:g,over:x}=m;e.onDragMove&&i(e.onDragMove({active:g,over:x}))},onDragOver(m){let{active:g,over:x}=m;i(e.onDragOver({active:g,over:x}))},onDragEnd(m){let{active:g,over:x}=m;i(e.onDragEnd({active:g,over:x}))},onDragCancel(m){let{active:g,over:x}=m;i(e.onDragCancel({active:g,over:x}))}}),[i,e])),!u)return null;const p=Lt.createElement(Lt.Fragment,null,Lt.createElement(UE,{id:r,value:s.draggable}),Lt.createElement(BE,{id:l,announcement:o}));return n?Hs.createPortal(p,n):p}var rt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(rt||(rt={}));function Vl(){}function Om(t,e){return N.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function QE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const kn=Object.freeze({x:0,y:0});function uv(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function cv(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function YE(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Mm(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function dv(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Fm(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const XE=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Fm(e,e.left,e.top),i=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const d=uv(Fm(u),s);i.push({id:l,data:{droppableContainer:o,value:d}})}}return i.sort(cv)},JE=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Mm(e),i=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const d=Mm(u),p=s.reduce((g,x,T)=>g+uv(d[T],x),0),m=Number((p/4).toFixed(4));i.push({id:l,data:{droppableContainer:o,value:m}})}}return i.sort(cv)};function ZE(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,l=i-n;if(r<s&&n<i){const u=e.width*e.height,d=t.width*t.height,p=o*l,m=p/(u+d-p);return Number(m.toFixed(4))}return 0}const eb=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,l=n.get(o);if(l){const u=ZE(l,e);u>0&&s.push({id:o,data:{droppableContainer:i,value:u}})}}return s.sort(YE)};function tb(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function hv(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:kn}function nb(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const rb=nb(1);function sb(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function ib(t,e,n){const r=sb(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:l}=r,u=t.left-o-(1-s)*parseFloat(n),d=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),p=s?t.width/s:t.width,m=i?t.height/i:t.height;return{width:p,height:m,top:d,right:u+p,bottom:d+m,left:u}}const ob={ignoreTransform:!1};function Ei(t,e){e===void 0&&(e=ob);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:p}=Wt(t).getComputedStyle(t);d&&(n=ib(n,d,p))}const{top:r,left:s,width:i,height:o,bottom:l,right:u}=n;return{top:r,left:s,width:i,height:o,bottom:l,right:u}}function zm(t){return Ei(t,{ignoreTransform:!0})}function ab(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function lb(t,e){return e===void 0&&(e=Wt(t).getComputedStyle(t)),e.position==="fixed"}function ub(t,e){e===void 0&&(e=Wt(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function mu(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(Bh(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Zo(s)||ov(s)||n.includes(s))return n;const i=Wt(t).getComputedStyle(s);return s!==t&&ub(s,i)&&n.push(s),lb(s,i)?n:r(s.parentNode)}return t?r(t):n}function fv(t){const[e]=mu(t,1);return e??null}function gc(t){return!pu||!t?null:wi(t)?t:Uh(t)?Bh(t)||t===xi(t).scrollingElement?window:Zo(t)?t:null:null}function pv(t){return wi(t)?t.scrollX:t.scrollLeft}function mv(t){return wi(t)?t.scrollY:t.scrollTop}function Id(t){return{x:pv(t),y:mv(t)}}var ut;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ut||(ut={}));function gv(t){return!pu||!t?!1:t===document.scrollingElement}function yv(t){const e={x:0,y:0},n=gv(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const cb={x:.2,y:.2};function db(t,e,n,r,s){let{top:i,left:o,right:l,bottom:u}=n;r===void 0&&(r=10),s===void 0&&(s=cb);const{isTop:d,isBottom:p,isLeft:m,isRight:g}=yv(t),x={x:0,y:0},T={x:0,y:0},C={height:e.height*s.y,width:e.width*s.x};return!d&&i<=e.top+C.height?(x.y=ut.Backward,T.y=r*Math.abs((e.top+C.height-i)/C.height)):!p&&u>=e.bottom-C.height&&(x.y=ut.Forward,T.y=r*Math.abs((e.bottom-C.height-u)/C.height)),!g&&l>=e.right-C.width?(x.x=ut.Forward,T.x=r*Math.abs((e.right-C.width-l)/C.width)):!m&&o<=e.left+C.width&&(x.x=ut.Backward,T.x=r*Math.abs((e.left+C.width-o)/C.width)),{direction:x,speed:T}}function hb(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function vv(t){return t.reduce((e,n)=>Xs(e,Id(n)),kn)}function fb(t){return t.reduce((e,n)=>e+pv(n),0)}function pb(t){return t.reduce((e,n)=>e+mv(n),0)}function mb(t,e){if(e===void 0&&(e=Ei),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);fv(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const gb=[["x",["left","right"],fb],["y",["top","bottom"],pb]];class Wh{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=mu(n),s=vv(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of gb)for(const u of o)Object.defineProperty(this,u,{get:()=>{const d=l(r),p=s[i]-d;return this.rect[u]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class uo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function yb(t){const{EventTarget:e}=Wt(t);return t instanceof e?t:xi(t)}function yc(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var rn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(rn||(rn={}));function Um(t){t.preventDefault()}function vb(t){t.stopPropagation()}var ye;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ye||(ye={}));const _v={start:[ye.Space,ye.Enter],cancel:[ye.Esc],end:[ye.Space,ye.Enter,ye.Tab]},_b=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case ye.Right:return{...n,x:n.x+25};case ye.Left:return{...n,x:n.x-25};case ye.Down:return{...n,y:n.y+25};case ye.Up:return{...n,y:n.y-25}}};class qh{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new uo(xi(n)),this.windowListeners=new uo(Wt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(rn.Resize,this.handleCancel),this.windowListeners.add(rn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(rn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&mb(r),n(kn)}handleKeyDown(e){if(Hh(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=_v,coordinateGetter:o=_b,scrollBehavior:l="smooth"}=s,{code:u}=e;if(i.end.includes(u)){this.handleEnd(e);return}if(i.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:kn;this.referenceCoordinates||(this.referenceCoordinates=p);const m=o(e,{active:n,context:r.current,currentCoordinates:p});if(m){const g=jo(m,p),x={x:0,y:0},{scrollableAncestors:T}=r.current;for(const C of T){const R=e.code,{isTop:b,isRight:_,isLeft:I,isBottom:D,maxScroll:O,minScroll:F}=yv(C),w=hb(C),y={x:Math.min(R===ye.Right?w.right-w.width/2:w.right,Math.max(R===ye.Right?w.left:w.left+w.width/2,m.x)),y:Math.min(R===ye.Down?w.bottom-w.height/2:w.bottom,Math.max(R===ye.Down?w.top:w.top+w.height/2,m.y))},E=R===ye.Right&&!_||R===ye.Left&&!I,k=R===ye.Down&&!D||R===ye.Up&&!b;if(E&&y.x!==m.x){const A=C.scrollLeft+g.x,P=R===ye.Right&&A<=O.x||R===ye.Left&&A>=F.x;if(P&&!g.y){C.scrollTo({left:A,behavior:l});return}P?x.x=C.scrollLeft-A:x.x=R===ye.Right?C.scrollLeft-O.x:C.scrollLeft-F.x,x.x&&C.scrollBy({left:-x.x,behavior:l});break}else if(k&&y.y!==m.y){const A=C.scrollTop+g.y,P=R===ye.Down&&A<=O.y||R===ye.Up&&A>=F.y;if(P&&!g.x){C.scrollTo({top:A,behavior:l});return}P?x.y=C.scrollTop-A:x.y=R===ye.Down?C.scrollTop-O.y:C.scrollTop-F.y,x.y&&C.scrollBy({top:-x.y,behavior:l});break}}this.handleMove(e,Xs(jo(m,this.referenceCoordinates),x))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}qh.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=_v,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function Bm(t){return!!(t&&"distance"in t)}function $m(t){return!!(t&&"delay"in t)}class Gh{constructor(e,n,r){var s;r===void 0&&(r=yb(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=xi(o),this.documentListeners=new uo(this.document),this.listeners=new uo(r),this.windowListeners=new uo(Wt(o)),this.initialCoordinates=(s=kd(i))!=null?s:kn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(rn.Resize,this.handleCancel),this.windowListeners.add(rn.DragStart,Um),this.windowListeners.add(rn.VisibilityChange,this.handleCancel),this.windowListeners.add(rn.ContextMenu,Um),this.documentListeners.add(rn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if($m(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Bm(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(rn.Click,vb,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(rn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!s)return;const u=(n=kd(e))!=null?n:kn,d=jo(s,u);if(!r&&l){if(Bm(l)){if(l.tolerance!=null&&yc(d,l.tolerance))return this.handleCancel();if(yc(d,l.distance))return this.handleStart()}if($m(l)&&yc(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===ye.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const wb={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Kh extends Gh{constructor(e){const{event:n}=e,r=xi(n.target);super(e,wb,r)}}Kh.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const xb={move:{name:"mousemove"},end:{name:"mouseup"}};var Sd;(function(t){t[t.RightClick=2]="RightClick"})(Sd||(Sd={}));class Eb extends Gh{constructor(e){super(e,xb,xi(e.event.target))}}Eb.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Sd.RightClick?!1:(r==null||r({event:n}),!0)}}];const vc={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class bb extends Gh{constructor(e){super(e,vc)}static setup(){return window.addEventListener(vc.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(vc.move.name,e)};function e(){}}}bb.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var co;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(co||(co={}));var jl;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(jl||(jl={}));function kb(t){let{acceleration:e,activator:n=co.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:l=jl.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:p,delta:m,threshold:g}=t;const x=Sb({delta:m,disabled:!i}),[T,C]=LE(),R=N.useRef({x:0,y:0}),b=N.useRef({x:0,y:0}),_=N.useMemo(()=>{switch(n){case co.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case co.DraggableRect:return s}},[n,s,u]),I=N.useRef(null),D=N.useCallback(()=>{const F=I.current;if(!F)return;const w=R.current.x*b.current.x,y=R.current.y*b.current.y;F.scrollBy(w,y)},[]),O=N.useMemo(()=>l===jl.TreeOrder?[...d].reverse():d,[l,d]);N.useEffect(()=>{if(!i||!d.length||!_){C();return}for(const F of O){if((r==null?void 0:r(F))===!1)continue;const w=d.indexOf(F),y=p[w];if(!y)continue;const{direction:E,speed:k}=db(F,y,_,e,g);for(const A of["x","y"])x[A][E[A]]||(k[A]=0,E[A]=0);if(k.x>0||k.y>0){C(),I.current=F,T(D,o),R.current=k,b.current=E;return}}R.current={x:0,y:0},b.current={x:0,y:0},C()},[e,D,r,C,i,o,JSON.stringify(_),JSON.stringify(x),T,d,O,p,JSON.stringify(g)])}const Ib={x:{[ut.Backward]:!1,[ut.Forward]:!1},y:{[ut.Backward]:!1,[ut.Forward]:!1}};function Sb(t){let{delta:e,disabled:n}=t;const r=bd(e);return ea(s=>{if(n||!r||!s)return Ib;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[ut.Backward]:s.x[ut.Backward]||i.x===-1,[ut.Forward]:s.x[ut.Forward]||i.x===1},y:{[ut.Backward]:s.y[ut.Backward]||i.y===-1,[ut.Forward]:s.y[ut.Forward]||i.y===1}}},[n,e,r])}function Tb(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return ea(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function Cb(t,e){return N.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var Oo;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Oo||(Oo={}));var Td;(function(t){t.Optimized="optimized"})(Td||(Td={}));const Hm=new Map;function Ab(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=N.useState(null),{frequency:l,measure:u,strategy:d}=s,p=N.useRef(t),m=R(),g=Vo(m),x=N.useCallback(function(b){b===void 0&&(b=[]),!g.current&&o(_=>_===null?b:_.concat(b.filter(I=>!_.includes(I))))},[g]),T=N.useRef(null),C=ea(b=>{if(m&&!n)return Hm;if(!b||b===Hm||p.current!==t||i!=null){const _=new Map;for(let I of t){if(!I)continue;if(i&&i.length>0&&!i.includes(I.id)&&I.rect.current){_.set(I.id,I.rect.current);continue}const D=I.node.current,O=D?new Wh(u(D),D):null;I.rect.current=O,O&&_.set(I.id,O)}return _}return b},[t,i,n,m,u]);return N.useEffect(()=>{p.current=t},[t]),N.useEffect(()=>{m||x()},[n,m]),N.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),N.useEffect(()=>{m||typeof l!="number"||T.current!==null||(T.current=setTimeout(()=>{x(),T.current=null},l))},[l,m,x,...r]),{droppableRects:C,measureDroppableContainers:x,measuringScheduled:i!=null};function R(){switch(d){case Oo.Always:return!1;case Oo.BeforeDragging:return n;default:return!n}}}function wv(t,e){return ea(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Rb(t,e){return wv(t,e)}function Nb(t){let{callback:e,disabled:n}=t;const r=$h(e),s=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return N.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function gu(t){let{callback:e,disabled:n}=t;const r=$h(e),s=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return N.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Pb(t){return new Wh(Ei(t),t)}function Wm(t,e,n){e===void 0&&(e=Pb);const[r,s]=N.useState(null);function i(){s(u=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=u??n)!=null?d:null}const p=e(t);return JSON.stringify(u)===JSON.stringify(p)?u:p})}const o=Nb({callback(u){if(t)for(const d of u){const{type:p,target:m}=d;if(p==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),l=gu({callback:i});return Ln(()=>{i(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),r}function Db(t){const e=wv(t);return hv(t,e)}const qm=[];function Vb(t){const e=N.useRef(t),n=ea(r=>t?r&&r!==qm&&t&&e.current&&t.parentNode===e.current.parentNode?r:mu(t):qm,[t]);return N.useEffect(()=>{e.current=t},[t]),n}function jb(t){const[e,n]=N.useState(null),r=N.useRef(t),s=N.useCallback(i=>{const o=gc(i.target);o&&n(l=>l?(l.set(o,Id(o)),new Map(l)):null)},[]);return N.useEffect(()=>{const i=r.current;if(t!==i){o(i);const l=t.map(u=>{const d=gc(u);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,Id(d)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(u=>{const d=gc(u);d==null||d.removeEventListener("scroll",s)})}},[s,t]),N.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Xs(i,o),kn):vv(t):kn,[t,e])}function Gm(t,e){e===void 0&&(e=[]);const n=N.useRef(null);return N.useEffect(()=>{n.current=null},e),N.useEffect(()=>{const r=t!==kn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?jo(t,n.current):kn}function Lb(t){N.useEffect(()=>{if(!pu)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function Ob(t,e){return N.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function xv(t){return N.useMemo(()=>t?ab(t):null,[t])}const Km=[];function Mb(t,e){e===void 0&&(e=Ei);const[n]=t,r=xv(n?Wt(n):null),[s,i]=N.useState(Km);function o(){i(()=>t.length?t.map(u=>gv(u)?r:new Wh(e(u),u)):Km)}const l=gu({callback:o});return Ln(()=>{l==null||l.disconnect(),o(),t.forEach(u=>l==null?void 0:l.observe(u))},[t]),s}function Fb(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Zo(e)?e:t}function zb(t){let{measure:e}=t;const[n,r]=N.useState(null),s=N.useCallback(d=>{for(const{target:p}of d)if(Zo(p)){r(m=>{const g=e(p);return m?{...m,width:g.width,height:g.height}:g});break}},[e]),i=gu({callback:s}),o=N.useCallback(d=>{const p=Fb(d);i==null||i.disconnect(),p&&(i==null||i.observe(p)),r(p?e(p):null)},[e,i]),[l,u]=Dl(o);return N.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const Ub=[{sensor:Kh,options:{}},{sensor:qh,options:{}}],Bb={current:{}},rl={draggable:{measure:zm},droppable:{measure:zm,strategy:Oo.WhileDragging,frequency:Td.Optimized},dragOverlay:{measure:Ei}};class ho extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const $b={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ho,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Vl},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:rl,measureDroppableContainers:Vl,windowRect:null,measuringScheduled:!1},Hb={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Vl,draggableNodes:new Map,over:null,measureDroppableContainers:Vl},yu=N.createContext(Hb),Ev=N.createContext($b);function Wb(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ho}}}function qb(t,e){switch(e.type){case rt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case rt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case rt.DragEnd:case rt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case rt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new ho(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case rt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new ho(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case rt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new ho(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function Gb(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=N.useContext(yu),i=bd(r),o=bd(n==null?void 0:n.id);return N.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!Hh(i)||document.activeElement===i.target)return;const l=s.get(o);if(!l)return;const{activatorNode:u,node:d}=l;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[u.current,d.current]){if(!p)continue;const m=FE(p);if(m){m.focus();break}}})}},[r,e,s,o,i]),null}function Kb(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function Qb(t){return N.useMemo(()=>({draggable:{...rl.draggable,...t==null?void 0:t.draggable},droppable:{...rl.droppable,...t==null?void 0:t.droppable},dragOverlay:{...rl.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function Yb(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=N.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Ln(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!r)return;const d=e==null?void 0:e.node.current;if(!d||d.isConnected===!1)return;const p=n(d),m=hv(p,r);if(o||(m.x=0),l||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const g=fv(d);g&&g.scrollBy({top:m.y,left:m.x})}},[e,o,l,r,n])}const bv=N.createContext({...kn,scaleX:1,scaleY:1});var vr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(vr||(vr={}));const Xb=N.memo(function(e){var n,r,s,i;let{id:o,accessibility:l,autoScroll:u=!0,children:d,sensors:p=Ub,collisionDetection:m=eb,measuring:g,modifiers:x,...T}=e;const C=N.useReducer(qb,void 0,Wb),[R,b]=C,[_,I]=WE(),[D,O]=N.useState(vr.Uninitialized),F=D===vr.Initialized,{draggable:{active:w,nodes:y,translate:E},droppable:{containers:k}}=R,A=w!=null?y.get(w):null,P=N.useRef({initial:null,translated:null}),S=N.useMemo(()=>{var Fe;return w!=null?{id:w,data:(Fe=A==null?void 0:A.data)!=null?Fe:Bb,rect:P}:null},[w,A]),ve=N.useRef(null),[He,_t]=N.useState(null),[Ie,H]=N.useState(null),Q=Vo(T,Object.values(T)),X=ta("DndDescribedBy",o),fe=N.useMemo(()=>k.getEnabled(),[k]),z=Qb(g),{droppableRects:G,measureDroppableContainers:se,measuringScheduled:ue}=Ab(fe,{dragging:F,dependencies:[E.x,E.y],config:z.droppable}),re=Tb(y,w),Se=N.useMemo(()=>Ie?kd(Ie):null,[Ie]),Pe=Tn(),Ke=Rb(re,z.draggable.measure);Yb({activeNode:w!=null?y.get(w):null,config:Pe.layoutShiftCompensation,initialRect:Ke,measure:z.draggable.measure});const M=Wm(re,z.draggable.measure,Ke),J=Wm(re?re.parentElement:null),Z=N.useRef({activatorEvent:null,active:null,activeNode:re,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:y,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ce=k.getNodeFor((n=Z.current.over)==null?void 0:n.id),De=zb({measure:z.dragOverlay.measure}),wt=(r=De.nodeRef.current)!=null?r:re,xt=F?(s=De.rect)!=null?s:M:null,Fn=!!(De.nodeRef.current&&De.rect),Hr=Db(Fn?null:M),qt=xv(wt?Wt(wt):null),Pt=Vb(F?ce??re:null),zn=Mb(Pt),ur=Kb(x,{transform:{x:E.x-Hr.x,y:E.y-Hr.y,scaleX:1,scaleY:1},activatorEvent:Ie,active:S,activeNodeRect:M,containerNodeRect:J,draggingNodeRect:xt,over:Z.current.over,overlayNodeRect:De.rect,scrollableAncestors:Pt,scrollableAncestorRects:zn,windowRect:qt}),Un=Se?Xs(Se,E):null,cr=jb(Pt),Wr=Gm(cr),Xe=Gm(cr,[M]),Oe=Xs(ur,Wr),Gt=xt?rb(xt,ur):null,In=S&&Gt?m({active:S,collisionRect:Gt,droppableRects:G,droppableContainers:fe,pointerCoordinates:Un}):null,dr=dv(In,"id"),[nn,Sn]=N.useState(null),bs=Fn?ur:Xs(ur,Xe),ks=tb(bs,(i=nn==null?void 0:nn.rect)!=null?i:null,M),Bn=N.useRef(null),$n=N.useCallback((Fe,j)=>{let{sensor:q,options:ie}=j;if(ve.current==null)return;const ee=y.get(ve.current);if(!ee)return;const Je=Fe.nativeEvent,tt=new q({active:ve.current,activeNode:ee,event:Je,options:ie,context:Z,onAbort(xe){if(!y.get(xe))return;const{onDragAbort:Et}=Q.current,Dt={id:xe};Et==null||Et(Dt),_({type:"onDragAbort",event:Dt})},onPending(xe,pn,Et,Dt){if(!y.get(xe))return;const{onDragPending:Qr}=Q.current,Vt={id:xe,constraint:pn,initialCoordinates:Et,offset:Dt};Qr==null||Qr(Vt),_({type:"onDragPending",event:Vt})},onStart(xe){const pn=ve.current;if(pn==null)return;const Et=y.get(pn);if(!Et)return;const{onDragStart:Dt}=Q.current,Kr={activatorEvent:Je,active:{id:pn,data:Et.data,rect:P}};Hs.unstable_batchedUpdates(()=>{Dt==null||Dt(Kr),O(vr.Initializing),b({type:rt.DragStart,initialCoordinates:xe,active:pn}),_({type:"onDragStart",event:Kr}),_t(Bn.current),H(Je)})},onMove(xe){b({type:rt.DragMove,coordinates:xe})},onEnd:Kt(rt.DragEnd),onCancel:Kt(rt.DragCancel)});Bn.current=tt;function Kt(xe){return async function(){const{active:Et,collisions:Dt,over:Kr,scrollAdjustedTranslate:Qr}=Z.current;let Vt=null;if(Et&&Qr){const{cancelDrop:Yr}=Q.current;Vt={activatorEvent:Je,active:Et,collisions:Dt,delta:Qr,over:Kr},xe===rt.DragEnd&&typeof Yr=="function"&&await Promise.resolve(Yr(Vt))&&(xe=rt.DragCancel)}ve.current=null,Hs.unstable_batchedUpdates(()=>{b({type:xe}),O(vr.Uninitialized),Sn(null),_t(null),H(null),Bn.current=null;const Yr=xe===rt.DragEnd?"onDragEnd":"onDragCancel";if(Vt){const Ci=Q.current[Yr];Ci==null||Ci(Vt),_({type:Yr,event:Vt})}})}}},[y]),Ti=N.useCallback((Fe,j)=>(q,ie)=>{const ee=q.nativeEvent,Je=y.get(ie);if(ve.current!==null||!Je||ee.dndKit||ee.defaultPrevented)return;const tt={active:Je};Fe(q,j.options,tt)===!0&&(ee.dndKit={capturedBy:j.sensor},ve.current=ie,$n(q,j))},[y,$n]),Hn=Cb(p,Ti);Lb(p),Ln(()=>{M&&D===vr.Initializing&&O(vr.Initialized)},[M,D]),N.useEffect(()=>{const{onDragMove:Fe}=Q.current,{active:j,activatorEvent:q,collisions:ie,over:ee}=Z.current;if(!j||!q)return;const Je={active:j,activatorEvent:q,collisions:ie,delta:{x:Oe.x,y:Oe.y},over:ee};Hs.unstable_batchedUpdates(()=>{Fe==null||Fe(Je),_({type:"onDragMove",event:Je})})},[Oe.x,Oe.y]),N.useEffect(()=>{const{active:Fe,activatorEvent:j,collisions:q,droppableContainers:ie,scrollAdjustedTranslate:ee}=Z.current;if(!Fe||ve.current==null||!j||!ee)return;const{onDragOver:Je}=Q.current,tt=ie.get(dr),Kt=tt&&tt.rect.current?{id:tt.id,rect:tt.rect.current,data:tt.data,disabled:tt.disabled}:null,xe={active:Fe,activatorEvent:j,collisions:q,delta:{x:ee.x,y:ee.y},over:Kt};Hs.unstable_batchedUpdates(()=>{Sn(Kt),Je==null||Je(xe),_({type:"onDragOver",event:xe})})},[dr]),Ln(()=>{Z.current={activatorEvent:Ie,active:S,activeNode:re,collisionRect:Gt,collisions:In,droppableRects:G,draggableNodes:y,draggingNode:wt,draggingNodeRect:xt,droppableContainers:k,over:nn,scrollableAncestors:Pt,scrollAdjustedTranslate:Oe},P.current={initial:xt,translated:Gt}},[S,re,In,Gt,y,wt,xt,G,k,nn,Pt,Oe]),kb({...Pe,delta:E,draggingRect:Gt,pointerCoordinates:Un,scrollableAncestors:Pt,scrollableAncestorRects:zn});const qr=N.useMemo(()=>({active:S,activeNode:re,activeNodeRect:M,activatorEvent:Ie,collisions:In,containerNodeRect:J,dragOverlay:De,draggableNodes:y,droppableContainers:k,droppableRects:G,over:nn,measureDroppableContainers:se,scrollableAncestors:Pt,scrollableAncestorRects:zn,measuringConfiguration:z,measuringScheduled:ue,windowRect:qt}),[S,re,M,Ie,In,J,De,y,k,G,nn,se,Pt,zn,z,ue,qt]),Gr=N.useMemo(()=>({activatorEvent:Ie,activators:Hn,active:S,activeNodeRect:M,ariaDescribedById:{draggable:X},dispatch:b,draggableNodes:y,over:nn,measureDroppableContainers:se}),[Ie,Hn,S,M,b,X,y,nn,se]);return Lt.createElement(lv.Provider,{value:I},Lt.createElement(yu.Provider,{value:Gr},Lt.createElement(Ev.Provider,{value:qr},Lt.createElement(bv.Provider,{value:ks},d)),Lt.createElement(Gb,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Lt.createElement(KE,{...l,hiddenTextDescribedById:X}));function Tn(){const Fe=(He==null?void 0:He.autoScrollEnabled)===!1,j=typeof u=="object"?u.enabled===!1:u===!1,q=F&&!Fe&&!j;return typeof u=="object"?{...u,enabled:q}:{enabled:q}}}),Jb=N.createContext(null),Qm="button",Zb="Draggable";function ek(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=ta(Zb),{activators:o,activatorEvent:l,active:u,activeNodeRect:d,ariaDescribedById:p,draggableNodes:m,over:g}=N.useContext(yu),{role:x=Qm,roleDescription:T="draggable",tabIndex:C=0}=s??{},R=(u==null?void 0:u.id)===e,b=N.useContext(R?bv:Jb),[_,I]=Dl(),[D,O]=Dl(),F=Ob(o,e),w=Vo(n);Ln(()=>(m.set(e,{id:e,key:i,node:_,activatorNode:D,data:w}),()=>{const E=m.get(e);E&&E.key===i&&m.delete(e)}),[m,e]);const y=N.useMemo(()=>({role:x,tabIndex:C,"aria-disabled":r,"aria-pressed":R&&x===Qm?!0:void 0,"aria-roledescription":T,"aria-describedby":p.draggable}),[r,x,C,R,T,p.draggable]);return{active:u,activatorEvent:l,activeNodeRect:d,attributes:y,isDragging:R,listeners:r?void 0:F,node:_,over:g,setNodeRef:I,setActivatorNodeRef:O,transform:b}}function tk(){return N.useContext(Ev)}const nk="Droppable",rk={timeout:25};function sk(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=ta(nk),{active:o,dispatch:l,over:u,measureDroppableContainers:d}=N.useContext(yu),p=N.useRef({disabled:n}),m=N.useRef(!1),g=N.useRef(null),x=N.useRef(null),{disabled:T,updateMeasurementsFor:C,timeout:R}={...rk,...s},b=Vo(C??r),_=N.useCallback(()=>{if(!m.current){m.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(b.current)?b.current:[b.current]),x.current=null},R)},[R]),I=gu({callback:_,disabled:T||!o}),D=N.useCallback((y,E)=>{I&&(E&&(I.unobserve(E),m.current=!1),y&&I.observe(y))},[I]),[O,F]=Dl(D),w=Vo(e);return N.useEffect(()=>{!I||!O.current||(I.disconnect(),m.current=!1,I.observe(O.current))},[O,I]),N.useEffect(()=>(l({type:rt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:O,rect:g,data:w}}),()=>l({type:rt.UnregisterDroppable,key:i,id:r})),[r]),N.useEffect(()=>{n!==p.current.disabled&&(l({type:rt.SetDroppableDisabled,id:r,key:i,disabled:n}),p.current.disabled=n)},[r,i,n,l]),{active:o,rect:g,isOver:(u==null?void 0:u.id)===r,node:O,over:u,setNodeRef:F}}function Qh(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function ik(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Fa(t){return t!==null&&t>=0}function ok(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ak(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const kv=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=Qh(e,r,n),o=e[s],l=i[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},za={scaleX:1,scaleY:1},lk=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const d=i[o];return d?{x:0,y:n<o?d.top+d.height-(l.top+l.height):d.top-l.top,...za}:null}const u=uk(i,s,n);return s>n&&s<=o?{x:0,y:-l.height-u,...za}:s<n&&s>=o?{x:0,y:l.height+u,...za}:{x:0,y:0,...za}};function uk(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Iv="Sortable",Sv=Lt.createContext({activeIndex:-1,containerId:Iv,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:kv,disabled:{draggable:!1,droppable:!1}});function ck(t){let{children:e,id:n,items:r,strategy:s=kv,disabled:i=!1}=t;const{active:o,dragOverlay:l,droppableRects:u,over:d,measureDroppableContainers:p}=tk(),m=ta(Iv,n),g=l.rect!==null,x=N.useMemo(()=>r.map(F=>typeof F=="object"&&"id"in F?F.id:F),[r]),T=o!=null,C=o?x.indexOf(o.id):-1,R=d?x.indexOf(d.id):-1,b=N.useRef(x),_=!ok(x,b.current),I=R!==-1&&C===-1||_,D=ak(i);Ln(()=>{_&&T&&p(x)},[_,x,T,p]),N.useEffect(()=>{b.current=x},[x]);const O=N.useMemo(()=>({activeIndex:C,containerId:m,disabled:D,disableTransforms:I,items:x,overIndex:R,useDragOverlay:g,sortedRects:ik(x,u),strategy:s}),[C,m,D.draggable,D.droppable,I,x,R,u,g,s]);return Lt.createElement(Sv.Provider,{value:O},e)}const dk=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return Qh(n,r,s).indexOf(e)},hk=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:l,previousContainerId:u,transition:d}=t;return!d||!r||l!==i&&s===o?!1:n?!0:o!==s&&e===u},fk={duration:200,easing:"ease"},Tv="transform",pk=Lo.Transition.toString({property:Tv,duration:0,easing:"linear"}),mk={roleDescription:"sortable"};function gk(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=N.useState(null),l=N.useRef(n);return Ln(()=>{if(!e&&n!==l.current&&r.current){const u=s.current;if(u){const d=Ei(r.current,{ignoreTransform:!0}),p={x:u.left-d.left,y:u.top-d.top,scaleX:u.width/d.width,scaleY:u.height/d.height};(p.x||p.y)&&o(p)}}n!==l.current&&(l.current=n)},[e,n,r,s]),N.useEffect(()=>{i&&o(null)},[i]),i}function yk(t){let{animateLayoutChanges:e=hk,attributes:n,disabled:r,data:s,getNewIndex:i=dk,id:o,strategy:l,resizeObserverConfig:u,transition:d=fk}=t;const{items:p,containerId:m,activeIndex:g,disabled:x,disableTransforms:T,sortedRects:C,overIndex:R,useDragOverlay:b,strategy:_}=N.useContext(Sv),I=vk(r,x),D=p.indexOf(o),O=N.useMemo(()=>({sortable:{containerId:m,index:D,items:p},...s}),[m,s,D,p]),F=N.useMemo(()=>p.slice(p.indexOf(o)),[p,o]),{rect:w,node:y,isOver:E,setNodeRef:k}=sk({id:o,data:O,disabled:I.droppable,resizeObserverConfig:{updateMeasurementsFor:F,...u}}),{active:A,activatorEvent:P,activeNodeRect:S,attributes:ve,setNodeRef:He,listeners:_t,isDragging:Ie,over:H,setActivatorNodeRef:Q,transform:X}=ek({id:o,data:O,attributes:{...mk,...n},disabled:I.draggable}),fe=jE(k,He),z=!!A,G=z&&!T&&Fa(g)&&Fa(R),se=!b&&Ie,ue=se&&G?X:null,Se=G?ue??(l??_)({rects:C,activeNodeRect:S,activeIndex:g,overIndex:R,index:D}):null,Pe=Fa(g)&&Fa(R)?i({id:o,items:p,activeIndex:g,overIndex:R}):D,Ke=A==null?void 0:A.id,M=N.useRef({activeId:Ke,items:p,newIndex:Pe,containerId:m}),J=p!==M.current.items,Z=e({active:A,containerId:m,isDragging:Ie,isSorting:z,id:o,index:D,items:p,newIndex:M.current.newIndex,previousItems:M.current.items,previousContainerId:M.current.containerId,transition:d,wasDragging:M.current.activeId!=null}),ce=gk({disabled:!Z,index:D,node:y,rect:w});return N.useEffect(()=>{z&&M.current.newIndex!==Pe&&(M.current.newIndex=Pe),m!==M.current.containerId&&(M.current.containerId=m),p!==M.current.items&&(M.current.items=p)},[z,Pe,m,p]),N.useEffect(()=>{if(Ke===M.current.activeId)return;if(Ke&&!M.current.activeId){M.current.activeId=Ke;return}const wt=setTimeout(()=>{M.current.activeId=Ke},50);return()=>clearTimeout(wt)},[Ke]),{active:A,activeIndex:g,attributes:ve,data:O,rect:w,index:D,newIndex:Pe,items:p,isOver:E,isSorting:z,isDragging:Ie,listeners:_t,node:y,overIndex:R,over:H,setNodeRef:fe,setActivatorNodeRef:Q,setDroppableNodeRef:k,setDraggableNodeRef:He,transform:ce??Se,transition:De()};function De(){if(ce||J&&M.current.newIndex===D)return pk;if(!(se&&!Hh(P)||!d)&&(z||Z))return Lo.Transition.toString({...d,property:Tv})}}function vk(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Ll(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const _k=[ye.Down,ye.Right,ye.Up,ye.Left],wk=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:i,over:o,scrollableAncestors:l}}=e;if(_k.includes(t.code)){if(t.preventDefault(),!n||!r)return;const u=[];i.getEnabled().forEach(m=>{if(!m||m!=null&&m.disabled)return;const g=s.get(m.id);if(g)switch(t.code){case ye.Down:r.top<g.top&&u.push(m);break;case ye.Up:r.top>g.top&&u.push(m);break;case ye.Left:r.left>g.left&&u.push(m);break;case ye.Right:r.left<g.left&&u.push(m);break}});const d=JE({collisionRect:r,droppableRects:s,droppableContainers:u});let p=dv(d,"id");if(p===(o==null?void 0:o.id)&&d.length>1&&(p=d[1].id),p!=null){const m=i.get(n.id),g=i.get(p),x=g?s.get(g.id):null,T=g==null?void 0:g.node.current;if(T&&x&&m&&g){const R=mu(T).some((F,w)=>l[w]!==F),b=Cv(m,g),_=xk(m,g),I=R||!b?{x:0,y:0}:{x:_?r.width-x.width:0,y:_?r.height-x.height:0},D={x:x.left,y:x.top};return I.x&&I.y?D:jo(D,I)}}}};function Cv(t,e){return!Ll(t)||!Ll(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function xk(t,e){return!Ll(t)||!Ll(e)||!Cv(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const Ek=({item:t,info:e,updateItem:n,handleRemoveItem:r})=>{const{attributes:s,listeners:i,setNodeRef:o,transform:l,transition:u,isDragging:d}=yk({id:t.id}),p={transform:Lo.Transform.toString(l),transition:u,zIndex:d?50:"auto",opacity:d?.5:1,touchAction:"none"};return f.jsxs("div",{ref:o,style:p,className:"flex gap-3 items-start bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[f.jsx("div",{...s,...i,className:"mt-1 text-slate-300 dark:text-slate-600 cursor-grab active:cursor-grabbing hover:text-slate-500 dark:hover:text-slate-400 p-1",children:f.jsx(_E,{size:20})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${e.color} whitespace-nowrap`,children:e.name}),f.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 truncate",children:t.name})]}),f.jsx("div",{className:"flex gap-2",children:f.jsx("div",{className:"flex-1",children:f.jsx("textarea",{value:t.version,onChange:m=>n(t.id,"version",m.target.value),placeholder:" ()...",rows:2,className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded px-2 py-1 text-sm text-slate-900 dark:text-slate-100 focus:ring-1 focus:ring-blue-500 outline-none resize-none"})})})]}),f.jsxs("div",{className:"flex flex-col items-end gap-2",children:[f.jsxs("div",{className:"flex items-center border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden bg-slate-50 dark:bg-slate-900",children:[f.jsx("input",{type:"number",min:"1",value:t.qty,onChange:m=>n(t.id,"qty",parseInt(m.target.value)||1),className:"w-12 text-center bg-white dark:bg-slate-800 border-x border-slate-200 dark:border-slate-700 py-1 text-slate-900 dark:text-white font-bold outline-none"}),f.jsx("span",{className:"text-xs text-slate-400 px-1",children:"Qty"})]}),f.jsx("button",{onClick:()=>r(t.id),className:"text-slate-300 hover:text-red-500 p-1",children:f.jsx(Yi,{size:16})})]})]})},bk=({inventory:t,folders:e,groups:n,categories:r,bundles:s,currentTrip:i,onSave:o,onCancel:l})=>{var Ke;const[u,d]=N.useState((i==null?void 0:i.name)||` ${new Date().toLocaleDateString()}`),[p,m]=N.useState((i==null?void 0:i.date)||new Date().toISOString().split("T")[0]),[g,x]=N.useState((i==null?void 0:i.items)||[]),[T,C]=N.useState((i==null?void 0:i.groups)||[{id:xd,name:""}]),[R,b]=N.useState(T[0].id),[_,I]=N.useState(""),[D,O]=N.useState(!1),[F,w]=N.useState(""),[y,E]=N.useState("ALL"),[k,A]=N.useState("ALL"),[P,S]=N.useState("ALL"),[ve,He]=N.useState("ITEMS"),_t=QE(Om(Kh,{activationConstraint:{distance:8}}),Om(qh,{coordinateGetter:wk})),Ie=M=>{const{active:J,over:Z}=M;J.id!==(Z==null?void 0:Z.id)&&x(ce=>{const De=ce.findIndex(xt=>xt.id===J.id),wt=ce.findIndex(xt=>xt.id===(Z==null?void 0:Z.id));return Qh(ce,De,wt)})},H=(M,J=1)=>{const Z={id:Math.random().toString(36).substring(2,9),inventoryId:M.id,tripGroupId:R,name:M.name,category:M.category,qty:J,version:M.defaultVersion||"",checked:!1};x(ce=>[...ce,Z])},Q=M=>{if(window.confirm(`${M.name}`)){const J=[];M.items.forEach(Z=>{const ce=t.find(De=>De.id===Z.inventoryId);ce&&J.push({id:Math.random().toString(36).substring(2,9),inventoryId:ce.id,tripGroupId:R,name:ce.name,category:ce.category,qty:Z.qty,version:ce.defaultVersion||"",checked:!1})}),x(Z=>[...Z,...J])}},X=M=>x(J=>J.filter(Z=>Z.id!==M)),fe=(M,J,Z)=>x(ce=>ce.map(De=>De.id===M?{...De,[J]:Z}:De)),z=()=>{if(!_.trim())return;const M=Math.random().toString(36).substring(2,9);C(J=>[...J,{id:M,name:_}]),b(M),I(""),O(!1)},G=(M,J)=>{if(M.stopPropagation(),T.length<=1){alert("");return}window.confirm("")&&(C(Z=>Z.filter(ce=>ce.id!==J)),x(Z=>Z.filter(ce=>ce.tripGroupId!==J)),R===J&&b(T[0].id))},se=()=>{if(!u.trim()){alert("");return}g.length===0&&!window.confirm("")||o({id:(i==null?void 0:i.id)||Math.random().toString(36).substring(2,9),userId:(i==null?void 0:i.userId)||"unknown",name:u,date:p,status:(i==null?void 0:i.status)||"planning",groups:T,items:g})},ue=t.filter(M=>M.name.toLowerCase().includes(F.toLowerCase())&&(y==="ALL"||M.category===y)&&(k==="ALL"||M.folderId===k)&&(P==="ALL"||M.groupId===P)),re=k==="ALL"?n:n.filter(M=>M.folderId===k),Se=g.filter(M=>M.tripGroupId===R),Pe=M=>{const J=r.find(Z=>Z.id===M);return{name:(J==null?void 0:J.name)||"",color:(J==null?void 0:J.color)||"bg-gray-100 text-gray-600 border-gray-200"}};return f.jsxs("div",{className:"h-[calc(100vh-100px)] flex flex-col gap-4",children:[f.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col md:flex-row justify-between items-start md:items-center gap-4 shrink-0",children:[f.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[f.jsx("button",{onClick:l,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full text-slate-500",children:f.jsx(rv,{size:24})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-xs text-slate-400 font-bold uppercase tracking-wider",children:""}),f.jsx("input",{type:"text",value:u,onChange:M=>d(M.target.value),className:"text-xl font-bold text-slate-900 dark:text-white bg-transparent border-b border-transparent hover:border-slate-300 focus:border-blue-500 focus:outline-none w-full"})]})]}),f.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[f.jsx("input",{type:"date",value:p,onChange:M=>m(M.target.value),className:"bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 text-slate-700 dark:text-slate-200 focus:ring-2 focus:ring-blue-500"}),f.jsxs("button",{onClick:se,className:"flex items-center gap-2 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 shadow-md transition-transform active:scale-95",children:[f.jsx(iv,{size:18}),f.jsx("span",{children:""})]})]})]}),f.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-4 overflow-hidden",children:[f.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col overflow-hidden",children:[f.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ed,{className:"text-slate-500",size:20}),f.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-200",children:""})]}),f.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded-full",children:["  ",(Ke=T.find(M=>M.id===R))==null?void 0:Ke.name]})]}),f.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[f.jsx("button",{onClick:()=>He("ITEMS"),className:`flex-1 py-1.5 text-xs font-medium rounded transition-all ${ve==="ITEMS"?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-300 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:""}),f.jsx("button",{onClick:()=>He("BUNDLES"),className:`flex-1 py-1.5 text-xs font-medium rounded transition-all ${ve==="BUNDLES"?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-300 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:" "})]}),ve==="ITEMS"?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsx(Pl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),f.jsx("input",{type:"text",placeholder:"...",value:F,onChange:M=>w(M.target.value),className:"w-full pl-9 pr-3 py-1.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded text-sm text-slate-900 dark:text-white focus:ring-1 focus:ring-blue-500 outline-none"})]}),f.jsxs("select",{value:k,onChange:M=>{A(M.target.value),S("ALL")},className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded px-2 py-1 text-sm text-slate-700 dark:text-slate-200 focus:ring-1 focus:ring-blue-500 outline-none",children:[f.jsx("option",{value:"ALL",children:" "}),e.map(M=>f.jsx("option",{value:M.id,children:M.name},M.id))]}),f.jsxs("select",{value:P,onChange:M=>S(M.target.value),className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded px-2 py-1 text-sm text-slate-700 dark:text-slate-200 focus:ring-1 focus:ring-blue-500 outline-none max-w-[150px]",children:[f.jsx("option",{value:"ALL",children:" "}),re.map(M=>f.jsx("option",{value:M.id,children:M.name},M.id))]})]}),f.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[f.jsx("button",{onClick:()=>E("ALL"),className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-colors ${y==="ALL"?"bg-slate-800 dark:bg-white text-white dark:text-slate-900":"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:bg-slate-100"}`,children:""}),r.map(M=>f.jsx("button",{onClick:()=>E(M.id),className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-colors ${y===M.id?"bg-slate-800 dark:bg-white text-white dark:text-slate-900":"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:bg-slate-100"}`,children:M.name},M.id))]})]}):f.jsx("div",{className:"text-xs text-slate-400 text-center",children:""})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-4 grid grid-cols-1 lg:grid-cols-2 gap-3 content-start",children:ve==="ITEMS"?f.jsxs(f.Fragment,{children:[ue.map(M=>{const J=Pe(M.category);return f.jsxs("button",{onClick:()=>H(M),className:"group flex flex-col items-start p-3 rounded-lg border border-slate-100 dark:border-slate-700 hover:border-blue-300 hover:bg-blue-50 dark:hover:bg-slate-700 transition-all text-left bg-white dark:bg-slate-800 shadow-sm",children:[f.jsxs("div",{className:"flex justify-between w-full mb-1",children:[f.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${J.color}`,children:J.name}),f.jsx(Nn,{size:16,className:"text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity"})]}),f.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200 text-sm",children:M.name}),M.defaultVersion&&f.jsxs("span",{className:"text-xs text-slate-400 mt-1",children:[": ",M.defaultVersion]})]},M.id)}),ue.length===0&&f.jsx("div",{className:"col-span-full text-center text-slate-400 text-sm py-8",children:""})]}):f.jsxs(f.Fragment,{children:[s.map(M=>f.jsxs("button",{onClick:()=>Q(M),className:"group flex flex-col items-start p-4 rounded-lg border border-slate-100 dark:border-slate-700 hover:border-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-all text-left bg-white dark:bg-slate-800 shadow-sm",children:[f.jsxs("div",{className:"flex justify-between w-full mb-2",children:[f.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-200 flex items-center gap-2",children:[f.jsx(sv,{size:16,className:"text-purple-500"}),M.name]}),f.jsx(Nn,{size:16,className:"text-purple-500 opacity-0 group-hover:opacity-100 transition-opacity"})]}),f.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[" ",M.items.length," "]})]},M.id)),s.length===0&&f.jsx("div",{className:"col-span-full text-center text-slate-400 text-sm py-8",children:""})]})})]}),f.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col overflow-hidden",children:[f.jsxs("div",{className:"p-2 border-b border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 flex overflow-x-auto gap-2 scrollbar-hide items-center",children:[T.map(M=>f.jsxs("div",{onClick:()=>b(M.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-all whitespace-nowrap border ${R===M.id?"bg-white dark:bg-slate-800 border-blue-200 dark:border-blue-500/50 text-blue-700 dark:text-blue-400 shadow-sm font-medium":"bg-slate-100 dark:bg-slate-800 border-transparent text-slate-500 hover:bg-white hover:border-slate-200"}`,children:[f.jsx("span",{children:M.name}),f.jsx("span",{className:"text-xs bg-opacity-20 bg-slate-500 px-1.5 rounded-full",children:g.filter(J=>J.tripGroupId===M.id).length}),R===M.id&&f.jsx("button",{onClick:J=>G(J,M.id),className:"ml-1 p-0.5 hover:text-red-500 rounded hover:bg-red-50",children:f.jsx(Xn,{size:12})})]},M.id)),D?f.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-800 p-1 rounded-lg border border-blue-200 shadow-sm animate-in fade-in",children:[f.jsx("input",{autoFocus:!0,className:"w-24 text-sm px-2 py-0.5 outline-none bg-transparent dark:text-white",placeholder:"",value:_,onChange:M=>I(M.target.value),onKeyDown:M=>M.key==="Enter"&&z()}),f.jsx("button",{onClick:z,className:"text-blue-600 hover:bg-blue-50 p-1 rounded",children:f.jsx(Nn,{size:14})}),f.jsx("button",{onClick:()=>O(!1),className:"text-slate-400 hover:text-slate-600 p-1",children:f.jsx(Xn,{size:14})})]}):f.jsx("button",{onClick:()=>O(!0),className:"p-1.5 rounded-lg text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-slate-600 transition-colors",title:"",children:f.jsx(Nn,{size:18})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50/50 dark:bg-slate-900/30",children:Se.length===0?f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-300",children:[f.jsx(Ed,{size:48,className:"mb-4 opacity-50"}),f.jsx("p",{children:""})]}):f.jsx(Xb,{sensors:_t,collisionDetection:XE,onDragEnd:Ie,children:f.jsx(ck,{items:Se.map(M=>M.id),strategy:lk,children:Se.map(M=>f.jsx(Ek,{item:M,info:Pe(M.category),updateItem:fe,handleRemoveItem:X},M.id))})})})]})]})]})},kk=({trip:t,categories:e,onUpdateTrip:n,onBack:r,onEdit:s})=>{const[i,o]=N.useState(t),[l,u]=N.useState(!1);N.useEffect(()=>{o(t)},[t]);const d=T=>{const C=i.items.map(_=>_.id===T?{..._,checked:!_.checked}:_),R={...i,items:C},b=C.every(_=>_.checked);R.status=b?"completed":"active",o(R),n(R)},p=Math.round(i.items.filter(T=>T.checked).length/i.items.length*100)||0,m=T=>{const C=e.find(R=>R.id===T);return{name:(C==null?void 0:C.name)||"",color:(C==null?void 0:C.color)||"bg-gray-100 text-gray-600 border-gray-200"}},g=()=>{const T=[],C={};return i.items.forEach(R=>{C[R.category]||(C[R.category]=[]),C[R.category].push(R)}),Object.keys(C).forEach(R=>{const b=C[R],_={};b.forEach(D=>{_[D.name]||(_[D.name]=[]),_[D.name].push(D)});const I=Object.keys(_).map(D=>{const O=_[D],F=O.reduce((E,k)=>E+k.qty,0),w={};O.forEach(E=>{const k=E.version||"()";w[k]=(w[k]||0)+E.qty});const y=Object.keys(w).map(E=>({version:E,qty:w[E]}));return{name:D,totalQty:F,details:y}});T.push({categoryId:R,items:I})}),T},x=()=>{let T=`# ${i.name}
 ${i.date}

`;i.groups.forEach(I=>{const D=i.items.filter(O=>O.tripGroupId===I.id);D.length>0&&(T+=`## ${I.name}
`,D.forEach(O=>{const F=O.checked?"[x]":"[ ]",w=O.version?` (${O.version.replace(/\n/g," ")})`:"";T+=`- ${F} ${O.name} x${O.qty}${w}
`}),T+=`
`)});const C=i.items.length,R=i.items.filter(I=>I.checked).length,b=Math.round(R/C*100)||0;T+=`---
`,T+=`###  
`,g().forEach(I=>{const D=m(I.categoryId).name;T+=`**${D}**
`,I.items.forEach(O=>{T+=`- ${O.name}: ${O.totalQty}
`}),T+=`
`}),T+=`---
`,T+=`${b}% (${R}/${C})`,navigator.clipboard.writeText(T).then(()=>alert(" Markdown  () "))};return f.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-20",children:[l&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:f.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-2xl shadow-2xl max-h-[85vh] flex flex-col border border-slate-200 dark:border-slate-700",children:[f.jsxs("div",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50 rounded-t-xl",children:[f.jsxs("h3",{className:"font-bold text-xl flex items-center gap-2 text-slate-800 dark:text-white",children:[f.jsx(Vm,{className:"text-blue-600"})," "]}),f.jsx("button",{onClick:()=>u(!1),className:"p-1 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-full transition-colors",children:f.jsx(Xn,{size:24,className:"text-slate-500"})})]}),f.jsxs("div",{className:"p-6 overflow-y-auto flex-1 space-y-6",children:[g().map(T=>{const C=m(T.categoryId);return f.jsxs("div",{className:"border border-slate-100 dark:border-slate-700 rounded-xl overflow-hidden shadow-sm",children:[f.jsx("div",{className:`px-4 py-2 font-bold text-sm uppercase tracking-wider border-b dark:border-slate-700 ${C.color.replace("text-","bg-opacity-10 bg-").split(" ")[0]} ${C.color.split(" ")[1]}`,children:C.name}),f.jsx("div",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:T.items.map((R,b)=>f.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 flex flex-col sm:flex-row sm:justify-between gap-2",children:[f.jsxs("div",{className:"flex items-baseline gap-2",children:[f.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg",children:R.name}),f.jsxs("span",{className:"text-xs bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 px-2 py-0.5 rounded-full font-medium",children:[": ",R.totalQty]})]}),f.jsx("div",{className:"flex flex-col gap-1 sm:items-end",children:R.details.map((_,I)=>f.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 flex items-center gap-2",children:[f.jsx("span",{className:`px-2 py-0.5 rounded text-xs border ${_.version==="()"?"bg-slate-50 dark:bg-slate-700 border-slate-200 dark:border-slate-600 text-slate-400":"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-700 dark:text-yellow-500"}`,children:_.version}),f.jsxs("span",{className:"font-mono",children:["x",_.qty]})]},I))})]},b))})]},T.categoryId)}),i.items.length===0&&f.jsx("p",{className:"text-center text-slate-400 py-8",children:""})]}),f.jsx("div",{className:"p-4 border-t dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 text-center rounded-b-xl",children:f.jsx("button",{onClick:()=>u(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-sm",children:""})})]})}),f.jsxs("div",{className:"sticky top-0 z-10 bg-slate-50/95 dark:bg-slate-950/95 backdrop-blur-sm pt-4 pb-2 border-b border-slate-200 dark:border-slate-800",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("button",{onClick:r,className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white",children:[f.jsx(rv,{size:20,className:"mr-1"})," "]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-all",title:"",children:[f.jsx(CE,{size:16}),f.jsx("span",{className:"hidden sm:inline",children:""})]}),f.jsx("div",{className:"h-4 w-px bg-slate-300 dark:bg-slate-600 mx-1"}),f.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 font-medium shadow-sm transition-all",title:"",children:[f.jsx(Vm,{size:16}),f.jsx("span",{className:"hidden sm:inline",children:""})]}),f.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-all",children:[f.jsx(SE,{size:16}),""]}),f.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${i.status==="completed"?"bg-green-500 text-white":"bg-blue-600 text-white"}`,children:i.status==="completed"?"":""})]})]}),f.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:i.name}),f.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex items-center gap-4",children:[f.jsx("div",{className:"flex-1 h-3 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-green-500 transition-all duration-500 ease-out",style:{width:`${p}%`}})}),f.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300 min-w-[3rem] text-right",children:[p,"%"]})]})]}),i.groups.map(T=>{const C=i.items.filter(R=>R.tripGroupId===T.id);return C.length===0?null:f.jsxs("div",{className:"space-y-3",children:[f.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-300 text-lg flex items-center gap-2 border-l-4 border-blue-500 pl-3",children:[f.jsx(Pm,{size:18,className:"text-blue-500"}),T.name]}),f.jsx("div",{className:"grid grid-cols-1 gap-3",children:C.map(R=>{const b=m(R.category);return f.jsxs("div",{onClick:()=>d(R.id),className:`relative cursor-pointer transition-all duration-200 p-4 rounded-xl border-2 shadow-sm flex items-start gap-4 ${R.checked?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 opacity-70":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md"}`,children:[f.jsxs("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center transition-colors mt-1 ${R.checked?"bg-green-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-300 dark:text-slate-500"}`,children:[f.jsx(hE,{size:20,className:R.checked?"opacity-100":"opacity-0"}),!R.checked&&f.jsx(pE,{size:20,className:"absolute"})]}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex justify-between items-start mb-1",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:`text-lg font-bold break-words ${R.checked?"text-slate-500 dark:text-slate-500 line-through":"text-slate-800 dark:text-slate-200"}`,children:R.name}),f.jsx("span",{className:`text-[10px] w-fit px-1.5 py-0.5 rounded border mt-1 ${b.color}`,children:b.name})]}),f.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 font-bold px-2 py-1 rounded text-sm whitespace-nowrap ml-2",children:["x",R.qty]})]}),R.version&&f.jsx("div",{className:`text-sm mt-2 font-medium px-3 py-2 rounded w-full whitespace-pre-wrap break-words leading-relaxed ${R.checked?"bg-slate-100 dark:bg-slate-700 text-slate-400 dark:text-slate-500":"bg-yellow-50 dark:bg-yellow-900/10 text-yellow-800 dark:text-yellow-200 border border-yellow-200 dark:border-yellow-800"}`,children:R.version})]})]},R.id)})})]},T.id)}),i.items.length===0&&f.jsxs("div",{className:"text-center py-20 text-slate-400",children:[f.jsx(Pm,{size:48,className:"mx-auto mb-4 opacity-50"}),f.jsx("p",{children:""})]})]})};var Ym={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Ik=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Rv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,x=d&63;u||(x=64,o||(g=64)),r.push(n[p],n[m],n[g],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Av(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ik(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new Sk;const g=i<<2|l>>4;if(r.push(g),d!==64){const x=l<<4&240|d>>2;if(r.push(x),m!==64){const T=d<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Sk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tk=function(t){const e=Av(t);return Rv.encodeByteArray(e,!0)},Ol=function(t){return Tk(t).replace(/\./g,"")},Ck=function(t){try{return Rv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ml(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Ak(n)||(t[n]=Ml(t[n],e[n]));return t}function Ak(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=()=>Nv().__FIREBASE_DEFAULTS__,Nk=()=>{if(typeof process>"u"||typeof Ym>"u")return;const t=Ym.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Pk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ck(t[1]);return e&&JSON.parse(e)},Yh=()=>{try{return Rk()||Nk()||Pk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Dk=t=>{var e,n;return(n=(e=Yh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Vk=t=>{const e=Dk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Pv=()=>{var t;return(t=Yh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ol(JSON.stringify(n)),Ol(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mk(){var t;const e=(t=Yh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Fk(){return typeof window<"u"||Dv()}function Dv(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function zk(){return!Mk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uk(){try{return typeof indexedDB=="object"}catch{return!1}}function Bk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="FirebaseError";class ws extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$k,Object.setPrototypeOf(this,ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vu.prototype.create)}}class vu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Hk(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ws(s,l,r)}}function Hk(t,e){return t.replace(Wk,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Wk=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Cd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Jm(i)&&Jm(o)){if(!Cd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Jm(t){return t!==null&&typeof t=="object"}function qk(t,e){const n=new Gk(t,e);return n.subscribe.bind(n)}class Gk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Kk(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=_c),s.error===void 0&&(s.error=_c),s.complete===void 0&&(s.complete=_c);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _c(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(t){return t&&t._delegate?t._delegate:t}class oi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Xk(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Yk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Yk(t){return t===ns?void 0:t}function Xk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Qk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh=[];var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const jv={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},Jk=we.INFO,Zk={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},eI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Zk[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jh{constructor(e){this.name=e,this._logLevel=Jk,this._logHandler=eI,this._userLogHandler=null,Xh.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}function tI(t){Xh.forEach(e=>{e.setLogLevel(t)})}function nI(t,e){for(const n of Xh){let r=null;e&&e.level&&(r=jv[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const l=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");i>=(r??s.logLevel)&&t({level:we[i].toLowerCase(),message:l,args:o,type:s.name})}}}const rI=(t,e)=>e.some(n=>t instanceof n);let Zm,eg;function sI(){return Zm||(Zm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iI(){return eg||(eg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lv=new WeakMap,Ad=new WeakMap,Ov=new WeakMap,wc=new WeakMap,Zh=new WeakMap;function oI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Pr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Lv.set(n,t)}).catch(()=>{}),Zh.set(e,t),e}function aI(t){if(Ad.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ad.set(t,e)}let Rd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ad.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ov.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lI(t){Rd=t(Rd)}function uI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xc(this),e,...n);return Ov.set(r,e.sort?e.sort():[e]),Pr(r)}:iI().includes(t)?function(...e){return t.apply(xc(this),e),Pr(Lv.get(this))}:function(...e){return Pr(t.apply(xc(this),e))}}function cI(t){return typeof t=="function"?uI(t):(t instanceof IDBTransaction&&aI(t),rI(t,sI())?new Proxy(t,Rd):t)}function Pr(t){if(t instanceof IDBRequest)return oI(t);if(wc.has(t))return wc.get(t);const e=cI(t);return e!==t&&(wc.set(t,e),Zh.set(e,t)),e}const xc=t=>Zh.get(t);function dI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Pr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Pr(o.result),u.oldVersion,u.newVersion,Pr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const hI=["get","getKey","getAll","getAllKeys","count"],fI=["put","add","delete","clear"],Ec=new Map;function tg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ec.get(e))return Ec.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=fI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hI.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Ec.set(e,i),i}lI(t=>({...t,get:(e,n,r)=>tg(e,n)||t.get(e,n,r),has:(e,n)=>!!tg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zl="@firebase/app",Nd="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new Jh("@firebase/app"),gI="@firebase/app-compat",yI="@firebase/analytics-compat",vI="@firebase/analytics",_I="@firebase/app-check-compat",wI="@firebase/app-check",xI="@firebase/auth",EI="@firebase/auth-compat",bI="@firebase/database",kI="@firebase/data-connect",II="@firebase/database-compat",SI="@firebase/functions",TI="@firebase/functions-compat",CI="@firebase/installations",AI="@firebase/installations-compat",RI="@firebase/messaging",NI="@firebase/messaging-compat",PI="@firebase/performance",DI="@firebase/performance-compat",VI="@firebase/remote-config",jI="@firebase/remote-config-compat",LI="@firebase/storage",OI="@firebase/storage-compat",MI="@firebase/firestore",FI="@firebase/vertexai-preview",zI="@firebase/firestore-compat",UI="firebase",BI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr="[DEFAULT]",$I={[zl]:"fire-core",[gI]:"fire-core-compat",[vI]:"fire-analytics",[yI]:"fire-analytics-compat",[wI]:"fire-app-check",[_I]:"fire-app-check-compat",[xI]:"fire-auth",[EI]:"fire-auth-compat",[bI]:"fire-rtdb",[kI]:"fire-data-connect",[II]:"fire-rtdb-compat",[SI]:"fire-fn",[TI]:"fire-fn-compat",[CI]:"fire-iid",[AI]:"fire-iid-compat",[RI]:"fire-fcm",[NI]:"fire-fcm-compat",[PI]:"fire-perf",[DI]:"fire-perf-compat",[VI]:"fire-rc",[jI]:"fire-rc-compat",[LI]:"fire-gcs",[OI]:"fire-gcs-compat",[MI]:"fire-fst",[zI]:"fire-fst-compat",[FI]:"fire-vertex","fire-js":"fire-js",[UI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new Map,ai=new Map,li=new Map;function Mo(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mv(t,e){t.container.addOrOverwriteComponent(e)}function ui(t){const e=t.name;if(li.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;li.set(e,t);for(const n of Or.values())Mo(n,t);for(const n of ai.values())Mo(n,t);return!0}function ef(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function HI(t,e,n=Lr){ef(t,e).clearInstance(n)}function Fv(t){return t.options!==void 0}function WI(t){return t.settings!==void 0}function qI(){li.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cn=new vu("app","Firebase",GI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zv=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI extends zv{constructor(e,n,r,s){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,o,s);else{const l=e;super(l.options,o,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Zn(zl,Nd,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){rf(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw cn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=BI;function nf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Lr,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw cn.create("bad-app-name",{appName:String(s)});if(n||(n=Pv()),!n)throw cn.create("no-options");const i=Or.get(s);if(i){if(Cd(n,i.options)&&Cd(r,i.config))return i;throw cn.create("duplicate-app",{appName:s})}const o=new Vv(s);for(const u of li.values())o.addComponent(u);const l=new zv(n,r,o);return Or.set(s,l),l}function QI(t,e){if(Fk()&&!Dv())throw cn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;Fv(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=d=>[...d].reduce((p,m)=>Math.imul(31,p)+m.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw cn.create("finalization-registry-not-supported",{});const i=""+s(JSON.stringify(r)),o=ai.get(i);if(o)return o.incRefCount(e.releaseOnDeref),o;const l=new Vv(i);for(const d of li.values())l.addComponent(d);const u=new KI(n,e,i,l);return ai.set(i,u),u}function Uv(t=Lr){const e=Or.get(t);if(!e&&t===Lr&&Pv())return nf();if(!e)throw cn.create("no-app",{appName:t});return e}function YI(){return Array.from(Or.values())}async function rf(t){let e=!1;const n=t.name;Or.has(n)?(e=!0,Or.delete(n)):ai.has(n)&&t.decRefCount()<=0&&(ai.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Zn(t,e,n){var r;let s=(r=$I[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(l.join(" "));return}ui(new oi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function Bv(t,e){if(t!==null&&typeof t!="function")throw cn.create("invalid-log-argument");nI(t,e)}function $v(t){tI(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="firebase-heartbeat-database",JI=1,Fo="firebase-heartbeat-store";let bc=null;function Hv(){return bc||(bc=dI(XI,JI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fo)}catch(n){console.warn(n)}}}}).catch(t=>{throw cn.create("idb-open",{originalErrorMessage:t.message})})),bc}async function ZI(t){try{const n=(await Hv()).transaction(Fo),r=await n.objectStore(Fo).get(Wv(t));return await n.done,r}catch(e){if(e instanceof ws)ir.warn(e.message);else{const n=cn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ir.warn(n.message)}}}async function ng(t,e){try{const r=(await Hv()).transaction(Fo,"readwrite");await r.objectStore(Fo).put(e,Wv(t)),await r.done}catch(n){if(n instanceof ws)ir.warn(n.message);else{const r=cn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ir.warn(r.message)}}}function Wv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=1024,t2=30*24*60*60*1e3;class n2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new s2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=rg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=t2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rg(),{heartbeatsToSend:r,unsentEntries:s}=r2(this._heartbeatsCache.heartbeats),i=Ol(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ir.warn(n),""}}}function rg(){return new Date().toISOString().substring(0,10)}function r2(t,e=e2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),sg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),sg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class s2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Uk()?Bk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ng(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ng(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function sg(t){return Ol(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t){ui(new oi("platform-logger",e=>new pI(e),"PRIVATE")),ui(new oi("heartbeat",e=>new n2(e),"PRIVATE")),Zn(zl,Nd,t),Zn(zl,Nd,"esm2017"),Zn("fire-js","")}i2("");const o2=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ws,SDK_VERSION:tf,_DEFAULT_ENTRY_NAME:Lr,_addComponent:Mo,_addOrOverwriteComponent:Mv,_apps:Or,_clearComponents:qI,_components:li,_getProvider:ef,_isFirebaseApp:Fv,_isFirebaseServerApp:WI,_registerComponent:ui,_removeServiceInstance:HI,_serverApps:ai,deleteApp:rf,getApp:Uv,getApps:YI,initializeApp:nf,initializeServerApp:QI,onLog:Bv,registerVersion:Zn,setLogLevel:$v},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n){this._delegate=e,this.firebase=n,Mo(e,new oi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),rf(this._delegate)))}_getService(e,n=Lr){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=Lr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Mo(this._delegate,e)}_addOrOverwriteComponent(e){Mv(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},ig=new vu("app-compat","Firebase",l2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:Zn,setLogLevel:$v,onLog:Bv,apps:null,SDK_VERSION:tf,INTERNAL:{registerComponent:l,removeApp:r,useAsService:u,modularAPIs:o2}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(d){delete e[d]}function s(d){if(d=d||Lr,!Xm(e,d))throw ig.create("no-app",{appName:d});return e[d]}s.App=t;function i(d,p={}){const m=nf(d,p);if(Xm(e,m.name))return e[m.name];const g=new t(m,n);return e[m.name]=g,g}function o(){return Object.keys(e).map(d=>e[d])}function l(d){const p=d.name,m=p.replace("-compat","");if(ui(d)&&d.type==="PUBLIC"){const g=(x=s())=>{if(typeof x[m]!="function")throw ig.create("invalid-app-argument",{appName:p});return x[m]()};d.serviceProps!==void 0&&Ml(g,d.serviceProps),n[m]=g,t.prototype[m]=function(...x){return this._getService.bind(this,p).apply(this,d.multipleInstances?x:[])}}return d.type==="PUBLIC"?n[m]:null}function u(d,p){return p==="serverAuth"?null:p}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(){const t=u2(a2);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:qv,extendNamespace:e,createSubscribe:qk,ErrorFactory:vu,deepExtend:Ml});function e(n){Ml(t,n)}return t}const c2=qv();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=new Jh("@firebase/app-compat"),d2="@firebase/app-compat",h2="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t){Zn(d2,h2,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=Nv();if(t.firebase!==void 0){og.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&og.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Gv=c2;f2();var p2="firebase",m2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gv.registerVersion(p2,m2,"app-compat");var ag=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,Kv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,y){function E(){}E.prototype=y.prototype,w.D=y.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(k,A,P){for(var S=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)S[ve-2]=arguments[ve];return y.prototype[A].apply(k,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,y,E){E||(E=0);var k=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)k[A]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(A=0;16>A;++A)k[A]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=w.g[0],E=w.g[1],A=w.g[2];var P=w.g[3],S=y+(P^E&(A^P))+k[0]+3614090360&4294967295;y=E+(S<<7&4294967295|S>>>25),S=P+(A^y&(E^A))+k[1]+3905402710&4294967295,P=y+(S<<12&4294967295|S>>>20),S=A+(E^P&(y^E))+k[2]+606105819&4294967295,A=P+(S<<17&4294967295|S>>>15),S=E+(y^A&(P^y))+k[3]+3250441966&4294967295,E=A+(S<<22&4294967295|S>>>10),S=y+(P^E&(A^P))+k[4]+4118548399&4294967295,y=E+(S<<7&4294967295|S>>>25),S=P+(A^y&(E^A))+k[5]+1200080426&4294967295,P=y+(S<<12&4294967295|S>>>20),S=A+(E^P&(y^E))+k[6]+2821735955&4294967295,A=P+(S<<17&4294967295|S>>>15),S=E+(y^A&(P^y))+k[7]+4249261313&4294967295,E=A+(S<<22&4294967295|S>>>10),S=y+(P^E&(A^P))+k[8]+1770035416&4294967295,y=E+(S<<7&4294967295|S>>>25),S=P+(A^y&(E^A))+k[9]+2336552879&4294967295,P=y+(S<<12&4294967295|S>>>20),S=A+(E^P&(y^E))+k[10]+4294925233&4294967295,A=P+(S<<17&4294967295|S>>>15),S=E+(y^A&(P^y))+k[11]+2304563134&4294967295,E=A+(S<<22&4294967295|S>>>10),S=y+(P^E&(A^P))+k[12]+1804603682&4294967295,y=E+(S<<7&4294967295|S>>>25),S=P+(A^y&(E^A))+k[13]+4254626195&4294967295,P=y+(S<<12&4294967295|S>>>20),S=A+(E^P&(y^E))+k[14]+2792965006&4294967295,A=P+(S<<17&4294967295|S>>>15),S=E+(y^A&(P^y))+k[15]+1236535329&4294967295,E=A+(S<<22&4294967295|S>>>10),S=y+(A^P&(E^A))+k[1]+4129170786&4294967295,y=E+(S<<5&4294967295|S>>>27),S=P+(E^A&(y^E))+k[6]+3225465664&4294967295,P=y+(S<<9&4294967295|S>>>23),S=A+(y^E&(P^y))+k[11]+643717713&4294967295,A=P+(S<<14&4294967295|S>>>18),S=E+(P^y&(A^P))+k[0]+3921069994&4294967295,E=A+(S<<20&4294967295|S>>>12),S=y+(A^P&(E^A))+k[5]+3593408605&4294967295,y=E+(S<<5&4294967295|S>>>27),S=P+(E^A&(y^E))+k[10]+38016083&4294967295,P=y+(S<<9&4294967295|S>>>23),S=A+(y^E&(P^y))+k[15]+3634488961&4294967295,A=P+(S<<14&4294967295|S>>>18),S=E+(P^y&(A^P))+k[4]+3889429448&4294967295,E=A+(S<<20&4294967295|S>>>12),S=y+(A^P&(E^A))+k[9]+568446438&4294967295,y=E+(S<<5&4294967295|S>>>27),S=P+(E^A&(y^E))+k[14]+3275163606&4294967295,P=y+(S<<9&4294967295|S>>>23),S=A+(y^E&(P^y))+k[3]+4107603335&4294967295,A=P+(S<<14&4294967295|S>>>18),S=E+(P^y&(A^P))+k[8]+1163531501&4294967295,E=A+(S<<20&4294967295|S>>>12),S=y+(A^P&(E^A))+k[13]+2850285829&4294967295,y=E+(S<<5&4294967295|S>>>27),S=P+(E^A&(y^E))+k[2]+4243563512&4294967295,P=y+(S<<9&4294967295|S>>>23),S=A+(y^E&(P^y))+k[7]+1735328473&4294967295,A=P+(S<<14&4294967295|S>>>18),S=E+(P^y&(A^P))+k[12]+2368359562&4294967295,E=A+(S<<20&4294967295|S>>>12),S=y+(E^A^P)+k[5]+4294588738&4294967295,y=E+(S<<4&4294967295|S>>>28),S=P+(y^E^A)+k[8]+2272392833&4294967295,P=y+(S<<11&4294967295|S>>>21),S=A+(P^y^E)+k[11]+1839030562&4294967295,A=P+(S<<16&4294967295|S>>>16),S=E+(A^P^y)+k[14]+4259657740&4294967295,E=A+(S<<23&4294967295|S>>>9),S=y+(E^A^P)+k[1]+2763975236&4294967295,y=E+(S<<4&4294967295|S>>>28),S=P+(y^E^A)+k[4]+1272893353&4294967295,P=y+(S<<11&4294967295|S>>>21),S=A+(P^y^E)+k[7]+4139469664&4294967295,A=P+(S<<16&4294967295|S>>>16),S=E+(A^P^y)+k[10]+3200236656&4294967295,E=A+(S<<23&4294967295|S>>>9),S=y+(E^A^P)+k[13]+681279174&4294967295,y=E+(S<<4&4294967295|S>>>28),S=P+(y^E^A)+k[0]+3936430074&4294967295,P=y+(S<<11&4294967295|S>>>21),S=A+(P^y^E)+k[3]+3572445317&4294967295,A=P+(S<<16&4294967295|S>>>16),S=E+(A^P^y)+k[6]+76029189&4294967295,E=A+(S<<23&4294967295|S>>>9),S=y+(E^A^P)+k[9]+3654602809&4294967295,y=E+(S<<4&4294967295|S>>>28),S=P+(y^E^A)+k[12]+3873151461&4294967295,P=y+(S<<11&4294967295|S>>>21),S=A+(P^y^E)+k[15]+530742520&4294967295,A=P+(S<<16&4294967295|S>>>16),S=E+(A^P^y)+k[2]+3299628645&4294967295,E=A+(S<<23&4294967295|S>>>9),S=y+(A^(E|~P))+k[0]+4096336452&4294967295,y=E+(S<<6&4294967295|S>>>26),S=P+(E^(y|~A))+k[7]+1126891415&4294967295,P=y+(S<<10&4294967295|S>>>22),S=A+(y^(P|~E))+k[14]+2878612391&4294967295,A=P+(S<<15&4294967295|S>>>17),S=E+(P^(A|~y))+k[5]+4237533241&4294967295,E=A+(S<<21&4294967295|S>>>11),S=y+(A^(E|~P))+k[12]+1700485571&4294967295,y=E+(S<<6&4294967295|S>>>26),S=P+(E^(y|~A))+k[3]+2399980690&4294967295,P=y+(S<<10&4294967295|S>>>22),S=A+(y^(P|~E))+k[10]+4293915773&4294967295,A=P+(S<<15&4294967295|S>>>17),S=E+(P^(A|~y))+k[1]+2240044497&4294967295,E=A+(S<<21&4294967295|S>>>11),S=y+(A^(E|~P))+k[8]+1873313359&4294967295,y=E+(S<<6&4294967295|S>>>26),S=P+(E^(y|~A))+k[15]+4264355552&4294967295,P=y+(S<<10&4294967295|S>>>22),S=A+(y^(P|~E))+k[6]+2734768916&4294967295,A=P+(S<<15&4294967295|S>>>17),S=E+(P^(A|~y))+k[13]+1309151649&4294967295,E=A+(S<<21&4294967295|S>>>11),S=y+(A^(E|~P))+k[4]+4149444226&4294967295,y=E+(S<<6&4294967295|S>>>26),S=P+(E^(y|~A))+k[11]+3174756917&4294967295,P=y+(S<<10&4294967295|S>>>22),S=A+(y^(P|~E))+k[2]+718787259&4294967295,A=P+(S<<15&4294967295|S>>>17),S=E+(P^(A|~y))+k[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(A+(S<<21&4294967295|S>>>11))&4294967295,w.g[2]=w.g[2]+A&4294967295,w.g[3]=w.g[3]+P&4294967295}r.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var E=y-this.blockSize,k=this.B,A=this.h,P=0;P<y;){if(A==0)for(;P<=E;)s(this,w,P),P+=this.blockSize;if(typeof w=="string"){for(;P<y;)if(k[A++]=w.charCodeAt(P++),A==this.blockSize){s(this,k),A=0;break}}else for(;P<y;)if(k[A++]=w[P++],A==this.blockSize){s(this,k),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var E=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=E&255,E/=256;for(this.u(w),w=Array(16),y=E=0;4>y;++y)for(var k=0;32>k;k+=8)w[E++]=this.g[y]>>>k&255;return w};function i(w,y){var E=l;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=y(w)}function o(w,y){this.h=y;for(var E=[],k=!0,A=w.length-1;0<=A;A--){var P=w[A]|0;k&&P==y||(E[A]=P,k=!1)}this.g=E}var l={};function u(w){return-128<=w&&128>w?i(w,function(y){return new o([y|0],0>y?-1:0)}):new o([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return R(d(-w));for(var y=[],E=1,k=0;w>=E;k++)y[k]=w/E|0,E*=4294967296;return new o(y,0)}function p(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return R(p(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(y,8)),k=m,A=0;A<w.length;A+=8){var P=Math.min(8,w.length-A),S=parseInt(w.substring(A,A+P),y);8>P?(P=d(Math.pow(y,P)),k=k.j(P).add(d(S))):(k=k.j(E),k=k.add(d(S)))}return k}var m=u(0),g=u(1),x=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-R(this).m();for(var w=0,y=1,E=0;E<this.g.length;E++){var k=this.i(E);w+=(0<=k?k:4294967296+k)*y,y*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T(this))return"0";if(C(this))return"-"+R(this).toString(w);for(var y=d(Math.pow(w,6)),E=this,k="";;){var A=D(E,y).g;E=b(E,A.j(y));var P=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=A,T(E))return P+k;for(;6>P.length;)P="0"+P;k=P+k}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function T(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function C(w){return w.h==-1}t.l=function(w){return w=b(this,w),C(w)?-1:T(w)?0:1};function R(w){for(var y=w.g.length,E=[],k=0;k<y;k++)E[k]=~w.g[k];return new o(E,~w.h).add(g)}t.abs=function(){return C(this)?R(this):this},t.add=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],k=0,A=0;A<=y;A++){var P=k+(this.i(A)&65535)+(w.i(A)&65535),S=(P>>>16)+(this.i(A)>>>16)+(w.i(A)>>>16);k=S>>>16,P&=65535,S&=65535,E[A]=S<<16|P}return new o(E,E[E.length-1]&-2147483648?-1:0)};function b(w,y){return w.add(R(y))}t.j=function(w){if(T(this)||T(w))return m;if(C(this))return C(w)?R(this).j(R(w)):R(R(this).j(w));if(C(w))return R(this.j(R(w)));if(0>this.l(x)&&0>w.l(x))return d(this.m()*w.m());for(var y=this.g.length+w.g.length,E=[],k=0;k<2*y;k++)E[k]=0;for(k=0;k<this.g.length;k++)for(var A=0;A<w.g.length;A++){var P=this.i(k)>>>16,S=this.i(k)&65535,ve=w.i(A)>>>16,He=w.i(A)&65535;E[2*k+2*A]+=S*He,_(E,2*k+2*A),E[2*k+2*A+1]+=P*He,_(E,2*k+2*A+1),E[2*k+2*A+1]+=S*ve,_(E,2*k+2*A+1),E[2*k+2*A+2]+=P*ve,_(E,2*k+2*A+2)}for(k=0;k<y;k++)E[k]=E[2*k+1]<<16|E[2*k];for(k=y;k<2*y;k++)E[k]=0;return new o(E,0)};function _(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function I(w,y){this.g=w,this.h=y}function D(w,y){if(T(y))throw Error("division by zero");if(T(w))return new I(m,m);if(C(w))return y=D(R(w),y),new I(R(y.g),R(y.h));if(C(y))return y=D(w,R(y)),new I(R(y.g),y.h);if(30<w.g.length){if(C(w)||C(y))throw Error("slowDivide_ only works with positive integers.");for(var E=g,k=y;0>=k.l(w);)E=O(E),k=O(k);var A=F(E,1),P=F(k,1);for(k=F(k,2),E=F(E,2);!T(k);){var S=P.add(k);0>=S.l(w)&&(A=A.add(E),P=S),k=F(k,1),E=F(E,1)}return y=b(w,A.j(y)),new I(A,y)}for(A=m;0<=w.l(y);){for(E=Math.max(1,Math.floor(w.m()/y.m())),k=Math.ceil(Math.log(E)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),P=d(E),S=P.j(y);C(S)||0<S.l(w);)E-=k,P=d(E),S=P.j(y);T(P)&&(P=g),A=A.add(P),w=b(w,S)}return new I(A,w)}t.A=function(w){return D(this,w).h},t.and=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],k=0;k<y;k++)E[k]=this.i(k)&w.i(k);return new o(E,this.h&w.h)},t.or=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],k=0;k<y;k++)E[k]=this.i(k)|w.i(k);return new o(E,this.h|w.h)},t.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],k=0;k<y;k++)E[k]=this.i(k)^w.i(k);return new o(E,this.h^w.h)};function O(w){for(var y=w.g.length+1,E=[],k=0;k<y;k++)E[k]=w.i(k)<<1|w.i(k-1)>>>31;return new o(E,w.h)}function F(w,y){var E=y>>5;y%=32;for(var k=w.g.length-E,A=[],P=0;P<k;P++)A[P]=0<y?w.i(P+E)>>>y|w.i(P+E+1)<<32-y:w.i(P+E);return new o(A,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Kv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,us=o}).apply(typeof ag<"u"?ag:typeof self<"u"?self:typeof window<"u"?window:{});var Ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qv,Xi,Yv,sl,Pd,Xv,Jv,Zv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,h){return a==Array.prototype||a==Object.prototype||(a[c]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ua=="object"&&Ua];for(var c=0;c<a.length;++c){var h=a[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(a,c){if(c)e:{var h=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var V=a[v];if(!(V in h))break e;h=h[V]}a=a[a.length-1],v=h[a],c=c(v),c!=v&&c!=null&&e(h,a,{configurable:!0,writable:!0,value:c})}}function i(a,c){a instanceof String&&(a+="");var h=0,v=!1,V={next:function(){if(!v&&h<a.length){var L=h++;return{value:c(L,a[L]),done:!1}}return v=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(a){return a||function(){return i(this,function(c,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function d(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function p(a,c,h){return a.call.apply(a.bind,arguments)}function m(a,c,h){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,v),a.apply(c,V)}}return function(){return a.apply(c,arguments)}}function g(a,c,h){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,g.apply(null,arguments)}function x(a,c){var h=Array.prototype.slice.call(arguments,1);return function(){var v=h.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function T(a,c){function h(){}h.prototype=c.prototype,a.aa=c.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(v,V,L){for(var W=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)W[Re-2]=arguments[Re];return c.prototype[V].apply(v,W)}}function C(a){const c=a.length;if(0<c){const h=Array(c);for(let v=0;v<c;v++)h[v]=a[v];return h}return[]}function R(a,c){for(let h=1;h<arguments.length;h++){const v=arguments[h];if(u(v)){const V=a.length||0,L=v.length||0;a.length=V+L;for(let W=0;W<L;W++)a[V+W]=v[W]}else a.push(v)}}class b{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function _(a){return/^[\s\xa0]*$/.test(a)}function I(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var O=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function F(a,c,h){for(const v in a)c.call(h,a[v],v,a)}function w(a,c){for(const h in a)c.call(void 0,a[h],h,a)}function y(a){const c={};for(const h in a)c[h]=a[h];return c}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(a,c){let h,v;for(let V=1;V<arguments.length;V++){v=arguments[V];for(h in v)a[h]=v[h];for(let L=0;L<E.length;L++)h=E[L],Object.prototype.hasOwnProperty.call(v,h)&&(a[h]=v[h])}}function A(a){var c=1;a=a.split(":");const h=[];for(;0<c&&a.length;)h.push(a.shift()),c--;return a.length&&h.push(a.join(":")),h}function P(a){l.setTimeout(()=>{throw a},0)}function S(){var a=Q;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class ve{constructor(){this.h=this.g=null}add(c,h){const v=He.get();v.set(c,h),this.h?this.h.next=v:this.g=v,this.h=v}}var He=new b(()=>new _t,a=>a.reset());class _t{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,H=!1,Q=new ve,X=()=>{const a=l.Promise.resolve(void 0);Ie=()=>{a.then(fe)}};var fe=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(h){P(h)}var c=He;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}H=!1};function z(){this.s=this.s,this.C=this.C}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const h=()=>{};l.addEventListener("test",h,c),l.removeEventListener("test",h,c)}catch{}return a}();function ue(a,c){if(G.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(O){e:{try{D(c.nodeName);var V=!0;break e}catch{}V=!1}V||(c=null)}}else h=="mouseover"?c=a.fromElement:h=="mouseout"&&(c=a.toElement);this.relatedTarget=c,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:re[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ue.aa.h.call(this)}}T(ue,G);var re={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),Pe=0;function Ke(a,c,h,v,V){this.listener=a,this.proxy=null,this.src=c,this.type=h,this.capture=!!v,this.ha=V,this.key=++Pe,this.da=this.fa=!1}function M(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function J(a){this.src=a,this.g={},this.h=0}J.prototype.add=function(a,c,h,v,V){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var W=ce(a,c,v,V);return-1<W?(c=a[W],h||(c.fa=!1)):(c=new Ke(c,this.src,L,!!v,V),c.fa=h,a.push(c)),c};function Z(a,c){var h=c.type;if(h in a.g){var v=a.g[h],V=Array.prototype.indexOf.call(v,c,void 0),L;(L=0<=V)&&Array.prototype.splice.call(v,V,1),L&&(M(c),a.g[h].length==0&&(delete a.g[h],a.h--))}}function ce(a,c,h,v){for(var V=0;V<a.length;++V){var L=a[V];if(!L.da&&L.listener==c&&L.capture==!!h&&L.ha==v)return V}return-1}var De="closure_lm_"+(1e6*Math.random()|0),wt={};function xt(a,c,h,v,V){if(Array.isArray(c)){for(var L=0;L<c.length;L++)xt(a,c[L],h,v,V);return null}return h=Wr(h),a&&a[Se]?a.K(c,h,d(v)?!!v.capture:!1,V):Fn(a,c,h,!1,v,V)}function Fn(a,c,h,v,V,L){if(!c)throw Error("Invalid event type");var W=d(V)?!!V.capture:!!V,Re=Un(a);if(Re||(a[De]=Re=new J(a)),h=Re.add(c,h,v,W,L),h.proxy)return h;if(v=Hr(),h.proxy=v,v.src=a,v.listener=h,a.addEventListener)se||(V=W),V===void 0&&(V=!1),a.addEventListener(c.toString(),v,V);else if(a.attachEvent)a.attachEvent(zn(c.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return h}function Hr(){function a(h){return c.call(a.src,a.listener,h)}const c=ur;return a}function qt(a,c,h,v,V){if(Array.isArray(c))for(var L=0;L<c.length;L++)qt(a,c[L],h,v,V);else v=d(v)?!!v.capture:!!v,h=Wr(h),a&&a[Se]?(a=a.i,c=String(c).toString(),c in a.g&&(L=a.g[c],h=ce(L,h,v,V),-1<h&&(M(L[h]),Array.prototype.splice.call(L,h,1),L.length==0&&(delete a.g[c],a.h--)))):a&&(a=Un(a))&&(c=a.g[c.toString()],a=-1,c&&(a=ce(c,h,v,V)),(h=-1<a?c[a]:null)&&Pt(h))}function Pt(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[Se])Z(c.i,a);else{var h=a.type,v=a.proxy;c.removeEventListener?c.removeEventListener(h,v,a.capture):c.detachEvent?c.detachEvent(zn(h),v):c.addListener&&c.removeListener&&c.removeListener(v),(h=Un(c))?(Z(h,a),h.h==0&&(h.src=null,c[De]=null)):M(a)}}}function zn(a){return a in wt?wt[a]:wt[a]="on"+a}function ur(a,c){if(a.da)a=!0;else{c=new ue(c,this);var h=a.listener,v=a.ha||a.src;a.fa&&Pt(a),a=h.call(v,c)}return a}function Un(a){return a=a[De],a instanceof J?a:null}var cr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wr(a){return typeof a=="function"?a:(a[cr]||(a[cr]=function(c){return a.handleEvent(c)}),a[cr])}function Xe(){z.call(this),this.i=new J(this),this.M=this,this.F=null}T(Xe,z),Xe.prototype[Se]=!0,Xe.prototype.removeEventListener=function(a,c,h,v){qt(this,a,c,h,v)};function Oe(a,c){var h,v=a.F;if(v)for(h=[];v;v=v.F)h.push(v);if(a=a.M,v=c.type||c,typeof c=="string")c=new G(c,a);else if(c instanceof G)c.target=c.target||a;else{var V=c;c=new G(v,a),k(c,V)}if(V=!0,h)for(var L=h.length-1;0<=L;L--){var W=c.g=h[L];V=Gt(W,v,!0,c)&&V}if(W=c.g=a,V=Gt(W,v,!0,c)&&V,V=Gt(W,v,!1,c)&&V,h)for(L=0;L<h.length;L++)W=c.g=h[L],V=Gt(W,v,!1,c)&&V}Xe.prototype.N=function(){if(Xe.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var h=a.g[c],v=0;v<h.length;v++)M(h[v]);delete a.g[c],a.h--}}this.F=null},Xe.prototype.K=function(a,c,h,v){return this.i.add(String(a),c,!1,h,v)},Xe.prototype.L=function(a,c,h,v){return this.i.add(String(a),c,!0,h,v)};function Gt(a,c,h,v){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var V=!0,L=0;L<c.length;++L){var W=c[L];if(W&&!W.da&&W.capture==h){var Re=W.listener,dt=W.ha||W.src;W.fa&&Z(a.i,W),V=Re.call(dt,v)!==!1&&V}}return V&&!v.defaultPrevented}function In(a,c,h){if(typeof a=="function")h&&(a=g(a,h));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function dr(a){a.g=In(()=>{a.g=null,a.i&&(a.i=!1,dr(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class nn extends z{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:dr(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sn(a){z.call(this),this.h=a,this.g={}}T(Sn,z);var bs=[];function ks(a){F(a.g,function(c,h){this.g.hasOwnProperty(h)&&Pt(c)},a),a.g={}}Sn.prototype.N=function(){Sn.aa.N.call(this),ks(this)},Sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=l.JSON.stringify,$n=l.JSON.parse,Ti=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Hn(){}Hn.prototype.h=null;function qr(a){return a.h||(a.h=a.i())}function Gr(){}var Tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fe(){G.call(this,"d")}T(Fe,G);function j(){G.call(this,"c")}T(j,G);var q={},ie=null;function ee(){return ie=ie||new Xe}q.La="serverreachability";function Je(a){G.call(this,q.La,a)}T(Je,G);function tt(a){const c=ee();Oe(c,new Je(c))}q.STAT_EVENT="statevent";function Kt(a,c){G.call(this,q.STAT_EVENT,a),this.stat=c}T(Kt,G);function xe(a){const c=ee();Oe(c,new Kt(c,a))}q.Ma="timingevent";function pn(a,c){G.call(this,q.Ma,a),this.size=c}T(pn,G);function Et(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function Dt(){this.g=!0}Dt.prototype.xa=function(){this.g=!1};function Kr(a,c,h,v,V,L){a.info(function(){if(a.g)if(L)for(var W="",Re=L.split("&"),dt=0;dt<Re.length;dt++){var be=Re[dt].split("=");if(1<be.length){var bt=be[0];be=be[1];var kt=bt.split("_");W=2<=kt.length&&kt[1]=="type"?W+(bt+"="+be+"&"):W+(bt+"=redacted&")}}else W=null;else W=L;return"XMLHTTP REQ ("+v+") [attempt "+V+"]: "+c+`
`+h+`
`+W})}function Qr(a,c,h,v,V,L,W){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+V+"]: "+c+`
`+h+`
`+L+" "+W})}function Vt(a,c,h,v){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+Ci(a,h)+(v?" "+v:"")})}function Yr(a,c){a.info(function(){return"TIMEOUT: "+c})}Dt.prototype.info=function(){};function Ci(a,c){if(!a.g)return c;if(!c)return null;try{var h=JSON.parse(c);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var v=h[a];if(!(2>v.length)){var V=v[1];if(Array.isArray(V)&&!(1>V.length)){var L=V[0];if(L!="noop"&&L!="stop"&&L!="close")for(var W=1;W<V.length;W++)V[W]=""}}}}return Bn(h)}catch{return c}}var la={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Au;function ua(){}T(ua,Hn),ua.prototype.g=function(){return new XMLHttpRequest},ua.prototype.i=function(){return{}},Au=new ua;function hr(a,c,h,v){this.j=a,this.i=c,this.l=h,this.R=v||1,this.U=new Sn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Of}function Of(){this.i=null,this.g="",this.h=!1}var Mf={},Ru={};function Nu(a,c,h){a.L=1,a.v=fa(Wn(c)),a.m=h,a.P=!0,Ff(a,null)}function Ff(a,c){a.F=Date.now(),ca(a),a.A=Wn(a.v);var h=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Zf(h.i,"t",v),a.C=0,h=a.j.J,a.h=new Of,a.g=yp(a.j,h?c:null,!a.m),0<a.O&&(a.M=new nn(g(a.Y,a,a.g),a.O)),c=a.U,h=a.g,v=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(bs[0]=V.toString()),V=bs);for(var L=0;L<V.length;L++){var W=xt(h,V[L],v||c.handleEvent,!1,c.h||c);if(!W)break;c.g[W.key]=W}c=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),tt(),Kr(a.i,a.u,a.A,a.l,a.R,a.m)}hr.prototype.ca=function(a){a=a.target;const c=this.M;c&&qn(a)==3?c.j():this.Y(a)},hr.prototype.Y=function(a){try{if(a==this.g)e:{const kt=qn(this.g);var c=this.g.Ba();const Ts=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||op(this.g)))){this.J||kt!=4||c==7||(c==8||0>=Ts?tt(3):tt(2)),Pu(this);var h=this.g.Z();this.X=h;t:if(zf(this)){var v=op(this.g);a="";var V=v.length,L=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xr(this),Ai(this);var W="";break t}this.h.i=new l.TextDecoder}for(c=0;c<V;c++)this.h.h=!0,a+=this.h.i.decode(v[c],{stream:!(L&&c==V-1)});v.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=h==200,Qr(this.i,this.u,this.A,this.l,this.R,kt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,dt=this.g;if((Re=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Re)){var be=Re;break t}}be=null}if(h=be)Vt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Du(this,h);else{this.o=!1,this.s=3,xe(12),Xr(this),Ai(this);break e}}if(this.P){h=!0;let mn;for(;!this.J&&this.C<W.length;)if(mn=fw(this,W),mn==Ru){kt==4&&(this.s=4,xe(14),h=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==Mf){this.s=4,xe(15),Vt(this.i,this.l,W,"[Invalid Chunk]"),h=!1;break}else Vt(this.i,this.l,mn,null),Du(this,mn);if(zf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||W.length!=0||this.h.h||(this.s=1,xe(16),h=!1),this.o=this.o&&h,!h)Vt(this.i,this.l,W,"[Invalid Chunked Response]"),Xr(this),Ai(this);else if(0<W.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Fu(bt),bt.M=!0,xe(11))}}else Vt(this.i,this.l,W,null),Du(this,W);kt==4&&Xr(this),this.o&&!this.J&&(kt==4?fp(this.j,this):(this.o=!1,ca(this)))}else Rw(this.g),h==400&&0<W.indexOf("Unknown SID")?(this.s=3,xe(12)):(this.s=0,xe(13)),Xr(this),Ai(this)}}}catch{}finally{}};function zf(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function fw(a,c){var h=a.C,v=c.indexOf(`
`,h);return v==-1?Ru:(h=Number(c.substring(h,v)),isNaN(h)?Mf:(v+=1,v+h>c.length?Ru:(c=c.slice(v,v+h),a.C=v+h,c)))}hr.prototype.cancel=function(){this.J=!0,Xr(this)};function ca(a){a.S=Date.now()+a.I,Uf(a,a.I)}function Uf(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Et(g(a.ba,a),c)}function Pu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}hr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Yr(this.i,this.A),this.L!=2&&(tt(),xe(17)),Xr(this),this.s=2,Ai(this)):Uf(this,this.S-a)};function Ai(a){a.j.G==0||a.J||fp(a.j,a)}function Xr(a){Pu(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,ks(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function Du(a,c){try{var h=a.j;if(h.G!=0&&(h.g==a||Vu(h.h,a))){if(!a.K&&Vu(h.h,a)&&h.G==3){try{var v=h.Da.g.parse(c)}catch{v=null}if(Array.isArray(v)&&v.length==3){var V=v;if(V[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)_a(h),ya(h);else break e;Mu(h),xe(18)}}else h.za=V[1],0<h.za-h.T&&37500>V[2]&&h.F&&h.v==0&&!h.C&&(h.C=Et(g(h.Za,h),6e3));if(1>=Hf(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Zr(h,11)}else if((a.K||h.g==a)&&_a(h),!_(c))for(V=h.Da.g.parse(c),c=0;c<V.length;c++){let be=V[c];if(h.T=be[0],be=be[1],h.G==2)if(be[0]=="c"){h.K=be[1],h.ia=be[2];const bt=be[3];bt!=null&&(h.la=bt,h.j.info("VER="+h.la));const kt=be[4];kt!=null&&(h.Aa=kt,h.j.info("SVER="+h.Aa));const Ts=be[5];Ts!=null&&typeof Ts=="number"&&0<Ts&&(v=1.5*Ts,h.L=v,h.j.info("backChannelRequestTimeoutMs_="+v)),v=h;const mn=a.g;if(mn){const xa=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xa){var L=v.h;L.g||xa.indexOf("spdy")==-1&&xa.indexOf("quic")==-1&&xa.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(ju(L,L.h),L.h=null))}if(v.D){const zu=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;zu&&(v.ya=zu,Ve(v.I,v.D,zu))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),v=h;var W=a;if(v.qa=gp(v,v.J?v.ia:null,v.W),W.K){Wf(v.h,W);var Re=W,dt=v.L;dt&&(Re.I=dt),Re.B&&(Pu(Re),ca(Re)),v.g=W}else dp(v);0<h.i.length&&va(h)}else be[0]!="stop"&&be[0]!="close"||Zr(h,7);else h.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?Zr(h,7):Ou(h):be[0]!="noop"&&h.l&&h.l.ta(be),h.v=0)}}tt(4)}catch{}}var pw=class{constructor(a,c){this.g=a,this.map=c}};function Bf(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $f(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Hf(a){return a.h?1:a.g?a.g.size:0}function Vu(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function ju(a,c){a.g?a.g.add(c):a.h=c}function Wf(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}Bf.prototype.cancel=function(){if(this.i=qf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function qf(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const h of a.g.values())c=c.concat(h.D);return c}return C(a.i)}function mw(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],h=a.length,v=0;v<h;v++)c.push(a[v]);return c}c=[],h=0;for(v in a)c[h++]=a[v];return c}function gw(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var h=0;h<a;h++)c.push(h);return c}c=[],h=0;for(const v in a)c[h++]=v;return c}}}function Gf(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var h=gw(a),v=mw(a),V=v.length,L=0;L<V;L++)c.call(void 0,v[L],h&&h[L],a)}var Kf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yw(a,c){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var v=a[h].indexOf("="),V=null;if(0<=v){var L=a[h].substring(0,v);V=a[h].substring(v+1)}else L=a[h];c(L,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Jr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Jr){this.h=a.h,da(this,a.j),this.o=a.o,this.g=a.g,ha(this,a.s),this.l=a.l;var c=a.i,h=new Pi;h.i=c.i,c.g&&(h.g=new Map(c.g),h.h=c.h),Qf(this,h),this.m=a.m}else a&&(c=String(a).match(Kf))?(this.h=!1,da(this,c[1]||"",!0),this.o=Ri(c[2]||""),this.g=Ri(c[3]||"",!0),ha(this,c[4]),this.l=Ri(c[5]||"",!0),Qf(this,c[6]||"",!0),this.m=Ri(c[7]||"")):(this.h=!1,this.i=new Pi(null,this.h))}Jr.prototype.toString=function(){var a=[],c=this.j;c&&a.push(Ni(c,Yf,!0),":");var h=this.g;return(h||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Ni(c,Yf,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Ni(h,h.charAt(0)=="/"?ww:_w,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Ni(h,Ew)),a.join("")};function Wn(a){return new Jr(a)}function da(a,c,h){a.j=h?Ri(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function ha(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function Qf(a,c,h){c instanceof Pi?(a.i=c,bw(a.i,a.h)):(h||(c=Ni(c,xw)),a.i=new Pi(c,a.h))}function Ve(a,c,h){a.i.set(c,h)}function fa(a){return Ve(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ri(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ni(a,c,h){return typeof a=="string"?(a=encodeURI(a).replace(c,vw),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function vw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Yf=/[#\/\?@]/g,_w=/[#\?:]/g,ww=/[#\?]/g,xw=/[#\?@]/g,Ew=/#/g;function Pi(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function fr(a){a.g||(a.g=new Map,a.h=0,a.i&&yw(a.i,function(c,h){a.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}t=Pi.prototype,t.add=function(a,c){fr(this),this.i=null,a=Is(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(c),this.h+=1,this};function Xf(a,c){fr(a),c=Is(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function Jf(a,c){return fr(a),c=Is(a,c),a.g.has(c)}t.forEach=function(a,c){fr(this),this.g.forEach(function(h,v){h.forEach(function(V){a.call(c,V,v,this)},this)},this)},t.na=function(){fr(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),h=[];for(let v=0;v<c.length;v++){const V=a[v];for(let L=0;L<V.length;L++)h.push(c[v])}return h},t.V=function(a){fr(this);let c=[];if(typeof a=="string")Jf(this,a)&&(c=c.concat(this.g.get(Is(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)c=c.concat(a[h])}return c},t.set=function(a,c){return fr(this),this.i=null,a=Is(this,a),Jf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function Zf(a,c,h){Xf(a,c),0<h.length&&(a.i=null,a.g.set(Is(a,c),C(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var h=0;h<c.length;h++){var v=c[h];const L=encodeURIComponent(String(v)),W=this.V(v);for(v=0;v<W.length;v++){var V=L;W[v]!==""&&(V+="="+encodeURIComponent(String(W[v]))),a.push(V)}}return this.i=a.join("&")};function Is(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function bw(a,c){c&&!a.j&&(fr(a),a.i=null,a.g.forEach(function(h,v){var V=v.toLowerCase();v!=V&&(Xf(this,v),Zf(this,V,h))},a)),a.j=c}function kw(a,c){const h=new Dt;if(l.Image){const v=new Image;v.onload=x(pr,h,"TestLoadImage: loaded",!0,c,v),v.onerror=x(pr,h,"TestLoadImage: error",!1,c,v),v.onabort=x(pr,h,"TestLoadImage: abort",!1,c,v),v.ontimeout=x(pr,h,"TestLoadImage: timeout",!1,c,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else c(!1)}function Iw(a,c){const h=new Dt,v=new AbortController,V=setTimeout(()=>{v.abort(),pr(h,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:v.signal}).then(L=>{clearTimeout(V),L.ok?pr(h,"TestPingServer: ok",!0,c):pr(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(V),pr(h,"TestPingServer: error",!1,c)})}function pr(a,c,h,v,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),v(h)}catch{}}function Sw(){this.g=new Ti}function Tw(a,c,h){const v=h||"";try{Gf(a,function(V,L){let W=V;d(V)&&(W=Bn(V)),c.push(v+L+"="+encodeURIComponent(W))})}catch(V){throw c.push(v+"type="+encodeURIComponent("_badmap")),V}}function pa(a){this.l=a.Ub||null,this.j=a.eb||!1}T(pa,Hn),pa.prototype.g=function(){return new ma(this.l,this.j)},pa.prototype.i=function(a){return function(){return a}}({});function ma(a,c){Xe.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(ma,Xe),t=ma.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,Vi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Di(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Vi(this)),this.g&&(this.readyState=3,Vi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ep(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function ep(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?Di(this):Vi(this),this.readyState==3&&ep(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Di(this))},t.Qa=function(a){this.g&&(this.response=a,Di(this))},t.ga=function(){this.g&&Di(this)};function Di(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Vi(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=c.next();return a.join(`\r
`)};function Vi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function tp(a){let c="";return F(a,function(h,v){c+=v,c+=":",c+=h,c+=`\r
`}),c}function Lu(a,c,h){e:{for(v in h){var v=!1;break e}v=!0}v||(h=tp(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Ve(a,c,h))}function We(a){Xe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(We,Xe);var Cw=/^https?$/i,Aw=["POST","PUT"];t=We.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,h,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Au.g(),this.v=this.o?qr(this.o):qr(Au),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(L){np(this,L);return}if(a=h||"",h=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var V in v)h.set(V,v[V]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const L of v.keys())h.set(L,v.get(L));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(h.keys()).find(L=>L.toLowerCase()=="content-type"),V=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Aw,c,void 0))||v||V||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,W]of h)this.g.setRequestHeader(L,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ip(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){np(this,L)}};function np(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,rp(a),ga(a)}function rp(a){a.A||(a.A=!0,Oe(a,"complete"),Oe(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Oe(this,"complete"),Oe(this,"abort"),ga(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ga(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sp(this):this.bb())},t.bb=function(){sp(this)};function sp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||qn(a)!=4||a.Z()!=2)){if(a.u&&qn(a)==4)In(a.Ea,0,a);else if(Oe(a,"readystatechange"),qn(a)==4){a.h=!1;try{const W=a.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var h;if(!(h=c)){var v;if(v=W===0){var V=String(a.D).match(Kf)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),v=!Cw.test(V?V.toLowerCase():"")}h=v}if(h)Oe(a,"complete"),Oe(a,"success");else{a.m=6;try{var L=2<qn(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",rp(a)}}finally{ga(a)}}}}function ga(a,c){if(a.g){ip(a);const h=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||Oe(a,"ready");try{h.onreadystatechange=v}catch{}}}function ip(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function qn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),$n(c)}};function op(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Rw(a){const c={};a=(a.g&&2<=qn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(_(a[v]))continue;var h=A(a[v]);const V=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const L=c[V]||[];c[V]=L,L.push(h)}w(c,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ji(a,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||c}function ap(a){this.Aa=0,this.i=[],this.j=new Dt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ji("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ji("baseRetryDelayMs",5e3,a),this.cb=ji("retryDelaySeedMs",1e4,a),this.Wa=ji("forwardChannelMaxRetries",2,a),this.wa=ji("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Bf(a&&a.concurrentRequestLimit),this.Da=new Sw,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ap.prototype,t.la=8,t.G=1,t.connect=function(a,c,h,v){xe(0),this.W=a,this.H=c||{},h&&v!==void 0&&(this.H.OSID=h,this.H.OAID=v),this.F=this.X,this.I=gp(this,null,this.W),va(this)};function Ou(a){if(lp(a),a.G==3){var c=a.U++,h=Wn(a.I);if(Ve(h,"SID",a.K),Ve(h,"RID",c),Ve(h,"TYPE","terminate"),Li(a,h),c=new hr(a,a.j,c),c.L=2,c.v=fa(Wn(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=c.v,h=!0),h||(c.g=yp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),ca(c)}mp(a)}function ya(a){a.g&&(Fu(a),a.g.cancel(),a.g=null)}function lp(a){ya(a),a.u&&(l.clearTimeout(a.u),a.u=null),_a(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function va(a){if(!$f(a.h)&&!a.s){a.s=!0;var c=a.Ga;Ie||X(),H||(Ie(),H=!0),Q.add(c,a),a.B=0}}function Nw(a,c){return Hf(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Et(g(a.Ga,a,c),pp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new hr(this,this.j,a);let L=this.o;if(this.S&&(L?(L=y(L),k(L,this.S)):L=this.S),this.m!==null||this.O||(V.H=L,L=null),this.P)e:{for(var c=0,h=0;h<this.i.length;h++){t:{var v=this.i[h];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(c+=v,4096<c){c=h;break e}if(c===4096||h===this.i.length-1){c=h+1;break e}}c=1e3}else c=1e3;c=cp(this,V,c),h=Wn(this.I),Ve(h,"RID",a),Ve(h,"CVER",22),this.D&&Ve(h,"X-HTTP-Session-Id",this.D),Li(this,h),L&&(this.O?c="headers="+encodeURIComponent(String(tp(L)))+"&"+c:this.m&&Lu(h,this.m,L)),ju(this.h,V),this.Ua&&Ve(h,"TYPE","init"),this.P?(Ve(h,"$req",c),Ve(h,"SID","null"),V.T=!0,Nu(V,h,null)):Nu(V,h,c),this.G=2}}else this.G==3&&(a?up(this,a):this.i.length==0||$f(this.h)||up(this))};function up(a,c){var h;c?h=c.l:h=a.U++;const v=Wn(a.I);Ve(v,"SID",a.K),Ve(v,"RID",h),Ve(v,"AID",a.T),Li(a,v),a.m&&a.o&&Lu(v,a.m,a.o),h=new hr(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),c&&(a.i=c.D.concat(a.i)),c=cp(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ju(a.h,h),Nu(h,v,c)}function Li(a,c){a.H&&F(a.H,function(h,v){Ve(c,v,h)}),a.l&&Gf({},function(h,v){Ve(c,v,h)})}function cp(a,c,h){h=Math.min(a.i.length,h);var v=a.l?g(a.l.Na,a.l,a):null;e:{var V=a.i;let L=-1;for(;;){const W=["count="+h];L==-1?0<h?(L=V[0].g,W.push("ofs="+L)):L=0:W.push("ofs="+L);let Re=!0;for(let dt=0;dt<h;dt++){let be=V[dt].g;const bt=V[dt].map;if(be-=L,0>be)L=Math.max(0,V[dt].g-100),Re=!1;else try{Tw(bt,W,"req"+be+"_")}catch{v&&v(bt)}}if(Re){v=W.join("&");break e}}}return a=a.i.splice(0,h),c.D=a,v}function dp(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;Ie||X(),H||(Ie(),H=!0),Q.add(c,a),a.v=0}}function Mu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Et(g(a.Fa,a),pp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,hp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Et(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xe(10),ya(this),hp(this))};function Fu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function hp(a){a.g=new hr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=Wn(a.qa);Ve(c,"RID","rpc"),Ve(c,"SID",a.K),Ve(c,"AID",a.T),Ve(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ve(c,"TO",a.ja),Ve(c,"TYPE","xmlhttp"),Li(a,c),a.m&&a.o&&Lu(c,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=fa(Wn(c)),h.m=null,h.P=!0,Ff(h,a)}t.Za=function(){this.C!=null&&(this.C=null,ya(this),Mu(this),xe(19))};function _a(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function fp(a,c){var h=null;if(a.g==c){_a(a),Fu(a),a.g=null;var v=2}else if(Vu(a.h,c))h=c.D,Wf(a.h,c),v=1;else return;if(a.G!=0){if(c.o)if(v==1){h=c.m?c.m.length:0,c=Date.now()-c.F;var V=a.B;v=ee(),Oe(v,new pn(v,h)),va(a)}else dp(a);else if(V=c.s,V==3||V==0&&0<c.X||!(v==1&&Nw(a,c)||v==2&&Mu(a)))switch(h&&0<h.length&&(c=a.h,c.i=c.i.concat(h)),V){case 1:Zr(a,5);break;case 4:Zr(a,10);break;case 3:Zr(a,6);break;default:Zr(a,2)}}}function pp(a,c){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*c}function Zr(a,c){if(a.j.info("Error code "+c),c==2){var h=g(a.fb,a),v=a.Xa;const V=!v;v=new Jr(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||da(v,"https"),fa(v),V?kw(v.toString(),h):Iw(v.toString(),h)}else xe(2);a.G=0,a.l&&a.l.sa(c),mp(a),lp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))};function mp(a){if(a.G=0,a.ka=[],a.l){const c=qf(a.h);(c.length!=0||a.i.length!=0)&&(R(a.ka,c),R(a.ka,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.ra()}}function gp(a,c,h){var v=h instanceof Jr?Wn(h):new Jr(h);if(v.g!="")c&&(v.g=c+"."+v.g),ha(v,v.s);else{var V=l.location;v=V.protocol,c=c?c+"."+V.hostname:V.hostname,V=+V.port;var L=new Jr(null);v&&da(L,v),c&&(L.g=c),V&&ha(L,V),h&&(L.l=h),v=L}return h=a.D,c=a.ya,h&&c&&Ve(v,h,c),Ve(v,"VER",a.la),Li(a,v),v}function yp(a,c,h){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new We(new pa({eb:h})):new We(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vp(){}t=vp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wa(){}wa.prototype.g=function(a,c){return new Qt(a,c)};function Qt(a,c){Xe.call(this),this.g=new ap(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!_(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!_(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new Ss(this)}T(Qt,Xe),Qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){Ou(this.g)},Qt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Bn(a),a=h);c.i.push(new pw(c.Ya++,a)),c.G==3&&va(c)},Qt.prototype.N=function(){this.g.l=null,delete this.j,Ou(this.g),delete this.g,Qt.aa.N.call(this)};function _p(a){Fe.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const h in c){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}T(_p,Fe);function wp(){j.call(this),this.status=1}T(wp,j);function Ss(a){this.g=a}T(Ss,vp),Ss.prototype.ua=function(){Oe(this.g,"a")},Ss.prototype.ta=function(a){Oe(this.g,new _p(a))},Ss.prototype.sa=function(a){Oe(this.g,new wp)},Ss.prototype.ra=function(){Oe(this.g,"b")},wa.prototype.createWebChannel=wa.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,Zv=function(){return new wa},Jv=function(){return ee()},Xv=q,Pd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},la.NO_ERROR=0,la.TIMEOUT=8,la.HTTP_ERROR=6,sl=la,Lf.COMPLETE="complete",Yv=Lf,Gr.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",Xe.prototype.listen=Xe.prototype.K,Xi=Gr,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,Qv=We}).apply(typeof Ua<"u"?Ua:typeof self<"u"?self:typeof window<"u"?window:{});const lg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Jh("@firebase/firestore");function Wi(){return ms.logLevel}function Y(t,...e){if(ms.logLevel<=we.DEBUG){const n=e.map(sf);ms.debug(`Firestore (${bi}): ${t}`,...n)}}function or(t,...e){if(ms.logLevel<=we.ERROR){const n=e.map(sf);ms.error(`Firestore (${bi}): ${t}`,...n)}}function ci(t,...e){if(ms.logLevel<=we.WARN){const n=e.map(sf);ms.warn(`Firestore (${bi}): ${t}`,...n)}}function sf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${bi}) INTERNAL ASSERTION FAILED: `+t;throw or(e),new Error(e)}function Ae(t,e){t||oe()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends ws{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class y2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class v2{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ae(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Dr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Dr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string"),new e_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new Ct(e)}}class _2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class w2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class x2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class E2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ae(this.o===void 0);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string"),this.R=n.token,new x2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=b2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ke(t,e){return t<e?-1:t>e?1:0}function di(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new te(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ot(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new ot(0,0))}static max(){return new ae(new ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return zo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ge extends zo{construct(e,n,r){return new Ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ge(n)}static emptyPath(){return new Ge([])}}const k2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends zo{construct(e,n,r){return new pt(e,n,r)}static isValidIdentifier(e){return k2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new te(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new te(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new te(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new te(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pt(n)}static emptyPath(){return new pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Ge.fromString(e))}static fromName(e){return new ne(Ge.fromString(e).popFirst(5))}static empty(){return new ne(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Ge(e.slice()))}}function I2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new ot(n+1,0):new ot(n,r));return new Mr(s,ne.empty(),e)}function S2(t){return new Mr(t.readTime,t.key,-1)}class Mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mr(ae.min(),ne.empty(),-1)}static max(){return new Mr(ae.max(),ne.empty(),-1)}}function T2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==C2)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{o[d]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function R2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ra(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}of.oe=-1;function _u(t){return t==null}function Ul(t){return t===0&&1/t==-1/0}function N2(t){return typeof t=="number"&&Number.isInteger(t)&&!Ul(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ki(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function n_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.comparator=e,this.root=n||ft.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ba(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ba(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ba(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ba(this.root,e,this.comparator,!0)}}class Ba{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ft.RED,this.left=s??ft.EMPTY,this.right=i??ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ft(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1;ft.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cg(this.data.getIterator())}getIteratorFrom(e){return new cg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class cg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new wn([])}unionWith(e){let n=new gt(pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return di(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new r_("Invalid base64 string: "+i):i}}(e);return new vt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const P2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(t){if(Ae(!!t),typeof t=="string"){let e=0;const n=P2.exec(t);if(Ae(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gs(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function lf(t){const e=t.mapValue.fields.__previous_value__;return af(e)?lf(e):e}function Uo(t){const e=Fr(t.mapValue.fields.__local_write_time__.timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Bo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Bo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Bo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a={mapValue:{}};function ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?af(t)?4:j2(t)?9007199254740991:V2(t)?10:11:oe()}function On(t,e){if(t===e)return!0;const n=ys(t);if(n!==ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Uo(t).isEqual(Uo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Fr(s.timestampValue),l=Fr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return gs(s.bytesValue).isEqual(gs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Qe(s.geoPointValue.latitude)===Qe(i.geoPointValue.latitude)&&Qe(s.geoPointValue.longitude)===Qe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Qe(s.integerValue)===Qe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Qe(s.doubleValue),l=Qe(i.doubleValue);return o===l?Ul(o)===Ul(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return di(t.arrayValue.values||[],e.arrayValue.values||[],On);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(ug(o)!==ug(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!On(o[u],l[u])))return!1;return!0}(t,e);default:return oe()}}function $o(t,e){return(t.values||[]).find(n=>On(n,e))!==void 0}function hi(t,e){if(t===e)return 0;const n=ys(t),r=ys(e);if(n!==r)return ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Qe(i.integerValue||i.doubleValue),u=Qe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return dg(t.timestampValue,e.timestampValue);case 4:return dg(Uo(t),Uo(e));case 5:return ke(t.stringValue,e.stringValue);case 6:return function(i,o){const l=gs(i),u=gs(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const p=ke(l[d],u[d]);if(p!==0)return p}return ke(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ke(Qe(i.latitude),Qe(o.latitude));return l!==0?l:ke(Qe(i.longitude),Qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return hg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,p;const m=i.fields||{},g=o.fields||{},x=(l=m.value)===null||l===void 0?void 0:l.arrayValue,T=(u=g.value)===null||u===void 0?void 0:u.arrayValue,C=ke(((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return C!==0?C:hg(x,T)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===$a.mapValue&&o===$a.mapValue)return 0;if(i===$a.mapValue)return 1;if(o===$a.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const g=ke(u[m],p[m]);if(g!==0)return g;const x=hi(l[u[m]],d[p[m]]);if(x!==0)return x}return ke(u.length,p.length)}(t.mapValue,e.mapValue);default:throw oe()}}function dg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=Fr(t),r=Fr(e),s=ke(n.seconds,r.seconds);return s!==0?s:ke(n.nanos,r.nanos)}function hg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=hi(n[s],r[s]);if(i)return i}return ke(n.length,r.length)}function fi(t){return Dd(t)}function Dd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Fr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Dd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Dd(n.fields[o])}`;return s+"}"}(t.mapValue):oe()}function Vd(t){return!!t&&"integerValue"in t}function uf(t){return!!t&&"arrayValue"in t}function fg(t){return!!t&&"nullValue"in t}function pg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function il(t){return!!t&&"mapValue"in t}function V2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function fo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ki(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function j2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!il(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fo(n)}setAll(e){let n=pt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=fo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());il(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return On(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];il(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ki(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new an(fo(this.value))}}function s_(t){const e=[];return ki(t.fields,(n,r)=>{const s=new pt([n]);if(il(r)){const i=s_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Rt(e,0,ae.min(),ae.min(),ae.min(),an.empty(),0)}static newFoundDocument(e,n,r,s){return new Rt(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new Rt(e,2,n,ae.min(),ae.min(),an.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,ae.min(),ae.min(),an.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n){this.position=e,this.inclusive=n}}function mg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=hi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function gg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!On(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n="asc"){this.field=e,this.dir=n}}function L2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{}class st extends i_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new M2(e,n,r):n==="array-contains"?new U2(e,r):n==="in"?new B2(e,r):n==="not-in"?new $2(e,r):n==="array-contains-any"?new H2(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new F2(e,r):new z2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hi(n,this.value)):n!==null&&ys(this.value)===ys(n)&&this.matchesComparison(hi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mn extends i_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Mn(e,n)}matches(e){return o_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function o_(t){return t.op==="and"}function a_(t){return O2(t)&&o_(t)}function O2(t){for(const e of t.filters)if(e instanceof Mn)return!1;return!0}function jd(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+fi(t.value);if(a_(t))return t.filters.map(e=>jd(e)).join(",");{const e=t.filters.map(n=>jd(n)).join(",");return`${t.op}(${e})`}}function l_(t,e){return t instanceof st?function(r,s){return s instanceof st&&r.op===s.op&&r.field.isEqual(s.field)&&On(r.value,s.value)}(t,e):t instanceof Mn?function(r,s){return s instanceof Mn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&l_(o,s.filters[l]),!0):!1}(t,e):void oe()}function u_(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${fi(n.value)}`}(t):t instanceof Mn?function(n){return n.op.toString()+" {"+n.getFilters().map(u_).join(" ,")+"}"}(t):"Filter"}class M2 extends st{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class F2 extends st{constructor(e,n){super(e,"in",n),this.keys=c_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class z2 extends st{constructor(e,n){super(e,"not-in",n),this.keys=c_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function c_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class U2 extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return uf(n)&&$o(n.arrayValue,this.value)}}class B2 extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$o(this.value.arrayValue,n)}}class $2 extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if($o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!$o(this.value.arrayValue,n)}}class H2 extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!uf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$o(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function yg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new W2(t,e,n,r,s,i,o)}function cf(t){const e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),_u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fi(r)).join(",")),e.ue=n}return e.ue}function df(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!L2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!l_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gg(t.startAt,e.startAt)&&gg(t.endAt,e.endAt)}function Ld(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function q2(t,e,n,r,s,i,o,l){return new wu(t,e,n,r,s,i,o,l)}function hf(t){return new wu(t)}function vg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function G2(t){return t.collectionGroup!==null}function po(t){const e=le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new gt(pt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new $l(i,r))}),n.has(pt.keyField().canonicalString())||e.ce.push(new $l(pt.keyField(),r))}return e.ce}function Vn(t){const e=le(t);return e.le||(e.le=K2(e,po(t))),e.le}function K2(t,e){if(t.limitType==="F")return yg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new $l(s.field,i)});const n=t.endAt?new Bl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bl(t.startAt.position,t.startAt.inclusive):null;return yg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Od(t,e,n){return new wu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xu(t,e){return df(Vn(t),Vn(e))&&t.limitType===e.limitType}function d_(t){return`${cf(Vn(t))}|lt:${t.limitType}`}function As(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>u_(s)).join(", ")}]`),_u(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>fi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>fi(s)).join(",")),`Target(${r})`}(Vn(t))}; limitType=${t.limitType})`}function Eu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of po(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=mg(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,po(r),s)||r.endAt&&!function(o,l,u){const d=mg(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,po(r),s))}(t,e)}function Q2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function h_(t){return(e,n)=>{let r=!1;for(const s of po(t)){const i=Y2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Y2(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?hi(u,d):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ki(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return n_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=new $e(ne.comparator);function ar(){return X2}const f_=new $e(ne.comparator);function Ji(...t){let e=f_;for(const n of t)e=e.insert(n.key,n);return e}function p_(t){let e=f_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function os(){return mo()}function m_(){return mo()}function mo(){return new Ii(t=>t.toString(),(t,e)=>t.isEqual(e))}const J2=new $e(ne.comparator),Z2=new gt(ne.comparator);function ge(...t){let e=Z2;for(const n of t)e=e.add(n);return e}const eS=new gt(ke);function tS(){return eS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ul(e)?"-0":e}}function g_(t){return{integerValue:""+t}}function nS(t,e){return N2(e)?g_(e):ff(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(){this._=void 0}}function rS(t,e,n){return t instanceof Hl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&af(i)&&(i=lf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ho?v_(t,e):t instanceof Wo?__(t,e):function(s,i){const o=y_(s,i),l=_g(o)+_g(s.Pe);return Vd(o)&&Vd(s.Pe)?g_(l):ff(s.serializer,l)}(t,e)}function sS(t,e,n){return t instanceof Ho?v_(t,e):t instanceof Wo?__(t,e):n}function y_(t,e){return t instanceof Wl?function(r){return Vd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Hl extends bu{}class Ho extends bu{constructor(e){super(),this.elements=e}}function v_(t,e){const n=w_(e);for(const r of t.elements)n.some(s=>On(s,r))||n.push(r);return{arrayValue:{values:n}}}class Wo extends bu{constructor(e){super(),this.elements=e}}function __(t,e){let n=w_(e);for(const r of t.elements)n=n.filter(s=>!On(s,r));return{arrayValue:{values:n}}}class Wl extends bu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function _g(t){return Qe(t.integerValue||t.doubleValue)}function w_(t){return uf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function iS(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ho&&s instanceof Ho||r instanceof Wo&&s instanceof Wo?di(r.elements,s.elements,On):r instanceof Wl&&s instanceof Wl?On(r.Pe,s.Pe):r instanceof Hl&&s instanceof Hl}(t.transform,e.transform)}class oS{constructor(e,n){this.version=e,this.transformResults=n}}class er{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ol(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ku{}function x_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new b_(t.key,er.none()):new sa(t.key,t.data,er.none());{const n=t.data,r=an.empty();let s=new gt(pt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new xs(t.key,r,new wn(s.toArray()),er.none())}}function aS(t,e,n){t instanceof sa?function(s,i,o){const l=s.value.clone(),u=xg(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof xs?function(s,i,o){if(!ol(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=xg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(E_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function go(t,e,n,r){return t instanceof sa?function(i,o,l,u){if(!ol(i.precondition,o))return l;const d=i.value.clone(),p=Eg(i.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof xs?function(i,o,l,u){if(!ol(i.precondition,o))return l;const d=Eg(i.fieldTransforms,u,o),p=o.data;return p.setAll(E_(i)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return ol(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function lS(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=y_(r.transform,s||null);i!=null&&(n===null&&(n=an.empty()),n.set(r.field,i))}return n||null}function wg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&di(r,s,(i,o)=>iS(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sa extends ku{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xs extends ku{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function E_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function xg(t,e,n){const r=new Map;Ae(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,sS(o,l,n[s]))}return r}function Eg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,rS(i,o,e))}return r}class b_ extends ku{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uS extends ku{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&aS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=go(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=go(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=m_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=x_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&di(this.mutations,e.mutations,(n,r)=>wg(n,r))&&di(this.baseMutations,e.baseMutations,(n,r)=>wg(n,r))}}class pf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ae(e.mutations.length===r.length);let s=function(){return J2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new pf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,_e;function fS(t){switch(t){default:return oe();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function k_(t){if(t===void 0)return or("GRPC error has no .code"),B.UNKNOWN;switch(t){case Ze.OK:return B.OK;case Ze.CANCELLED:return B.CANCELLED;case Ze.UNKNOWN:return B.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return B.INTERNAL;case Ze.UNAVAILABLE:return B.UNAVAILABLE;case Ze.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Ze.NOT_FOUND:return B.NOT_FOUND;case Ze.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Ze.ABORTED:return B.ABORTED;case Ze.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Ze.DATA_LOSS:return B.DATA_LOSS;default:return oe()}}(_e=Ze||(Ze={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=new us([4294967295,4294967295],0);function bg(t){const e=pS().encode(t),n=new Kv;return n.update(e),new Uint8Array(n.digest())}function kg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new us([n,r],0),new us([s,i],0)]}class mf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zi(`Invalid padding: ${n}`);if(r<0)throw new Zi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=us.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(us.fromNumber(r)));return s.compare(mS)===1&&(s=new us([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=bg(e),[r,s]=kg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new mf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=bg(e),[r,s]=kg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ia.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Iu(ae.min(),s,new $e(ke),ar(),ge())}}class ia{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ia(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class I_{constructor(e,n){this.targetId=e,this.me=n}}class S_{constructor(e,n,r=vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ig{constructor(){this.fe=0,this.ge=Tg(),this.pe=vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),n=ge(),r=ge();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe()}}),new ia(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Tg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class gS{constructor(e){this.Le=e,this.Be=new Map,this.ke=ar(),this.qe=Sg(),this.Qe=new $e(ke)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Ld(i))if(r===0){const o=new ne(i.path);this.Ue(n,o,Rt.newNoDocument(o,ae.min()))}else Ae(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=gs(r).toUint8Array()}catch(u){if(u instanceof r_)return ci("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new mf(o,s,i)}catch(u){return ci(u instanceof Zi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Ld(l.target)){const u=new ne(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Rt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ge();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Iu(e,n,this.Qe,this.ke,r);return this.ke=ar(),this.qe=Sg(),this.Qe=new $e(ke),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ig,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new gt(ke),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ig),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Sg(){return new $e(ne.comparator)}function Tg(){return new $e(ne.comparator)}const yS={asc:"ASCENDING",desc:"DESCENDING"},vS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_S={and:"AND",or:"OR"};class wS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Md(t,e){return t.useProto3Json||_u(e)?e:{value:e}}function ql(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function T_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xS(t,e){return ql(t,e.toTimestamp())}function jn(t){return Ae(!!t),ae.fromTimestamp(function(n){const r=Fr(n);return new ot(r.seconds,r.nanos)}(t))}function gf(t,e){return Fd(t,e).canonicalString()}function Fd(t,e){const n=function(s){return new Ge(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function C_(t){const e=Ge.fromString(t);return Ae(D_(e)),e}function zd(t,e){return gf(t.databaseId,e.path)}function kc(t,e){const n=C_(e);if(n.get(1)!==t.databaseId.projectId)throw new te(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(R_(n))}function A_(t,e){return gf(t.databaseId,e)}function ES(t){const e=C_(t);return e.length===4?Ge.emptyPath():R_(e)}function Ud(t){return new Ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function R_(t){return Ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Cg(t,e,n){return{name:zd(t,e),fields:n.value.mapValue.fields}}function bS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(Ae(p===void 0||typeof p=="string"),vt.fromBase64String(p||"")):(Ae(p===void 0||p instanceof Buffer||p instanceof Uint8Array),vt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const p=d.code===void 0?B.UNKNOWN:k_(d.code);return new te(p,d.message||"")}(o);n=new S_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=kc(t,r.document.name),i=jn(r.document.updateTime),o=r.document.createTime?jn(r.document.createTime):ae.min(),l=new an({mapValue:{fields:r.document.fields}}),u=Rt.newFoundDocument(s,i,o,l),d=r.targetIds||[],p=r.removedTargetIds||[];n=new al(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=kc(t,r.document),i=r.readTime?jn(r.readTime):ae.min(),o=Rt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new al([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=kc(t,r.document),i=r.removedTargetIds||[];n=new al([],i,s,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new hS(s,i),l=r.targetId;n=new I_(l,o)}}return n}function kS(t,e){let n;if(e instanceof sa)n={update:Cg(t,e.key,e.value)};else if(e instanceof b_)n={delete:zd(t,e.key)};else if(e instanceof xs)n={update:Cg(t,e.key,e.data),updateMask:DS(e.fieldMask)};else{if(!(e instanceof uS))return oe();n={verify:zd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Hl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ho)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Wo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Wl)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:xS(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe()}(t,e.precondition)),n}function IS(t,e){return t&&t.length>0?(Ae(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?jn(s.updateTime):jn(i);return o.isEqual(ae.min())&&(o=jn(i)),new oS(o,s.transformResults||[])}(n,e))):[]}function SS(t,e){return{documents:[A_(t,e.path)]}}function TS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=A_(t,s);const i=function(d){if(d.length!==0)return P_(Mn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(p=>function(g){return{field:Rs(g.field),direction:RS(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Md(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function CS(t){let e=ES(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ae(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=N_(m);return g instanceof Mn&&a_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(T){return new $l(Ns(T.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,_u(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,x=m.values||[];return new Bl(x,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,x=m.values||[];return new Bl(x,g)}(n.endAt)),q2(e,s,o,i,l,"F",u,d)}function AS(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function N_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ns(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ns(n.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ns(n.unaryFilter.field);return st.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ns(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return st.create(Ns(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Mn.create(n.compositeFilter.filters.map(r=>N_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function RS(t){return yS[t]}function NS(t){return vS[t]}function PS(t){return _S[t]}function Rs(t){return{fieldPath:t.canonicalString()}}function Ns(t){return pt.fromServerFormat(t.fieldPath)}function P_(t){return t instanceof st?function(n){if(n.op==="=="){if(pg(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NAN"}};if(fg(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pg(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NAN"}};if(fg(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rs(n.field),op:NS(n.op),value:n.value}}}(t):t instanceof Mn?function(n){const r=n.getFilters().map(s=>P_(s));return r.length===1?r[0]:{compositeFilter:{op:PS(n.op),filters:r}}}(t):oe()}function DS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function D_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r,s,i=ae.min(),o=ae.min(),l=vt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.ct=e}}function jS(t){const e=CS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Od(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.un=new OS}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Mr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class OS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new gt(Ge.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new gt(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new pi(0)}static kn(){return new pi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.changes=new Ii(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&go(r.mutation,s,wn.empty(),ot.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=os();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ji();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=ar();const o=mo(),l=function(){return mo()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof xs)?i=i.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),go(p.mutation,d,p.mutation.getFieldMask(),ot.now())):o.set(d.key,wn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>{var m;return l.set(d,new FS(p,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=mo();let s=new $e((o,l)=>o-l),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||wn.empty();p=l.applyToLocalView(d,p),r.set(u,p);const m=(s.get(l.batchId)||ge()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,p=u.value,m=m_();p.forEach(g=>{if(!i.has(g)){const x=x_(n.get(g),r.get(g));x!==null&&m.set(g,x),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):G2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(os());let l=-1,u=i;return o.next(d=>U.forEach(d,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?U.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ge())).next(p=>({batchId:l,changes:p_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let s=Ji();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ji();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,u=>{const d=function(m,g){return new wu(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,Rt.newInvalidDocument(p)))});let l=Ji();return o.forEach((u,d)=>{const p=i.get(u);p!==void 0&&go(p.mutation,d,wn.empty(),ot.now()),Eu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:jn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:jS(s.bundledQuery),readTime:jn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(){this.overlays=new $e(ne.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=os();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=os(),i=n.length+1,o=new ne(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new $e((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=os(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=os(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=s)););return U.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dS(n,r));let i=this.Ir.get(n);i===void 0&&(i=ge(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this.Tr=new gt(at.Er),this.dr=new gt(at.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new at(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new at(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ne(new Ge([])),r=new at(n,e),s=new at(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ne(new Ge([])),r=new at(n,e),s=new at(n,e+1);let i=ge();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new at(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class at{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ne.comparator(e.key,n.key)||ke(e.wr,n.wr)}static Ar(e,n){return ke(e.wr,n.wr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new gt(at.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new cS(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new at(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new at(n,0),s=new at(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gt(ke);return n.forEach(s=>{const i=new at(s,0),o=new at(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ne.isDocumentKey(i)||(i=i.child(""));const o=new at(new ne(i),0);let l=new gt(ke);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ae(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new at(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new at(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.Mr=e,this.docs=function(){return new $e(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=ar();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Rt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ar();const o=n.path,l=new ne(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||T2(S2(p),r)<=0||(s.has(p.key)||Eu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){oe()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new qS(this)}getSize(e){return U.resolve(this.size)}}class qS extends MS{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e){this.persistence=e,this.Nr=new Ii(n=>cf(n),df),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yf,this.targetCount=0,this.kr=pi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new pi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n){this.qr={},this.overlays={},this.Qr=new of(0),this.Kr=!1,this.Kr=!0,this.$r=new $S,this.referenceDelegate=e(this),this.Ur=new GS(this),this.indexManager=new LS,this.remoteDocumentCache=function(s){return new WS(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new VS(n),this.Gr=new US(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new BS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new HS(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new QS(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class QS extends A2{constructor(e){super(),this.currentSequenceNumber=e}}class vf{constructor(e){this.persistence=e,this.Jr=new yf,this.Yr=null}static Zr(e){return new vf(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=ne.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ge(),s=ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new _f(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zk()?8:R2(Ok())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new YS;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Wi()<=we.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",As(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Wi()<=we.DEBUG&&Y("QueryEngine","Query:",As(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Wi()<=we.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",As(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(n))):U.resolve())}Yi(e,n){if(vg(n))return U.resolve(null);let r=Vn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Od(n,null,"F"),r=Vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ge(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,Od(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return vg(n)||s.isEqual(ae.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(Wi()<=we.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),As(n)),this.rs(e,o,n,I2(s,-1)).next(l=>l))})}ts(e,n){let r=new gt(h_(e));return n.forEach((s,i)=>{Eu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Wi()<=we.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",As(n)),this.Ji.getDocumentsMatchingQuery(e,n,Mr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new $e(ke),this._s=new Ii(i=>cf(i),df),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zS(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function ZS(t,e,n,r){return new JS(t,e,n,r)}async function V_(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ge();for(const d of s){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){l.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function eT(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,p){const m=d.batch,g=m.keys();let x=U.resolve();return g.forEach(T=>{x=x.next(()=>p.getEntry(u,T)).next(C=>{const R=d.docVersions.get(T);Ae(R!==null),C.version.compareTo(R)<0&&(m.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),p.addEntry(C)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ge();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function j_(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function tT(t,e){const n=le(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(vt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,r)),s=s.insert(m,x),function(C,R,b){return C.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(g,x,p)&&l.push(n.Ur.updateTargetData(i,x))});let u=ar(),d=ge();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(nT(i,o,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(ae.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return U.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function nT(t,e,n){let r=ge(),s=ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ar();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):Y("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function rT(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sT(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new br(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Bd(t,e,n){const r=le(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ra(o))throw o;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Ag(t,e,n){const r=le(t);let s=ae.min(),i=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const m=le(u),g=m._s.get(p);return g!==void 0?U.resolve(m.os.get(g)):m.Ur.getTargetData(d,p)}(r,o,Vn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ae.min(),n?i:ge())).next(l=>(iT(r,Q2(e),l),{documents:l,Ts:i})))}function iT(t,e,n){let r=t.us.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Rg{constructor(){this.activeTargetIds=tS()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oT{constructor(){this.so=new Rg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Rg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha=null;function Ic(){return Ha===null?Ha=function(){return 268435456+Math.round(2147483648*Math.random())}():Ha++,"0x"+Ha.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="WebChannelConnection";class cT extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Ic(),u=this.xo(n,r.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(p=>(Y("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw ci("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=lT[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Ic();return new Promise((o,l)=>{const u=new Qv;u.setWithCredentials(!0),u.listenOnce(Yv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case sl.NO_ERROR:const p=u.getResponseJson();Y(Tt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case sl.TIMEOUT:Y(Tt,`RPC '${e}' ${i} timed out`),l(new te(B.DEADLINE_EXCEEDED,"Request time out"));break;case sl.HTTP_ERROR:const m=u.getStatus();if(Y(Tt,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const x=g==null?void 0:g.error;if(x&&x.status&&x.message){const T=function(R){const b=R.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(b)>=0?b:B.UNKNOWN}(x.status);l(new te(T,x.message))}else l(new te(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new te(B.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{Y(Tt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);Y(Tt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Ic(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Zv(),l=Jv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");Y(Tt,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=o.createWebChannel(p,u);let g=!1,x=!1;const T=new uT({Io:R=>{x?Y(Tt,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(g||(Y(Tt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Y(Tt,`RPC '${e}' stream ${s} sending:`,R),m.send(R))},To:()=>m.close()}),C=(R,b,_)=>{R.listen(b,I=>{try{_(I)}catch(D){setTimeout(()=>{throw D},0)}})};return C(m,Xi.EventType.OPEN,()=>{x||(Y(Tt,`RPC '${e}' stream ${s} transport opened.`),T.yo())}),C(m,Xi.EventType.CLOSE,()=>{x||(x=!0,Y(Tt,`RPC '${e}' stream ${s} transport closed`),T.So())}),C(m,Xi.EventType.ERROR,R=>{x||(x=!0,ci(Tt,`RPC '${e}' stream ${s} transport errored:`,R),T.So(new te(B.UNAVAILABLE,"The operation could not be completed")))}),C(m,Xi.EventType.MESSAGE,R=>{var b;if(!x){const _=R.data[0];Ae(!!_);const I=_,D=I.error||((b=I[0])===null||b===void 0?void 0:b.error);if(D){Y(Tt,`RPC '${e}' stream ${s} received error:`,D);const O=D.status;let F=function(E){const k=Ze[E];if(k!==void 0)return k_(k)}(O),w=D.message;F===void 0&&(F=B.INTERNAL,w="Unknown error status: "+O+" with message "+D.message),x=!0,T.So(new te(F,w)),m.close()}else Y(Tt,`RPC '${e}' stream ${s} received:`,_),T.bo(_)}}),C(l,Xv.STAT_EVENT,R=>{R.stat===Pd.PROXY?Y(Tt,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===Pd.NOPROXY&&Y(Tt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function Sc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t){return new wS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new L_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new te(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dT extends O_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=bS(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?jn(o.readTime):ae.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Ud(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Ld(u)?{documents:SS(i,u)}:{query:TS(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=T_(i,o.resumeToken);const d=Md(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ae.min())>0){l.readTime=ql(i,o.snapshotVersion.toTimestamp());const d=Md(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=AS(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Ud(this.serializer),n.removeTarget=e,this.a_(n)}}class hT extends O_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=IS(e.writeResults,e.commitTime),r=jn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Ud(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>kS(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new te(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Fd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new te(B.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Fd(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class pT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(or(n),this.D_=!1):Y("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Es(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=le(u);d.L_.add(4),await oa(d),d.q_.set("Unknown"),d.L_.delete(4),await Tu(d)}(this))})}),this.q_=new pT(r,s)}}async function Tu(t){if(Es(t))for(const e of t.B_)await e(!0)}async function oa(t){for(const e of t.B_)await e(!1)}function M_(t,e){const n=le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),bf(n)?Ef(n):Si(n).r_()&&xf(n,e))}function wf(t,e){const n=le(t),r=Si(n);n.N_.delete(e),r.r_()&&F_(n,e),n.N_.size===0&&(r.r_()?r.o_():Es(n)&&n.q_.set("Unknown"))}function xf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Si(t).A_(e)}function F_(t,e){t.Q_.xe(e),Si(t).R_(e)}function Ef(t){t.Q_=new gS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Si(t).start(),t.q_.v_()}function bf(t){return Es(t)&&!Si(t).n_()&&t.N_.size>0}function Es(t){return le(t).L_.size===0}function z_(t){t.Q_=void 0}async function gT(t){t.q_.set("Online")}async function yT(t){t.N_.forEach((e,n)=>{xf(t,e)})}async function vT(t,e){z_(t),bf(t)?(t.q_.M_(e),Ef(t)):t.q_.set("Unknown")}async function _T(t,e,n){if(t.q_.set("Online"),e instanceof S_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gl(t,r)}else if(e instanceof al?t.Q_.Ke(e):e instanceof I_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ae.min()))try{const r=await j_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(d);p&&i.N_.set(d,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(vt.EMPTY_BYTE_STRING,p.snapshotVersion)),F_(i,u);const m=new br(p.target,u,d,p.sequenceNumber);xf(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await Gl(t,r)}}async function Gl(t,e,n){if(!ra(e))throw e;t.L_.add(1),await oa(t),t.q_.set("Offline"),n||(n=()=>j_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Tu(t)})}function U_(t,e){return e().catch(n=>Gl(t,n,e))}async function Cu(t){const e=le(t),n=zr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;wT(e);)try{const s=await rT(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,xT(e,s)}catch(s){await Gl(e,s)}B_(e)&&$_(e)}function wT(t){return Es(t)&&t.O_.length<10}function xT(t,e){t.O_.push(e);const n=zr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function B_(t){return Es(t)&&!zr(t).n_()&&t.O_.length>0}function $_(t){zr(t).start()}async function ET(t){zr(t).p_()}async function bT(t){const e=zr(t);for(const n of t.O_)e.m_(n.mutations)}async function kT(t,e,n){const r=t.O_.shift(),s=pf.from(r,e,n);await U_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Cu(t)}async function IT(t,e){e&&zr(t).V_&&await async function(r,s){if(function(o){return fS(o)&&o!==B.ABORTED}(s.code)){const i=r.O_.shift();zr(r).s_(),await U_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Cu(r)}}(t,e),B_(t)&&$_(t)}async function Pg(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=Es(n);n.L_.add(3),await oa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Tu(n)}async function ST(t,e){const n=le(t);e?(n.L_.delete(2),await Tu(n)):e||(n.L_.add(2),await oa(n),n.q_.set("Unknown"))}function Si(t){return t.K_||(t.K_=function(n,r,s){const i=le(n);return i.w_(),new dT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:gT.bind(null,t),Ro:yT.bind(null,t),mo:vT.bind(null,t),d_:_T.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),bf(t)?Ef(t):t.q_.set("Unknown")):(await t.K_.stop(),z_(t))})),t.K_}function zr(t){return t.U_||(t.U_=function(n,r,s){const i=le(n);return i.w_(),new hT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ET.bind(null,t),mo:IT.bind(null,t),f_:bT.bind(null,t),g_:kT.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Cu(t)):(await t.U_.stop(),t.O_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new kf(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function If(t,e){if(or("AsyncQueue",`${e}: ${t}`),ra(t))return new te(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Ji(),this.sortedSet=new $e(this.comparator)}static emptySet(e){return new Js(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Js)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Js;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(){this.W_=new $e(ne.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class mi{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new mi(e,n,Js.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class CT{constructor(){this.queries=Vg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=le(n),i=s.queries;s.queries=Vg(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new te(B.ABORTED,"Firestore shutting down"))}}function Vg(){return new Ii(t=>d_(t),xu)}async function AT(t,e){const n=le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new TT,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=If(o,`Initialization of query '${As(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Sf(n)}async function RT(t,e){const n=le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function NT(t,e){const n=le(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Sf(n)}function PT(t,e,n){const r=le(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Sf(t){t.Y_.forEach(e=>{e.next()})}var $d,jg;(jg=$d||($d={})).ea="default",jg.Cache="cache";class DT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new mi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=mi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==$d.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e){this.key=e}}class W_{constructor(e){this.key=e}}class VT{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=h_(e),this.Ra=new Js(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Dg,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),x=Eu(this.query,m)?m:null,T=!!g&&this.mutatedKeys.has(g.key),C=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let R=!1;g&&x?g.data.isEqual(x.data)?T!==C&&(r.track({type:3,doc:x}),R=!0):this.ga(g,x)||(r.track({type:2,doc:x}),R=!0,(u&&this.Aa(x,u)>0||d&&this.Aa(x,d)<0)&&(l=!0)):!g&&x?(r.track({type:0,doc:x}),R=!0):g&&!x&&(r.track({type:1,doc:g}),R=!0,(u||d)&&(l=!0)),R&&(x?(o=o.add(x),i=C?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(x,T){const C=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return C(x)-C(T)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new mi(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Dg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new W_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new H_(r))}),n}ba(e){this.Ta=e.Ts,this.da=ge();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return mi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class jT{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class LT{constructor(e){this.key=e,this.va=!1}}class OT{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ii(l=>d_(l),xu),this.Ma=new Map,this.xa=new Set,this.Oa=new $e(ne.comparator),this.Na=new Map,this.La=new yf,this.Ba={},this.ka=new Map,this.qa=pi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function MT(t,e,n=!0){const r=X_(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await q_(r,e,n,!0),s}async function FT(t,e){const n=X_(t);await q_(n,e,!0,!1)}async function q_(t,e,n,r){const s=await sT(t.localStore,Vn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await zT(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&M_(t.remoteStore,s),l}async function zT(t,e,n,r,s){t.Ka=(m,g,x)=>async function(C,R,b,_){let I=R.view.ma(b);I.ns&&(I=await Ag(C.localStore,R.query,!1).then(({documents:w})=>R.view.ma(w,I)));const D=_&&_.targetChanges.get(R.targetId),O=_&&_.targetMismatches.get(R.targetId)!=null,F=R.view.applyChanges(I,C.isPrimaryClient,D,O);return Og(C,R.targetId,F.wa),F.snapshot}(t,m,g,x);const i=await Ag(t.localStore,e,!0),o=new VT(e,i.Ts),l=o.ma(i.documents),u=ia.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Og(t,n,d.wa);const p=new jT(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function UT(t,e,n){const r=le(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!xu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Bd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&wf(r.remoteStore,s.targetId),Hd(r,s.targetId)}).catch(na)):(Hd(r,s.targetId),await Bd(r.localStore,s.targetId,!0))}async function BT(t,e){const n=le(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wf(n.remoteStore,r.targetId))}async function $T(t,e,n){const r=YT(t);try{const s=await function(o,l){const u=le(o),d=ot.now(),p=l.reduce((x,T)=>x.add(T.key),ge());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let T=ar(),C=ge();return u.cs.getEntries(x,p).next(R=>{T=R,T.forEach((b,_)=>{_.isValidDocument()||(C=C.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,T)).next(R=>{m=R;const b=[];for(const _ of l){const I=lS(_,m.get(_.key).overlayedDocument);I!=null&&b.push(new xs(_.key,I,s_(I.value.mapValue),er.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,b,l)}).next(R=>{g=R;const b=R.applyToLocalDocumentSet(m,C);return u.documentOverlayCache.saveOverlays(x,R.batchId,b)})}).then(()=>({batchId:g.batchId,changes:p_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new $e(ke)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await aa(r,s.changes),await Cu(r.remoteStore)}catch(s){const i=If(s,"Failed to persist write");n.reject(i)}}async function G_(t,e){const n=le(t);try{const r=await tT(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ae(o.va):s.removedDocuments.size>0&&(Ae(o.va),o.va=!1))}),await aa(n,r,e)}catch(r){await na(r)}}function Lg(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=le(o);u.onlineState=l;let d=!1;u.queries.forEach((p,m)=>{for(const g of m.j_)g.Z_(l)&&(d=!0)}),d&&Sf(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function HT(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new $e(ne.comparator);o=o.insert(i,Rt.newNoDocument(i,ae.min()));const l=ge().add(i),u=new Iu(ae.min(),new Map,new $e(ke),o,l);await G_(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Tf(r)}else await Bd(r.localStore,e,!1).then(()=>Hd(r,e,n)).catch(na)}async function WT(t,e){const n=le(t),r=e.batch.batchId;try{const s=await eT(n.localStore,e);Q_(n,r,null),K_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await aa(n,s)}catch(s){await na(s)}}async function qT(t,e,n){const r=le(t);try{const s=await function(o,l){const u=le(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(Ae(m!==null),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);Q_(r,e,n),K_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await aa(r,s)}catch(s){await na(s)}}function K_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Q_(t,e,n){const r=le(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Hd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Y_(t,r)})}function Y_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(wf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Tf(t))}function Og(t,e,n){for(const r of n)r instanceof H_?(t.La.addReference(r.key,e),GT(t,r)):r instanceof W_?(Y("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Y_(t,r.key)):oe()}function GT(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Y("SyncEngine","New document in limbo: "+n),t.xa.add(r),Tf(t))}function Tf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ne(Ge.fromString(e)),r=t.qa.next();t.Na.set(r,new LT(n)),t.Oa=t.Oa.insert(n,r),M_(t.remoteStore,new br(Vn(hf(n.path)),r,"TargetPurposeLimboResolution",of.oe))}}async function aa(t,e,n){const r=le(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=_f.Wi(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const p=le(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(d,g=>U.forEach(g.$i,x=>p.persistence.referenceDelegate.addReference(m,g.targetId,x)).next(()=>U.forEach(g.Ui,x=>p.persistence.referenceDelegate.removeReference(m,g.targetId,x)))))}catch(m){if(!ra(m))throw m;Y("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const x=p.os.get(g),T=x.snapshotVersion,C=x.withLastLimboFreeSnapshotVersion(T);p.os=p.os.insert(g,C)}}}(r.localStore,i))}async function KT(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await V_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new te(B.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await aa(n,r.hs)}}function QT(t,e){const n=le(t),r=n.Na.get(e);if(r&&r.va)return ge().add(r.key);{let s=ge();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function X_(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=G_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HT.bind(null,e),e.Ca.d_=NT.bind(null,e.eventManager),e.Ca.$a=PT.bind(null,e.eventManager),e}function YT(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qT.bind(null,e),e}class Kl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Su(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return ZS(this.persistence,new XS,e.initialUser,this.serializer)}Ga(e){return new KS(vf.Zr,this.serializer)}Wa(e){return new oT}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kl.provider={build:()=>new Kl};class Wd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=KT.bind(null,this.syncEngine),await ST(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new CT}()}createDatastore(e){const n=Su(e.databaseInfo.databaseId),r=function(i){return new cT(i)}(e.databaseInfo);return function(i,o,l,u){return new fT(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new mT(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Lg(this.syncEngine,n,0),function(){return Ng.D()?new Ng:new aT}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,p){const m=new OT(s,i,o,l,u,d);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=le(s);Y("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await oa(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Wd.provider={build:()=>new Wd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ct.UNAUTHENTICATED,this.clientId=t_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Y("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Y("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=If(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Tc(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await V_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Mg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ZT(t);Y("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Pg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Pg(e.remoteStore,s)),t._onlineComponents=e}async function ZT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await Tc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ci("Error using user provided cache. Falling back to memory cache: "+n),await Tc(t,new Kl)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await Tc(t,new Kl);return t._offlineComponents}async function J_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await Mg(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await Mg(t,new Wd))),t._onlineComponents}function eC(t){return J_(t).then(e=>e.syncEngine)}async function tC(t){const e=await J_(t),n=e.eventManager;return n.onListen=MT.bind(null,e.syncEngine),n.onUnlisten=UT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=FT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BT.bind(null,e.syncEngine),n}function nC(t,e,n={}){const r=new Dr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const p=new XT({next:g=>{p.Za(),o.enqueueAndForget(()=>RT(i,m));const x=g.docs.has(l);!x&&g.fromCache?d.reject(new te(B.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&u&&u.source==="server"?d.reject(new te(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new DT(hf(l.path),p,{includeMetadataChanges:!0,_a:!0});return AT(i,m)}(await tC(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t,e,n){if(!n)throw new te(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sC(t,e,n,r){if(e===!0&&r===!0)throw new te(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function zg(t){if(!ne.isDocumentKey(t))throw new te(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function qo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cf(t);throw new te(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new te(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Z_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Af{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ug({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ug(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new g2;switch(r.type){case"firstParty":return new w2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Fg.get(n);r&&(Y("ComponentProvider","Removing Datastore"),Fg.delete(n),r.terminate())}(this),Promise.resolve()}}function iC(t,e,n,r={}){var s;const i=(t=qo(t,Af))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ci("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Ct.MOCK_USER;else{l=Lk(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new te(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ct(d)}t._authCredentials=new y2(new e_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rf(this.firestore,e,this._query)}}class dn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dn(this.firestore,e,this._key)}}class Go extends Rf{constructor(e,n,r){super(e,n,hf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new ne(e))}withConverter(e){return new Go(this.firestore,e,this._path)}}function Ql(t,e,...n){if(t=Fl(t),arguments.length===1&&(e=t_.newId()),rC("doc","path",e),t instanceof Af){const r=Ge.fromString(e,...n);return zg(r),new dn(t,null,new ne(r))}{if(!(t instanceof dn||t instanceof Go))throw new te(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return zg(r),new dn(t.firestore,t instanceof Go?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new L_(this,"async_queue_retry"),this.Vu=()=>{const r=Sc();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Sc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Sc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Dr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ra(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw or("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=kf.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Nf extends Af{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Bg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bg(e),this._firestoreClient=void 0,await e}}}function oC(t,e){const n=typeof t=="object"?t:Uv(),r=typeof t=="string"?t:"(default)",s=ef(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Vk("firestore");i&&iC(s,...i)}return s}function ew(t){if(t._terminated)throw new te(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||aC(t),t._firestoreClient}function aC(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,p){return new D2(l,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Z_(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new JT(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gi(vt.fromBase64String(e))}catch(n){throw new te(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gi(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=/^__.*__$/;class uC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new sa(e,this.data,n,this.fieldTransforms)}}function nw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class jf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Yl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nw(this.Cu)&&lC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class cC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Su(e)}Qu(e,n,r,s=!1){return new jf({Cu:e,methodName:n,qu:r,path:pt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dC(t){const e=t._freezeSettings(),n=Su(t._databaseId);return new cC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hC(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);ow("Data must be an object, but it was:",o,r);const l=sw(r,o);let u,d;if(i.merge)u=new wn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=fC(e,m,n);if(!o.contains(g))throw new te(B.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);mC(p,g)||p.push(g)}u=new wn(p),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new uC(new an(l),u,d)}function rw(t,e){if(iw(t=Fl(t)))return ow("Unsupported field value:",e,t),sw(t,e);if(t instanceof tw)return function(r,s){if(!nw(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=rw(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Fl(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ot.fromDate(r);return{timestampValue:ql(s.serializer,i)}}if(r instanceof ot){const i=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ql(s.serializer,i)}}if(r instanceof Df)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gi)return{bytesValue:T_(s.serializer,r._byteString)};if(r instanceof dn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:gf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Vf)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return ff(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Cf(r)}`)}(t,e)}function sw(t,e){const n={};return n_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ki(t,(r,s)=>{const i=rw(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function iw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ot||t instanceof Df||t instanceof gi||t instanceof dn||t instanceof tw||t instanceof Vf)}function ow(t,e,n){if(!iw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Cf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function fC(t,e,n){if((e=Fl(e))instanceof Pf)return e._internalPath;if(typeof e=="string")return aw(t,e);throw Yl("Field path arguments must be of type string or ",t,!1,void 0,n)}const pC=new RegExp("[~\\*/\\[\\]]");function aw(t,e,n){if(e.search(pC)>=0)throw Yl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pf(...e.split("."))._internalPath}catch{throw Yl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Yl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new te(B.INVALID_ARGUMENT,l+t+u)}function mC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gC extends lw{data(){return super.data()}}function uw(t,e){return typeof e=="string"?aw(t,e):e instanceof Pf?e._internalPath:e._delegate._internalPath}class yC{convertValue(e,n="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ki(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Qe(o.doubleValue));return new Vf(i)}convertGeoPoint(e){return new Df(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Uo(e));default:return null}}convertTimestamp(e){const n=Fr(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ge.fromString(e);Ae(D_(r));const s=new Bo(r.get(1),r.get(3)),i=new ne(r.popFirst(5));return s.isEqual(n)||or(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cw extends lw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(uw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class wC extends cw{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t){t=qo(t,dn);const e=qo(t.firestore,Nf);return nC(ew(e),t._key).then(n=>bC(e,t,n))}class xC extends yC{constructor(e){super(),this.firestore=e}convertBytes(e){return new gi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,n)}}function dw(t,e,n){t=qo(t,dn);const r=qo(t.firestore,Nf),s=vC(t.converter,e);return EC(r,[hC(dC(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,er.none())])}function EC(t,e){return function(r,s){const i=new Dr;return r.asyncQueue.enqueueAndForget(async()=>$T(await eC(r),s,i)),i.promise}(ew(t),e)}function bC(t,e,n){const r=n.docs.get(e._key),s=new xC(t);return new cw(t,s,e._key,r,new _C(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){bi=s})(tf),ui(new oi("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Nf(new v2(r.getProvider("auth-internal")),new E2(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new te(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bo(d.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Zn(lg,"4.7.3",e),Zn(lg,"4.7.3","esm2017")})();const kC={apiKey:"AIzaSyBAInv4O5MVcOE3kb8ztIM9U2Q1OOmnjJk",authDomain:"mission-ready-30e27.firebaseapp.com",projectId:"mission-ready-30e27",storageBucket:"mission-ready-30e27.firebasestorage.app",messagingSenderId:"421602206314",appId:"1:421602206314:web:6f24797d13a78609532013",measurementId:"G-QQ21XL2Y9H"},IC=Gv.initializeApp(kC),Xl=oC(IC),$g={register:async(t,e)=>{try{const n=Ql(Xl,"user_accounts",t);if((await qd(n)).exists())return{success:!1,error:""};const s=Math.random().toString(36).substring(2,15);return await dw(n,{password:e,userId:s,createdAt:new Date().toISOString()}),{success:!0,userId:s}}catch(n){return console.error("Register failed:",n),{success:!1,error:n.message}}},login:async(t,e)=>{try{const n=Ql(Xl,"user_accounts",t),r=await qd(n);if(!r.exists())return{success:!1,error:""};const s=r.data();return s.password!==e?{success:!1,error:""}:{success:!0,userId:s.userId}}catch(n){return console.error("Login failed:",n),{success:!1,error:n.message}}}},Hg={upload:async(t,e)=>{try{return await dw(Ql(Xl,"users",t),{lastUpdated:new Date().toISOString(),data:JSON.stringify(e)}),{success:!0}}catch(n){return console.error("Upload failed:",n),{success:!1,error:n}}},download:async t=>{try{const e=Ql(Xl,"users",t),n=await qd(e);if(n.exists()){const r=n.data().data;return{success:!0,data:JSON.parse(r)}}else return{success:!1,error:"No data found"}}catch(e){return console.error("Download failed:",e),{success:!1,error:e}}}},SC=({onLogin:t})=>{const[e,n]=N.useState(!1),[r,s]=N.useState(""),[i,o]=N.useState(""),[l,u]=N.useState(""),[d,p]=N.useState(!1),m=async g=>{if(g.preventDefault(),u(""),p(!0),!r.trim()||!i.trim()){u(""),p(!1);return}try{if(e){const x=await $g.register(r,i);if(x.success&&x.userId){localStorage.setItem("mission_ready_active_user_id",x.userId);const T=JSON.parse(localStorage.getItem("mission_ready_users")||"[]");T.some(C=>C.username===r)||localStorage.setItem("mission_ready_users",JSON.stringify([...T,{id:x.userId,username:r,password:i}])),t({id:x.userId,username:r})}else u(x.error||"")}else{const x=await $g.login(r,i);if(x.success&&x.userId)localStorage.setItem("mission_ready_active_user_id",x.userId),t({id:x.userId,username:r});else{const C=JSON.parse(localStorage.getItem("mission_ready_users")||"[]").find(R=>R.username===r&&R.password===i);C?(console.log("Cloud login failed, using local credentials"),t({id:C.id,username:C.username})):u(x.error||"")}}}catch{u("")}finally{p(!1)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900 p-4 transition-colors duration-200",children:f.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("div",{className:"bg-blue-600 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-blue-200 dark:shadow-none",children:f.jsx(Dm,{className:"text-white",size:32})}),f.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Mission Ready"}),f.jsxs("p",{className:"text-slate-500 dark:text-slate-400 flex items-center justify-center gap-1 mt-1",children:["",f.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-2 py-0.5 rounded-full flex items-center gap-1",children:[f.jsx(mE,{size:10})," Cloud Sync"]})]})]}),f.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg mb-6",children:[f.jsx("button",{onClick:()=>{n(!1),u("")},className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${e?"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200":"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm"}`,children:""}),f.jsx("button",{onClick:()=>{n(!0),u("")},className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${e?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:""})]}),f.jsxs("form",{onSubmit:m,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:""}),f.jsxs("div",{className:"relative",children:[f.jsx(PE,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),f.jsx("input",{type:"text",value:r,onChange:g=>s(g.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-slate-800 outline-none transition-all text-slate-900 dark:text-white placeholder-slate-400",placeholder:""})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:""}),f.jsxs("div",{className:"relative",children:[f.jsx(Dm,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),f.jsx("input",{type:"password",value:i,onChange:g=>o(g.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-slate-800 outline-none transition-all text-slate-900 dark:text-white placeholder-slate-400",placeholder:""})]})]}),l&&f.jsxs("div",{className:"text-red-500 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg border border-red-100 dark:border-red-900/30 flex items-center gap-2",children:[f.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 dark:bg-red-400 rounded-full"}),l]}),f.jsx("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-500 text-white font-bold py-3 rounded-xl shadow-lg shadow-blue-200 dark:shadow-none active:scale-[0.98] transition-all flex items-center justify-center gap-2 mt-2 disabled:opacity-70 disabled:cursor-not-allowed",children:d?"...":e?"":""})]})]})})};function TC(){const[t,e]=N.useState(null),[n,r]=N.useState("DASHBOARD"),[s,i]=N.useState([]),[o,l]=N.useState([]),[u,d]=N.useState([]),[p,m]=N.useState([]),[g,x]=N.useState([]),[T,C]=N.useState([]),[R,b]=N.useState(null),[_,I]=N.useState(!1),[D,O]=N.useState(!1),[F,w]=N.useState("");N.useEffect(()=>{localStorage.getItem("mission_ready_theme")==="dark"&&(O(!0),document.documentElement.classList.add("dark"))},[]);const y=()=>{const z=!D;O(z),z?(document.documentElement.classList.add("dark"),localStorage.setItem("mission_ready_theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("mission_ready_theme","light"))};N.useEffect(()=>{const z=localStorage.getItem("mission_ready_active_user_id"),G=JSON.parse(localStorage.getItem("mission_ready_users")||"[]");if(z&&G.length>0){const se=G.find(ue=>ue.id===z);se&&k({id:se.id,username:se.username})}},[]);const E=z=>{const G=localStorage.getItem(`mission_ready_categories_${z}`);x(G?JSON.parse(G):pc);const se=localStorage.getItem(`mission_ready_bundles_${z}`);C(se?JSON.parse(se):aE);const ue=localStorage.getItem(`mission_ready_inventory_${z}`);let re=[];ue?(re=JSON.parse(ue),re=re.map(J=>{let Z=J.category;return!Z.startsWith("cat_")&&!pc.some(ce=>ce.id===Z)&&(Z="cat_tools"),{...J,category:Z,folderId:J.folderId||de,groupId:J.groupId||me}})):re=oE,i(re);const Se=localStorage.getItem(`mission_ready_trips_${z}`);let Pe=Se?JSON.parse(Se):[];Pe=Pe.map(J=>({...J,groups:J.groups||[{id:xd,name:""}],items:J.items.map(Z=>({...Z,category:!Z.category.startsWith("cat_")&&!pc.some(ce=>ce.id===Z.category)?"cat_tools":Z.category,tripGroupId:Z.tripGroupId||xd}))})),l(Pe);const Ke=localStorage.getItem(`mission_ready_folders_${z}`);d(Ke?JSON.parse(Ke):sE);const M=localStorage.getItem(`mission_ready_groups_${z}`);m(M?JSON.parse(M):iE)};N.useEffect(()=>{t&&localStorage.setItem(`mission_ready_inventory_${t.id}`,JSON.stringify(s))},[s,t]),N.useEffect(()=>{t&&localStorage.setItem(`mission_ready_trips_${t.id}`,JSON.stringify(o))},[o,t]),N.useEffect(()=>{t&&localStorage.setItem(`mission_ready_folders_${t.id}`,JSON.stringify(u))},[u,t]),N.useEffect(()=>{t&&localStorage.setItem(`mission_ready_groups_${t.id}`,JSON.stringify(p))},[p,t]),N.useEffect(()=>{t&&localStorage.setItem(`mission_ready_categories_${t.id}`,JSON.stringify(g))},[g,t]),N.useEffect(()=>{t&&localStorage.setItem(`mission_ready_bundles_${t.id}`,JSON.stringify(T))},[T,t]);const k=z=>{e(z),localStorage.setItem("mission_ready_active_user_id",z.id),E(z.id),r("DASHBOARD")},A=()=>{e(null),localStorage.removeItem("mission_ready_active_user_id"),i([]),l([]),d([]),m([]),x([]),C([])},P=z=>{if(!t)return;const G={...z,userId:t.id};l(se=>se.find(re=>re.id===z.id)?se.map(re=>re.id===z.id?G:re):[G,...se]),b(z.id),r("TRIP_RUN")},S=(z,G)=>{if(z.stopPropagation(),!!t&&window.confirm(`${G.name}`)){const se={...G,id:Math.random().toString(36).substring(2,9),name:`${G.name} (Copy)`,date:new Date().toISOString().split("T")[0],status:"planning",items:G.items.map(ue=>({...ue,id:Math.random().toString(36).substring(2,9),checked:!1}))};l(ue=>[se,...ue])}},ve=()=>{b(null),r("TRIP_EDIT")},He=z=>{b(z),r("TRIP_RUN")},_t=(z,G)=>{z.stopPropagation(),window.confirm("")&&(l(se=>se.filter(ue=>ue.id!==G)),R===G&&(b(null),r("DASHBOARD")))},Ie=async()=>{if(!t)return;I(!0);const z={inventory:s,trips:o,folders:u,groups:p,categories:g,bundles:T};try{const G=await Hg.upload(t.id,z);G.success?alert(" "):alert(" "+JSON.stringify(G.error))}catch(G){console.error(G),alert(" ")}finally{I(!1)}},H=async()=>{if(t&&window.confirm(` 

`)){I(!0);try{const z=await Hg.download(t.id);if(z.success&&z.data){const{inventory:G,trips:se,folders:ue,groups:re,categories:Se,bundles:Pe}=z.data;Se&&x(Se),Pe&&C(Pe),G&&i(G),se&&l(se),ue&&d(ue),re&&m(re),alert(" ")}else alert(" ")}catch(z){console.error(z),alert(" ")}finally{I(!1)}}};if(!t)return f.jsx(SC,{onLogin:k});const Q=o.find(z=>z.id===R)||null,X=s.filter(z=>z.name.toLowerCase().includes(F.toLowerCase())),fe=o.filter(z=>z.name.toLowerCase().includes(F.toLowerCase()));return f.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900 font-sans dark:bg-slate-950 dark:text-slate-100 transition-colors duration-200",children:[f.jsx("nav",{className:"bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-20 shadow-sm",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between",children:[f.jsxs("div",{onClick:()=>r("DASHBOARD"),className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("div",{className:"bg-slate-900 dark:bg-slate-700 text-white p-1.5 rounded-lg",children:f.jsx(xE,{size:20})}),f.jsx("span",{className:"font-bold text-lg tracking-tight text-slate-800 dark:text-white hidden md:block",children:"Mission Ready"})]}),f.jsxs("div",{className:"flex items-center gap-1 md:gap-4",children:[f.jsxs("div",{className:"flex gap-1",children:[f.jsx("button",{onClick:()=>r("DASHBOARD"),className:`px-3 md:px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="DASHBOARD"?"text-blue-600 bg-blue-50 dark:bg-blue-900/30 dark:text-blue-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:""}),f.jsx("button",{onClick:()=>r("INVENTORY"),className:`px-3 md:px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="INVENTORY"?"text-blue-600 bg-blue-50 dark:bg-blue-900/30 dark:text-blue-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:""})]}),f.jsx("div",{className:"h-6 w-px bg-slate-200 dark:bg-slate-700 mx-1"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:y,className:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:D?f.jsx(RE,{size:20}):f.jsx(kE,{size:20})}),_?f.jsx(EE,{size:18,className:"animate-spin text-slate-400"}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:Ie,className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-slate-800 rounded-lg transition-colors",title:"",children:f.jsx(NE,{size:20})}),f.jsx("button",{onClick:H,className:"p-2 text-slate-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-slate-800 rounded-lg transition-colors",title:"",children:f.jsx(yE,{size:20})})]}),f.jsx("div",{className:"h-4 w-px bg-slate-200 dark:bg-slate-700 mx-1"}),f.jsxs("div",{className:"hidden md:flex items-center gap-2 text-slate-600 dark:text-slate-300 text-sm font-medium px-2",children:[f.jsx(DE,{size:16}),f.jsx("span",{children:t.username})]}),f.jsx("button",{onClick:A,className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-slate-800 rounded-lg transition-colors",children:f.jsx(bE,{size:20})})]})]})]})}),f.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[n==="DASHBOARD"&&f.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[f.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 dark:from-slate-900 dark:to-slate-800 rounded-2xl p-8 text-white shadow-lg flex flex-col md:flex-row justify-between items-center gap-6 border border-slate-700",children:[f.jsxs("div",{className:"flex-1 w-full",children:[f.jsx("h1",{className:"text-3xl font-bold mb-2",children:""}),f.jsxs("div",{className:"relative mt-4 max-w-md",children:[f.jsx(Pl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),f.jsx("input",{type:"text",placeholder:"...",value:F,onChange:z=>w(z.target.value),className:"w-full pl-10 pr-10 py-2 rounded-lg bg-slate-900/50 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),F&&f.jsx("button",{onClick:()=>w(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white",children:f.jsx(Xn,{size:16})})]})]}),f.jsxs("button",{onClick:ve,className:"bg-blue-500 hover:bg-blue-400 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg hover:shadow-xl transition-all active:scale-95 whitespace-nowrap",children:[f.jsx(Nn,{size:24})," "]})]}),F&&f.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm",children:[f.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4",children:[': "',F,'"']}),f.jsxs("div",{className:"space-y-6",children:[fe.length>0&&f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-bold text-blue-600 mb-2 uppercase",children:""}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:fe.map(z=>f.jsxs("div",{onClick:()=>He(z.id),className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600 cursor-pointer hover:border-blue-400 transition-colors",children:[f.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:z.name}),f.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:z.date})]},z.id))})]}),X.length>0&&f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-bold text-green-600 mb-2 uppercase",children:""}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:X.map(z=>f.jsx("div",{className:"p-2 bg-slate-50 dark:bg-slate-700/50 rounded border border-slate-200 dark:border-slate-600 text-sm text-slate-700 dark:text-slate-200",children:z.name},z.id))})]}),X.length===0&&fe.length===0&&f.jsx("p",{className:"text-slate-400",children:""})]})]}),!F&&f.jsxs("div",{children:[f.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[f.jsx(dE,{size:20,className:"text-slate-500"}),""]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.length===0?f.jsxs("div",{className:"col-span-full bg-white dark:bg-slate-800 border border-dashed border-slate-300 dark:border-slate-700 rounded-xl p-12 text-center text-slate-400",children:[f.jsx(Ed,{size:48,className:"mx-auto mb-4 opacity-50"}),f.jsx("p",{children:""})]}):o.map(z=>{const G=z.items.filter(re=>re.checked).length,se=z.items.length,ue=se===0?0:Math.round(G/se*100);return f.jsxs("div",{onClick:()=>He(z.id),className:"group bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md hover:border-blue-200 dark:hover:border-blue-500/50 transition-all cursor-pointer relative",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsxs("div",{className:"min-w-0 pr-4",children:[f.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-100 group-hover:text-blue-600 transition-colors truncate",children:z.name}),f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:z.date})]}),f.jsxs("div",{className:"flex flex-col items-end shrink-0",children:[f.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${ue===100?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300"}`,children:ue===100?"":""}),f.jsxs("div",{className:"flex gap-1 mt-2 z-10",children:[f.jsx("button",{onClick:re=>S(re,z),className:"text-slate-300 hover:text-blue-500 p-1",title:"",children:f.jsx(gE,{size:14})}),f.jsx("button",{onClick:re=>_t(re,z.id),className:"text-slate-300 hover:text-red-500 p-1",title:"",children:f.jsx(Xn,{size:16})})]})]})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400 font-medium",children:[f.jsx("span",{children:""}),f.jsxs("span",{children:[G,"/",se," "]})]}),f.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${ue}%`}})})]}),f.jsx(fE,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-200 dark:text-slate-600 opacity-0 group-hover:opacity-100 transition-all transform group-hover:translate-x-1"})]},z.id)})})]})]}),n==="INVENTORY"&&f.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",children:f.jsx(VE,{items:s,setItems:i,folders:u,setFolders:d,groups:p,setGroups:m,categories:g,setCategories:x,bundles:T,setBundles:C})}),n==="TRIP_EDIT"&&f.jsx("div",{className:"animate-in fade-in zoom-in-95 duration-200",children:f.jsx(bk,{inventory:s,folders:u,groups:p,categories:g,bundles:T,currentTrip:Q,onSave:P,onCancel:()=>r(R?"TRIP_RUN":"DASHBOARD")})}),n==="TRIP_RUN"&&Q&&f.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:f.jsx(kk,{trip:Q,categories:g,onUpdateTrip:P,onBack:()=>r("DASHBOARD"),onEdit:()=>r("TRIP_EDIT")})})]})]})}const hw=document.getElementById("root");if(!hw)throw new Error("Could not find root element to mount to");const CC=Cc.createRoot(hw);CC.render(f.jsx(Lt.StrictMode,{children:f.jsx(TC,{})}));
