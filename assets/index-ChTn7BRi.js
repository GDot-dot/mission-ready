(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function W0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Em={exports:{}},Za={},xm={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var to=Symbol.for("react.element"),q0=Symbol.for("react.portal"),G0=Symbol.for("react.fragment"),Q0=Symbol.for("react.strict_mode"),K0=Symbol.for("react.profiler"),Y0=Symbol.for("react.provider"),X0=Symbol.for("react.context"),J0=Symbol.for("react.forward_ref"),Z0=Symbol.for("react.suspense"),e_=Symbol.for("react.memo"),t_=Symbol.for("react.lazy"),pf=Symbol.iterator;function n_(t){return t===null||typeof t!="object"?null:(t=pf&&t[pf]||t["@@iterator"],typeof t=="function"?t:null)}var Tm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Im=Object.assign,Sm={};function As(t,e,n){this.props=t,this.context=e,this.refs=Sm,this.updater=n||Tm}As.prototype.isReactComponent={};As.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};As.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Am(){}Am.prototype=As.prototype;function zc(t,e,n){this.props=t,this.context=e,this.refs=Sm,this.updater=n||Tm}var Bc=zc.prototype=new Am;Bc.constructor=zc;Im(Bc,As.prototype);Bc.isPureReactComponent=!0;var mf=Array.isArray,Cm=Object.prototype.hasOwnProperty,$c={current:null},km={key:!0,ref:!0,__self:!0,__source:!0};function Rm(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Cm.call(e,r)&&!km.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:to,type:t,key:i,ref:a,props:s,_owner:$c.current}}function r_(t,e){return{$$typeof:to,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hc(t){return typeof t=="object"&&t!==null&&t.$$typeof===to}function s_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gf=/\/+/g;function Hl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?s_(""+t.key):e.toString(36)}function Xo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case to:case q0:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Hl(a,0):r,mf(s)?(n="",t!=null&&(n=t.replace(gf,"$&/")+"/"),Xo(s,e,n,"",function(h){return h})):s!=null&&(Hc(s)&&(s=r_(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(gf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",mf(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Hl(i,l);a+=Xo(i,e,n,u,s)}else if(u=n_(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Hl(i,l++),a+=Xo(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Po(t,e,n){if(t==null)return t;var r=[],s=0;return Xo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function i_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gt={current:null},Jo={transition:null},o_={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:Jo,ReactCurrentOwner:$c};function Pm(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Po,forEach:function(t,e,n){Po(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Po(t,function(){e++}),e},toArray:function(t){return Po(t,function(e){return e})||[]},only:function(t){if(!Hc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=As;ae.Fragment=G0;ae.Profiler=K0;ae.PureComponent=zc;ae.StrictMode=Q0;ae.Suspense=Z0;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o_;ae.act=Pm;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Im({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=$c.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Cm.call(e,u)&&!km.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:to,type:t.type,key:s,ref:i,props:r,_owner:a}};ae.createContext=function(t){return t={$$typeof:X0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Y0,_context:t},t.Consumer=t};ae.createElement=Rm;ae.createFactory=function(t){var e=Rm.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:J0,render:t}};ae.isValidElement=Hc;ae.lazy=function(t){return{$$typeof:t_,_payload:{_status:-1,_result:t},_init:i_}};ae.memo=function(t,e){return{$$typeof:e_,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=Jo.transition;Jo.transition={};try{t()}finally{Jo.transition=e}};ae.unstable_act=Pm;ae.useCallback=function(t,e){return gt.current.useCallback(t,e)};ae.useContext=function(t){return gt.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return gt.current.useDeferredValue(t)};ae.useEffect=function(t,e){return gt.current.useEffect(t,e)};ae.useId=function(){return gt.current.useId()};ae.useImperativeHandle=function(t,e,n){return gt.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return gt.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return gt.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return gt.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return gt.current.useReducer(t,e,n)};ae.useRef=function(t){return gt.current.useRef(t)};ae.useState=function(t){return gt.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return gt.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return gt.current.useTransition()};ae.version="18.3.1";xm.exports=ae;var Q=xm.exports;const a_=W0(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_=Q,u_=Symbol.for("react.element"),c_=Symbol.for("react.fragment"),h_=Object.prototype.hasOwnProperty,d_=l_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f_={key:!0,ref:!0,__self:!0,__source:!0};function Nm(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)h_.call(e,r)&&!f_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:u_,type:t,key:i,ref:a,props:s,_owner:d_.current}}Za.Fragment=c_;Za.jsx=Nm;Za.jsxs=Nm;Em.exports=Za;var p=Em.exports,Cu={},Vm={exports:{}},kt={},bm={exports:{}},Dm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,K){var q=$.length;$.push(K);e:for(;0<q;){var Y=q-1>>>1,G=$[Y];if(0<s(G,K))$[Y]=K,$[q]=G,q=Y;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var K=$[0],q=$.pop();if(q!==K){$[0]=q;e:for(var Y=0,G=$.length,fe=G>>>1;Y<fe;){var j=2*(Y+1)-1,ee=$[j],me=j+1,Re=$[me];if(0>s(ee,q))me<G&&0>s(Re,ee)?($[Y]=Re,$[me]=q,Y=me):($[Y]=ee,$[j]=q,Y=j);else if(me<G&&0>s(Re,q))$[Y]=Re,$[me]=q,Y=me;else break e}}return K}function s($,K){var q=$.sortIndex-K.sortIndex;return q!==0?q:$.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],f=1,g=null,v=3,A=!1,P=!1,N=!1,D=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k($){for(var K=n(h);K!==null;){if(K.callback===null)r(h);else if(K.startTime<=$)r(h),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(h)}}function b($){if(N=!1,k($),!P)if(n(u)!==null)P=!0,Se(U);else{var K=n(h);K!==null&&Me(b,K.startTime-$)}}function U($,K){P=!1,N&&(N=!1,I(y),y=-1),A=!0;var q=v;try{for(k(K),g=n(u);g!==null&&(!(g.expirationTime>K)||$&&!C());){var Y=g.callback;if(typeof Y=="function"){g.callback=null,v=g.priorityLevel;var G=Y(g.expirationTime<=K);K=t.unstable_now(),typeof G=="function"?g.callback=G:g===n(u)&&r(u),k(K)}else r(u);g=n(u)}if(g!==null)var fe=!0;else{var j=n(h);j!==null&&Me(b,j.startTime-K),fe=!1}return fe}finally{g=null,v=q,A=!1}}var z=!1,E=null,y=-1,w=5,T=-1;function C(){return!(t.unstable_now()-T<w)}function S(){if(E!==null){var $=t.unstable_now();T=$;var K=!0;try{K=E(!0,$)}finally{K?_():(z=!1,E=null)}}else z=!1}var _;if(typeof x=="function")_=function(){x(S)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,_e=se.port2;se.port1.onmessage=S,_=function(){_e.postMessage(null)}}else _=function(){D(S,0)};function Se($){E=$,z||(z=!0,_())}function Me($,K){y=D(function(){$(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){P||A||(P=!0,Se(U))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var q=v;v=K;try{return $()}finally{v=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var q=v;v=$;try{return K()}finally{v=q}},t.unstable_scheduleCallback=function($,K,q){var Y=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Y+q:Y):q=Y,$){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=q+G,$={id:f++,callback:K,priorityLevel:$,startTime:q,expirationTime:G,sortIndex:-1},q>Y?($.sortIndex=q,e(h,$),n(u)===null&&$===n(h)&&(N?(I(y),y=-1):N=!0,Me(b,q-Y))):($.sortIndex=G,e(u,$),P||A||(P=!0,Se(U))),$},t.unstable_shouldYield=C,t.unstable_wrapCallback=function($){var K=v;return function(){var q=v;v=K;try{return $.apply(this,arguments)}finally{v=q}}}})(Dm);bm.exports=Dm;var p_=bm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_=Q,Ct=p_;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lm=new Set,ki={};function Tr(t,e){ls(t,e),ls(t+"Capture",e)}function ls(t,e){for(ki[t]=e,t=0;t<e.length;t++)Lm.add(e[t])}var mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ku=Object.prototype.hasOwnProperty,g_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yf={},vf={};function y_(t){return ku.call(vf,t)?!0:ku.call(yf,t)?!1:g_.test(t)?vf[t]=!0:(yf[t]=!0,!1)}function v_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function __(t,e,n,r){if(e===null||typeof e>"u"||v_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wc=/[\-:]([a-z])/g;function qc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wc,qc);nt[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wc,qc);nt[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wc,qc);nt[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gc(t,e,n,r){var s=nt.hasOwnProperty(e)?nt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(__(e,n,s,r)&&(n=null),r||s===null?y_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xn=m_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,No=Symbol.for("react.element"),Br=Symbol.for("react.portal"),$r=Symbol.for("react.fragment"),Qc=Symbol.for("react.strict_mode"),Ru=Symbol.for("react.profiler"),Om=Symbol.for("react.provider"),jm=Symbol.for("react.context"),Kc=Symbol.for("react.forward_ref"),Pu=Symbol.for("react.suspense"),Nu=Symbol.for("react.suspense_list"),Yc=Symbol.for("react.memo"),Cn=Symbol.for("react.lazy"),Mm=Symbol.for("react.offscreen"),_f=Symbol.iterator;function Zs(t){return t===null||typeof t!="object"?null:(t=_f&&t[_f]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,Wl;function li(t){if(Wl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wl=e&&e[1]||""}return`
`+Wl+t}var ql=!1;function Gl(t,e){if(!t||ql)return"";ql=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{ql=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?li(t):""}function w_(t){switch(t.tag){case 5:return li(t.type);case 16:return li("Lazy");case 13:return li("Suspense");case 19:return li("SuspenseList");case 0:case 2:case 15:return t=Gl(t.type,!1),t;case 11:return t=Gl(t.type.render,!1),t;case 1:return t=Gl(t.type,!0),t;default:return""}}function Vu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $r:return"Fragment";case Br:return"Portal";case Ru:return"Profiler";case Qc:return"StrictMode";case Pu:return"Suspense";case Nu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jm:return(t.displayName||"Context")+".Consumer";case Om:return(t._context.displayName||"Context")+".Provider";case Kc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Yc:return e=t.displayName||null,e!==null?e:Vu(t.type)||"Memo";case Cn:e=t._payload,t=t._init;try{return Vu(t(e))}catch{}}return null}function E_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vu(e);case 8:return e===Qc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function x_(t){var e=Fm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vo(t){t._valueTracker||(t._valueTracker=x_(t))}function Um(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Fm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function pa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bu(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zm(t,e){e=e.checked,e!=null&&Gc(t,"checked",e,!1)}function Du(t,e){zm(t,e);var n=Hn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lu(t,e.type,Hn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ef(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Lu(t,e,n){(e!=="number"||pa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ui=Array.isArray;function ts(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ou(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(ui(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hn(n)}}function Bm(t,e){var n=Hn(e.value),r=Hn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Tf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $m(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ju(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$m(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bo,Hm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bo=bo||document.createElement("div"),bo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ri(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var mi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},T_=["Webkit","ms","Moz","O"];Object.keys(mi).forEach(function(t){T_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mi[e]=mi[t]})});function Wm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||mi.hasOwnProperty(t)&&mi[t]?(""+e).trim():e+"px"}function qm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Wm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var I_=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mu(t,e){if(e){if(I_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Fu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uu=null;function Xc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zu=null,ns=null,rs=null;function If(t){if(t=so(t)){if(typeof zu!="function")throw Error(F(280));var e=t.stateNode;e&&(e=sl(e),zu(t.stateNode,t.type,e))}}function Gm(t){ns?rs?rs.push(t):rs=[t]:ns=t}function Qm(){if(ns){var t=ns,e=rs;if(rs=ns=null,If(t),e)for(t=0;t<e.length;t++)If(e[t])}}function Km(t,e){return t(e)}function Ym(){}var Ql=!1;function Xm(t,e,n){if(Ql)return t(e,n);Ql=!0;try{return Km(t,e,n)}finally{Ql=!1,(ns!==null||rs!==null)&&(Ym(),Qm())}}function Pi(t,e){var n=t.stateNode;if(n===null)return null;var r=sl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Bu=!1;if(mn)try{var ei={};Object.defineProperty(ei,"passive",{get:function(){Bu=!0}}),window.addEventListener("test",ei,ei),window.removeEventListener("test",ei,ei)}catch{Bu=!1}function S_(t,e,n,r,s,i,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var gi=!1,ma=null,ga=!1,$u=null,A_={onError:function(t){gi=!0,ma=t}};function C_(t,e,n,r,s,i,a,l,u){gi=!1,ma=null,S_.apply(A_,arguments)}function k_(t,e,n,r,s,i,a,l,u){if(C_.apply(this,arguments),gi){if(gi){var h=ma;gi=!1,ma=null}else throw Error(F(198));ga||(ga=!0,$u=h)}}function Ir(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Jm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sf(t){if(Ir(t)!==t)throw Error(F(188))}function R_(t){var e=t.alternate;if(!e){if(e=Ir(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Sf(s),t;if(i===r)return Sf(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function Zm(t){return t=R_(t),t!==null?eg(t):null}function eg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=eg(t);if(e!==null)return e;t=t.sibling}return null}var tg=Ct.unstable_scheduleCallback,Af=Ct.unstable_cancelCallback,P_=Ct.unstable_shouldYield,N_=Ct.unstable_requestPaint,Ue=Ct.unstable_now,V_=Ct.unstable_getCurrentPriorityLevel,Jc=Ct.unstable_ImmediatePriority,ng=Ct.unstable_UserBlockingPriority,ya=Ct.unstable_NormalPriority,b_=Ct.unstable_LowPriority,rg=Ct.unstable_IdlePriority,el=null,Jt=null;function D_(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(el,t,void 0,(t.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:j_,L_=Math.log,O_=Math.LN2;function j_(t){return t>>>=0,t===0?32:31-(L_(t)/O_|0)|0}var Do=64,Lo=4194304;function ci(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function va(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=ci(l):(i&=a,i!==0&&(r=ci(i)))}else a=n&~s,a!==0?r=ci(a):i!==0&&(r=ci(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wt(e),s=1<<n,r|=t[n],e&=~s;return r}function M_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Wt(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=M_(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Hu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sg(){var t=Do;return Do<<=1,!(Do&4194240)&&(Do=64),t}function Kl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function no(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wt(e),t[e]=n}function U_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Wt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Zc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var we=0;function ig(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var og,eh,ag,lg,ug,Wu=!1,Oo=[],Dn=null,Ln=null,On=null,Ni=new Map,Vi=new Map,Rn=[],z_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cf(t,e){switch(t){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":Ni.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vi.delete(e.pointerId)}}function ti(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=so(e),e!==null&&eh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function B_(t,e,n,r,s){switch(e){case"focusin":return Dn=ti(Dn,t,e,n,r,s),!0;case"dragenter":return Ln=ti(Ln,t,e,n,r,s),!0;case"mouseover":return On=ti(On,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ni.set(i,ti(Ni.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vi.set(i,ti(Vi.get(i)||null,t,e,n,r,s)),!0}return!1}function cg(t){var e=lr(t.target);if(e!==null){var n=Ir(e);if(n!==null){if(e=n.tag,e===13){if(e=Jm(n),e!==null){t.blockedOn=e,ug(t.priority,function(){ag(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Uu=r,n.target.dispatchEvent(r),Uu=null}else return e=so(n),e!==null&&eh(e),t.blockedOn=n,!1;e.shift()}return!0}function kf(t,e,n){Zo(t)&&n.delete(e)}function $_(){Wu=!1,Dn!==null&&Zo(Dn)&&(Dn=null),Ln!==null&&Zo(Ln)&&(Ln=null),On!==null&&Zo(On)&&(On=null),Ni.forEach(kf),Vi.forEach(kf)}function ni(t,e){t.blockedOn===e&&(t.blockedOn=null,Wu||(Wu=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,$_)))}function bi(t){function e(s){return ni(s,t)}if(0<Oo.length){ni(Oo[0],t);for(var n=1;n<Oo.length;n++){var r=Oo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dn!==null&&ni(Dn,t),Ln!==null&&ni(Ln,t),On!==null&&ni(On,t),Ni.forEach(e),Vi.forEach(e),n=0;n<Rn.length;n++)r=Rn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rn.length&&(n=Rn[0],n.blockedOn===null);)cg(n),n.blockedOn===null&&Rn.shift()}var ss=xn.ReactCurrentBatchConfig,_a=!0;function H_(t,e,n,r){var s=we,i=ss.transition;ss.transition=null;try{we=1,th(t,e,n,r)}finally{we=s,ss.transition=i}}function W_(t,e,n,r){var s=we,i=ss.transition;ss.transition=null;try{we=4,th(t,e,n,r)}finally{we=s,ss.transition=i}}function th(t,e,n,r){if(_a){var s=qu(t,e,n,r);if(s===null)iu(t,e,r,wa,n),Cf(t,r);else if(B_(s,t,e,n,r))r.stopPropagation();else if(Cf(t,r),e&4&&-1<z_.indexOf(t)){for(;s!==null;){var i=so(s);if(i!==null&&og(i),i=qu(t,e,n,r),i===null&&iu(t,e,r,wa,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else iu(t,e,r,null,n)}}var wa=null;function qu(t,e,n,r){if(wa=null,t=Xc(r),t=lr(t),t!==null)if(e=Ir(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Jm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wa=t,null}function hg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(V_()){case Jc:return 1;case ng:return 4;case ya:case b_:return 16;case rg:return 536870912;default:return 16}default:return 16}}var Nn=null,nh=null,ea=null;function dg(){if(ea)return ea;var t,e=nh,n=e.length,r,s="value"in Nn?Nn.value:Nn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return ea=s.slice(t,1<r?1-r:void 0)}function ta(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jo(){return!0}function Rf(){return!1}function Rt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jo:Rf,this.isPropagationStopped=Rf,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jo)},persist:function(){},isPersistent:jo}),e}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rh=Rt(Cs),ro=be({},Cs,{view:0,detail:0}),q_=Rt(ro),Yl,Xl,ri,tl=be({},ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ri&&(ri&&t.type==="mousemove"?(Yl=t.screenX-ri.screenX,Xl=t.screenY-ri.screenY):Xl=Yl=0,ri=t),Yl)},movementY:function(t){return"movementY"in t?t.movementY:Xl}}),Pf=Rt(tl),G_=be({},tl,{dataTransfer:0}),Q_=Rt(G_),K_=be({},ro,{relatedTarget:0}),Jl=Rt(K_),Y_=be({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),X_=Rt(Y_),J_=be({},Cs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Z_=Rt(J_),ew=be({},Cs,{data:0}),Nf=Rt(ew),tw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rw[t])?!!e[t]:!1}function sh(){return sw}var iw=be({},ro,{key:function(t){if(t.key){var e=tw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ta(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sh,charCode:function(t){return t.type==="keypress"?ta(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ta(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ow=Rt(iw),aw=be({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vf=Rt(aw),lw=be({},ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sh}),uw=Rt(lw),cw=be({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),hw=Rt(cw),dw=be({},tl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fw=Rt(dw),pw=[9,13,27,32],ih=mn&&"CompositionEvent"in window,yi=null;mn&&"documentMode"in document&&(yi=document.documentMode);var mw=mn&&"TextEvent"in window&&!yi,fg=mn&&(!ih||yi&&8<yi&&11>=yi),bf=" ",Df=!1;function pg(t,e){switch(t){case"keyup":return pw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hr=!1;function gw(t,e){switch(t){case"compositionend":return mg(e);case"keypress":return e.which!==32?null:(Df=!0,bf);case"textInput":return t=e.data,t===bf&&Df?null:t;default:return null}}function yw(t,e){if(Hr)return t==="compositionend"||!ih&&pg(t,e)?(t=dg(),ea=nh=Nn=null,Hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fg&&e.locale!=="ko"?null:e.data;default:return null}}var vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vw[t.type]:e==="textarea"}function gg(t,e,n,r){Gm(r),e=Ea(e,"onChange"),0<e.length&&(n=new rh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vi=null,Di=null;function _w(t){Cg(t,0)}function nl(t){var e=Gr(t);if(Um(e))return t}function ww(t,e){if(t==="change")return e}var yg=!1;if(mn){var Zl;if(mn){var eu="oninput"in document;if(!eu){var Of=document.createElement("div");Of.setAttribute("oninput","return;"),eu=typeof Of.oninput=="function"}Zl=eu}else Zl=!1;yg=Zl&&(!document.documentMode||9<document.documentMode)}function jf(){vi&&(vi.detachEvent("onpropertychange",vg),Di=vi=null)}function vg(t){if(t.propertyName==="value"&&nl(Di)){var e=[];gg(e,Di,t,Xc(t)),Xm(_w,e)}}function Ew(t,e,n){t==="focusin"?(jf(),vi=e,Di=n,vi.attachEvent("onpropertychange",vg)):t==="focusout"&&jf()}function xw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nl(Di)}function Tw(t,e){if(t==="click")return nl(e)}function Iw(t,e){if(t==="input"||t==="change")return nl(e)}function Sw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gt=typeof Object.is=="function"?Object.is:Sw;function Li(t,e){if(Gt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ku.call(e,s)||!Gt(t[s],e[s]))return!1}return!0}function Mf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ff(t,e){var n=Mf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Mf(n)}}function _g(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_g(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wg(){for(var t=window,e=pa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pa(t.document)}return e}function oh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Aw(t){var e=wg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&_g(n.ownerDocument.documentElement,n)){if(r!==null&&oh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ff(n,i);var a=Ff(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Cw=mn&&"documentMode"in document&&11>=document.documentMode,Wr=null,Gu=null,_i=null,Qu=!1;function Uf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qu||Wr==null||Wr!==pa(r)||(r=Wr,"selectionStart"in r&&oh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_i&&Li(_i,r)||(_i=r,r=Ea(Gu,"onSelect"),0<r.length&&(e=new rh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wr)))}function Mo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qr={animationend:Mo("Animation","AnimationEnd"),animationiteration:Mo("Animation","AnimationIteration"),animationstart:Mo("Animation","AnimationStart"),transitionend:Mo("Transition","TransitionEnd")},tu={},Eg={};mn&&(Eg=document.createElement("div").style,"AnimationEvent"in window||(delete qr.animationend.animation,delete qr.animationiteration.animation,delete qr.animationstart.animation),"TransitionEvent"in window||delete qr.transitionend.transition);function rl(t){if(tu[t])return tu[t];if(!qr[t])return t;var e=qr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Eg)return tu[t]=e[n];return t}var xg=rl("animationend"),Tg=rl("animationiteration"),Ig=rl("animationstart"),Sg=rl("transitionend"),Ag=new Map,zf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xn(t,e){Ag.set(t,e),Tr(e,[t])}for(var nu=0;nu<zf.length;nu++){var ru=zf[nu],kw=ru.toLowerCase(),Rw=ru[0].toUpperCase()+ru.slice(1);Xn(kw,"on"+Rw)}Xn(xg,"onAnimationEnd");Xn(Tg,"onAnimationIteration");Xn(Ig,"onAnimationStart");Xn("dblclick","onDoubleClick");Xn("focusin","onFocus");Xn("focusout","onBlur");Xn(Sg,"onTransitionEnd");ls("onMouseEnter",["mouseout","mouseover"]);ls("onMouseLeave",["mouseout","mouseover"]);ls("onPointerEnter",["pointerout","pointerover"]);ls("onPointerLeave",["pointerout","pointerover"]);Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pw=new Set("cancel close invalid load scroll toggle".split(" ").concat(hi));function Bf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,k_(r,e,void 0,t),t.currentTarget=null}function Cg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Bf(s,l,h),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Bf(s,l,h),i=u}}}if(ga)throw t=$u,ga=!1,$u=null,t}function Ce(t,e){var n=e[Zu];n===void 0&&(n=e[Zu]=new Set);var r=t+"__bubble";n.has(r)||(kg(e,t,2,!1),n.add(r))}function su(t,e,n){var r=0;e&&(r|=4),kg(n,t,r,e)}var Fo="_reactListening"+Math.random().toString(36).slice(2);function Oi(t){if(!t[Fo]){t[Fo]=!0,Lm.forEach(function(n){n!=="selectionchange"&&(Pw.has(n)||su(n,!1,t),su(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fo]||(e[Fo]=!0,su("selectionchange",!1,e))}}function kg(t,e,n,r){switch(hg(e)){case 1:var s=H_;break;case 4:s=W_;break;default:s=th}n=s.bind(null,e,n,t),s=void 0,!Bu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function iu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=lr(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Xm(function(){var h=i,f=Xc(n),g=[];e:{var v=Ag.get(t);if(v!==void 0){var A=rh,P=t;switch(t){case"keypress":if(ta(n)===0)break e;case"keydown":case"keyup":A=ow;break;case"focusin":P="focus",A=Jl;break;case"focusout":P="blur",A=Jl;break;case"beforeblur":case"afterblur":A=Jl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=Pf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=Q_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=uw;break;case xg:case Tg:case Ig:A=X_;break;case Sg:A=hw;break;case"scroll":A=q_;break;case"wheel":A=fw;break;case"copy":case"cut":case"paste":A=Z_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Vf}var N=(e&4)!==0,D=!N&&t==="scroll",I=N?v!==null?v+"Capture":null:v;N=[];for(var x=h,k;x!==null;){k=x;var b=k.stateNode;if(k.tag===5&&b!==null&&(k=b,I!==null&&(b=Pi(x,I),b!=null&&N.push(ji(x,b,k)))),D)break;x=x.return}0<N.length&&(v=new A(v,P,null,n,f),g.push({event:v,listeners:N}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",v&&n!==Uu&&(P=n.relatedTarget||n.fromElement)&&(lr(P)||P[gn]))break e;if((A||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,A?(P=n.relatedTarget||n.toElement,A=h,P=P?lr(P):null,P!==null&&(D=Ir(P),P!==D||P.tag!==5&&P.tag!==6)&&(P=null)):(A=null,P=h),A!==P)){if(N=Pf,b="onMouseLeave",I="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(N=Vf,b="onPointerLeave",I="onPointerEnter",x="pointer"),D=A==null?v:Gr(A),k=P==null?v:Gr(P),v=new N(b,x+"leave",A,n,f),v.target=D,v.relatedTarget=k,b=null,lr(f)===h&&(N=new N(I,x+"enter",P,n,f),N.target=k,N.relatedTarget=D,b=N),D=b,A&&P)t:{for(N=A,I=P,x=0,k=N;k;k=Mr(k))x++;for(k=0,b=I;b;b=Mr(b))k++;for(;0<x-k;)N=Mr(N),x--;for(;0<k-x;)I=Mr(I),k--;for(;x--;){if(N===I||I!==null&&N===I.alternate)break t;N=Mr(N),I=Mr(I)}N=null}else N=null;A!==null&&$f(g,v,A,N,!1),P!==null&&D!==null&&$f(g,D,P,N,!0)}}e:{if(v=h?Gr(h):window,A=v.nodeName&&v.nodeName.toLowerCase(),A==="select"||A==="input"&&v.type==="file")var U=ww;else if(Lf(v))if(yg)U=Iw;else{U=xw;var z=Ew}else(A=v.nodeName)&&A.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(U=Tw);if(U&&(U=U(t,h))){gg(g,U,n,f);break e}z&&z(t,v,h),t==="focusout"&&(z=v._wrapperState)&&z.controlled&&v.type==="number"&&Lu(v,"number",v.value)}switch(z=h?Gr(h):window,t){case"focusin":(Lf(z)||z.contentEditable==="true")&&(Wr=z,Gu=h,_i=null);break;case"focusout":_i=Gu=Wr=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,Uf(g,n,f);break;case"selectionchange":if(Cw)break;case"keydown":case"keyup":Uf(g,n,f)}var E;if(ih)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Hr?pg(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(fg&&n.locale!=="ko"&&(Hr||y!=="onCompositionStart"?y==="onCompositionEnd"&&Hr&&(E=dg()):(Nn=f,nh="value"in Nn?Nn.value:Nn.textContent,Hr=!0)),z=Ea(h,y),0<z.length&&(y=new Nf(y,t,null,n,f),g.push({event:y,listeners:z}),E?y.data=E:(E=mg(n),E!==null&&(y.data=E)))),(E=mw?gw(t,n):yw(t,n))&&(h=Ea(h,"onBeforeInput"),0<h.length&&(f=new Nf("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:h}),f.data=E))}Cg(g,e)})}function ji(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ea(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Pi(t,n),i!=null&&r.unshift(ji(t,i,s)),i=Pi(t,e),i!=null&&r.push(ji(t,i,s))),t=t.return}return r}function Mr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $f(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Pi(n,i),u!=null&&a.unshift(ji(n,u,l))):s||(u=Pi(n,i),u!=null&&a.push(ji(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Nw=/\r\n?/g,Vw=/\u0000|\uFFFD/g;function Hf(t){return(typeof t=="string"?t:""+t).replace(Nw,`
`).replace(Vw,"")}function Uo(t,e,n){if(e=Hf(e),Hf(t)!==e&&n)throw Error(F(425))}function xa(){}var Ku=null,Yu=null;function Xu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ju=typeof setTimeout=="function"?setTimeout:void 0,bw=typeof clearTimeout=="function"?clearTimeout:void 0,Wf=typeof Promise=="function"?Promise:void 0,Dw=typeof queueMicrotask=="function"?queueMicrotask:typeof Wf<"u"?function(t){return Wf.resolve(null).then(t).catch(Lw)}:Ju;function Lw(t){setTimeout(function(){throw t})}function ou(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),bi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);bi(e)}function jn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function qf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ks=Math.random().toString(36).slice(2),Xt="__reactFiber$"+ks,Mi="__reactProps$"+ks,gn="__reactContainer$"+ks,Zu="__reactEvents$"+ks,Ow="__reactListeners$"+ks,jw="__reactHandles$"+ks;function lr(t){var e=t[Xt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gn]||n[Xt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=qf(t);t!==null;){if(n=t[Xt])return n;t=qf(t)}return e}t=n,n=t.parentNode}return null}function so(t){return t=t[Xt]||t[gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function sl(t){return t[Mi]||null}var ec=[],Qr=-1;function Jn(t){return{current:t}}function ke(t){0>Qr||(t.current=ec[Qr],ec[Qr]=null,Qr--)}function Ie(t,e){Qr++,ec[Qr]=t.current,t.current=e}var Wn={},dt=Jn(Wn),wt=Jn(!1),mr=Wn;function us(t,e){var n=t.type.contextTypes;if(!n)return Wn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Et(t){return t=t.childContextTypes,t!=null}function Ta(){ke(wt),ke(dt)}function Gf(t,e,n){if(dt.current!==Wn)throw Error(F(168));Ie(dt,e),Ie(wt,n)}function Rg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,E_(t)||"Unknown",s));return be({},n,r)}function Ia(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wn,mr=dt.current,Ie(dt,t),Ie(wt,wt.current),!0}function Qf(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=Rg(t,e,mr),r.__reactInternalMemoizedMergedChildContext=t,ke(wt),ke(dt),Ie(dt,t)):ke(wt),Ie(wt,n)}var ln=null,il=!1,au=!1;function Pg(t){ln===null?ln=[t]:ln.push(t)}function Mw(t){il=!0,Pg(t)}function Zn(){if(!au&&ln!==null){au=!0;var t=0,e=we;try{var n=ln;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ln=null,il=!1}catch(s){throw ln!==null&&(ln=ln.slice(t+1)),tg(Jc,Zn),s}finally{we=e,au=!1}}return null}var Kr=[],Yr=0,Sa=null,Aa=0,Pt=[],Nt=0,gr=null,cn=1,hn="";function ir(t,e){Kr[Yr++]=Aa,Kr[Yr++]=Sa,Sa=t,Aa=e}function Ng(t,e,n){Pt[Nt++]=cn,Pt[Nt++]=hn,Pt[Nt++]=gr,gr=t;var r=cn;t=hn;var s=32-Wt(r)-1;r&=~(1<<s),n+=1;var i=32-Wt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,cn=1<<32-Wt(e)+s|n<<s|r,hn=i+t}else cn=1<<i|n<<s|r,hn=t}function ah(t){t.return!==null&&(ir(t,1),Ng(t,1,0))}function lh(t){for(;t===Sa;)Sa=Kr[--Yr],Kr[Yr]=null,Aa=Kr[--Yr],Kr[Yr]=null;for(;t===gr;)gr=Pt[--Nt],Pt[Nt]=null,hn=Pt[--Nt],Pt[Nt]=null,cn=Pt[--Nt],Pt[Nt]=null}var At=null,St=null,Pe=!1,$t=null;function Vg(t,e){var n=bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Kf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,At=t,St=jn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,At=t,St=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gr!==null?{id:cn,overflow:hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,At=t,St=null,!0):!1;default:return!1}}function tc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nc(t){if(Pe){var e=St;if(e){var n=e;if(!Kf(t,e)){if(tc(t))throw Error(F(418));e=jn(n.nextSibling);var r=At;e&&Kf(t,e)?Vg(r,n):(t.flags=t.flags&-4097|2,Pe=!1,At=t)}}else{if(tc(t))throw Error(F(418));t.flags=t.flags&-4097|2,Pe=!1,At=t}}}function Yf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;At=t}function zo(t){if(t!==At)return!1;if(!Pe)return Yf(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xu(t.type,t.memoizedProps)),e&&(e=St)){if(tc(t))throw bg(),Error(F(418));for(;e;)Vg(t,e),e=jn(e.nextSibling)}if(Yf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){St=jn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}St=null}}else St=At?jn(t.stateNode.nextSibling):null;return!0}function bg(){for(var t=St;t;)t=jn(t.nextSibling)}function cs(){St=At=null,Pe=!1}function uh(t){$t===null?$t=[t]:$t.push(t)}var Fw=xn.ReactCurrentBatchConfig;function si(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Bo(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xf(t){var e=t._init;return e(t._payload)}function Dg(t){function e(I,x){if(t){var k=I.deletions;k===null?(I.deletions=[x],I.flags|=16):k.push(x)}}function n(I,x){if(!t)return null;for(;x!==null;)e(I,x),x=x.sibling;return null}function r(I,x){for(I=new Map;x!==null;)x.key!==null?I.set(x.key,x):I.set(x.index,x),x=x.sibling;return I}function s(I,x){return I=zn(I,x),I.index=0,I.sibling=null,I}function i(I,x,k){return I.index=k,t?(k=I.alternate,k!==null?(k=k.index,k<x?(I.flags|=2,x):k):(I.flags|=2,x)):(I.flags|=1048576,x)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,x,k,b){return x===null||x.tag!==6?(x=pu(k,I.mode,b),x.return=I,x):(x=s(x,k),x.return=I,x)}function u(I,x,k,b){var U=k.type;return U===$r?f(I,x,k.props.children,b,k.key):x!==null&&(x.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Cn&&Xf(U)===x.type)?(b=s(x,k.props),b.ref=si(I,x,k),b.return=I,b):(b=la(k.type,k.key,k.props,null,I.mode,b),b.ref=si(I,x,k),b.return=I,b)}function h(I,x,k,b){return x===null||x.tag!==4||x.stateNode.containerInfo!==k.containerInfo||x.stateNode.implementation!==k.implementation?(x=mu(k,I.mode,b),x.return=I,x):(x=s(x,k.children||[]),x.return=I,x)}function f(I,x,k,b,U){return x===null||x.tag!==7?(x=fr(k,I.mode,b,U),x.return=I,x):(x=s(x,k),x.return=I,x)}function g(I,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return x=pu(""+x,I.mode,k),x.return=I,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case No:return k=la(x.type,x.key,x.props,null,I.mode,k),k.ref=si(I,null,x),k.return=I,k;case Br:return x=mu(x,I.mode,k),x.return=I,x;case Cn:var b=x._init;return g(I,b(x._payload),k)}if(ui(x)||Zs(x))return x=fr(x,I.mode,k,null),x.return=I,x;Bo(I,x)}return null}function v(I,x,k,b){var U=x!==null?x.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return U!==null?null:l(I,x,""+k,b);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case No:return k.key===U?u(I,x,k,b):null;case Br:return k.key===U?h(I,x,k,b):null;case Cn:return U=k._init,v(I,x,U(k._payload),b)}if(ui(k)||Zs(k))return U!==null?null:f(I,x,k,b,null);Bo(I,k)}return null}function A(I,x,k,b,U){if(typeof b=="string"&&b!==""||typeof b=="number")return I=I.get(k)||null,l(x,I,""+b,U);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case No:return I=I.get(b.key===null?k:b.key)||null,u(x,I,b,U);case Br:return I=I.get(b.key===null?k:b.key)||null,h(x,I,b,U);case Cn:var z=b._init;return A(I,x,k,z(b._payload),U)}if(ui(b)||Zs(b))return I=I.get(k)||null,f(x,I,b,U,null);Bo(x,b)}return null}function P(I,x,k,b){for(var U=null,z=null,E=x,y=x=0,w=null;E!==null&&y<k.length;y++){E.index>y?(w=E,E=null):w=E.sibling;var T=v(I,E,k[y],b);if(T===null){E===null&&(E=w);break}t&&E&&T.alternate===null&&e(I,E),x=i(T,x,y),z===null?U=T:z.sibling=T,z=T,E=w}if(y===k.length)return n(I,E),Pe&&ir(I,y),U;if(E===null){for(;y<k.length;y++)E=g(I,k[y],b),E!==null&&(x=i(E,x,y),z===null?U=E:z.sibling=E,z=E);return Pe&&ir(I,y),U}for(E=r(I,E);y<k.length;y++)w=A(E,I,y,k[y],b),w!==null&&(t&&w.alternate!==null&&E.delete(w.key===null?y:w.key),x=i(w,x,y),z===null?U=w:z.sibling=w,z=w);return t&&E.forEach(function(C){return e(I,C)}),Pe&&ir(I,y),U}function N(I,x,k,b){var U=Zs(k);if(typeof U!="function")throw Error(F(150));if(k=U.call(k),k==null)throw Error(F(151));for(var z=U=null,E=x,y=x=0,w=null,T=k.next();E!==null&&!T.done;y++,T=k.next()){E.index>y?(w=E,E=null):w=E.sibling;var C=v(I,E,T.value,b);if(C===null){E===null&&(E=w);break}t&&E&&C.alternate===null&&e(I,E),x=i(C,x,y),z===null?U=C:z.sibling=C,z=C,E=w}if(T.done)return n(I,E),Pe&&ir(I,y),U;if(E===null){for(;!T.done;y++,T=k.next())T=g(I,T.value,b),T!==null&&(x=i(T,x,y),z===null?U=T:z.sibling=T,z=T);return Pe&&ir(I,y),U}for(E=r(I,E);!T.done;y++,T=k.next())T=A(E,I,y,T.value,b),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?y:T.key),x=i(T,x,y),z===null?U=T:z.sibling=T,z=T);return t&&E.forEach(function(S){return e(I,S)}),Pe&&ir(I,y),U}function D(I,x,k,b){if(typeof k=="object"&&k!==null&&k.type===$r&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case No:e:{for(var U=k.key,z=x;z!==null;){if(z.key===U){if(U=k.type,U===$r){if(z.tag===7){n(I,z.sibling),x=s(z,k.props.children),x.return=I,I=x;break e}}else if(z.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Cn&&Xf(U)===z.type){n(I,z.sibling),x=s(z,k.props),x.ref=si(I,z,k),x.return=I,I=x;break e}n(I,z);break}else e(I,z);z=z.sibling}k.type===$r?(x=fr(k.props.children,I.mode,b,k.key),x.return=I,I=x):(b=la(k.type,k.key,k.props,null,I.mode,b),b.ref=si(I,x,k),b.return=I,I=b)}return a(I);case Br:e:{for(z=k.key;x!==null;){if(x.key===z)if(x.tag===4&&x.stateNode.containerInfo===k.containerInfo&&x.stateNode.implementation===k.implementation){n(I,x.sibling),x=s(x,k.children||[]),x.return=I,I=x;break e}else{n(I,x);break}else e(I,x);x=x.sibling}x=mu(k,I.mode,b),x.return=I,I=x}return a(I);case Cn:return z=k._init,D(I,x,z(k._payload),b)}if(ui(k))return P(I,x,k,b);if(Zs(k))return N(I,x,k,b);Bo(I,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,x!==null&&x.tag===6?(n(I,x.sibling),x=s(x,k),x.return=I,I=x):(n(I,x),x=pu(k,I.mode,b),x.return=I,I=x),a(I)):n(I,x)}return D}var hs=Dg(!0),Lg=Dg(!1),Ca=Jn(null),ka=null,Xr=null,ch=null;function hh(){ch=Xr=ka=null}function dh(t){var e=Ca.current;ke(Ca),t._currentValue=e}function rc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function is(t,e){ka=t,ch=Xr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function jt(t){var e=t._currentValue;if(ch!==t)if(t={context:t,memoizedValue:e,next:null},Xr===null){if(ka===null)throw Error(F(308));Xr=t,ka.dependencies={lanes:0,firstContext:t}}else Xr=Xr.next=t;return e}var ur=null;function fh(t){ur===null?ur=[t]:ur.push(t)}function Og(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,fh(e)):(n.next=s.next,s.next=n),e.interleaved=n,yn(t,r)}function yn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kn=!1;function ph(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function dn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,yn(t,n)}return s=r.interleaved,s===null?(e.next=e,fh(r)):(e.next=s.next,s.next=e),r.interleaved=e,yn(t,n)}function na(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zc(t,n)}}function Jf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ra(t,e,n,r){var s=t.updateQueue;kn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?i=h:a.next=h,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;a=0,f=h=u=null,l=i;do{var v=l.lane,A=l.eventTime;if((r&v)===v){f!==null&&(f=f.next={eventTime:A,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,N=l;switch(v=e,A=n,N.tag){case 1:if(P=N.payload,typeof P=="function"){g=P.call(A,g,v);break e}g=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=N.payload,v=typeof P=="function"?P.call(A,g,v):P,v==null)break e;g=be({},g,v);break e;case 2:kn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else A={eventTime:A,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=A,u=g):f=f.next=A,a|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(f===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);vr|=a,t.lanes=a,t.memoizedState=g}}function Zf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var io={},Zt=Jn(io),Fi=Jn(io),Ui=Jn(io);function cr(t){if(t===io)throw Error(F(174));return t}function mh(t,e){switch(Ie(Ui,e),Ie(Fi,t),Ie(Zt,io),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ju(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ju(e,t)}ke(Zt),Ie(Zt,e)}function ds(){ke(Zt),ke(Fi),ke(Ui)}function Mg(t){cr(Ui.current);var e=cr(Zt.current),n=ju(e,t.type);e!==n&&(Ie(Fi,t),Ie(Zt,n))}function gh(t){Fi.current===t&&(ke(Zt),ke(Fi))}var Ne=Jn(0);function Pa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lu=[];function yh(){for(var t=0;t<lu.length;t++)lu[t]._workInProgressVersionPrimary=null;lu.length=0}var ra=xn.ReactCurrentDispatcher,uu=xn.ReactCurrentBatchConfig,yr=0,Ve=null,$e=null,Qe=null,Na=!1,wi=!1,zi=0,Uw=0;function ot(){throw Error(F(321))}function vh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gt(t[n],e[n]))return!1;return!0}function _h(t,e,n,r,s,i){if(yr=i,Ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ra.current=t===null||t.memoizedState===null?Hw:Ww,t=n(r,s),wi){i=0;do{if(wi=!1,zi=0,25<=i)throw Error(F(301));i+=1,Qe=$e=null,e.updateQueue=null,ra.current=qw,t=n(r,s)}while(wi)}if(ra.current=Va,e=$e!==null&&$e.next!==null,yr=0,Qe=$e=Ve=null,Na=!1,e)throw Error(F(300));return t}function wh(){var t=zi!==0;return zi=0,t}function Yt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Ve.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Mt(){if($e===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Qe===null?Ve.memoizedState:Qe.next;if(e!==null)Qe=e,$e=t;else{if(t===null)throw Error(F(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Qe===null?Ve.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function Bi(t,e){return typeof e=="function"?e(t):e}function cu(t){var e=Mt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,h=i;do{var f=h.lane;if((yr&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=g,a=r):u=u.next=g,Ve.lanes|=f,vr|=f}h=h.next}while(h!==null&&h!==i);u===null?a=r:u.next=l,Gt(r,e.memoizedState)||(_t=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ve.lanes|=i,vr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function hu(t){var e=Mt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Gt(i,e.memoizedState)||(_t=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Fg(){}function Ug(t,e){var n=Ve,r=Mt(),s=e(),i=!Gt(r.memoizedState,s);if(i&&(r.memoizedState=s,_t=!0),r=r.queue,Eh($g.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,$i(9,Bg.bind(null,n,r,s,e),void 0,null),Ke===null)throw Error(F(349));yr&30||zg(n,e,s)}return s}function zg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Bg(t,e,n,r){e.value=n,e.getSnapshot=r,Hg(e)&&Wg(t)}function $g(t,e,n){return n(function(){Hg(e)&&Wg(t)})}function Hg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gt(t,n)}catch{return!0}}function Wg(t){var e=yn(t,1);e!==null&&qt(e,t,1,-1)}function ep(t){var e=Yt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:t},e.queue=t,t=t.dispatch=$w.bind(null,Ve,t),[e.memoizedState,t]}function $i(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qg(){return Mt().memoizedState}function sa(t,e,n,r){var s=Yt();Ve.flags|=t,s.memoizedState=$i(1|e,n,void 0,r===void 0?null:r)}function ol(t,e,n,r){var s=Mt();r=r===void 0?null:r;var i=void 0;if($e!==null){var a=$e.memoizedState;if(i=a.destroy,r!==null&&vh(r,a.deps)){s.memoizedState=$i(e,n,i,r);return}}Ve.flags|=t,s.memoizedState=$i(1|e,n,i,r)}function tp(t,e){return sa(8390656,8,t,e)}function Eh(t,e){return ol(2048,8,t,e)}function Gg(t,e){return ol(4,2,t,e)}function Qg(t,e){return ol(4,4,t,e)}function Kg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Yg(t,e,n){return n=n!=null?n.concat([t]):null,ol(4,4,Kg.bind(null,e,t),n)}function xh(){}function Xg(t,e){var n=Mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Jg(t,e){var n=Mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Zg(t,e,n){return yr&21?(Gt(n,e)||(n=sg(),Ve.lanes|=n,vr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=n)}function zw(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=uu.transition;uu.transition={};try{t(!1),e()}finally{we=n,uu.transition=r}}function ey(){return Mt().memoizedState}function Bw(t,e,n){var r=Un(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ty(t))ny(e,n);else if(n=Og(t,e,n,r),n!==null){var s=mt();qt(n,t,r,s),ry(n,e,r)}}function $w(t,e,n){var r=Un(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ty(t))ny(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Gt(l,a)){var u=e.interleaved;u===null?(s.next=s,fh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Og(t,e,s,r),n!==null&&(s=mt(),qt(n,t,r,s),ry(n,e,r))}}function ty(t){var e=t.alternate;return t===Ve||e!==null&&e===Ve}function ny(t,e){wi=Na=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ry(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zc(t,n)}}var Va={readContext:jt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},Hw={readContext:jt,useCallback:function(t,e){return Yt().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:tp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sa(4194308,4,Kg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sa(4194308,4,t,e)},useInsertionEffect:function(t,e){return sa(4,2,t,e)},useMemo:function(t,e){var n=Yt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Bw.bind(null,Ve,t),[r.memoizedState,t]},useRef:function(t){var e=Yt();return t={current:t},e.memoizedState=t},useState:ep,useDebugValue:xh,useDeferredValue:function(t){return Yt().memoizedState=t},useTransition:function(){var t=ep(!1),e=t[0];return t=zw.bind(null,t[1]),Yt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ve,s=Yt();if(Pe){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Ke===null)throw Error(F(349));yr&30||zg(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,tp($g.bind(null,r,i,t),[t]),r.flags|=2048,$i(9,Bg.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Yt(),e=Ke.identifierPrefix;if(Pe){var n=hn,r=cn;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Uw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ww={readContext:jt,useCallback:Xg,useContext:jt,useEffect:Eh,useImperativeHandle:Yg,useInsertionEffect:Gg,useLayoutEffect:Qg,useMemo:Jg,useReducer:cu,useRef:qg,useState:function(){return cu(Bi)},useDebugValue:xh,useDeferredValue:function(t){var e=Mt();return Zg(e,$e.memoizedState,t)},useTransition:function(){var t=cu(Bi)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:Fg,useSyncExternalStore:Ug,useId:ey,unstable_isNewReconciler:!1},qw={readContext:jt,useCallback:Xg,useContext:jt,useEffect:Eh,useImperativeHandle:Yg,useInsertionEffect:Gg,useLayoutEffect:Qg,useMemo:Jg,useReducer:hu,useRef:qg,useState:function(){return hu(Bi)},useDebugValue:xh,useDeferredValue:function(t){var e=Mt();return $e===null?e.memoizedState=t:Zg(e,$e.memoizedState,t)},useTransition:function(){var t=hu(Bi)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:Fg,useSyncExternalStore:Ug,useId:ey,unstable_isNewReconciler:!1};function zt(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var al={isMounted:function(t){return(t=t._reactInternals)?Ir(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mt(),s=Un(t),i=dn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Mn(t,i,s),e!==null&&(qt(e,t,s,r),na(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mt(),s=Un(t),i=dn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Mn(t,i,s),e!==null&&(qt(e,t,s,r),na(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mt(),r=Un(t),s=dn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Mn(t,s,r),e!==null&&(qt(e,t,r,n),na(e,t,r))}};function np(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Li(n,r)||!Li(s,i):!0}function sy(t,e,n){var r=!1,s=Wn,i=e.contextType;return typeof i=="object"&&i!==null?i=jt(i):(s=Et(e)?mr:dt.current,r=e.contextTypes,i=(r=r!=null)?us(t,s):Wn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=al,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function rp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&al.enqueueReplaceState(e,e.state,null)}function ic(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ph(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=jt(i):(i=Et(e)?mr:dt.current,s.context=us(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&al.enqueueReplaceState(s,s.state,null),Ra(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function fs(t,e){try{var n="",r=e;do n+=w_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function du(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function oc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Gw=typeof WeakMap=="function"?WeakMap:Map;function iy(t,e,n){n=dn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Da||(Da=!0,gc=r),oc(t,e)},n}function oy(t,e,n){n=dn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){oc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){oc(t,e),typeof r!="function"&&(Fn===null?Fn=new Set([this]):Fn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function sp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Gw;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=aE.bind(null,t,e,n),e.then(t,t))}function ip(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function op(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=dn(-1,1),e.tag=2,Mn(n,e,1))),n.lanes|=1),t)}var Qw=xn.ReactCurrentOwner,_t=!1;function pt(t,e,n,r){e.child=t===null?Lg(e,null,n,r):hs(e,t.child,n,r)}function ap(t,e,n,r,s){n=n.render;var i=e.ref;return is(e,s),r=_h(t,e,n,r,i,s),n=wh(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vn(t,e,s)):(Pe&&n&&ah(e),e.flags|=1,pt(t,e,r,s),e.child)}function lp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ph(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ay(t,e,i,r,s)):(t=la(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Li,n(a,r)&&t.ref===e.ref)return vn(t,e,s)}return e.flags|=1,t=zn(i,r),t.ref=e.ref,t.return=e,e.child=t}function ay(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Li(i,r)&&t.ref===e.ref)if(_t=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,vn(t,e,s)}return ac(t,e,n,r,s)}function ly(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Zr,It),It|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(Zr,It),It|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ie(Zr,It),It|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ie(Zr,It),It|=r;return pt(t,e,s,n),e.child}function uy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ac(t,e,n,r,s){var i=Et(n)?mr:dt.current;return i=us(e,i),is(e,s),n=_h(t,e,n,r,i,s),r=wh(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vn(t,e,s)):(Pe&&r&&ah(e),e.flags|=1,pt(t,e,n,s),e.child)}function up(t,e,n,r,s){if(Et(n)){var i=!0;Ia(e)}else i=!1;if(is(e,s),e.stateNode===null)ia(t,e),sy(e,n,r),ic(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=jt(h):(h=Et(n)?mr:dt.current,h=us(e,h));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&rp(e,a,r,h),kn=!1;var v=e.memoizedState;a.state=v,Ra(e,r,a,s),u=e.memoizedState,l!==r||v!==u||wt.current||kn?(typeof f=="function"&&(sc(e,n,f,r),u=e.memoizedState),(l=kn||np(e,n,l,r,v,u,h))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,jg(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:zt(e.type,l),a.props=h,g=e.pendingProps,v=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=jt(u):(u=Et(n)?mr:dt.current,u=us(e,u));var A=n.getDerivedStateFromProps;(f=typeof A=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==g||v!==u)&&rp(e,a,r,u),kn=!1,v=e.memoizedState,a.state=v,Ra(e,r,a,s);var P=e.memoizedState;l!==g||v!==P||wt.current||kn?(typeof A=="function"&&(sc(e,n,A,r),P=e.memoizedState),(h=kn||np(e,n,h,r,v,P,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,P,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,P,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),a.props=r,a.state=P,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return lc(t,e,n,r,i,s)}function lc(t,e,n,r,s,i){uy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Qf(e,n,!1),vn(t,e,i);r=e.stateNode,Qw.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=hs(e,t.child,null,i),e.child=hs(e,null,l,i)):pt(t,e,l,i),e.memoizedState=r.state,s&&Qf(e,n,!0),e.child}function cy(t){var e=t.stateNode;e.pendingContext?Gf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Gf(t,e.context,!1),mh(t,e.containerInfo)}function cp(t,e,n,r,s){return cs(),uh(s),e.flags|=256,pt(t,e,n,r),e.child}var uc={dehydrated:null,treeContext:null,retryLane:0};function cc(t){return{baseLanes:t,cachePool:null,transitions:null}}function hy(t,e,n){var r=e.pendingProps,s=Ne.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ie(Ne,s&1),t===null)return nc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=cl(a,r,0,null),t=fr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=cc(n),e.memoizedState=uc,t):Th(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Kw(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=zn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=zn(l,i):(i=fr(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?cc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=uc,r}return i=t.child,t=i.sibling,r=zn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Th(t,e){return e=cl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $o(t,e,n,r){return r!==null&&uh(r),hs(e,t.child,null,n),t=Th(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Kw(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=du(Error(F(422))),$o(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=cl({mode:"visible",children:r.children},s,0,null),i=fr(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&hs(e,t.child,null,a),e.child.memoizedState=cc(a),e.memoizedState=uc,i);if(!(e.mode&1))return $o(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=du(i,r,void 0),$o(t,e,a,r)}if(l=(a&t.childLanes)!==0,_t||l){if(r=Ke,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,yn(t,s),qt(r,t,s,-1))}return Rh(),r=du(Error(F(421))),$o(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=lE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,St=jn(s.nextSibling),At=e,Pe=!0,$t=null,t!==null&&(Pt[Nt++]=cn,Pt[Nt++]=hn,Pt[Nt++]=gr,cn=t.id,hn=t.overflow,gr=e),e=Th(e,r.children),e.flags|=4096,e)}function hp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rc(t.return,e,n)}function fu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function dy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(pt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hp(t,n,e);else if(t.tag===19)hp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Pa(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),fu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Pa(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}fu(e,!0,n,null,i);break;case"together":fu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ia(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=zn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=zn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Yw(t,e,n){switch(e.tag){case 3:cy(e),cs();break;case 5:Mg(e);break;case 1:Et(e.type)&&Ia(e);break;case 4:mh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ie(Ca,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?hy(t,e,n):(Ie(Ne,Ne.current&1),t=vn(t,e,n),t!==null?t.sibling:null);Ie(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return dy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,ly(t,e,n)}return vn(t,e,n)}var fy,hc,py,my;fy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hc=function(){};py=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,cr(Zt.current);var i=null;switch(n){case"input":s=bu(t,s),r=bu(t,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=Ou(t,s),r=Ou(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xa)}Mu(n,r);var a;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ki.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ki.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ce("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};my=function(t,e,n,r){n!==r&&(e.flags|=4)};function ii(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Xw(t,e,n){var r=e.pendingProps;switch(lh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return Et(e.type)&&Ta(),at(e),null;case 3:return r=e.stateNode,ds(),ke(wt),ke(dt),yh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$t!==null&&(_c($t),$t=null))),hc(t,e),at(e),null;case 5:gh(e);var s=cr(Ui.current);if(n=e.type,t!==null&&e.stateNode!=null)py(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return at(e),null}if(t=cr(Zt.current),zo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Xt]=e,r[Mi]=i,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(s=0;s<hi.length;s++)Ce(hi[s],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":wf(r,i),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",r);break;case"textarea":xf(r,i),Ce("invalid",r)}Mu(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Uo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Uo(r.textContent,l,t),s=["children",""+l]):ki.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Vo(r),Ef(r,i,!0);break;case"textarea":Vo(r),Tf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xa)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$m(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Xt]=e,t[Mi]=r,fy(t,e,!1,!1),e.stateNode=t;e:{switch(a=Fu(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),s=r;break;case"iframe":case"object":case"embed":Ce("load",t),s=r;break;case"video":case"audio":for(s=0;s<hi.length;s++)Ce(hi[s],t);s=r;break;case"source":Ce("error",t),s=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),s=r;break;case"details":Ce("toggle",t),s=r;break;case"input":wf(t,r),s=bu(t,r),Ce("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":xf(t,r),s=Ou(t,r),Ce("invalid",t);break;default:s=r}Mu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?qm(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Hm(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ri(t,u):typeof u=="number"&&Ri(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ki.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ce("scroll",t):u!=null&&Gc(t,i,u,a))}switch(n){case"input":Vo(t),Ef(t,r,!1);break;case"textarea":Vo(t),Tf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ts(t,!!r.multiple,i,!1):r.defaultValue!=null&&ts(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=xa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)my(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=cr(Ui.current),cr(Zt.current),zo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xt]=e,(i=r.nodeValue!==n)&&(t=At,t!==null))switch(t.tag){case 3:Uo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Uo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xt]=e,e.stateNode=r}return at(e),null;case 13:if(ke(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&St!==null&&e.mode&1&&!(e.flags&128))bg(),cs(),e.flags|=98560,i=!1;else if(i=zo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[Xt]=e}else cs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),i=!1}else $t!==null&&(_c($t),$t=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?We===0&&(We=3):Rh())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return ds(),hc(t,e),t===null&&Oi(e.stateNode.containerInfo),at(e),null;case 10:return dh(e.type._context),at(e),null;case 17:return Et(e.type)&&Ta(),at(e),null;case 19:if(ke(Ne),i=e.memoizedState,i===null)return at(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)ii(i,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Pa(t),a!==null){for(e.flags|=128,ii(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Ne,Ne.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ue()>ps&&(e.flags|=128,r=!0,ii(i,!1),e.lanes=4194304)}else{if(!r)if(t=Pa(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ii(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Pe)return at(e),null}else 2*Ue()-i.renderingStartTime>ps&&n!==1073741824&&(e.flags|=128,r=!0,ii(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ue(),e.sibling=null,n=Ne.current,Ie(Ne,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return kh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?It&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function Jw(t,e){switch(lh(e),e.tag){case 1:return Et(e.type)&&Ta(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ds(),ke(wt),ke(dt),yh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return gh(e),null;case 13:if(ke(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));cs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Ne),null;case 4:return ds(),null;case 10:return dh(e.type._context),null;case 22:case 23:return kh(),null;case 24:return null;default:return null}}var Ho=!1,ct=!1,Zw=typeof WeakSet=="function"?WeakSet:Set,H=null;function Jr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function dc(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var dp=!1;function eE(t,e){if(Ku=_a,t=wg(),oh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,f=0,g=t,v=null;t:for(;;){for(var A;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==i||r!==0&&g.nodeType!==3||(u=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(A=g.firstChild)!==null;)v=g,g=A;for(;;){if(g===t)break t;if(v===n&&++h===s&&(l=a),v===i&&++f===r&&(u=a),(A=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=A}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yu={focusedElem:t,selectionRange:n},_a=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var N=P.memoizedProps,D=P.memoizedState,I=e.stateNode,x=I.getSnapshotBeforeUpdate(e.elementType===e.type?N:zt(e.type,N),D);I.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(b){Oe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return P=dp,dp=!1,P}function Ei(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&dc(e,n,i)}s=s.next}while(s!==r)}}function ll(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function gy(t){var e=t.alternate;e!==null&&(t.alternate=null,gy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xt],delete e[Mi],delete e[Zu],delete e[Ow],delete e[jw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yy(t){return t.tag===5||t.tag===3||t.tag===4}function fp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xa));else if(r!==4&&(t=t.child,t!==null))for(pc(t,e,n),t=t.sibling;t!==null;)pc(t,e,n),t=t.sibling}function mc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mc(t,e,n),t=t.sibling;t!==null;)mc(t,e,n),t=t.sibling}var Xe=null,Bt=!1;function An(t,e,n){for(n=n.child;n!==null;)vy(t,e,n),n=n.sibling}function vy(t,e,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(el,n)}catch{}switch(n.tag){case 5:ct||Jr(n,e);case 6:var r=Xe,s=Bt;Xe=null,An(t,e,n),Xe=r,Bt=s,Xe!==null&&(Bt?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(Bt?(t=Xe,n=n.stateNode,t.nodeType===8?ou(t.parentNode,n):t.nodeType===1&&ou(t,n),bi(t)):ou(Xe,n.stateNode));break;case 4:r=Xe,s=Bt,Xe=n.stateNode.containerInfo,Bt=!0,An(t,e,n),Xe=r,Bt=s;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&dc(n,e,a),s=s.next}while(s!==r)}An(t,e,n);break;case 1:if(!ct&&(Jr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Oe(n,e,l)}An(t,e,n);break;case 21:An(t,e,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,An(t,e,n),ct=r):An(t,e,n);break;default:An(t,e,n)}}function pp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Zw),e.forEach(function(r){var s=uE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ut(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Xe=l.stateNode,Bt=!1;break e;case 3:Xe=l.stateNode.containerInfo,Bt=!0;break e;case 4:Xe=l.stateNode.containerInfo,Bt=!0;break e}l=l.return}if(Xe===null)throw Error(F(160));vy(i,a,s),Xe=null,Bt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Oe(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_y(e,t),e=e.sibling}function _y(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ut(e,t),Kt(t),r&4){try{Ei(3,t,t.return),ll(3,t)}catch(N){Oe(t,t.return,N)}try{Ei(5,t,t.return)}catch(N){Oe(t,t.return,N)}}break;case 1:Ut(e,t),Kt(t),r&512&&n!==null&&Jr(n,n.return);break;case 5:if(Ut(e,t),Kt(t),r&512&&n!==null&&Jr(n,n.return),t.flags&32){var s=t.stateNode;try{Ri(s,"")}catch(N){Oe(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&zm(s,i),Fu(l,a);var h=Fu(l,i);for(a=0;a<u.length;a+=2){var f=u[a],g=u[a+1];f==="style"?qm(s,g):f==="dangerouslySetInnerHTML"?Hm(s,g):f==="children"?Ri(s,g):Gc(s,f,g,h)}switch(l){case"input":Du(s,i);break;case"textarea":Bm(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var A=i.value;A!=null?ts(s,!!i.multiple,A,!1):v!==!!i.multiple&&(i.defaultValue!=null?ts(s,!!i.multiple,i.defaultValue,!0):ts(s,!!i.multiple,i.multiple?[]:"",!1))}s[Mi]=i}catch(N){Oe(t,t.return,N)}}break;case 6:if(Ut(e,t),Kt(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Oe(t,t.return,N)}}break;case 3:if(Ut(e,t),Kt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bi(e.containerInfo)}catch(N){Oe(t,t.return,N)}break;case 4:Ut(e,t),Kt(t);break;case 13:Ut(e,t),Kt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ah=Ue())),r&4&&pp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ct=(h=ct)||f,Ut(e,t),ct=h):Ut(e,t),Kt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(H=t,f=t.child;f!==null;){for(g=H=f;H!==null;){switch(v=H,A=v.child,v.tag){case 0:case 11:case 14:case 15:Ei(4,v,v.return);break;case 1:Jr(v,v.return);var P=v.stateNode;if(typeof P.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(N){Oe(r,n,N)}}break;case 5:Jr(v,v.return);break;case 22:if(v.memoizedState!==null){gp(g);continue}}A!==null?(A.return=v,H=A):gp(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{s=g.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,u=g.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Wm("display",a))}catch(N){Oe(t,t.return,N)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(N){Oe(t,t.return,N)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Ut(e,t),Kt(t),r&4&&pp(t);break;case 21:break;default:Ut(e,t),Kt(t)}}function Kt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yy(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ri(s,""),r.flags&=-33);var i=fp(t);mc(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=fp(t);pc(t,l,a);break;default:throw Error(F(161))}}catch(u){Oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tE(t,e,n){H=t,wy(t)}function wy(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ho;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ct;l=Ho;var h=ct;if(Ho=a,(ct=u)&&!h)for(H=s;H!==null;)a=H,u=a.child,a.tag===22&&a.memoizedState!==null?yp(s):u!==null?(u.return=a,H=u):yp(s);for(;i!==null;)H=i,wy(i),i=i.sibling;H=s,Ho=l,ct=h}mp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):mp(t)}}function mp(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ct||ll(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ct)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:zt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Zf(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zf(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&bi(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}ct||e.flags&512&&fc(e)}catch(v){Oe(e,e.return,v)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function gp(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function yp(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ll(4,e)}catch(u){Oe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Oe(e,s,u)}}var i=e.return;try{fc(e)}catch(u){Oe(e,i,u)}break;case 5:var a=e.return;try{fc(e)}catch(u){Oe(e,a,u)}}}catch(u){Oe(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var nE=Math.ceil,ba=xn.ReactCurrentDispatcher,Ih=xn.ReactCurrentOwner,Dt=xn.ReactCurrentBatchConfig,pe=0,Ke=null,Be=null,et=0,It=0,Zr=Jn(0),We=0,Hi=null,vr=0,ul=0,Sh=0,xi=null,vt=null,Ah=0,ps=1/0,an=null,Da=!1,gc=null,Fn=null,Wo=!1,Vn=null,La=0,Ti=0,yc=null,oa=-1,aa=0;function mt(){return pe&6?Ue():oa!==-1?oa:oa=Ue()}function Un(t){return t.mode&1?pe&2&&et!==0?et&-et:Fw.transition!==null?(aa===0&&(aa=sg()),aa):(t=we,t!==0||(t=window.event,t=t===void 0?16:hg(t.type)),t):1}function qt(t,e,n,r){if(50<Ti)throw Ti=0,yc=null,Error(F(185));no(t,n,r),(!(pe&2)||t!==Ke)&&(t===Ke&&(!(pe&2)&&(ul|=n),We===4&&Pn(t,et)),xt(t,r),n===1&&pe===0&&!(e.mode&1)&&(ps=Ue()+500,il&&Zn()))}function xt(t,e){var n=t.callbackNode;F_(t,e);var r=va(t,t===Ke?et:0);if(r===0)n!==null&&Af(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Af(n),e===1)t.tag===0?Mw(vp.bind(null,t)):Pg(vp.bind(null,t)),Dw(function(){!(pe&6)&&Zn()}),n=null;else{switch(ig(r)){case 1:n=Jc;break;case 4:n=ng;break;case 16:n=ya;break;case 536870912:n=rg;break;default:n=ya}n=ky(n,Ey.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ey(t,e){if(oa=-1,aa=0,pe&6)throw Error(F(327));var n=t.callbackNode;if(os()&&t.callbackNode!==n)return null;var r=va(t,t===Ke?et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Oa(t,r);else{e=r;var s=pe;pe|=2;var i=Ty();(Ke!==t||et!==e)&&(an=null,ps=Ue()+500,dr(t,e));do try{iE();break}catch(l){xy(t,l)}while(!0);hh(),ba.current=i,pe=s,Be!==null?e=0:(Ke=null,et=0,e=We)}if(e!==0){if(e===2&&(s=Hu(t),s!==0&&(r=s,e=vc(t,s))),e===1)throw n=Hi,dr(t,0),Pn(t,r),xt(t,Ue()),n;if(e===6)Pn(t,r);else{if(s=t.current.alternate,!(r&30)&&!rE(s)&&(e=Oa(t,r),e===2&&(i=Hu(t),i!==0&&(r=i,e=vc(t,i))),e===1))throw n=Hi,dr(t,0),Pn(t,r),xt(t,Ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:or(t,vt,an);break;case 3:if(Pn(t,r),(r&130023424)===r&&(e=Ah+500-Ue(),10<e)){if(va(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){mt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ju(or.bind(null,t,vt,an),e);break}or(t,vt,an);break;case 4:if(Pn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Wt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nE(r/1960))-r,10<r){t.timeoutHandle=Ju(or.bind(null,t,vt,an),r);break}or(t,vt,an);break;case 5:or(t,vt,an);break;default:throw Error(F(329))}}}return xt(t,Ue()),t.callbackNode===n?Ey.bind(null,t):null}function vc(t,e){var n=xi;return t.current.memoizedState.isDehydrated&&(dr(t,e).flags|=256),t=Oa(t,e),t!==2&&(e=vt,vt=n,e!==null&&_c(e)),t}function _c(t){vt===null?vt=t:vt.push.apply(vt,t)}function rE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Gt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pn(t,e){for(e&=~Sh,e&=~ul,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wt(e),r=1<<n;t[n]=-1,e&=~r}}function vp(t){if(pe&6)throw Error(F(327));os();var e=va(t,0);if(!(e&1))return xt(t,Ue()),null;var n=Oa(t,e);if(t.tag!==0&&n===2){var r=Hu(t);r!==0&&(e=r,n=vc(t,r))}if(n===1)throw n=Hi,dr(t,0),Pn(t,e),xt(t,Ue()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,or(t,vt,an),xt(t,Ue()),null}function Ch(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(ps=Ue()+500,il&&Zn())}}function _r(t){Vn!==null&&Vn.tag===0&&!(pe&6)&&os();var e=pe;pe|=1;var n=Dt.transition,r=we;try{if(Dt.transition=null,we=1,t)return t()}finally{we=r,Dt.transition=n,pe=e,!(pe&6)&&Zn()}}function kh(){It=Zr.current,ke(Zr)}function dr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bw(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(lh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ta();break;case 3:ds(),ke(wt),ke(dt),yh();break;case 5:gh(r);break;case 4:ds();break;case 13:ke(Ne);break;case 19:ke(Ne);break;case 10:dh(r.type._context);break;case 22:case 23:kh()}n=n.return}if(Ke=t,Be=t=zn(t.current,null),et=It=e,We=0,Hi=null,Sh=ul=vr=0,vt=xi=null,ur!==null){for(e=0;e<ur.length;e++)if(n=ur[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}ur=null}return t}function xy(t,e){do{var n=Be;try{if(hh(),ra.current=Va,Na){for(var r=Ve.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Na=!1}if(yr=0,Qe=$e=Ve=null,wi=!1,zi=0,Ih.current=null,n===null||n.return===null){We=1,Hi=e,Be=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=et,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var A=ip(a);if(A!==null){A.flags&=-257,op(A,a,l,i,e),A.mode&1&&sp(i,h,e),e=A,u=h;var P=e.updateQueue;if(P===null){var N=new Set;N.add(u),e.updateQueue=N}else P.add(u);break e}else{if(!(e&1)){sp(i,h,e),Rh();break e}u=Error(F(426))}}else if(Pe&&l.mode&1){var D=ip(a);if(D!==null){!(D.flags&65536)&&(D.flags|=256),op(D,a,l,i,e),uh(fs(u,l));break e}}i=u=fs(u,l),We!==4&&(We=2),xi===null?xi=[i]:xi.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=iy(i,u,e);Jf(i,I);break e;case 1:l=u;var x=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Fn===null||!Fn.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=oy(i,l,e);Jf(i,b);break e}}i=i.return}while(i!==null)}Sy(n)}catch(U){e=U,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function Ty(){var t=ba.current;return ba.current=Va,t===null?Va:t}function Rh(){(We===0||We===3||We===2)&&(We=4),Ke===null||!(vr&268435455)&&!(ul&268435455)||Pn(Ke,et)}function Oa(t,e){var n=pe;pe|=2;var r=Ty();(Ke!==t||et!==e)&&(an=null,dr(t,e));do try{sE();break}catch(s){xy(t,s)}while(!0);if(hh(),pe=n,ba.current=r,Be!==null)throw Error(F(261));return Ke=null,et=0,We}function sE(){for(;Be!==null;)Iy(Be)}function iE(){for(;Be!==null&&!P_();)Iy(Be)}function Iy(t){var e=Cy(t.alternate,t,It);t.memoizedProps=t.pendingProps,e===null?Sy(t):Be=e,Ih.current=null}function Sy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Jw(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,Be=null;return}}else if(n=Xw(n,e,It),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);We===0&&(We=5)}function or(t,e,n){var r=we,s=Dt.transition;try{Dt.transition=null,we=1,oE(t,e,n,r)}finally{Dt.transition=s,we=r}return null}function oE(t,e,n,r){do os();while(Vn!==null);if(pe&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(U_(t,i),t===Ke&&(Be=Ke=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wo||(Wo=!0,ky(ya,function(){return os(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Dt.transition,Dt.transition=null;var a=we;we=1;var l=pe;pe|=4,Ih.current=null,eE(t,n),_y(n,t),Aw(Yu),_a=!!Ku,Yu=Ku=null,t.current=n,tE(n),N_(),pe=l,we=a,Dt.transition=i}else t.current=n;if(Wo&&(Wo=!1,Vn=t,La=s),i=t.pendingLanes,i===0&&(Fn=null),D_(n.stateNode),xt(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Da)throw Da=!1,t=gc,gc=null,t;return La&1&&t.tag!==0&&os(),i=t.pendingLanes,i&1?t===yc?Ti++:(Ti=0,yc=t):Ti=0,Zn(),null}function os(){if(Vn!==null){var t=ig(La),e=Dt.transition,n=we;try{if(Dt.transition=null,we=16>t?16:t,Vn===null)var r=!1;else{if(t=Vn,Vn=null,La=0,pe&6)throw Error(F(331));var s=pe;for(pe|=4,H=t.current;H!==null;){var i=H,a=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(H=h;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:Ei(8,f,i)}var g=f.child;if(g!==null)g.return=f,H=g;else for(;H!==null;){f=H;var v=f.sibling,A=f.return;if(gy(f),f===h){H=null;break}if(v!==null){v.return=A,H=v;break}H=A}}}var P=i.alternate;if(P!==null){var N=P.child;if(N!==null){P.child=null;do{var D=N.sibling;N.sibling=null,N=D}while(N!==null)}}H=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,H=a;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ei(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,H=I;break e}H=i.return}}var x=t.current;for(H=x;H!==null;){a=H;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,H=k;else e:for(a=x;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(U){Oe(l,l.return,U)}if(l===a){H=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,H=b;break e}H=l.return}}if(pe=s,Zn(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(el,t)}catch{}r=!0}return r}finally{we=n,Dt.transition=e}}return!1}function _p(t,e,n){e=fs(n,e),e=iy(t,e,1),t=Mn(t,e,1),e=mt(),t!==null&&(no(t,1,e),xt(t,e))}function Oe(t,e,n){if(t.tag===3)_p(t,t,n);else for(;e!==null;){if(e.tag===3){_p(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fn===null||!Fn.has(r))){t=fs(n,t),t=oy(e,t,1),e=Mn(e,t,1),t=mt(),e!==null&&(no(e,1,t),xt(e,t));break}}e=e.return}}function aE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mt(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(et&n)===n&&(We===4||We===3&&(et&130023424)===et&&500>Ue()-Ah?dr(t,0):Sh|=n),xt(t,e)}function Ay(t,e){e===0&&(t.mode&1?(e=Lo,Lo<<=1,!(Lo&130023424)&&(Lo=4194304)):e=1);var n=mt();t=yn(t,e),t!==null&&(no(t,e,n),xt(t,n))}function lE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ay(t,n)}function uE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),Ay(t,n)}var Cy;Cy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)_t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _t=!1,Yw(t,e,n);_t=!!(t.flags&131072)}else _t=!1,Pe&&e.flags&1048576&&Ng(e,Aa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ia(t,e),t=e.pendingProps;var s=us(e,dt.current);is(e,n),s=_h(null,e,r,t,s,n);var i=wh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Et(r)?(i=!0,Ia(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ph(e),s.updater=al,e.stateNode=s,s._reactInternals=e,ic(e,r,t,n),e=lc(null,e,r,!0,i,n)):(e.tag=0,Pe&&i&&ah(e),pt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ia(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=hE(r),t=zt(r,t),s){case 0:e=ac(null,e,r,t,n);break e;case 1:e=up(null,e,r,t,n);break e;case 11:e=ap(null,e,r,t,n);break e;case 14:e=lp(null,e,r,zt(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),ac(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),up(t,e,r,s,n);case 3:e:{if(cy(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,jg(t,e),Ra(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=fs(Error(F(423)),e),e=cp(t,e,r,n,s);break e}else if(r!==s){s=fs(Error(F(424)),e),e=cp(t,e,r,n,s);break e}else for(St=jn(e.stateNode.containerInfo.firstChild),At=e,Pe=!0,$t=null,n=Lg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cs(),r===s){e=vn(t,e,n);break e}pt(t,e,r,n)}e=e.child}return e;case 5:return Mg(e),t===null&&nc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Xu(r,s)?a=null:i!==null&&Xu(r,i)&&(e.flags|=32),uy(t,e),pt(t,e,a,n),e.child;case 6:return t===null&&nc(e),null;case 13:return hy(t,e,n);case 4:return mh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hs(e,null,r,n):pt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),ap(t,e,r,s,n);case 7:return pt(t,e,e.pendingProps,n),e.child;case 8:return pt(t,e,e.pendingProps.children,n),e.child;case 12:return pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ie(Ca,r._currentValue),r._currentValue=a,i!==null)if(Gt(i.value,a)){if(i.children===s.children&&!wt.current){e=vn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=dn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),rc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(F(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),rc(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}pt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,is(e,n),s=jt(s),r=r(s),e.flags|=1,pt(t,e,r,n),e.child;case 14:return r=e.type,s=zt(r,e.pendingProps),s=zt(r.type,s),lp(t,e,r,s,n);case 15:return ay(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zt(r,s),ia(t,e),e.tag=1,Et(r)?(t=!0,Ia(e)):t=!1,is(e,n),sy(e,r,s),ic(e,r,s,n),lc(null,e,r,!0,t,n);case 19:return dy(t,e,n);case 22:return ly(t,e,n)}throw Error(F(156,e.tag))};function ky(t,e){return tg(t,e)}function cE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(t,e,n,r){return new cE(t,e,n,r)}function Ph(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hE(t){if(typeof t=="function")return Ph(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kc)return 11;if(t===Yc)return 14}return 2}function zn(t,e){var n=t.alternate;return n===null?(n=bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function la(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Ph(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case $r:return fr(n.children,s,i,e);case Qc:a=8,s|=8;break;case Ru:return t=bt(12,n,e,s|2),t.elementType=Ru,t.lanes=i,t;case Pu:return t=bt(13,n,e,s),t.elementType=Pu,t.lanes=i,t;case Nu:return t=bt(19,n,e,s),t.elementType=Nu,t.lanes=i,t;case Mm:return cl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Om:a=10;break e;case jm:a=9;break e;case Kc:a=11;break e;case Yc:a=14;break e;case Cn:a=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=bt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function fr(t,e,n,r){return t=bt(7,t,r,e),t.lanes=n,t}function cl(t,e,n,r){return t=bt(22,t,r,e),t.elementType=Mm,t.lanes=n,t.stateNode={isHidden:!1},t}function pu(t,e,n){return t=bt(6,t,null,e),t.lanes=n,t}function mu(t,e,n){return e=bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kl(0),this.expirationTimes=Kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Nh(t,e,n,r,s,i,a,l,u){return t=new dE(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=bt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ph(i),t}function fE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Br,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ry(t){if(!t)return Wn;t=t._reactInternals;e:{if(Ir(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Et(n))return Rg(t,n,e)}return e}function Py(t,e,n,r,s,i,a,l,u){return t=Nh(n,r,!0,t,s,i,a,l,u),t.context=Ry(null),n=t.current,r=mt(),s=Un(n),i=dn(r,s),i.callback=e??null,Mn(n,i,s),t.current.lanes=s,no(t,s,r),xt(t,r),t}function hl(t,e,n,r){var s=e.current,i=mt(),a=Un(s);return n=Ry(n),e.context===null?e.context=n:e.pendingContext=n,e=dn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mn(s,e,a),t!==null&&(qt(t,s,a,i),na(t,s,a)),a}function ja(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vh(t,e){wp(t,e),(t=t.alternate)&&wp(t,e)}function pE(){return null}var Ny=typeof reportError=="function"?reportError:function(t){console.error(t)};function bh(t){this._internalRoot=t}dl.prototype.render=bh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));hl(t,e,null,null)};dl.prototype.unmount=bh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_r(function(){hl(null,t,null,null)}),e[gn]=null}};function dl(t){this._internalRoot=t}dl.prototype.unstable_scheduleHydration=function(t){if(t){var e=lg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rn.length&&e!==0&&e<Rn[n].priority;n++);Rn.splice(n,0,t),n===0&&cg(t)}};function Dh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ep(){}function mE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=ja(a);i.call(h)}}var a=Py(e,r,t,0,null,!1,!1,"",Ep);return t._reactRootContainer=a,t[gn]=a.current,Oi(t.nodeType===8?t.parentNode:t),_r(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=ja(u);l.call(h)}}var u=Nh(t,0,!1,null,null,!1,!1,"",Ep);return t._reactRootContainer=u,t[gn]=u.current,Oi(t.nodeType===8?t.parentNode:t),_r(function(){hl(e,u,n,r)}),u}function pl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=ja(a);l.call(u)}}hl(e,a,t,s)}else a=mE(n,e,t,s,r);return ja(a)}og=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ci(e.pendingLanes);n!==0&&(Zc(e,n|1),xt(e,Ue()),!(pe&6)&&(ps=Ue()+500,Zn()))}break;case 13:_r(function(){var r=yn(t,1);if(r!==null){var s=mt();qt(r,t,1,s)}}),Vh(t,1)}};eh=function(t){if(t.tag===13){var e=yn(t,134217728);if(e!==null){var n=mt();qt(e,t,134217728,n)}Vh(t,134217728)}};ag=function(t){if(t.tag===13){var e=Un(t),n=yn(t,e);if(n!==null){var r=mt();qt(n,t,e,r)}Vh(t,e)}};lg=function(){return we};ug=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};zu=function(t,e,n){switch(e){case"input":if(Du(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=sl(r);if(!s)throw Error(F(90));Um(r),Du(r,s)}}}break;case"textarea":Bm(t,n);break;case"select":e=n.value,e!=null&&ts(t,!!n.multiple,e,!1)}};Km=Ch;Ym=_r;var gE={usingClientEntryPoint:!1,Events:[so,Gr,sl,Gm,Qm,Ch]},oi={findFiberByHostInstance:lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yE={bundleType:oi.bundleType,version:oi.version,rendererPackageName:oi.rendererPackageName,rendererConfig:oi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zm(t),t===null?null:t.stateNode},findFiberByHostInstance:oi.findFiberByHostInstance||pE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qo.isDisabled&&qo.supportsFiber)try{el=qo.inject(yE),Jt=qo}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gE;kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dh(e))throw Error(F(200));return fE(t,e,null,n)};kt.createRoot=function(t,e){if(!Dh(t))throw Error(F(299));var n=!1,r="",s=Ny;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Nh(t,1,!1,null,null,n,!1,r,s),t[gn]=e.current,Oi(t.nodeType===8?t.parentNode:t),new bh(e)};kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=Zm(e),t=t===null?null:t.stateNode,t};kt.flushSync=function(t){return _r(t)};kt.hydrate=function(t,e,n){if(!fl(e))throw Error(F(200));return pl(null,t,e,!0,n)};kt.hydrateRoot=function(t,e,n){if(!Dh(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Ny;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Py(e,null,t,1,n??null,s,!1,i,a),t[gn]=e.current,Oi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new dl(e)};kt.render=function(t,e,n){if(!fl(e))throw Error(F(200));return pl(null,t,e,!1,n)};kt.unmountComponentAtNode=function(t){if(!fl(t))throw Error(F(40));return t._reactRootContainer?(_r(function(){pl(null,null,t,!1,function(){t._reactRootContainer=null,t[gn]=null})}),!0):!1};kt.unstable_batchedUpdates=Ch;kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fl(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return pl(t,e,n,!1,r)};kt.version="18.3.1-next-f1338f8080-20240426";function Vy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vy)}catch(t){console.error(t)}}Vy(),Vm.exports=kt;var vE=Vm.exports,xp=vE;Cu.createRoot=xp.createRoot,Cu.hydrateRoot=xp.hydrateRoot;const ye=()=>Math.random().toString(36).substring(2,9),oe="folder_default",le="group_default",wc="trip_group_default",gu=[{name:"Amber",class:"bg-amber-50 text-amber-700 border-amber-200"},{name:"Blue",class:"bg-blue-50 text-blue-700 border-blue-200"},{name:"Purple",class:"bg-purple-50 text-purple-700 border-purple-200"},{name:"Emerald",class:"bg-emerald-50 text-emerald-700 border-emerald-200"},{name:"Slate",class:"bg-slate-50 text-slate-700 border-slate-200"},{name:"Red",class:"bg-red-50 text-red-700 border-red-200"},{name:"Orange",class:"bg-orange-50 text-orange-700 border-orange-200"},{name:"Teal",class:"bg-teal-50 text-teal-700 border-teal-200"},{name:"Pink",class:"bg-pink-50 text-pink-700 border-pink-200"},{name:"Indigo",class:"bg-indigo-50 text-indigo-700 border-indigo-200"}],yu=[{id:"cat_tools",name:"/",color:"bg-amber-50 text-amber-700 border-amber-200"},{id:"cat_hardware",name:"/PCBA",color:"bg-blue-50 text-blue-700 border-blue-200"},{id:"cat_cables",name:"/",color:"bg-purple-50 text-purple-700 border-purple-200"},{id:"cat_software",name:"/",color:"bg-emerald-50 text-emerald-700 border-emerald-200"},{id:"cat_docs",name:"/",color:"bg-slate-50 text-slate-700 border-slate-200"}],_E=[{id:oe,name:" (Business)",isSystem:!0},{id:"folder_travel",name:" (Travel)",isSystem:!1}],wE=[{id:le,folderId:oe,name:"",isSystem:!0},{id:"group_travel_default",folderId:"folder_travel",name:"",isSystem:!0}],EE=[{id:ye(),folderId:oe,groupId:le,category:"cat_tools",name:"ST-Link (U2-04)",defaultVersion:""},{id:ye(),folderId:oe,groupId:le,category:"cat_tools",name:"U-4P-10",defaultVersion:""},{id:ye(),folderId:oe,groupId:le,category:"cat_tools",name:"3.3v PWR-5",defaultVersion:""},{id:ye(),folderId:oe,groupId:le,category:"cat_tools",name:"U-TTL-4 (WIFI)",defaultVersion:""},{id:ye(),folderId:oe,groupId:le,category:"cat_tools",name:"",defaultVersion:""},{id:ye(),folderId:oe,groupId:le,category:"cat_tools",name:"-2",defaultVersion:""},{id:ye(),folderId:oe,groupId:le,category:"cat_tools",name:"USB-3p -1",defaultVersion:""},{id:ye(),folderId:oe,groupId:le,category:"cat_tools",name:"USB-3p -2",defaultVersion:""},{id:ye(),folderId:oe,groupId:le,category:"cat_tools",name:"",defaultVersion:""},{id:ye(),folderId:oe,groupId:le,category:"cat_tools",name:"ROS3 (UR8UR10)",defaultVersion:""},{id:ye(),folderId:oe,groupId:le,category:"cat_hardware",name:"OSG PCBA ++",defaultVersion:"V1.6"},{id:ye(),folderId:oe,groupId:le,category:"cat_hardware",name:"ROS PVBA +Ozon",defaultVersion:"V1.73"},{id:ye(),folderId:oe,groupId:le,category:"cat_hardware",name:"ROSV",defaultVersion:"1.7"},{id:ye(),folderId:oe,groupId:le,category:"cat_hardware",name:"Ozone",defaultVersion:"122"},{id:ye(),folderId:oe,groupId:le,category:"cat_hardware",name:"ROS",defaultVersion:"9"},{id:ye(),folderId:oe,groupId:le,category:"cat_hardware",name:"Alpha Sensor",defaultVersion:""},{id:ye(),folderId:oe,groupId:le,category:"cat_hardware",name:"PCB (/)",defaultVersion:""},{id:ye(),folderId:oe,groupId:le,category:"cat_cables",name:" (1316)",defaultVersion:""},{id:ye(),folderId:oe,groupId:le,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C1"},{id:ye(),folderId:oe,groupId:le,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C2"},{id:ye(),folderId:oe,groupId:le,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C1"},{id:ye(),folderId:oe,groupId:le,category:"cat_cables",name:" USB A to C ()",defaultVersion:"C1"},{id:ye(),folderId:oe,groupId:le,category:"cat_cables",name:"USB PORT Hub",defaultVersion:"*1"},{id:ye(),folderId:oe,groupId:le,category:"cat_cables",name:"",defaultVersion:""},{id:ye(),folderId:oe,groupId:le,category:"cat_cables",name:"",defaultVersion:"8"},{id:ye(),folderId:oe,groupId:le,category:"cat_cables",name:" (CL+S1+)",defaultVersion:"2"},{id:ye(),folderId:oe,groupId:le,category:"cat_software",name:"S1_DFU",defaultVersion:"0624"},{id:ye(),folderId:oe,groupId:le,category:"cat_software",name:"S1_AP",defaultVersion:"0804"},{id:ye(),folderId:oe,groupId:le,category:"cat_software",name:"ROS_DFU",defaultVersion:"0624"},{id:ye(),folderId:oe,groupId:le,category:"cat_software",name:"ROS_AP",defaultVersion:"0730"},{id:ye(),folderId:oe,groupId:le,category:"cat_software",name:"OSG_DFU",defaultVersion:"0624"},{id:ye(),folderId:oe,groupId:le,category:"cat_software",name:"OSG_AP",defaultVersion:"0723"}];/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),xe=(t,e)=>{const n=Q.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:u,...h},f)=>Q.createElement("svg",{ref:f,...xE,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${TE(t)}`,l].join(" "),...h},[...e.map(([g,v])=>Q.createElement(g,v)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=xe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=xe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=xe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=xe("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=xe("DownloadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=xe("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=xe("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=xe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=xe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=xe("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=xe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=xe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=xe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=xe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=xe("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=xe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=xe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=xe("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=xe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$E=({items:t,setItems:e,folders:n,setFolders:r,groups:s,setGroups:i,categories:a,setCategories:l})=>{var js,Pr,Ms,po,Nr;const[u,h]=Q.useState(((js=n[0])==null?void 0:js.id)||oe),[f,g]=Q.useState("ALL"),[v,A]=Q.useState(""),[P,N]=Q.useState("ALL"),[D,I]=Q.useState(!1),[x,k]=Q.useState(""),[b,U]=Q.useState(((Pr=a[0])==null?void 0:Pr.id)||""),[z,E]=Q.useState(""),[y,w]=Q.useState(!1),[T,C]=Q.useState(""),[S,_]=Q.useState(!1),[se,_e]=Q.useState(""),[Se,Me]=Q.useState(!1),[$,K]=Q.useState(!1),[q,Y]=Q.useState(null),[G,fe]=Q.useState(""),[j,ee]=Q.useState(gu[0].class);Q.useEffect(()=>{g("ALL")},[u]),Q.useEffect(()=>{!b&&a.length>0&&U(a[0].id)},[a,b]);const me=((Ms=n.find(L=>L.id===u))==null?void 0:Ms.name)||"",Re=s.filter(L=>L.folderId===u),Qt=((po=Re.find(L=>L.isSystem))==null?void 0:po.id)||(Re.length>0?Re[0].id:le),Al=L=>{window.confirm("")&&e(ie=>ie.filter(re=>re.id!==L))},kr=()=>{if(!x.trim())return;const L={id:Math.random().toString(36).substring(2,9),folderId:u,groupId:f==="ALL"?Qt:f,name:x,category:b,defaultVersion:z};e(ie=>[...ie,L]),k(""),E(""),I(!1)},er=()=>{if(!T.trim())return;const L=Math.random().toString(36).substring(2,9),ie={id:L,name:T,isSystem:!1};r(ce=>[...ce,ie]);const re={id:Math.random().toString(36).substring(2,9),folderId:L,name:"",isSystem:!0};i(ce=>[...ce,re]),C(""),w(!1),h(ie.id)},bs=(L,ie)=>{L.stopPropagation(),window.confirm("")&&(e(re=>re.map(ce=>ce.folderId===ie?{...ce,folderId:oe,groupId:le}:ce)),i(re=>re.filter(ce=>ce.folderId!==ie)),r(re=>re.filter(ce=>ce.id!==ie)),u===ie&&h(oe))},Rr=()=>{if(!se.trim())return;const L={id:Math.random().toString(36).substring(2,9),folderId:u,name:se,isSystem:!1};i(ie=>[...ie,L]),_e(""),_(!1),g(L.id)},Ds=(L,ie)=>{L.stopPropagation(),window.confirm("")&&(e(re=>re.map(ce=>ce.groupId===ie?{...ce,groupId:Qt}:ce)),i(re=>re.filter(ce=>ce.id!==ie)),f===ie&&g("ALL"))},Ls=()=>{if(!G.trim())return;const L={id:Math.random().toString(36).substring(2,9),name:G,color:j};l(ie=>[...ie,L]),fe(""),K(!1)},fo=()=>{!G.trim()||!q||(l(L=>L.map(ie=>ie.id===q?{...ie,name:G,color:j}:ie)),Y(null),fe(""))},Cl=L=>{window.confirm("")&&l(ie=>ie.filter(re=>re.id!==L))},Os=t.filter(L=>{if(L.folderId!==u||f!=="ALL"&&L.groupId!==f)return!1;const ie=L.name.toLowerCase().includes(v.toLowerCase()),re=P==="ALL"||L.category===P;return ie&&re});return p.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 min-h-[600px]",children:[Se&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg shadow-2xl max-h-[80vh] flex flex-col",children:[p.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[p.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[p.jsx(Sp,{size:20})," "]}),p.jsx("button",{onClick:()=>Me(!1),className:"p-1 hover:bg-slate-100 rounded-full",children:p.jsx(es,{size:20})})]}),p.jsxs("div",{className:"p-4 overflow-y-auto flex-1 space-y-4",children:[($||q)&&p.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 space-y-3",children:[p.jsx("h4",{className:"text-sm font-bold text-slate-500",children:q?"":""}),p.jsx("div",{className:"flex gap-2",children:p.jsx("input",{autoFocus:!0,className:"flex-1 border border-slate-300 rounded px-2 py-1 text-sm outline-none focus:border-blue-500",placeholder:"",value:G,onChange:L=>fe(L.target.value)})}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:""}),p.jsx("div",{className:"flex flex-wrap gap-2",children:gu.map((L,ie)=>p.jsx("button",{onClick:()=>ee(L.class),className:`w-6 h-6 rounded-full border ${L.class.replace("bg-","bg-").replace("text-","text-").split(" ")[0]} ${j===L.class?"ring-2 ring-offset-1 ring-slate-400":""}`,title:L.name},ie))}),p.jsx("div",{className:`mt-2 text-xs px-2 py-1 rounded border w-fit ${j}`,children:""})]}),p.jsxs("div",{className:"flex gap-2 pt-2",children:[p.jsx("button",{onClick:q?fo:Ls,className:"flex-1 bg-blue-600 text-white py-1 rounded text-sm hover:bg-blue-700",children:q?"":""}),p.jsx("button",{onClick:()=>{K(!1),Y(null),fe("")},className:"flex-1 bg-white border border-slate-300 text-slate-600 py-1 rounded text-sm hover:bg-slate-50",children:""})]})]}),!$&&!q&&p.jsxs("button",{onClick:()=>{K(!0),fe(""),ee(gu[0].class)},className:"w-full py-2 border-2 border-dashed border-slate-200 rounded-lg text-slate-400 text-sm hover:border-blue-300 hover:text-blue-500 hover:bg-blue-50 flex items-center justify-center gap-1",children:[p.jsx(un,{size:16})," "]}),p.jsx("div",{className:"space-y-2",children:a.map(L=>p.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-100 rounded-lg shadow-sm group",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:`w-4 h-4 rounded-full ${L.color.split(" ")[0].replace("text-","bg-").replace("border-","")} border opacity-50`}),p.jsx("span",{className:`text-sm px-2 py-0.5 rounded border ${L.color}`,children:L.name})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:()=>{Y(L.id),fe(L.name),ee(L.color),K(!1)},className:"p-1 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded",children:p.jsx(jE,{size:16})}),p.jsx("button",{onClick:()=>Cl(L.id),className:"p-1 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded",children:p.jsx(ua,{size:16})})]})]},L.id))})]})]})}),p.jsx("div",{className:"w-full lg:w-64 flex-shrink-0 space-y-4",children:p.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("h2",{className:"font-bold text-slate-700 flex items-center gap-2",children:[p.jsx(Tp,{size:18}),""]}),p.jsx("button",{onClick:()=>w(!0),className:"p-1 hover:bg-slate-100 rounded text-blue-600",title:"",children:p.jsx(PE,{size:18})})]}),y&&p.jsxs("div",{className:"mb-4 bg-blue-50 p-2 rounded-lg border border-blue-100",children:[p.jsx("input",{autoFocus:!0,type:"text",placeholder:"...",value:T,onChange:L=>C(L.target.value),onKeyDown:L=>L.key==="Enter"&&er(),className:"w-full text-sm p-1.5 border border-blue-200 rounded mb-2 outline-none"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:er,className:"flex-1 bg-blue-600 text-white text-xs py-1 rounded",children:""}),p.jsx("button",{onClick:()=>w(!1),className:"flex-1 bg-white text-slate-500 text-xs py-1 rounded border",children:""})]})]}),p.jsx("div",{className:"space-y-1 max-h-[300px] lg:max-h-none overflow-y-auto",children:n.map(L=>p.jsxs("div",{onClick:()=>h(L.id),className:`group flex items-center justify-between p-2.5 rounded-lg cursor-pointer transition-all border ${u===L.id?"bg-blue-50 border-blue-200 text-blue-700 shadow-sm":"hover:bg-slate-50 border-transparent text-slate-600"}`,children:[p.jsxs("div",{className:"flex items-center gap-2 truncate",children:[p.jsx(Tp,{size:16,className:u===L.id?"fill-blue-200":""}),p.jsx("span",{className:"text-sm font-medium truncate",children:L.name})]}),!L.isSystem&&p.jsx("button",{onClick:ie=>bs(ie,L.id),className:"opacity-0 group-hover:opacity-100 text-slate-400 hover:text-red-500 transition-opacity p-1",children:p.jsx(ua,{size:14})})]},L.id))})]})}),p.jsxs("div",{className:"flex-1 space-y-4",children:[p.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col gap-4",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-bold text-slate-800",children:me}),p.jsxs("p",{className:"text-slate-500 text-sm",children:[Os.length," "]})]}),p.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-2 bg-slate-800 text-white px-4 py-2 rounded-lg hover:bg-slate-700 transition-colors shadow-md text-sm",children:[p.jsx(un,{size:16}),p.jsx("span",{children:""})]})]}),p.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(VE,{size:14,className:"text-slate-400"}),p.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:""})]}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsx("button",{onClick:()=>g("ALL"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${f==="ALL"?"bg-slate-100 text-slate-800 border-slate-300":"bg-white text-slate-500 hover:bg-slate-50 border border-slate-200"}`,children:""}),Re.map(L=>p.jsxs("div",{className:`group flex items-center gap-1 pl-3 pr-2 py-1.5 rounded-lg border transition-all ${f===L.id?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:border-blue-200"}`,onClick:()=>g(L.id),children:[p.jsx("span",{className:"text-sm font-medium cursor-pointer",children:L.name}),!L.isSystem&&p.jsx("button",{onClick:ie=>Ds(ie,L.id),className:"ml-1 p-0.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(es,{size:12})})]},L.id)),S?p.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 p-1 rounded-lg border border-slate-200 animate-in fade-in",children:[p.jsx("input",{autoFocus:!0,className:"w-24 text-sm bg-white px-2 py-0.5 rounded border border-slate-200 outline-none focus:border-blue-300",placeholder:"",value:se,onChange:L=>_e(L.target.value),onKeyDown:L=>L.key==="Enter"&&Rr()}),p.jsx("button",{onClick:Rr,className:"bg-blue-500 text-white p-0.5 rounded hover:bg-blue-600",children:p.jsx(un,{size:14})}),p.jsx("button",{onClick:()=>_(!1),className:"text-slate-400 hover:text-slate-600 p-0.5",children:p.jsx(es,{size:14})})]}):p.jsxs("button",{onClick:()=>_(!0),className:"px-2 py-1.5 rounded-lg border border-dashed border-slate-300 text-slate-400 hover:text-blue-600 hover:border-blue-300 hover:bg-blue-50 transition-all flex items-center gap-1 text-sm",children:[p.jsx(un,{size:14}),""]})]})]})]}),D&&p.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-6 rounded-xl shadow-inner animate-in fade-in slide-in-from-top-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("h3",{className:"font-bold text-blue-900 flex items-center gap-2",children:[p.jsx(un,{size:18}),"",me,"",f!=="ALL"&&p.jsx("span",{className:"text-blue-600 text-sm bg-white px-2 py-0.5 rounded-full shadow-sm",children:(Nr=Re.find(L=>L.id===f))==null?void 0:Nr.name})]}),p.jsx("button",{onClick:()=>I(!1),className:"text-blue-500 hover:text-blue-700",children:p.jsx(es,{size:20})})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[p.jsxs("div",{className:"md:col-span-4",children:[p.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:""}),p.jsx("input",{type:"text",value:x,onChange:L=>k(L.target.value),placeholder:": ST-Link",className:"w-full bg-white border border-blue-200 rounded-lg px-3 py-2 text-slate-900 focus:ring-2 focus:ring-blue-500 outline-none"})]}),p.jsxs("div",{className:"md:col-span-3",children:[p.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:""}),p.jsx("select",{value:b,onChange:L=>U(L.target.value),className:"w-full bg-white border border-blue-200 rounded-lg px-3 py-2 text-slate-900 focus:ring-2 focus:ring-blue-500 outline-none",children:a.map(L=>p.jsx("option",{value:L.id,children:L.name},L.id))})]}),p.jsxs("div",{className:"md:col-span-3",children:[p.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"/"}),p.jsx("input",{type:"text",value:z,onChange:L=>E(L.target.value),placeholder:": V1.6",className:"w-full bg-white border border-blue-200 rounded-lg px-3 py-2 text-slate-900 focus:ring-2 focus:ring-blue-500 outline-none"})]}),p.jsx("div",{className:"md:col-span-2 flex items-end",children:p.jsx("button",{onClick:kr,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 font-medium shadow-sm",children:""})})]})]}),p.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[p.jsxs("div",{className:"relative flex-1 w-full",children:[p.jsx(Dy,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),p.jsx("input",{type:"text",placeholder:"...",value:v,onChange:L=>A(L.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-lg text-slate-900 focus:ring-2 focus:ring-slate-400 outline-none shadow-sm"})]}),p.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[p.jsxs("select",{value:P,onChange:L=>N(L.target.value),className:"bg-white border border-slate-200 rounded-lg px-4 py-2 text-slate-900 focus:ring-2 focus:ring-slate-400 outline-none shadow-sm cursor-pointer flex-1 md:flex-none",children:[p.jsx("option",{value:"ALL",children:""}),a.map(L=>p.jsx("option",{value:L.id,children:L.name},L.id))]}),p.jsx("button",{onClick:()=>Me(!0),className:"px-3 py-2 bg-white border border-slate-200 rounded-lg text-slate-600 hover:bg-slate-50 hover:text-blue-600 transition-colors shadow-sm flex items-center gap-2 whitespace-nowrap",title:"",children:p.jsx(Sp,{size:18})})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Os.map(L=>{var Fs;const ie=((Fs=Re.find(br=>br.id===L.groupId))==null?void 0:Fs.name)||"",re=a.find(br=>br.id===L.category),ce=(re==null?void 0:re.color)||"bg-gray-100 text-gray-600 border-gray-200",Vr=(re==null?void 0:re.name)||"";return p.jsxs("div",{className:"group bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${ce}`,children:Vr}),p.jsx("span",{className:"text-xs px-2 py-1 rounded-full border border-slate-100 bg-slate-50 text-slate-500",children:ie})]}),p.jsx("button",{onClick:()=>Al(L.id),className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(ua,{size:16})})]}),p.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:L.name}),L.defaultVersion&&p.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[": ",p.jsx("span",{className:"bg-slate-100 px-1 rounded text-slate-700",children:L.defaultVersion})]})]},L.id)}),Os.length===0&&p.jsx("div",{className:"col-span-full text-center py-12 text-slate-400 bg-slate-50 rounded-xl border border-dashed border-slate-200",children:v||P!=="ALL"||f!=="ALL"?"":""})]})]})]})},HE=({inventory:t,folders:e,groups:n,categories:r,currentTrip:s,onSave:i,onCancel:a})=>{var fe;const[l,u]=Q.useState((s==null?void 0:s.name)||` ${new Date().toLocaleDateString()}`),[h,f]=Q.useState((s==null?void 0:s.date)||new Date().toISOString().split("T")[0]),[g,v]=Q.useState((s==null?void 0:s.items)||[]),[A,P]=Q.useState((s==null?void 0:s.groups)||[{id:wc,name:""}]),[N,D]=Q.useState(A[0].id),[I,x]=Q.useState(""),[k,b]=Q.useState(!1),[U,z]=Q.useState(""),[E,y]=Q.useState("ALL"),[w,T]=Q.useState("ALL"),[C,S]=Q.useState("ALL"),_=j=>{const ee={id:Math.random().toString(36).substring(2,9),inventoryId:j.id,tripGroupId:N,name:j.name,category:j.category,qty:1,version:j.defaultVersion||"",checked:!1};v(me=>[...me,ee])},se=j=>{v(ee=>ee.filter(me=>me.id!==j))},_e=(j,ee,me)=>{v(Re=>Re.map(Qt=>Qt.id===j?{...Qt,[ee]:me}:Qt))},Se=()=>{if(!I.trim())return;const j=Math.random().toString(36).substring(2,9),ee={id:j,name:I};P(me=>[...me,ee]),D(j),x(""),b(!1)},Me=(j,ee)=>{if(j.stopPropagation(),A.length<=1){alert("");return}window.confirm("")&&(P(me=>me.filter(Re=>Re.id!==ee)),v(me=>me.filter(Re=>Re.tripGroupId!==ee)),N===ee&&D(A[0].id))},$=()=>{if(!l.trim()){alert("");return}if(g.length===0&&!window.confirm(""))return;const j={id:(s==null?void 0:s.id)||Math.random().toString(36).substring(2,9),userId:(s==null?void 0:s.userId)||"unknown",name:l,date:h,status:(s==null?void 0:s.status)||"planning",groups:A,items:g};i(j)},K=t.filter(j=>{const ee=j.name.toLowerCase().includes(U.toLowerCase()),me=E==="ALL"||j.category===E,Re=w==="ALL"||j.folderId===w,Qt=C==="ALL"||j.groupId===C;return ee&&me&&Re&&Qt}),q=w==="ALL"?n:n.filter(j=>j.folderId===w),Y=g.filter(j=>j.tripGroupId===N),G=j=>{const ee=r.find(me=>me.id===j);return{name:(ee==null?void 0:ee.name)||"",color:(ee==null?void 0:ee.color)||"bg-gray-100 text-gray-600 border-gray-200"}};return p.jsxs("div",{className:"h-[calc(100vh-100px)] flex flex-col gap-4",children:[p.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col md:flex-row justify-between items-start md:items-center gap-4 shrink-0",children:[p.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[p.jsx("button",{onClick:a,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500",children:p.jsx(by,{size:24})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-xs text-slate-400 font-bold uppercase tracking-wider",children:""}),p.jsx("input",{type:"text",value:l,onChange:j=>u(j.target.value),className:"text-xl font-bold text-slate-900 bg-transparent border-b border-transparent hover:border-slate-300 focus:border-blue-500 focus:outline-none w-full"})]})]}),p.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[p.jsx("input",{type:"date",value:h,onChange:j=>f(j.target.value),className:"bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-slate-700 focus:ring-2 focus:ring-blue-500"}),p.jsxs("button",{onClick:$,className:"flex items-center gap-2 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 shadow-md transition-transform active:scale-95",children:[p.jsx(FE,{size:18}),p.jsx("span",{children:""})]})]})]}),p.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-4 overflow-hidden",children:[p.jsxs("div",{className:"flex-1 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col overflow-hidden",children:[p.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50 space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ec,{className:"text-slate-500",size:20}),p.jsx("h3",{className:"font-bold text-slate-700",children:""})]}),p.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded-full",children:["  ",(fe=A.find(j=>j.id===N))==null?void 0:fe.name]})]}),p.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx(Dy,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),p.jsx("input",{type:"text",placeholder:"...",value:U,onChange:j=>z(j.target.value),className:"w-full pl-9 pr-3 py-1.5 bg-white border border-slate-200 rounded text-sm text-slate-900 focus:ring-1 focus:ring-blue-500 outline-none"})]}),p.jsxs("select",{value:w,onChange:j=>{T(j.target.value),S("ALL")},className:"bg-white border border-slate-200 rounded px-2 py-1 text-sm text-slate-700 focus:ring-1 focus:ring-blue-500 outline-none",children:[p.jsx("option",{value:"ALL",children:" "}),e.map(j=>p.jsx("option",{value:j.id,children:j.name},j.id))]}),p.jsxs("select",{value:C,onChange:j=>S(j.target.value),className:"bg-white border border-slate-200 rounded px-2 py-1 text-sm text-slate-700 focus:ring-1 focus:ring-blue-500 outline-none max-w-[150px]",children:[p.jsx("option",{value:"ALL",children:" "}),q.map(j=>p.jsx("option",{value:j.id,children:j.name},j.id))]})]}),p.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[p.jsx("button",{onClick:()=>y("ALL"),className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-colors ${E==="ALL"?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:""}),r.map(j=>p.jsx("button",{onClick:()=>y(j.id),className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-colors ${E===j.id?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:j.name},j.id))]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 grid grid-cols-1 lg:grid-cols-2 gap-3 content-start",children:[K.map(j=>{const ee=G(j.category);return p.jsxs("button",{onClick:()=>_(j),className:"group flex flex-col items-start p-3 rounded-lg border border-slate-100 hover:border-blue-300 hover:bg-blue-50 transition-all text-left bg-white shadow-sm",children:[p.jsxs("div",{className:"flex justify-between w-full mb-1",children:[p.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${ee.color}`,children:ee.name}),p.jsx(un,{size:16,className:"text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity"})]}),p.jsx("span",{className:"font-medium text-slate-800 text-sm",children:j.name}),j.defaultVersion&&p.jsxs("span",{className:"text-xs text-slate-400 mt-1",children:[": ",j.defaultVersion]})]},j.id)}),K.length===0&&p.jsx("div",{className:"col-span-full text-center text-slate-400 text-sm py-8",children:""})]})]}),p.jsxs("div",{className:"flex-1 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col overflow-hidden",children:[p.jsxs("div",{className:"p-2 border-b border-slate-100 bg-slate-50 flex overflow-x-auto gap-2 scrollbar-hide items-center",children:[A.map(j=>p.jsxs("div",{onClick:()=>D(j.id),className:`
                        flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-all whitespace-nowrap border
                        ${N===j.id?"bg-white border-blue-200 text-blue-700 shadow-sm font-medium":"bg-slate-100 border-transparent text-slate-500 hover:bg-white hover:border-slate-200"}
                    `,children:[p.jsx("span",{children:j.name}),p.jsx("span",{className:"text-xs bg-opacity-20 bg-slate-500 px-1.5 rounded-full",children:g.filter(ee=>ee.tripGroupId===j.id).length}),N===j.id&&p.jsx("button",{onClick:ee=>Me(ee,j.id),className:"ml-1 p-0.5 hover:text-red-500 rounded hover:bg-red-50",children:p.jsx(es,{size:12})})]},j.id)),k?p.jsxs("div",{className:"flex items-center gap-1 bg-white p-1 rounded-lg border border-blue-200 shadow-sm animate-in fade-in",children:[p.jsx("input",{autoFocus:!0,className:"w-24 text-sm px-2 py-0.5 outline-none",placeholder:"",value:I,onChange:j=>x(j.target.value),onKeyDown:j=>j.key==="Enter"&&Se()}),p.jsx("button",{onClick:Se,className:"text-blue-600 hover:bg-blue-50 p-1 rounded",children:p.jsx(un,{size:14})}),p.jsx("button",{onClick:()=>b(!1),className:"text-slate-400 hover:text-slate-600 p-1",children:p.jsx(es,{size:14})})]}):p.jsx("button",{onClick:()=>b(!0),className:"p-1.5 rounded-lg text-slate-400 hover:bg-slate-100 hover:text-slate-600 transition-colors",title:"",children:p.jsx(un,{size:18})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50/50",children:Y.length===0?p.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-300",children:[p.jsx(Ec,{size:48,className:"mb-4 opacity-50"}),p.jsx("p",{children:""})]}):Y.map(j=>{const ee=G(j.category);return p.jsxs("div",{className:"flex gap-3 items-start bg-white p-3 rounded-lg border border-slate-200 shadow-sm animate-in fade-in slide-in-from-left-2 duration-300",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${ee.color} whitespace-nowrap`,children:ee.name}),p.jsx("span",{className:"font-bold text-slate-800 truncate",children:j.name})]}),p.jsx("div",{className:"flex gap-2",children:p.jsx("div",{className:"flex-1",children:p.jsx("textarea",{value:j.version,onChange:me=>_e(j.id,"version",me.target.value),placeholder:" ()...",rows:2,className:"w-full bg-slate-50 border border-slate-200 rounded px-2 py-1 text-sm text-slate-900 focus:ring-1 focus:ring-blue-500 outline-none resize-none"})})})]}),p.jsxs("div",{className:"flex flex-col items-end gap-2",children:[p.jsxs("div",{className:"flex items-center border border-slate-200 rounded-lg overflow-hidden bg-slate-50",children:[p.jsx("input",{type:"number",min:"1",value:j.qty,onChange:me=>_e(j.id,"qty",parseInt(me.target.value)||1),className:"w-12 text-center bg-white border-x border-slate-200 py-1 text-slate-900 font-bold outline-none"}),p.jsx("span",{className:"text-xs text-slate-400 px-1",children:"Qty"})]}),p.jsx("button",{onClick:()=>se(j.id),className:"text-slate-300 hover:text-red-500 p-1",children:p.jsx(ua,{size:16})})]})]},j.id)})})]})]})]})},WE=({trip:t,categories:e,onUpdateTrip:n,onBack:r,onEdit:s})=>{const[i,a]=Q.useState(t);Q.useEffect(()=>{a(t)},[t]);const l=f=>{const g=i.items.map(P=>P.id===f?{...P,checked:!P.checked}:P),v={...i,items:g},A=g.every(P=>P.checked);v.status=A?"completed":"active",a(v),n(v)},u=Math.round(i.items.filter(f=>f.checked).length/i.items.length*100)||0,h=f=>{const g=e.find(v=>v.id===f);return{name:(g==null?void 0:g.name)||"",color:(g==null?void 0:g.color)||"bg-gray-100 text-gray-600 border-gray-200"}};return p.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-20",children:[p.jsxs("div",{className:"sticky top-0 z-10 bg-slate-50/95 backdrop-blur-sm pt-4 pb-2 border-b border-slate-200",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("button",{onClick:r,className:"flex items-center text-slate-500 hover:text-slate-800",children:[p.jsx(by,{size:20,className:"mr-1"}),""]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm bg-white border border-slate-200 text-slate-600 hover:bg-slate-100",children:[p.jsx(OE,{size:16}),""]}),p.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${i.status==="completed"?"bg-green-500 text-white":"bg-blue-600 text-white"}`,children:i.status==="completed"?"":""})]})]}),p.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:i.name}),p.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex items-center gap-4",children:[p.jsx("div",{className:"flex-1 h-3 bg-slate-100 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-green-500 transition-all duration-500 ease-out",style:{width:`${u}%`}})}),p.jsxs("span",{className:"font-bold text-slate-700 min-w-[3rem] text-right",children:[u,"%"]})]})]}),i.groups.map(f=>{const g=i.items.filter(v=>v.tripGroupId===f.id);return g.length===0?null:p.jsxs("div",{className:"space-y-3",children:[p.jsxs("h3",{className:"font-bold text-slate-700 text-lg flex items-center gap-2 border-l-4 border-blue-500 pl-3",children:[p.jsx(NE,{size:18,className:"text-blue-500"}),f.name]}),p.jsx("div",{className:"grid grid-cols-1 gap-3",children:g.map(v=>{const A=h(v.category);return p.jsxs("div",{onClick:()=>l(v.id),className:`
                        relative cursor-pointer transition-all duration-200 
                        p-4 rounded-xl border-2 shadow-sm flex items-start gap-4
                        ${v.checked?"bg-green-50 border-green-200 opacity-70":"bg-white border-slate-200 hover:border-blue-400 hover:shadow-md"}
                        `,children:[p.jsxs("div",{className:`
                        flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center transition-colors mt-1
                        ${v.checked?"bg-green-500 text-white":"bg-slate-100 text-slate-300"}
                        `,children:[p.jsx(SE,{size:20,className:v.checked?"opacity-100":"opacity-0"}),!v.checked&&p.jsx(CE,{size:20,className:"absolute"})]}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex justify-between items-start mb-1",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:`text-lg font-bold break-words ${v.checked?"text-slate-500 line-through":"text-slate-800"}`,children:v.name}),p.jsx("span",{className:`text-[10px] w-fit px-1.5 py-0.5 rounded border ${A.color} mt-1`,children:A.name})]}),p.jsxs("span",{className:"bg-slate-100 text-slate-700 font-bold px-2 py-1 rounded text-sm whitespace-nowrap ml-2",children:["x",v.qty]})]}),v.version&&p.jsx("div",{className:`text-sm mt-2 font-medium px-3 py-2 rounded w-full whitespace-pre-wrap break-words leading-relaxed ${v.checked?"bg-slate-100 text-slate-400":"bg-yellow-50 text-yellow-800 border border-yellow-200"}`,children:v.version})]})]},v.id)})})]},f.id)}),i.items.length===0&&p.jsxs("div",{className:"text-center py-20 text-slate-400",children:[p.jsx(ME,{size:48,className:"mx-auto mb-4 opacity-50"}),p.jsx("p",{children:""})]})]})};var Ap={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},qE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Oy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,f=i>>2,g=(i&3)<<4|l>>4;let v=(l&15)<<2|h>>6,A=h&63;u||(A=64,a||(v=64)),r.push(n[f],n[g],n[v],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ly(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||g==null)throw new GE;const v=i<<2|l>>4;if(r.push(v),h!==64){const A=l<<4&240|h>>2;if(r.push(A),g!==64){const P=h<<6&192|g;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QE=function(t){const e=Ly(t);return Oy.encodeByteArray(e,!0)},Ma=function(t){return QE(t).replace(/\./g,"")},KE=function(t){try{return Oy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Fa(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!YE(n)||(t[n]=Fa(t[n],e[n]));return t}function YE(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=()=>jy().__FIREBASE_DEFAULTS__,JE=()=>{if(typeof process>"u"||typeof Ap>"u")return;const t=Ap.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&KE(t[1]);return e&&JSON.parse(e)},Lh=()=>{try{return XE()||JE()||ZE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},e1=t=>{var e,n;return(n=(e=Lh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},t1=t=>{const e=e1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},My=()=>{var t;return(t=Lh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ma(JSON.stringify(n)),Ma(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function i1(){var t;const e=(t=Lh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function o1(){return typeof window<"u"||Fy()}function Fy(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function a1(){return!i1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function l1(){try{return typeof indexedDB=="object"}catch{return!1}}function u1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="FirebaseError";class Sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=c1,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ml.prototype.create)}}class ml{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?h1(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Sr(s,l,r)}}function h1(t,e){return t.replace(d1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const d1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function xc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(kp(i)&&kp(a)){if(!xc(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function kp(t){return t!==null&&typeof t=="object"}function f1(t,e){const n=new p1(t,e);return n.subscribe.bind(n)}class p1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");m1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=vu),s.error===void 0&&(s.error=vu),s.complete===void 0&&(s.complete=vu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function m1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t){return t&&t._delegate?t._delegate:t}class ms{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new n1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(v1(e))try{this.getOrInitializeService({instanceIdentifier:ar})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ar){return this.instances.has(e)}getOptions(e=ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:y1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ar){return this.component?this.component.multipleInstances?e:ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function y1(t){return t===ar?void 0:t}function v1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new g1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=[];var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const zy={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},_1=de.INFO,w1={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},E1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=w1[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jh{constructor(e){this.name=e,this._logLevel=_1,this._logHandler=E1,this._userLogHandler=null,Oh.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zy[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}function x1(t){Oh.forEach(e=>{e.setLogLevel(t)})}function T1(t,e){for(const n of Oh){let r=null;e&&e.level&&(r=zy[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...a)=>{const l=a.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");i>=(r??s.logLevel)&&t({level:de[i].toLowerCase(),message:l,args:a,type:s.name})}}}const I1=(t,e)=>e.some(n=>t instanceof n);let Rp,Pp;function S1(){return Rp||(Rp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function A1(){return Pp||(Pp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const By=new WeakMap,Tc=new WeakMap,$y=new WeakMap,_u=new WeakMap,Mh=new WeakMap;function C1(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Bn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&By.set(n,t)}).catch(()=>{}),Mh.set(e,t),e}function k1(t){if(Tc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Tc.set(t,e)}let Ic={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$y.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function R1(t){Ic=t(Ic)}function P1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wu(this),e,...n);return $y.set(r,e.sort?e.sort():[e]),Bn(r)}:A1().includes(t)?function(...e){return t.apply(wu(this),e),Bn(By.get(this))}:function(...e){return Bn(t.apply(wu(this),e))}}function N1(t){return typeof t=="function"?P1(t):(t instanceof IDBTransaction&&k1(t),I1(t,S1())?new Proxy(t,Ic):t)}function Bn(t){if(t instanceof IDBRequest)return C1(t);if(_u.has(t))return _u.get(t);const e=N1(t);return e!==t&&(_u.set(t,e),Mh.set(e,t)),e}const wu=t=>Mh.get(t);function V1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Bn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Bn(a.result),u.oldVersion,u.newVersion,Bn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const b1=["get","getKey","getAll","getAllKeys","count"],D1=["put","add","delete","clear"],Eu=new Map;function Np(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Eu.get(e))return Eu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=D1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||b1.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Eu.set(e,i),i}R1(t=>({...t,get:(e,n,r)=>Np(e,n)||t.get(e,n,r),has:(e,n)=>!!Np(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(O1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function O1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const za="@firebase/app",Sc="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=new jh("@firebase/app"),j1="@firebase/app-compat",M1="@firebase/analytics-compat",F1="@firebase/analytics",U1="@firebase/app-check-compat",z1="@firebase/app-check",B1="@firebase/auth",$1="@firebase/auth-compat",H1="@firebase/database",W1="@firebase/data-connect",q1="@firebase/database-compat",G1="@firebase/functions",Q1="@firebase/functions-compat",K1="@firebase/installations",Y1="@firebase/installations-compat",X1="@firebase/messaging",J1="@firebase/messaging-compat",Z1="@firebase/performance",ex="@firebase/performance-compat",tx="@firebase/remote-config",nx="@firebase/remote-config-compat",rx="@firebase/storage",sx="@firebase/storage-compat",ix="@firebase/firestore",ox="@firebase/vertexai-preview",ax="@firebase/firestore-compat",lx="firebase",ux="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="[DEFAULT]",cx={[za]:"fire-core",[j1]:"fire-core-compat",[F1]:"fire-analytics",[M1]:"fire-analytics-compat",[z1]:"fire-app-check",[U1]:"fire-app-check-compat",[B1]:"fire-auth",[$1]:"fire-auth-compat",[H1]:"fire-rtdb",[W1]:"fire-data-connect",[q1]:"fire-rtdb-compat",[G1]:"fire-fn",[Q1]:"fire-fn-compat",[K1]:"fire-iid",[Y1]:"fire-iid-compat",[X1]:"fire-fcm",[J1]:"fire-fcm-compat",[Z1]:"fire-perf",[ex]:"fire-perf-compat",[tx]:"fire-rc",[nx]:"fire-rc-compat",[rx]:"fire-gcs",[sx]:"fire-gcs-compat",[ix]:"fire-fst",[ax]:"fire-fst-compat",[ox]:"fire-vertex","fire-js":"fire-js",[lx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new Map,gs=new Map,ys=new Map;function Wi(t,e){try{t.container.addComponent(e)}catch(n){_n.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Hy(t,e){t.container.addOrOverwriteComponent(e)}function vs(t){const e=t.name;if(ys.has(e))return _n.debug(`There were multiple attempts to register component ${e}.`),!1;ys.set(e,t);for(const n of Gn.values())Wi(n,t);for(const n of gs.values())Wi(n,t);return!0}function Fh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hx(t,e,n=qn){Fh(t,e).clearInstance(n)}function Wy(t){return t.options!==void 0}function dx(t){return t.settings!==void 0}function fx(){ys.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lt=new ml("app","Firebase",px);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qy=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lt.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx extends qy{constructor(e,n,r,s){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,a={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,a,s);else{const l=e;super(l.options,a,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,fn(za,Sc,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Bh(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Lt.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=ux;function zh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qn,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Lt.create("bad-app-name",{appName:String(s)});if(n||(n=My()),!n)throw Lt.create("no-options");const i=Gn.get(s);if(i){if(xc(n,i.options)&&xc(r,i.config))return i;throw Lt.create("duplicate-app",{appName:s})}const a=new Uy(s);for(const u of ys.values())a.addComponent(u);const l=new qy(n,r,a);return Gn.set(s,l),l}function gx(t,e){if(o1()&&!Fy())throw Lt.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;Wy(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=h=>[...h].reduce((f,g)=>Math.imul(31,f)+g.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Lt.create("finalization-registry-not-supported",{});const i=""+s(JSON.stringify(r)),a=gs.get(i);if(a)return a.incRefCount(e.releaseOnDeref),a;const l=new Uy(i);for(const h of ys.values())l.addComponent(h);const u=new mx(n,e,i,l);return gs.set(i,u),u}function Gy(t=qn){const e=Gn.get(t);if(!e&&t===qn&&My())return zh();if(!e)throw Lt.create("no-app",{appName:t});return e}function yx(){return Array.from(Gn.values())}async function Bh(t){let e=!1;const n=t.name;Gn.has(n)?(e=!0,Gn.delete(n)):gs.has(n)&&t.decRefCount()<=0&&(gs.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function fn(t,e,n){var r;let s=(r=cx[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_n.warn(l.join(" "));return}vs(new ms(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function Qy(t,e){if(t!==null&&typeof t!="function")throw Lt.create("invalid-log-argument");T1(t,e)}function Ky(t){x1(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="firebase-heartbeat-database",_x=1,qi="firebase-heartbeat-store";let xu=null;function Yy(){return xu||(xu=V1(vx,_x,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lt.create("idb-open",{originalErrorMessage:t.message})})),xu}async function wx(t){try{const n=(await Yy()).transaction(qi),r=await n.objectStore(qi).get(Xy(t));return await n.done,r}catch(e){if(e instanceof Sr)_n.warn(e.message);else{const n=Lt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_n.warn(n.message)}}}async function Vp(t,e){try{const r=(await Yy()).transaction(qi,"readwrite");await r.objectStore(qi).put(e,Xy(t)),await r.done}catch(n){if(n instanceof Sr)_n.warn(n.message);else{const r=Lt.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_n.warn(r.message)}}}function Xy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=1024,xx=30*24*60*60*1e3;class Tx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Sx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=bp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=xx}),this._storage.overwrite(this._heartbeatsCache))}catch(r){_n.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bp(),{heartbeatsToSend:r,unsentEntries:s}=Ix(this._heartbeatsCache.heartbeats),i=Ma(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return _n.warn(n),""}}}function bp(){return new Date().toISOString().substring(0,10)}function Ix(t,e=Ex){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Dp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Dp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Sx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return l1()?u1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Dp(t){return Ma(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t){vs(new ms("platform-logger",e=>new L1(e),"PRIVATE")),vs(new ms("heartbeat",e=>new Tx(e),"PRIVATE")),fn(za,Sc,t),fn(za,Sc,"esm2017"),fn("fire-js","")}Ax("");const Cx=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Sr,SDK_VERSION:Uh,_DEFAULT_ENTRY_NAME:qn,_addComponent:Wi,_addOrOverwriteComponent:Hy,_apps:Gn,_clearComponents:fx,_components:ys,_getProvider:Fh,_isFirebaseApp:Wy,_isFirebaseServerApp:dx,_registerComponent:vs,_removeServiceInstance:hx,_serverApps:gs,deleteApp:Bh,getApp:Gy,getApps:yx,initializeApp:zh,initializeServerApp:gx,onLog:Qy,registerVersion:fn,setLogLevel:Ky},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,n){this._delegate=e,this.firebase=n,Wi(e,new ms("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Bh(this._delegate)))}_getService(e,n=qn){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=qn){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Wi(this._delegate,e)}_addOrOverwriteComponent(e){Hy(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Lp=new ml("app-compat","Firebase",Rx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:fn,setLogLevel:Ky,onLog:Qy,apps:null,SDK_VERSION:Uh,INTERNAL:{registerComponent:l,removeApp:r,useAsService:u,modularAPIs:Cx}};n.default=n,Object.defineProperty(n,"apps",{get:a});function r(h){delete e[h]}function s(h){if(h=h||qn,!Cp(e,h))throw Lp.create("no-app",{appName:h});return e[h]}s.App=t;function i(h,f={}){const g=zh(h,f);if(Cp(e,g.name))return e[g.name];const v=new t(g,n);return e[g.name]=v,v}function a(){return Object.keys(e).map(h=>e[h])}function l(h){const f=h.name,g=f.replace("-compat","");if(vs(h)&&h.type==="PUBLIC"){const v=(A=s())=>{if(typeof A[g]!="function")throw Lp.create("invalid-app-argument",{appName:f});return A[g]()};h.serviceProps!==void 0&&Fa(v,h.serviceProps),n[g]=v,t.prototype[g]=function(...A){return this._getService.bind(this,f).apply(this,h.multipleInstances?A:[])}}return h.type==="PUBLIC"?n[g]:null}function u(h,f){return f==="serverAuth"?null:f}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(){const t=Px(kx);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:Jy,extendNamespace:e,createSubscribe:f1,ErrorFactory:ml,deepExtend:Fa});function e(n){Fa(t,n)}return t}const Nx=Jy();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=new jh("@firebase/app-compat"),Vx="@firebase/app-compat",bx="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t){fn(Vx,bx,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=jy();if(t.firebase!==void 0){Op.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Op.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Zy=Nx;Dx();var Lx="firebase",Ox="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zy.registerVersion(Lx,Ox,"app-compat");var jp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pr,ev;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function w(){}w.prototype=y.prototype,E.D=y.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(T,C,S){for(var _=Array(arguments.length-2),se=2;se<arguments.length;se++)_[se-2]=arguments[se];return y.prototype[C].apply(T,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,y,w){w||(w=0);var T=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)T[C]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(C=0;16>C;++C)T[C]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=E.g[0],w=E.g[1],C=E.g[2];var S=E.g[3],_=y+(S^w&(C^S))+T[0]+3614090360&4294967295;y=w+(_<<7&4294967295|_>>>25),_=S+(C^y&(w^C))+T[1]+3905402710&4294967295,S=y+(_<<12&4294967295|_>>>20),_=C+(w^S&(y^w))+T[2]+606105819&4294967295,C=S+(_<<17&4294967295|_>>>15),_=w+(y^C&(S^y))+T[3]+3250441966&4294967295,w=C+(_<<22&4294967295|_>>>10),_=y+(S^w&(C^S))+T[4]+4118548399&4294967295,y=w+(_<<7&4294967295|_>>>25),_=S+(C^y&(w^C))+T[5]+1200080426&4294967295,S=y+(_<<12&4294967295|_>>>20),_=C+(w^S&(y^w))+T[6]+2821735955&4294967295,C=S+(_<<17&4294967295|_>>>15),_=w+(y^C&(S^y))+T[7]+4249261313&4294967295,w=C+(_<<22&4294967295|_>>>10),_=y+(S^w&(C^S))+T[8]+1770035416&4294967295,y=w+(_<<7&4294967295|_>>>25),_=S+(C^y&(w^C))+T[9]+2336552879&4294967295,S=y+(_<<12&4294967295|_>>>20),_=C+(w^S&(y^w))+T[10]+4294925233&4294967295,C=S+(_<<17&4294967295|_>>>15),_=w+(y^C&(S^y))+T[11]+2304563134&4294967295,w=C+(_<<22&4294967295|_>>>10),_=y+(S^w&(C^S))+T[12]+1804603682&4294967295,y=w+(_<<7&4294967295|_>>>25),_=S+(C^y&(w^C))+T[13]+4254626195&4294967295,S=y+(_<<12&4294967295|_>>>20),_=C+(w^S&(y^w))+T[14]+2792965006&4294967295,C=S+(_<<17&4294967295|_>>>15),_=w+(y^C&(S^y))+T[15]+1236535329&4294967295,w=C+(_<<22&4294967295|_>>>10),_=y+(C^S&(w^C))+T[1]+4129170786&4294967295,y=w+(_<<5&4294967295|_>>>27),_=S+(w^C&(y^w))+T[6]+3225465664&4294967295,S=y+(_<<9&4294967295|_>>>23),_=C+(y^w&(S^y))+T[11]+643717713&4294967295,C=S+(_<<14&4294967295|_>>>18),_=w+(S^y&(C^S))+T[0]+3921069994&4294967295,w=C+(_<<20&4294967295|_>>>12),_=y+(C^S&(w^C))+T[5]+3593408605&4294967295,y=w+(_<<5&4294967295|_>>>27),_=S+(w^C&(y^w))+T[10]+38016083&4294967295,S=y+(_<<9&4294967295|_>>>23),_=C+(y^w&(S^y))+T[15]+3634488961&4294967295,C=S+(_<<14&4294967295|_>>>18),_=w+(S^y&(C^S))+T[4]+3889429448&4294967295,w=C+(_<<20&4294967295|_>>>12),_=y+(C^S&(w^C))+T[9]+568446438&4294967295,y=w+(_<<5&4294967295|_>>>27),_=S+(w^C&(y^w))+T[14]+3275163606&4294967295,S=y+(_<<9&4294967295|_>>>23),_=C+(y^w&(S^y))+T[3]+4107603335&4294967295,C=S+(_<<14&4294967295|_>>>18),_=w+(S^y&(C^S))+T[8]+1163531501&4294967295,w=C+(_<<20&4294967295|_>>>12),_=y+(C^S&(w^C))+T[13]+2850285829&4294967295,y=w+(_<<5&4294967295|_>>>27),_=S+(w^C&(y^w))+T[2]+4243563512&4294967295,S=y+(_<<9&4294967295|_>>>23),_=C+(y^w&(S^y))+T[7]+1735328473&4294967295,C=S+(_<<14&4294967295|_>>>18),_=w+(S^y&(C^S))+T[12]+2368359562&4294967295,w=C+(_<<20&4294967295|_>>>12),_=y+(w^C^S)+T[5]+4294588738&4294967295,y=w+(_<<4&4294967295|_>>>28),_=S+(y^w^C)+T[8]+2272392833&4294967295,S=y+(_<<11&4294967295|_>>>21),_=C+(S^y^w)+T[11]+1839030562&4294967295,C=S+(_<<16&4294967295|_>>>16),_=w+(C^S^y)+T[14]+4259657740&4294967295,w=C+(_<<23&4294967295|_>>>9),_=y+(w^C^S)+T[1]+2763975236&4294967295,y=w+(_<<4&4294967295|_>>>28),_=S+(y^w^C)+T[4]+1272893353&4294967295,S=y+(_<<11&4294967295|_>>>21),_=C+(S^y^w)+T[7]+4139469664&4294967295,C=S+(_<<16&4294967295|_>>>16),_=w+(C^S^y)+T[10]+3200236656&4294967295,w=C+(_<<23&4294967295|_>>>9),_=y+(w^C^S)+T[13]+681279174&4294967295,y=w+(_<<4&4294967295|_>>>28),_=S+(y^w^C)+T[0]+3936430074&4294967295,S=y+(_<<11&4294967295|_>>>21),_=C+(S^y^w)+T[3]+3572445317&4294967295,C=S+(_<<16&4294967295|_>>>16),_=w+(C^S^y)+T[6]+76029189&4294967295,w=C+(_<<23&4294967295|_>>>9),_=y+(w^C^S)+T[9]+3654602809&4294967295,y=w+(_<<4&4294967295|_>>>28),_=S+(y^w^C)+T[12]+3873151461&4294967295,S=y+(_<<11&4294967295|_>>>21),_=C+(S^y^w)+T[15]+530742520&4294967295,C=S+(_<<16&4294967295|_>>>16),_=w+(C^S^y)+T[2]+3299628645&4294967295,w=C+(_<<23&4294967295|_>>>9),_=y+(C^(w|~S))+T[0]+4096336452&4294967295,y=w+(_<<6&4294967295|_>>>26),_=S+(w^(y|~C))+T[7]+1126891415&4294967295,S=y+(_<<10&4294967295|_>>>22),_=C+(y^(S|~w))+T[14]+2878612391&4294967295,C=S+(_<<15&4294967295|_>>>17),_=w+(S^(C|~y))+T[5]+4237533241&4294967295,w=C+(_<<21&4294967295|_>>>11),_=y+(C^(w|~S))+T[12]+1700485571&4294967295,y=w+(_<<6&4294967295|_>>>26),_=S+(w^(y|~C))+T[3]+2399980690&4294967295,S=y+(_<<10&4294967295|_>>>22),_=C+(y^(S|~w))+T[10]+4293915773&4294967295,C=S+(_<<15&4294967295|_>>>17),_=w+(S^(C|~y))+T[1]+2240044497&4294967295,w=C+(_<<21&4294967295|_>>>11),_=y+(C^(w|~S))+T[8]+1873313359&4294967295,y=w+(_<<6&4294967295|_>>>26),_=S+(w^(y|~C))+T[15]+4264355552&4294967295,S=y+(_<<10&4294967295|_>>>22),_=C+(y^(S|~w))+T[6]+2734768916&4294967295,C=S+(_<<15&4294967295|_>>>17),_=w+(S^(C|~y))+T[13]+1309151649&4294967295,w=C+(_<<21&4294967295|_>>>11),_=y+(C^(w|~S))+T[4]+4149444226&4294967295,y=w+(_<<6&4294967295|_>>>26),_=S+(w^(y|~C))+T[11]+3174756917&4294967295,S=y+(_<<10&4294967295|_>>>22),_=C+(y^(S|~w))+T[2]+718787259&4294967295,C=S+(_<<15&4294967295|_>>>17),_=w+(S^(C|~y))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+S&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var w=y-this.blockSize,T=this.B,C=this.h,S=0;S<y;){if(C==0)for(;S<=w;)s(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<y;)if(T[C++]=E.charCodeAt(S++),C==this.blockSize){s(this,T),C=0;break}}else for(;S<y;)if(T[C++]=E[S++],C==this.blockSize){s(this,T),C=0;break}}this.h=C,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var w=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=w&255,w/=256;for(this.u(E),E=Array(16),y=w=0;4>y;++y)for(var T=0;32>T;T+=8)E[w++]=this.g[y]>>>T&255;return E};function i(E,y){var w=l;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=y(E)}function a(E,y){this.h=y;for(var w=[],T=!0,C=E.length-1;0<=C;C--){var S=E[C]|0;T&&S==y||(w[C]=S,T=!1)}this.g=w}var l={};function u(E){return-128<=E&&128>E?i(E,function(y){return new a([y|0],0>y?-1:0)}):new a([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return D(h(-E));for(var y=[],w=1,T=0;E>=w;T++)y[T]=E/w|0,w*=4294967296;return new a(y,0)}function f(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return D(f(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=h(Math.pow(y,8)),T=g,C=0;C<E.length;C+=8){var S=Math.min(8,E.length-C),_=parseInt(E.substring(C,C+S),y);8>S?(S=h(Math.pow(y,S)),T=T.j(S).add(h(_))):(T=T.j(w),T=T.add(h(_)))}return T}var g=u(0),v=u(1),A=u(16777216);t=a.prototype,t.m=function(){if(N(this))return-D(this).m();for(var E=0,y=1,w=0;w<this.g.length;w++){var T=this.i(w);E+=(0<=T?T:4294967296+T)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(P(this))return"0";if(N(this))return"-"+D(this).toString(E);for(var y=h(Math.pow(E,6)),w=this,T="";;){var C=b(w,y).g;w=I(w,C.j(y));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=C,P(w))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function P(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=I(this,E),N(E)?-1:P(E)?0:1};function D(E){for(var y=E.g.length,w=[],T=0;T<y;T++)w[T]=~E.g[T];return new a(w,~E.h).add(v)}t.abs=function(){return N(this)?D(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),w=[],T=0,C=0;C<=y;C++){var S=T+(this.i(C)&65535)+(E.i(C)&65535),_=(S>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);T=_>>>16,S&=65535,_&=65535,w[C]=_<<16|S}return new a(w,w[w.length-1]&-2147483648?-1:0)};function I(E,y){return E.add(D(y))}t.j=function(E){if(P(this)||P(E))return g;if(N(this))return N(E)?D(this).j(D(E)):D(D(this).j(E));if(N(E))return D(this.j(D(E)));if(0>this.l(A)&&0>E.l(A))return h(this.m()*E.m());for(var y=this.g.length+E.g.length,w=[],T=0;T<2*y;T++)w[T]=0;for(T=0;T<this.g.length;T++)for(var C=0;C<E.g.length;C++){var S=this.i(T)>>>16,_=this.i(T)&65535,se=E.i(C)>>>16,_e=E.i(C)&65535;w[2*T+2*C]+=_*_e,x(w,2*T+2*C),w[2*T+2*C+1]+=S*_e,x(w,2*T+2*C+1),w[2*T+2*C+1]+=_*se,x(w,2*T+2*C+1),w[2*T+2*C+2]+=S*se,x(w,2*T+2*C+2)}for(T=0;T<y;T++)w[T]=w[2*T+1]<<16|w[2*T];for(T=y;T<2*y;T++)w[T]=0;return new a(w,0)};function x(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function k(E,y){this.g=E,this.h=y}function b(E,y){if(P(y))throw Error("division by zero");if(P(E))return new k(g,g);if(N(E))return y=b(D(E),y),new k(D(y.g),D(y.h));if(N(y))return y=b(E,D(y)),new k(D(y.g),y.h);if(30<E.g.length){if(N(E)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var w=v,T=y;0>=T.l(E);)w=U(w),T=U(T);var C=z(w,1),S=z(T,1);for(T=z(T,2),w=z(w,2);!P(T);){var _=S.add(T);0>=_.l(E)&&(C=C.add(w),S=_),T=z(T,1),w=z(w,1)}return y=I(E,C.j(y)),new k(C,y)}for(C=g;0<=E.l(y);){for(w=Math.max(1,Math.floor(E.m()/y.m())),T=Math.ceil(Math.log(w)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=h(w),_=S.j(y);N(_)||0<_.l(E);)w-=T,S=h(w),_=S.j(y);P(S)&&(S=v),C=C.add(S),E=I(E,_)}return new k(C,E)}t.A=function(E){return b(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),w=[],T=0;T<y;T++)w[T]=this.i(T)&E.i(T);return new a(w,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),w=[],T=0;T<y;T++)w[T]=this.i(T)|E.i(T);return new a(w,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),w=[],T=0;T<y;T++)w[T]=this.i(T)^E.i(T);return new a(w,this.h^E.h)};function U(E){for(var y=E.g.length+1,w=[],T=0;T<y;T++)w[T]=E.i(T)<<1|E.i(T-1)>>>31;return new a(w,E.h)}function z(E,y){var w=y>>5;y%=32;for(var T=E.g.length-w,C=[],S=0;S<T;S++)C[S]=0<y?E.i(S+w)>>>y|E.i(S+w+1)<<32-y:E.i(S+w);return new a(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ev=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,pr=a}).apply(typeof jp<"u"?jp:typeof self<"u"?self:typeof window<"u"?window:{});var Go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tv,di,nv,ca,Ac,rv,sv,iv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,d){return o==Array.prototype||o==Object.prototype||(o[c]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Go=="object"&&Go];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)e:{var d=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var R=o[m];if(!(R in d))break e;d=d[R]}o=o[o.length-1],m=d[o],c=c(m),c!=m&&c!=null&&e(d,o,{configurable:!0,writable:!0,value:c})}}function i(o,c){o instanceof String&&(o+="");var d=0,m=!1,R={next:function(){if(!m&&d<o.length){var V=d++;return{value:c(V,o[V]),done:!1}}return m=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(o){return o||function(){return i(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function f(o,c,d){return o.call.apply(o.bind,arguments)}function g(o,c,d){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,m),o.apply(c,R)}}return function(){return o.apply(c,arguments)}}function v(o,c,d){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,v.apply(null,arguments)}function A(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function P(o,c){function d(){}d.prototype=c.prototype,o.aa=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(m,R,V){for(var B=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)B[Te-2]=arguments[Te];return c.prototype[R].apply(m,B)}}function N(o){const c=o.length;if(0<c){const d=Array(c);for(let m=0;m<c;m++)d[m]=o[m];return d}return[]}function D(o,c){for(let d=1;d<arguments.length;d++){const m=arguments[d];if(u(m)){const R=o.length||0,V=m.length||0;o.length=R+V;for(let B=0;B<V;B++)o[R+B]=m[B]}else o.push(m)}}class I{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function x(o){return/^[\s\xa0]*$/.test(o)}function k(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function b(o){return b[" "](o),o}b[" "]=function(){};var U=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function z(o,c,d){for(const m in o)c.call(d,o[m],m,o)}function E(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function y(o){const c={};for(const d in o)c[d]=o[d];return c}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,c){let d,m;for(let R=1;R<arguments.length;R++){m=arguments[R];for(d in m)o[d]=m[d];for(let V=0;V<w.length;V++)d=w[V],Object.prototype.hasOwnProperty.call(m,d)&&(o[d]=m[d])}}function C(o){var c=1;o=o.split(":");const d=[];for(;0<c&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function S(o){l.setTimeout(()=>{throw o},0)}function _(){var o=K;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class se{constructor(){this.h=this.g=null}add(c,d){const m=_e.get();m.set(c,d),this.h?this.h.next=m:this.g=m,this.h=m}}var _e=new I(()=>new Se,o=>o.reset());class Se{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,$=!1,K=new se,q=()=>{const o=l.Promise.resolve(void 0);Me=()=>{o.then(Y)}};var Y=()=>{for(var o;o=_();){try{o.h.call(o.g)}catch(d){S(d)}var c=_e;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}$=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return o}();function ee(o,c){if(fe.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(U){e:{try{b(c.nodeName);var R=!0;break e}catch{}R=!1}R||(c=null)}}else d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement);this.relatedTarget=c,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:me[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&ee.aa.h.call(this)}}P(ee,fe);var me={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Re="closure_listenable_"+(1e6*Math.random()|0),Qt=0;function Al(o,c,d,m,R){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!m,this.ha=R,this.key=++Qt,this.da=this.fa=!1}function kr(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function er(o){this.src=o,this.g={},this.h=0}er.prototype.add=function(o,c,d,m,R){var V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);var B=Rr(o,c,m,R);return-1<B?(c=o[B],d||(c.fa=!1)):(c=new Al(c,this.src,V,!!m,R),c.fa=d,o.push(c)),c};function bs(o,c){var d=c.type;if(d in o.g){var m=o.g[d],R=Array.prototype.indexOf.call(m,c,void 0),V;(V=0<=R)&&Array.prototype.splice.call(m,R,1),V&&(kr(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Rr(o,c,d,m){for(var R=0;R<o.length;++R){var V=o[R];if(!V.da&&V.listener==c&&V.capture==!!d&&V.ha==m)return R}return-1}var Ds="closure_lm_"+(1e6*Math.random()|0),Ls={};function fo(o,c,d,m,R){if(Array.isArray(c)){for(var V=0;V<c.length;V++)fo(o,c[V],d,m,R);return null}return d=ie(d),o&&o[Re]?o.K(c,d,h(m)?!!m.capture:!1,R):Cl(o,c,d,!1,m,R)}function Cl(o,c,d,m,R,V){if(!c)throw Error("Invalid event type");var B=h(R)?!!R.capture:!!R,Te=Nr(o);if(Te||(o[Ds]=Te=new er(o)),d=Te.add(c,d,m,B,V),d.proxy)return d;if(m=Os(),d.proxy=m,m.src=o,m.listener=d,o.addEventListener)j||(R=B),R===void 0&&(R=!1),o.addEventListener(c.toString(),m,R);else if(o.attachEvent)o.attachEvent(Ms(c.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Os(){function o(d){return c.call(o.src,o.listener,d)}const c=po;return o}function js(o,c,d,m,R){if(Array.isArray(c))for(var V=0;V<c.length;V++)js(o,c[V],d,m,R);else m=h(m)?!!m.capture:!!m,d=ie(d),o&&o[Re]?(o=o.i,c=String(c).toString(),c in o.g&&(V=o.g[c],d=Rr(V,d,m,R),-1<d&&(kr(V[d]),Array.prototype.splice.call(V,d,1),V.length==0&&(delete o.g[c],o.h--)))):o&&(o=Nr(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Rr(c,d,m,R)),(d=-1<o?c[o]:null)&&Pr(d))}function Pr(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Re])bs(c.i,o);else{var d=o.type,m=o.proxy;c.removeEventListener?c.removeEventListener(d,m,o.capture):c.detachEvent?c.detachEvent(Ms(d),m):c.addListener&&c.removeListener&&c.removeListener(m),(d=Nr(c))?(bs(d,o),d.h==0&&(d.src=null,c[Ds]=null)):kr(o)}}}function Ms(o){return o in Ls?Ls[o]:Ls[o]="on"+o}function po(o,c){if(o.da)o=!0;else{c=new ee(c,this);var d=o.listener,m=o.ha||o.src;o.fa&&Pr(o),o=d.call(m,c)}return o}function Nr(o){return o=o[Ds],o instanceof er?o:null}var L="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(o){return typeof o=="function"?o:(o[L]||(o[L]=function(c){return o.handleEvent(c)}),o[L])}function re(){G.call(this),this.i=new er(this),this.M=this,this.F=null}P(re,G),re.prototype[Re]=!0,re.prototype.removeEventListener=function(o,c,d,m){js(this,o,c,d,m)};function ce(o,c){var d,m=o.F;if(m)for(d=[];m;m=m.F)d.push(m);if(o=o.M,m=c.type||c,typeof c=="string")c=new fe(c,o);else if(c instanceof fe)c.target=c.target||o;else{var R=c;c=new fe(m,o),T(c,R)}if(R=!0,d)for(var V=d.length-1;0<=V;V--){var B=c.g=d[V];R=Vr(B,m,!0,c)&&R}if(B=c.g=o,R=Vr(B,m,!0,c)&&R,R=Vr(B,m,!1,c)&&R,d)for(V=0;V<d.length;V++)B=c.g=d[V],R=Vr(B,m,!1,c)&&R}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var d=o.g[c],m=0;m<d.length;m++)kr(d[m]);delete o.g[c],o.h--}}this.F=null},re.prototype.K=function(o,c,d,m){return this.i.add(String(o),c,!1,d,m)},re.prototype.L=function(o,c,d,m){return this.i.add(String(o),c,!0,d,m)};function Vr(o,c,d,m){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var R=!0,V=0;V<c.length;++V){var B=c[V];if(B&&!B.da&&B.capture==d){var Te=B.listener,Ye=B.ha||B.src;B.fa&&bs(o.i,B),R=Te.call(Ye,m)!==!1&&R}}return R&&!m.defaultPrevented}function Fs(o,c,d){if(typeof o=="function")d&&(o=v(o,d));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function br(o){o.g=Fs(()=>{o.g=null,o.i&&(o.i=!1,br(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class _0 extends G{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:br(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(o){G.call(this),this.h=o,this.g={}}P(Us,G);var wd=[];function Ed(o){z(o.g,function(c,d){this.g.hasOwnProperty(d)&&Pr(c)},o),o.g={}}Us.prototype.N=function(){Us.aa.N.call(this),Ed(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kl=l.JSON.stringify,w0=l.JSON.parse,E0=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Rl(){}Rl.prototype.h=null;function xd(o){return o.h||(o.h=o.i())}function Td(){}var zs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pl(){fe.call(this,"d")}P(Pl,fe);function Nl(){fe.call(this,"c")}P(Nl,fe);var tr={},Id=null;function mo(){return Id=Id||new re}tr.La="serverreachability";function Sd(o){fe.call(this,tr.La,o)}P(Sd,fe);function Bs(o){const c=mo();ce(c,new Sd(c))}tr.STAT_EVENT="statevent";function Ad(o,c){fe.call(this,tr.STAT_EVENT,o),this.stat=c}P(Ad,fe);function ft(o){const c=mo();ce(c,new Ad(c,o))}tr.Ma="timingevent";function Cd(o,c){fe.call(this,tr.Ma,o),this.size=c}P(Cd,fe);function $s(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Hs(){this.g=!0}Hs.prototype.xa=function(){this.g=!1};function x0(o,c,d,m,R,V){o.info(function(){if(o.g)if(V)for(var B="",Te=V.split("&"),Ye=0;Ye<Te.length;Ye++){var ge=Te[Ye].split("=");if(1<ge.length){var st=ge[0];ge=ge[1];var it=st.split("_");B=2<=it.length&&it[1]=="type"?B+(st+"="+ge+"&"):B+(st+"=redacted&")}}else B=null;else B=V;return"XMLHTTP REQ ("+m+") [attempt "+R+"]: "+c+`
`+d+`
`+B})}function T0(o,c,d,m,R,V,B){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+R+"]: "+c+`
`+d+`
`+V+" "+B})}function Dr(o,c,d,m){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+S0(o,d)+(m?" "+m:"")})}function I0(o,c){o.info(function(){return"TIMEOUT: "+c})}Hs.prototype.info=function(){};function S0(o,c){if(!o.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var m=d[o];if(!(2>m.length)){var R=m[1];if(Array.isArray(R)&&!(1>R.length)){var V=R[0];if(V!="noop"&&V!="stop"&&V!="close")for(var B=1;B<R.length;B++)R[B]=""}}}}return kl(d)}catch{return c}}var go={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vl;function yo(){}P(yo,Rl),yo.prototype.g=function(){return new XMLHttpRequest},yo.prototype.i=function(){return{}},Vl=new yo;function Tn(o,c,d,m){this.j=o,this.i=c,this.l=d,this.R=m||1,this.U=new Us(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rd}function Rd(){this.i=null,this.g="",this.h=!1}var Pd={},bl={};function Dl(o,c,d){o.L=1,o.v=Eo(sn(c)),o.m=d,o.P=!0,Nd(o,null)}function Nd(o,c){o.F=Date.now(),vo(o),o.A=sn(o.v);var d=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),Wd(d.i,"t",m),o.C=0,d=o.j.J,o.h=new Rd,o.g=cf(o.j,d?c:null,!o.m),0<o.O&&(o.M=new _0(v(o.Y,o,o.g),o.O)),c=o.U,d=o.g,m=o.ca;var R="readystatechange";Array.isArray(R)||(R&&(wd[0]=R.toString()),R=wd);for(var V=0;V<R.length;V++){var B=fo(d,R[V],m||c.handleEvent,!1,c.h||c);if(!B)break;c.g[B.key]=B}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Bs(),x0(o.i,o.u,o.A,o.l,o.R,o.m)}Tn.prototype.ca=function(o){o=o.target;const c=this.M;c&&on(o)==3?c.j():this.Y(o)},Tn.prototype.Y=function(o){try{if(o==this.g)e:{const it=on(this.g);var c=this.g.Ba();const jr=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||Jd(this.g)))){this.J||it!=4||c==7||(c==8||0>=jr?Bs(3):Bs(2)),Ll(this);var d=this.g.Z();this.X=d;t:if(Vd(this)){var m=Jd(this.g);o="";var R=m.length,V=on(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nr(this),Ws(this);var B="";break t}this.h.i=new l.TextDecoder}for(c=0;c<R;c++)this.h.h=!0,o+=this.h.i.decode(m[c],{stream:!(V&&c==R-1)});m.length=0,this.h.g+=o,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=d==200,T0(this.i,this.u,this.A,this.l,this.R,it,d),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,Ye=this.g;if((Te=Ye.g?Ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Te)){var ge=Te;break t}}ge=null}if(d=ge)Dr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ol(this,d);else{this.o=!1,this.s=3,ft(12),nr(this),Ws(this);break e}}if(this.P){d=!0;let Ft;for(;!this.J&&this.C<B.length;)if(Ft=A0(this,B),Ft==bl){it==4&&(this.s=4,ft(14),d=!1),Dr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==Pd){this.s=4,ft(15),Dr(this.i,this.l,B,"[Invalid Chunk]"),d=!1;break}else Dr(this.i,this.l,Ft,null),Ol(this,Ft);if(Vd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||B.length!=0||this.h.h||(this.s=1,ft(16),d=!1),this.o=this.o&&d,!d)Dr(this.i,this.l,B,"[Invalid Chunked Response]"),nr(this),Ws(this);else if(0<B.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Bl(st),st.M=!0,ft(11))}}else Dr(this.i,this.l,B,null),Ol(this,B);it==4&&nr(this),this.o&&!this.J&&(it==4?of(this.j,this):(this.o=!1,vo(this)))}else $0(this.g),d==400&&0<B.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),nr(this),Ws(this)}}}catch{}finally{}};function Vd(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function A0(o,c){var d=o.C,m=c.indexOf(`
`,d);return m==-1?bl:(d=Number(c.substring(d,m)),isNaN(d)?Pd:(m+=1,m+d>c.length?bl:(c=c.slice(m,m+d),o.C=m+d,c)))}Tn.prototype.cancel=function(){this.J=!0,nr(this)};function vo(o){o.S=Date.now()+o.I,bd(o,o.I)}function bd(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=$s(v(o.ba,o),c)}function Ll(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Tn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(I0(this.i,this.A),this.L!=2&&(Bs(),ft(17)),nr(this),this.s=2,Ws(this)):bd(this,this.S-o)};function Ws(o){o.j.G==0||o.J||of(o.j,o)}function nr(o){Ll(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Ed(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Ol(o,c){try{var d=o.j;if(d.G!=0&&(d.g==o||jl(d.h,o))){if(!o.K&&jl(d.h,o)&&d.G==3){try{var m=d.Da.g.parse(c)}catch{m=null}if(Array.isArray(m)&&m.length==3){var R=m;if(R[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)Co(d),So(d);else break e;zl(d),ft(18)}}else d.za=R[1],0<d.za-d.T&&37500>R[2]&&d.F&&d.v==0&&!d.C&&(d.C=$s(v(d.Za,d),6e3));if(1>=Od(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else sr(d,11)}else if((o.K||d.g==o)&&Co(d),!x(c))for(R=d.Da.g.parse(c),c=0;c<R.length;c++){let ge=R[c];if(d.T=ge[0],ge=ge[1],d.G==2)if(ge[0]=="c"){d.K=ge[1],d.ia=ge[2];const st=ge[3];st!=null&&(d.la=st,d.j.info("VER="+d.la));const it=ge[4];it!=null&&(d.Aa=it,d.j.info("SVER="+d.Aa));const jr=ge[5];jr!=null&&typeof jr=="number"&&0<jr&&(m=1.5*jr,d.L=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const Ft=o.g;if(Ft){const Ro=Ft.g?Ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ro){var V=m.h;V.g||Ro.indexOf("spdy")==-1&&Ro.indexOf("quic")==-1&&Ro.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Ml(V,V.h),V.h=null))}if(m.D){const $l=Ft.g?Ft.g.getResponseHeader("X-HTTP-Session-Id"):null;$l&&(m.ya=$l,Ae(m.I,m.D,$l))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),m=d;var B=o;if(m.qa=uf(m,m.J?m.ia:null,m.W),B.K){jd(m.h,B);var Te=B,Ye=m.L;Ye&&(Te.I=Ye),Te.B&&(Ll(Te),vo(Te)),m.g=B}else rf(m);0<d.i.length&&Ao(d)}else ge[0]!="stop"&&ge[0]!="close"||sr(d,7);else d.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?sr(d,7):Ul(d):ge[0]!="noop"&&d.l&&d.l.ta(ge),d.v=0)}}Bs(4)}catch{}}var C0=class{constructor(o,c){this.g=o,this.map=c}};function Dd(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ld(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Od(o){return o.h?1:o.g?o.g.size:0}function jl(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Ml(o,c){o.g?o.g.add(c):o.h=c}function jd(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Dd.prototype.cancel=function(){if(this.i=Md(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Md(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.D);return c}return N(o.i)}function k0(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],d=o.length,m=0;m<d;m++)c.push(o[m]);return c}c=[],d=0;for(m in o)c[d++]=o[m];return c}function R0(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var d=0;d<o;d++)c.push(d);return c}c=[],d=0;for(const m in o)c[d++]=m;return c}}}function Fd(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var d=R0(o),m=k0(o),R=m.length,V=0;V<R;V++)c.call(void 0,m[V],d&&d[V],o)}var Ud=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function P0(o,c){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var m=o[d].indexOf("="),R=null;if(0<=m){var V=o[d].substring(0,m);R=o[d].substring(m+1)}else V=o[d];c(V,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function rr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof rr){this.h=o.h,_o(this,o.j),this.o=o.o,this.g=o.g,wo(this,o.s),this.l=o.l;var c=o.i,d=new Qs;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),zd(this,d),this.m=o.m}else o&&(c=String(o).match(Ud))?(this.h=!1,_o(this,c[1]||"",!0),this.o=qs(c[2]||""),this.g=qs(c[3]||"",!0),wo(this,c[4]),this.l=qs(c[5]||"",!0),zd(this,c[6]||"",!0),this.m=qs(c[7]||"")):(this.h=!1,this.i=new Qs(null,this.h))}rr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Gs(c,Bd,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Gs(c,Bd,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Gs(d,d.charAt(0)=="/"?b0:V0,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Gs(d,L0)),o.join("")};function sn(o){return new rr(o)}function _o(o,c,d){o.j=d?qs(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function wo(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function zd(o,c,d){c instanceof Qs?(o.i=c,O0(o.i,o.h)):(d||(c=Gs(c,D0)),o.i=new Qs(c,o.h))}function Ae(o,c,d){o.i.set(c,d)}function Eo(o){return Ae(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function qs(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Gs(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,N0),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function N0(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Bd=/[#\/\?@]/g,V0=/[#\?:]/g,b0=/[#\?]/g,D0=/[#\?@]/g,L0=/#/g;function Qs(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function In(o){o.g||(o.g=new Map,o.h=0,o.i&&P0(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=Qs.prototype,t.add=function(o,c){In(this),this.i=null,o=Lr(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function $d(o,c){In(o),c=Lr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Hd(o,c){return In(o),c=Lr(o,c),o.g.has(c)}t.forEach=function(o,c){In(this),this.g.forEach(function(d,m){d.forEach(function(R){o.call(c,R,m,this)},this)},this)},t.na=function(){In(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let m=0;m<c.length;m++){const R=o[m];for(let V=0;V<R.length;V++)d.push(c[m])}return d},t.V=function(o){In(this);let c=[];if(typeof o=="string")Hd(this,o)&&(c=c.concat(this.g.get(Lr(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)c=c.concat(o[d])}return c},t.set=function(o,c){return In(this),this.i=null,o=Lr(this,o),Hd(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Wd(o,c,d){$d(o,c),0<d.length&&(o.i=null,o.g.set(Lr(o,c),N(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var m=c[d];const V=encodeURIComponent(String(m)),B=this.V(m);for(m=0;m<B.length;m++){var R=V;B[m]!==""&&(R+="="+encodeURIComponent(String(B[m]))),o.push(R)}}return this.i=o.join("&")};function Lr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function O0(o,c){c&&!o.j&&(In(o),o.i=null,o.g.forEach(function(d,m){var R=m.toLowerCase();m!=R&&($d(this,m),Wd(this,R,d))},o)),o.j=c}function j0(o,c){const d=new Hs;if(l.Image){const m=new Image;m.onload=A(Sn,d,"TestLoadImage: loaded",!0,c,m),m.onerror=A(Sn,d,"TestLoadImage: error",!1,c,m),m.onabort=A(Sn,d,"TestLoadImage: abort",!1,c,m),m.ontimeout=A(Sn,d,"TestLoadImage: timeout",!1,c,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else c(!1)}function M0(o,c){const d=new Hs,m=new AbortController,R=setTimeout(()=>{m.abort(),Sn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:m.signal}).then(V=>{clearTimeout(R),V.ok?Sn(d,"TestPingServer: ok",!0,c):Sn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(R),Sn(d,"TestPingServer: error",!1,c)})}function Sn(o,c,d,m,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),m(d)}catch{}}function F0(){this.g=new E0}function U0(o,c,d){const m=d||"";try{Fd(o,function(R,V){let B=R;h(R)&&(B=kl(R)),c.push(m+V+"="+encodeURIComponent(B))})}catch(R){throw c.push(m+"type="+encodeURIComponent("_badmap")),R}}function xo(o){this.l=o.Ub||null,this.j=o.eb||!1}P(xo,Rl),xo.prototype.g=function(){return new To(this.l,this.j)},xo.prototype.i=function(o){return function(){return o}}({});function To(o,c){re.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(To,re),t=To.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Ys(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ks(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ys(this)),this.g&&(this.readyState=3,Ys(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qd(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function qd(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Ks(this):Ys(this),this.readyState==3&&qd(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Ks(this))},t.Qa=function(o){this.g&&(this.response=o,Ks(this))},t.ga=function(){this.g&&Ks(this)};function Ks(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ys(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function Ys(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(To.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Gd(o){let c="";return z(o,function(d,m){c+=m,c+=":",c+=d,c+=`\r
`}),c}function Fl(o,c,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=Gd(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):Ae(o,c,d))}function Le(o){re.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Le,re);var z0=/^https?$/i,B0=["POST","PUT"];t=Le.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vl.g(),this.v=this.o?xd(this.o):xd(Vl),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(V){Qd(this,V);return}if(o=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var R in m)d.set(R,m[R]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const V of m.keys())d.set(V,m.get(V));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(V=>V.toLowerCase()=="content-type"),R=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(B0,c,void 0))||m||R||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,B]of d)this.g.setRequestHeader(V,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xd(this),this.u=!0,this.g.send(o),this.u=!1}catch(V){Qd(this,V)}};function Qd(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Kd(o),Io(o)}function Kd(o){o.A||(o.A=!0,ce(o,"complete"),ce(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ce(this,"complete"),ce(this,"abort"),Io(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Io(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Yd(this):this.bb())},t.bb=function(){Yd(this)};function Yd(o){if(o.h&&typeof a<"u"&&(!o.v[1]||on(o)!=4||o.Z()!=2)){if(o.u&&on(o)==4)Fs(o.Ea,0,o);else if(ce(o,"readystatechange"),on(o)==4){o.h=!1;try{const B=o.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var m;if(m=B===0){var R=String(o.D).match(Ud)[1]||null;!R&&l.self&&l.self.location&&(R=l.self.location.protocol.slice(0,-1)),m=!z0.test(R?R.toLowerCase():"")}d=m}if(d)ce(o,"complete"),ce(o,"success");else{o.m=6;try{var V=2<on(o)?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.Z()+"]",Kd(o)}}finally{Io(o)}}}}function Io(o,c){if(o.g){Xd(o);const d=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||ce(o,"ready");try{d.onreadystatechange=m}catch{}}}function Xd(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function on(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<on(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),w0(c)}};function Jd(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function $0(o){const c={};o=(o.g&&2<=on(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(x(o[m]))continue;var d=C(o[m]);const R=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const V=c[R]||[];c[R]=V,V.push(d)}E(c,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xs(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function Zd(o){this.Aa=0,this.i=[],this.j=new Hs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xs("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xs("baseRetryDelayMs",5e3,o),this.cb=Xs("retryDelaySeedMs",1e4,o),this.Wa=Xs("forwardChannelMaxRetries",2,o),this.wa=Xs("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Dd(o&&o.concurrentRequestLimit),this.Da=new F0,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zd.prototype,t.la=8,t.G=1,t.connect=function(o,c,d,m){ft(0),this.W=o,this.H=c||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.I=uf(this,null,this.W),Ao(this)};function Ul(o){if(ef(o),o.G==3){var c=o.U++,d=sn(o.I);if(Ae(d,"SID",o.K),Ae(d,"RID",c),Ae(d,"TYPE","terminate"),Js(o,d),c=new Tn(o,o.j,c),c.L=2,c.v=Eo(sn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=cf(c.j,null),c.g.ea(c.v)),c.F=Date.now(),vo(c)}lf(o)}function So(o){o.g&&(Bl(o),o.g.cancel(),o.g=null)}function ef(o){So(o),o.u&&(l.clearTimeout(o.u),o.u=null),Co(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Ao(o){if(!Ld(o.h)&&!o.s){o.s=!0;var c=o.Ga;Me||q(),$||(Me(),$=!0),K.add(c,o),o.B=0}}function H0(o,c){return Od(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=$s(v(o.Ga,o,c),af(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const R=new Tn(this,this.j,o);let V=this.o;if(this.S&&(V?(V=y(V),T(V,this.S)):V=this.S),this.m!==null||this.O||(R.H=V,V=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(c+=m,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=nf(this,R,c),d=sn(this.I),Ae(d,"RID",o),Ae(d,"CVER",22),this.D&&Ae(d,"X-HTTP-Session-Id",this.D),Js(this,d),V&&(this.O?c="headers="+encodeURIComponent(String(Gd(V)))+"&"+c:this.m&&Fl(d,this.m,V)),Ml(this.h,R),this.Ua&&Ae(d,"TYPE","init"),this.P?(Ae(d,"$req",c),Ae(d,"SID","null"),R.T=!0,Dl(R,d,null)):Dl(R,d,c),this.G=2}}else this.G==3&&(o?tf(this,o):this.i.length==0||Ld(this.h)||tf(this))};function tf(o,c){var d;c?d=c.l:d=o.U++;const m=sn(o.I);Ae(m,"SID",o.K),Ae(m,"RID",d),Ae(m,"AID",o.T),Js(o,m),o.m&&o.o&&Fl(m,o.m,o.o),d=new Tn(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),c&&(o.i=c.D.concat(o.i)),c=nf(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Ml(o.h,d),Dl(d,m,c)}function Js(o,c){o.H&&z(o.H,function(d,m){Ae(c,m,d)}),o.l&&Fd({},function(d,m){Ae(c,m,d)})}function nf(o,c,d){d=Math.min(o.i.length,d);var m=o.l?v(o.l.Na,o.l,o):null;e:{var R=o.i;let V=-1;for(;;){const B=["count="+d];V==-1?0<d?(V=R[0].g,B.push("ofs="+V)):V=0:B.push("ofs="+V);let Te=!0;for(let Ye=0;Ye<d;Ye++){let ge=R[Ye].g;const st=R[Ye].map;if(ge-=V,0>ge)V=Math.max(0,R[Ye].g-100),Te=!1;else try{U0(st,B,"req"+ge+"_")}catch{m&&m(st)}}if(Te){m=B.join("&");break e}}}return o=o.i.splice(0,d),c.D=o,m}function rf(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;Me||q(),$||(Me(),$=!0),K.add(c,o),o.v=0}}function zl(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=$s(v(o.Fa,o),af(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,sf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=$s(v(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),So(this),sf(this))};function Bl(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function sf(o){o.g=new Tn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=sn(o.qa);Ae(c,"RID","rpc"),Ae(c,"SID",o.K),Ae(c,"AID",o.T),Ae(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ae(c,"TO",o.ja),Ae(c,"TYPE","xmlhttp"),Js(o,c),o.m&&o.o&&Fl(c,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Eo(sn(c)),d.m=null,d.P=!0,Nd(d,o)}t.Za=function(){this.C!=null&&(this.C=null,So(this),zl(this),ft(19))};function Co(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function of(o,c){var d=null;if(o.g==c){Co(o),Bl(o),o.g=null;var m=2}else if(jl(o.h,c))d=c.D,jd(o.h,c),m=1;else return;if(o.G!=0){if(c.o)if(m==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var R=o.B;m=mo(),ce(m,new Cd(m,d)),Ao(o)}else rf(o);else if(R=c.s,R==3||R==0&&0<c.X||!(m==1&&H0(o,c)||m==2&&zl(o)))switch(d&&0<d.length&&(c=o.h,c.i=c.i.concat(d)),R){case 1:sr(o,5);break;case 4:sr(o,10);break;case 3:sr(o,6);break;default:sr(o,2)}}}function af(o,c){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*c}function sr(o,c){if(o.j.info("Error code "+c),c==2){var d=v(o.fb,o),m=o.Xa;const R=!m;m=new rr(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||_o(m,"https"),Eo(m),R?j0(m.toString(),d):M0(m.toString(),d)}else ft(2);o.G=0,o.l&&o.l.sa(c),lf(o),ef(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function lf(o){if(o.G=0,o.ka=[],o.l){const c=Md(o.h);(c.length!=0||o.i.length!=0)&&(D(o.ka,c),D(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function uf(o,c,d){var m=d instanceof rr?sn(d):new rr(d);if(m.g!="")c&&(m.g=c+"."+m.g),wo(m,m.s);else{var R=l.location;m=R.protocol,c=c?c+"."+R.hostname:R.hostname,R=+R.port;var V=new rr(null);m&&_o(V,m),c&&(V.g=c),R&&wo(V,R),d&&(V.l=d),m=V}return d=o.D,c=o.ya,d&&c&&Ae(m,d,c),Ae(m,"VER",o.la),Js(o,m),m}function cf(o,c,d){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Le(new xo({eb:d})):new Le(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hf(){}t=hf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ko(){}ko.prototype.g=function(o,c){return new Tt(o,c)};function Tt(o,c){re.call(this),this.g=new Zd(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!x(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!x(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Or(this)}P(Tt,re),Tt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tt.prototype.close=function(){Ul(this.g)},Tt.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=kl(o),o=d);c.i.push(new C0(c.Ya++,o)),c.G==3&&Ao(c)},Tt.prototype.N=function(){this.g.l=null,delete this.j,Ul(this.g),delete this.g,Tt.aa.N.call(this)};function df(o){Pl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const d in c){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}P(df,Pl);function ff(){Nl.call(this),this.status=1}P(ff,Nl);function Or(o){this.g=o}P(Or,hf),Or.prototype.ua=function(){ce(this.g,"a")},Or.prototype.ta=function(o){ce(this.g,new df(o))},Or.prototype.sa=function(o){ce(this.g,new ff)},Or.prototype.ra=function(){ce(this.g,"b")},ko.prototype.createWebChannel=ko.prototype.g,Tt.prototype.send=Tt.prototype.o,Tt.prototype.open=Tt.prototype.m,Tt.prototype.close=Tt.prototype.close,iv=function(){return new ko},sv=function(){return mo()},rv=tr,Ac={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},go.NO_ERROR=0,go.TIMEOUT=8,go.HTTP_ERROR=6,ca=go,kd.COMPLETE="complete",nv=kd,Td.EventType=zs,zs.OPEN="a",zs.CLOSE="b",zs.ERROR="c",zs.MESSAGE="d",re.prototype.listen=re.prototype.K,di=Td,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,tv=Le}).apply(typeof Go<"u"?Go:typeof self<"u"?self:typeof window<"u"?window:{});const Mp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new jh("@firebase/firestore");function ai(){return wr.logLevel}function W(t,...e){if(wr.logLevel<=de.DEBUG){const n=e.map($h);wr.debug(`Firestore (${Rs}): ${t}`,...n)}}function wn(t,...e){if(wr.logLevel<=de.ERROR){const n=e.map($h);wr.error(`Firestore (${Rs}): ${t}`,...n)}}function _s(t,...e){if(wr.logLevel<=de.WARN){const n=e.map($h);wr.warn(`Firestore (${Rs}): ${t}`,...n)}}function $h(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${Rs}) INTERNAL ASSERTION FAILED: `+t;throw wn(e),new Error(e)}function Ee(t,e){t||Z()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}}class Mx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Fx{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new $n;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new $n,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new $n)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new ov(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new ut(e)}}class Ux{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class zx{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Ux(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $x{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ee(this.o===void 0);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string"),this.R=n.token,new Bx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Hx(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function ws(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new qe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new qe(0,0))}static max(){return new te(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class je extends Gi{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new je(n)}static emptyPath(){return new je([])}}const Wx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends Gi{construct(e,n,r){return new Ze(e,n,r)}static isValidIdentifier(e){return Wx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ze(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new X(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new X(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new X(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(je.fromString(e))}static fromName(e){return new J(je.fromString(e).popFirst(5))}static empty(){return new J(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new je(e.slice()))}}function qx(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=te.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new Qn(s,J.empty(),e)}function Gx(t){return new Qn(t.readTime,t.key,-1)}class Qn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qn(te.min(),J.empty(),-1)}static max(){return new Qn(te.max(),J.empty(),-1)}}function Qx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==Kx)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(s=>s?O.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new O((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(f=>{a[h]=f,++l,l===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new O((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Xx(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ao(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Hh.oe=-1;function gl(t){return t==null}function Ba(t){return t===0&&1/t==-1/0}function Jx(t){return typeof t=="number"&&Number.isInteger(t)&&!Ba(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ps(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qo(this.root,e,this.comparator,!0)}}class Qo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Up(this.data.getIterator())}getIteratorFrom(e){return new Up(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tt(this.comparator);return n.data=e,n}}class Up{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new tt(Ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ws(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new uv("Invalid base64 string: "+i):i}}(e);return new rt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const Zx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kn(t){if(Ee(!!t),typeof t=="string"){let e=0;const n=Zx.exec(t);if(Ee(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Er(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function qh(t){const e=t.mapValue.fields.__previous_value__;return Wh(e)?qh(e):e}function Qi(t){const e=Kn(t.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n,r,s,i,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class Ki{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ki("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ki&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko={mapValue:{}};function xr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wh(t)?4:nT(t)?9007199254740991:tT(t)?10:11:Z()}function nn(t,e){if(t===e)return!0;const n=xr(t);if(n!==xr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qi(t).isEqual(Qi(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Kn(s.timestampValue),l=Kn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Er(s.bytesValue).isEqual(Er(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Fe(s.doubleValue),l=Fe(i.doubleValue);return a===l?Ba(a)===Ba(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ws(t.arrayValue.values||[],e.arrayValue.values||[],nn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Fp(a)!==Fp(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!nn(a[u],l[u])))return!1;return!0}(t,e);default:return Z()}}function Yi(t,e){return(t.values||[]).find(n=>nn(n,e))!==void 0}function Es(t,e){if(t===e)return 0;const n=xr(t),r=xr(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Fe(i.integerValue||i.doubleValue),u=Fe(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return zp(t.timestampValue,e.timestampValue);case 4:return zp(Qi(t),Qi(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Er(i),u=Er(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=ve(l[h],u[h]);if(f!==0)return f}return ve(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ve(Fe(i.latitude),Fe(a.latitude));return l!==0?l:ve(Fe(i.longitude),Fe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Bp(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,u,h,f;const g=i.fields||{},v=a.fields||{},A=(l=g.value)===null||l===void 0?void 0:l.arrayValue,P=(u=v.value)===null||u===void 0?void 0:u.arrayValue,N=ve(((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0,((f=P==null?void 0:P.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:Bp(A,P)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Ko.mapValue&&a===Ko.mapValue)return 0;if(i===Ko.mapValue)return 1;if(a===Ko.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=a.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const v=ve(u[g],f[g]);if(v!==0)return v;const A=Es(l[u[g]],h[f[g]]);if(A!==0)return A}return ve(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Z()}}function zp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=Kn(t),r=Kn(e),s=ve(n.seconds,r.seconds);return s!==0?s:ve(n.nanos,r.nanos)}function Bp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Es(n[s],r[s]);if(i)return i}return ve(n.length,r.length)}function xs(t){return Cc(t)}function Cc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Kn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Er(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Cc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Cc(n.fields[a])}`;return s+"}"}(t.mapValue):Z()}function kc(t){return!!t&&"integerValue"in t}function Gh(t){return!!t&&"arrayValue"in t}function $p(t){return!!t&&"nullValue"in t}function Hp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ha(t){return!!t&&"mapValue"in t}function tT(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ii(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ps(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ii(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ii(t.arrayValue.values[n]);return e}return Object.assign({},t)}function nT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.value=e}static empty(){return new Vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ha(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ii(n)}setAll(e){let n=Ze.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Ii(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ha(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ha(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ps(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Vt(Ii(this.value))}}function cv(t){const e=[];return Ps(t.fields,(n,r)=>{const s=new Ze([n]);if(ha(r)){const i=cv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new ht(e,0,te.min(),te.min(),te.min(),Vt.empty(),0)}static newFoundDocument(e,n,r,s){return new ht(e,1,n,te.min(),r,s,0)}static newNoDocument(e,n){return new ht(e,2,n,te.min(),te.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,te.min(),te.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n){this.position=e,this.inclusive=n}}function Wp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(a.referenceValue),n.key):r=Es(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function qp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n="asc"){this.field=e,this.dir=n}}function rT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{}class He extends hv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new iT(e,n,r):n==="array-contains"?new lT(e,r):n==="in"?new uT(e,r):n==="not-in"?new cT(e,r):n==="array-contains-any"?new hT(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new oT(e,r):new aT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Es(n,this.value)):n!==null&&xr(this.value)===xr(n)&&this.matchesComparison(Es(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rn extends hv{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new rn(e,n)}matches(e){return dv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function dv(t){return t.op==="and"}function fv(t){return sT(t)&&dv(t)}function sT(t){for(const e of t.filters)if(e instanceof rn)return!1;return!0}function Rc(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+xs(t.value);if(fv(t))return t.filters.map(e=>Rc(e)).join(",");{const e=t.filters.map(n=>Rc(n)).join(",");return`${t.op}(${e})`}}function pv(t,e){return t instanceof He?function(r,s){return s instanceof He&&r.op===s.op&&r.field.isEqual(s.field)&&nn(r.value,s.value)}(t,e):t instanceof rn?function(r,s){return s instanceof rn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&pv(a,s.filters[l]),!0):!1}(t,e):void Z()}function mv(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${xs(n.value)}`}(t):t instanceof rn?function(n){return n.op.toString()+" {"+n.getFilters().map(mv).join(" ,")+"}"}(t):"Filter"}class iT extends He{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class oT extends He{constructor(e,n){super(e,"in",n),this.keys=gv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class aT extends He{constructor(e,n){super(e,"not-in",n),this.keys=gv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function gv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class lT extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gh(n)&&Yi(n.arrayValue,this.value)}}class uT extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yi(this.value.arrayValue,n)}}class cT extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Yi(this.value.arrayValue,n)}}class hT extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yi(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function Gp(t,e=null,n=[],r=[],s=null,i=null,a=null){return new dT(t,e,n,r,s,i,a)}function Qh(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),gl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xs(r)).join(",")),e.ue=n}return e.ue}function Kh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qp(t.startAt,e.startAt)&&qp(t.endAt,e.endAt)}function Pc(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function fT(t,e,n,r,s,i,a,l){return new yl(t,e,n,r,s,i,a,l)}function Yh(t){return new yl(t)}function Qp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pT(t){return t.collectionGroup!==null}function Si(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new tt(Ze.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ha(i,r))}),n.has(Ze.keyField().canonicalString())||e.ce.push(new Ha(Ze.keyField(),r))}return e.ce}function en(t){const e=ne(t);return e.le||(e.le=mT(e,Si(t))),e.le}function mT(t,e){if(t.limitType==="F")return Gp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ha(s.field,i)});const n=t.endAt?new $a(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $a(t.startAt.position,t.startAt.inclusive):null;return Gp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Nc(t,e,n){return new yl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vl(t,e){return Kh(en(t),en(e))&&t.limitType===e.limitType}function yv(t){return`${Qh(en(t))}|lt:${t.limitType}`}function Fr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>mv(s)).join(", ")}]`),gl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>xs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>xs(s)).join(",")),`Target(${r})`}(en(t))}; limitType=${t.limitType})`}function _l(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Si(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const h=Wp(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,Si(r),s)||r.endAt&&!function(a,l,u){const h=Wp(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,Si(r),s))}(t,e)}function gT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vv(t){return(e,n)=>{let r=!1;for(const s of Si(t)){const i=yT(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function yT(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Es(u,h):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ps(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return lv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=new De(J.comparator);function En(){return vT}const _v=new De(J.comparator);function fi(...t){let e=_v;for(const n of t)e=e.insert(n.key,n);return e}function wv(t){let e=_v;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hr(){return Ai()}function Ev(){return Ai()}function Ai(){return new Ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const _T=new De(J.comparator),wT=new tt(J.comparator);function ue(...t){let e=wT;for(const n of t)e=e.add(n);return e}const ET=new tt(ve);function xT(){return ET}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ba(e)?"-0":e}}function xv(t){return{integerValue:""+t}}function TT(t,e){return Jx(e)?xv(e):Xh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(){this._=void 0}}function IT(t,e,n){return t instanceof Wa?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Wh(i)&&(i=qh(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof Xi?Iv(t,e):t instanceof Ji?Sv(t,e):function(s,i){const a=Tv(s,i),l=Kp(a)+Kp(s.Pe);return kc(a)&&kc(s.Pe)?xv(l):Xh(s.serializer,l)}(t,e)}function ST(t,e,n){return t instanceof Xi?Iv(t,e):t instanceof Ji?Sv(t,e):n}function Tv(t,e){return t instanceof qa?function(r){return kc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Wa extends wl{}class Xi extends wl{constructor(e){super(),this.elements=e}}function Iv(t,e){const n=Av(e);for(const r of t.elements)n.some(s=>nn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ji extends wl{constructor(e){super(),this.elements=e}}function Sv(t,e){let n=Av(e);for(const r of t.elements)n=n.filter(s=>!nn(s,r));return{arrayValue:{values:n}}}class qa extends wl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Kp(t){return Fe(t.integerValue||t.doubleValue)}function Av(t){return Gh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function AT(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Xi&&s instanceof Xi||r instanceof Ji&&s instanceof Ji?ws(r.elements,s.elements,nn):r instanceof qa&&s instanceof qa?nn(r.Pe,s.Pe):r instanceof Wa&&s instanceof Wa}(t.transform,e.transform)}class CT{constructor(e,n){this.version=e,this.transformResults=n}}class pn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pn}static exists(e){return new pn(void 0,e)}static updateTime(e){return new pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function da(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class El{}function Cv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rv(t.key,pn.none()):new lo(t.key,t.data,pn.none());{const n=t.data,r=Vt.empty();let s=new tt(Ze.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Ar(t.key,r,new Ht(s.toArray()),pn.none())}}function kT(t,e,n){t instanceof lo?function(s,i,a){const l=s.value.clone(),u=Xp(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ar?function(s,i,a){if(!da(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Xp(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(kv(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ci(t,e,n,r){return t instanceof lo?function(i,a,l,u){if(!da(i.precondition,a))return l;const h=i.value.clone(),f=Jp(i.fieldTransforms,u,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ar?function(i,a,l,u){if(!da(i.precondition,a))return l;const h=Jp(i.fieldTransforms,u,a),f=a.data;return f.setAll(kv(i)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,a,l){return da(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function RT(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Tv(r.transform,s||null);i!=null&&(n===null&&(n=Vt.empty()),n.set(r.field,i))}return n||null}function Yp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ws(r,s,(i,a)=>AT(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class lo extends El{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ar extends El{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function kv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Xp(t,e,n){const r=new Map;Ee(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,ST(a,l,n[s]))}return r}function Jp(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,IT(i,a,e))}return r}class Rv extends El{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PT extends El{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&kT(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ci(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ci(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ev();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=Cv(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&ws(this.mutations,e.mutations,(n,r)=>Yp(n,r))&&ws(this.baseMutations,e.baseMutations,(n,r)=>Yp(n,r))}}class Jh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ee(e.mutations.length===r.length);let s=function(){return _T}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Jh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,he;function DT(t){switch(t){default:return Z();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function Pv(t){if(t===void 0)return wn("GRPC error has no .code"),M.UNKNOWN;switch(t){case ze.OK:return M.OK;case ze.CANCELLED:return M.CANCELLED;case ze.UNKNOWN:return M.UNKNOWN;case ze.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case ze.INTERNAL:return M.INTERNAL;case ze.UNAVAILABLE:return M.UNAVAILABLE;case ze.UNAUTHENTICATED:return M.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case ze.NOT_FOUND:return M.NOT_FOUND;case ze.ALREADY_EXISTS:return M.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return M.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case ze.ABORTED:return M.ABORTED;case ze.OUT_OF_RANGE:return M.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return M.UNIMPLEMENTED;case ze.DATA_LOSS:return M.DATA_LOSS;default:return Z()}}(he=ze||(ze={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=new pr([4294967295,4294967295],0);function Zp(t){const e=LT().encode(t),n=new ev;return n.update(e),new Uint8Array(n.digest())}function em(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new pr([n,r],0),new pr([s,i],0)]}class Zh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new pi(`Invalid padding: ${n}`);if(r<0)throw new pi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new pi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=pr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(pr.fromNumber(r)));return s.compare(OT)===1&&(s=new pr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Zp(e),[r,s]=em(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Zh(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=Zp(e),[r,s]=em(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class pi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,uo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xl(te.min(),s,new De(ve),En(),ue())}}class uo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new uo(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Nv{constructor(e,n){this.targetId=e,this.me=n}}class Vv{constructor(e,n,r=rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class tm{constructor(){this.fe=0,this.ge=rm(),this.pe=rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),n=ue(),r=ue();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z()}}),new uo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=rm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class jT{constructor(e){this.Le=e,this.Be=new Map,this.ke=En(),this.qe=nm(),this.Qe=new De(ve)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Pc(i))if(r===0){const a=new J(i.path);this.Ue(n,a,ht.newNoDocument(a,te.min()))}else Ee(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Er(r).toUint8Array()}catch(u){if(u instanceof uv)return _s("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Zh(a,s,i)}catch(u){return _s(u instanceof pi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const l=this.Je(a);if(l){if(i.current&&Pc(l.target)){const u=new J(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,ht.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=ue();this.qe.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new xl(e,n,this.Qe,this.ke,r);return this.ke=En(),this.qe=nm(),this.Qe=new De(ve),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new tm,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new tt(ve),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new tm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function nm(){return new De(J.comparator)}function rm(){return new De(J.comparator)}const MT={asc:"ASCENDING",desc:"DESCENDING"},FT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UT={and:"AND",or:"OR"};class zT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vc(t,e){return t.useProto3Json||gl(e)?e:{value:e}}function Ga(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BT(t,e){return Ga(t,e.toTimestamp())}function tn(t){return Ee(!!t),te.fromTimestamp(function(n){const r=Kn(n);return new qe(r.seconds,r.nanos)}(t))}function ed(t,e){return bc(t,e).canonicalString()}function bc(t,e){const n=function(s){return new je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Dv(t){const e=je.fromString(t);return Ee(Fv(e)),e}function Dc(t,e){return ed(t.databaseId,e.path)}function Tu(t,e){const n=Dv(e);if(n.get(1)!==t.databaseId.projectId)throw new X(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(Ov(n))}function Lv(t,e){return ed(t.databaseId,e)}function $T(t){const e=Dv(t);return e.length===4?je.emptyPath():Ov(e)}function Lc(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ov(t){return Ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function sm(t,e,n){return{name:Dc(t,e),fields:n.value.mapValue.fields}}function HT(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(Ee(f===void 0||typeof f=="string"),rt.fromBase64String(f||"")):(Ee(f===void 0||f instanceof Buffer||f instanceof Uint8Array),rt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const f=h.code===void 0?M.UNKNOWN:Pv(h.code);return new X(f,h.message||"")}(a);n=new Vv(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Tu(t,r.document.name),i=tn(r.document.updateTime),a=r.document.createTime?tn(r.document.createTime):te.min(),l=new Vt({mapValue:{fields:r.document.fields}}),u=ht.newFoundDocument(s,i,a,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new fa(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Tu(t,r.document),i=r.readTime?tn(r.readTime):te.min(),a=ht.newNoDocument(s,i),l=r.removedTargetIds||[];n=new fa([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Tu(t,r.document),i=r.removedTargetIds||[];n=new fa([],i,s,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new bT(s,i),l=r.targetId;n=new Nv(l,a)}}return n}function WT(t,e){let n;if(e instanceof lo)n={update:sm(t,e.key,e.value)};else if(e instanceof Rv)n={delete:Dc(t,e.key)};else if(e instanceof Ar)n={update:sm(t,e.key,e.data),updateMask:eI(e.fieldMask)};else{if(!(e instanceof PT))return Z();n={verify:Dc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Wa)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Xi)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ji)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof qa)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:BT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z()}(t,e.precondition)),n}function qT(t,e){return t&&t.length>0?(Ee(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?tn(s.updateTime):tn(i);return a.isEqual(te.min())&&(a=tn(i)),new CT(a,s.transformResults||[])}(n,e))):[]}function GT(t,e){return{documents:[Lv(t,e.path)]}}function QT(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Lv(t,s);const i=function(h){if(h.length!==0)return Mv(rn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(f=>function(v){return{field:Ur(v.field),direction:XT(v.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Vc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function KT(t){let e=$T(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ee(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(g){const v=jv(g);return v instanceof rn&&fv(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(v=>function(P){return new Ha(zr(P.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(g){let v;return v=typeof g=="object"?g.value:g,gl(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(g){const v=!!g.before,A=g.values||[];return new $a(A,v)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const v=!g.before,A=g.values||[];return new $a(A,v)}(n.endAt)),fT(e,s,a,i,l,"F",u,h)}function YT(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zr(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=zr(n.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zr(n.unaryFilter.field);return He.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=zr(n.unaryFilter.field);return He.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return He.create(zr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rn.create(n.compositeFilter.filters.map(r=>jv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function XT(t){return MT[t]}function JT(t){return FT[t]}function ZT(t){return UT[t]}function Ur(t){return{fieldPath:t.canonicalString()}}function zr(t){return Ze.fromServerFormat(t.fieldPath)}function Mv(t){return t instanceof He?function(n){if(n.op==="=="){if(Hp(n.value))return{unaryFilter:{field:Ur(n.field),op:"IS_NAN"}};if($p(n.value))return{unaryFilter:{field:Ur(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Hp(n.value))return{unaryFilter:{field:Ur(n.field),op:"IS_NOT_NAN"}};if($p(n.value))return{unaryFilter:{field:Ur(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ur(n.field),op:JT(n.op),value:n.value}}}(t):t instanceof rn?function(n){const r=n.getFilters().map(s=>Mv(s));return r.length===1?r[0]:{compositeFilter:{op:ZT(n.op),filters:r}}}(t):Z()}function eI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Fv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n,r,s,i=te.min(),a=te.min(),l=rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new bn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.ct=e}}function nI(t){const e=KT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.un=new sI}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Qn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Qn.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class sI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new tt(je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new tt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ts(0)}static kn(){return new Ts(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.changes=new Ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ci(r.mutation,s,Ht.empty(),qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const s=hr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=fi();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=En();const a=Ai(),l=function(){return Ai()}();return n.forEach((u,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof Ar)?i=i.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),Ci(f.mutation,h,f.mutation.getFieldMask(),qe.now())):a.set(h.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>a.set(h,f)),n.forEach((h,f)=>{var g;return l.set(h,new oI(f,(g=a.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ai();let s=new De((a,l)=>a-l),i=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||Ht.empty();f=l.applyToLocalView(h,f),r.set(u,f);const g=(s.get(l.batchId)||ue()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,g=Ev();f.forEach(v=>{if(!i.has(v)){const A=Cv(n.get(v),r.get(v));A!==null&&g.set(v,A),i=i.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return O.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return J.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):pT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(hr());let l=-1,u=i;return a.next(h=>O.forEach(h,(f,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{u=u.insert(f,v)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ue())).next(f=>({batchId:l,changes:wv(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=fi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=fi();return this.indexManager.getCollectionParents(e,i).next(l=>O.forEach(l,u=>{const h=function(g,v){return new yl(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(f=>{f.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,ht.newInvalidDocument(f)))});let l=fi();return a.forEach((u,h)=>{const f=i.get(u);f!==void 0&&Ci(f.mutation,h,Ht.empty(),qe.now()),_l(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:tn(s.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:nI(s.bundledQuery),readTime:tn(s.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.overlays=new De(J.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hr();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=hr(),i=n.length+1,a=new J(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new De((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=hr(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=hr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=s)););return O.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new VT(n,r));let i=this.Ir.get(n);i===void 0&&(i=ue(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this.Tr=new tt(Ge.Er),this.dr=new tt(Ge.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ge(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new J(new je([])),r=new Ge(n,e),s=new Ge(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new J(new je([])),r=new Ge(n,e),s=new Ge(n,e+1);let i=ue();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Ge(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return J.comparator(e.key,n.key)||ve(e.wr,n.wr)}static Ar(e,n){return ve(e.wr,n.wr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new tt(Ge.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new NT(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new Ge(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),s=new Ge(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const l=this.Dr(a.wr);i.push(l)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(ve);return n.forEach(s=>{const i=new Ge(s,0),a=new Ge(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],l=>{r=r.add(l.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const a=new Ge(new J(i),0);let l=new tt(ve);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.wr)),!0)},a),O.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ee(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,s=>{const i=new Ge(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ge(n,0),s=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.Mr=e,this.docs=function(){return new De(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=En();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ht.newInvalidDocument(s))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=En();const a=n.path,l=new J(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Qx(Gx(f),r)<=0||(s.has(f.key)||_l(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new fI(this)}getSize(e){return O.resolve(this.size)}}class fI extends iI{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.persistence=e,this.Nr=new Ns(n=>Qh(n),Kh),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new td,this.targetCount=0,this.kr=Ts.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ts(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),O.waitFor(i).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Hh(0),this.Kr=!1,this.Kr=!0,this.$r=new cI,this.referenceDelegate=e(this),this.Ur=new pI(this),this.indexManager=new rI,this.remoteDocumentCache=function(s){return new dI(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new tI(n),this.Gr=new lI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new hI(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new gI(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class gI extends Yx{constructor(e){super(),this.currentSequenceNumber=e}}class nd{constructor(e){this.persistence=e,this.Jr=new td,this.Yr=null}static Zr(e){return new nd(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{const s=J.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ue(),s=ue();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new rd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return a1()?8:Xx(s1())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new yI;return this.Xi(e,n,a).next(l=>{if(i.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ai()<=de.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Fr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(ai()<=de.DEBUG&&W("QueryEngine","Query:",Fr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ai()<=de.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Fr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,en(n))):O.resolve())}Yi(e,n){if(Qp(n))return O.resolve(null);let r=en(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Nc(n,null,"F"),r=en(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ue(...i);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,a,u.readTime)?this.Yi(e,Nc(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return Qp(n)||s.isEqual(te.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?O.resolve(null):(ai()<=de.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fr(n)),this.rs(e,a,n,qx(s,-1)).next(l=>l))})}ts(e,n){let r=new tt(vv(e));return n.forEach((s,i)=>{_l(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ai()<=de.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Fr(n)),this.Ji.getDocumentsMatchingQuery(e,n,Qn.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new De(ve),this._s=new Ns(i=>Qh(i),Kh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function wI(t,e,n,r){return new _I(t,e,n,r)}async function Uv(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=ue();for(const h of s){a.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:l}))})})}function EI(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const g=h.batch,v=g.keys();let A=O.resolve();return v.forEach(P=>{A=A.next(()=>f.getEntry(u,P)).next(N=>{const D=h.docVersions.get(P);Ee(D!==null),N.version.compareTo(D)<0&&(g.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),f.addEntry(N)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ue();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function zv(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function xI(t,e){const n=ne(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,g)=>{const v=s.get(g);if(!v)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,g)));let A=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?A=A.withResumeToken(rt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):f.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(f.resumeToken,r)),s=s.insert(g,A),function(N,D,I){return N.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(v,A,f)&&l.push(n.Ur.updateTargetData(i,A))});let u=En(),h=ue();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(TI(i,a,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(te.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return O.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function TI(t,e,n){let r=ue(),s=ue();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=En();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function II(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function SI(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,O.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new bn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Oc(t,e,n){const r=ne(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ao(a))throw a;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function im(t,e,n){const r=ne(t);let s=te.min(),i=ue();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,f){const g=ne(u),v=g._s.get(f);return v!==void 0?O.resolve(g.os.get(v)):g.Ur.getTargetData(h,f)}(r,a,en(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:te.min(),n?i:ue())).next(l=>(AI(r,gT(e),l),{documents:l,Ts:i})))}function AI(t,e,n){let r=t.us.get(e)||te.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class om{constructor(){this.activeTargetIds=xT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CI{constructor(){this.so=new om,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new om,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yo=null;function Iu(){return Yo===null?Yo=function(){return 268435456+Math.round(2147483648*Math.random())}():Yo++,"0x"+Yo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class NI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const l=Iu(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,a),this.No(n,u,h,s).then(f=>(W("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw _s("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,a,l){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=RI[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Iu();return new Promise((a,l)=>{const u=new tv;u.setWithCredentials(!0),u.listenOnce(nv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ca.NO_ERROR:const f=u.getResponseJson();W(lt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case ca.TIMEOUT:W(lt,`RPC '${e}' ${i} timed out`),l(new X(M.DEADLINE_EXCEEDED,"Request time out"));break;case ca.HTTP_ERROR:const g=u.getStatus();if(W(lt,`RPC '${e}' ${i} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const A=v==null?void 0:v.error;if(A&&A.status&&A.message){const P=function(D){const I=D.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(I)>=0?I:M.UNKNOWN}(A.status);l(new X(P,A.message))}else l(new X(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new X(M.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{W(lt,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);W(lt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Iu(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=iv(),l=sv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");W(lt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const g=a.createWebChannel(f,u);let v=!1,A=!1;const P=new PI({Io:D=>{A?W(lt,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(v||(W(lt,`Opening RPC '${e}' stream ${s} transport.`),g.open(),v=!0),W(lt,`RPC '${e}' stream ${s} sending:`,D),g.send(D))},To:()=>g.close()}),N=(D,I,x)=>{D.listen(I,k=>{try{x(k)}catch(b){setTimeout(()=>{throw b},0)}})};return N(g,di.EventType.OPEN,()=>{A||(W(lt,`RPC '${e}' stream ${s} transport opened.`),P.yo())}),N(g,di.EventType.CLOSE,()=>{A||(A=!0,W(lt,`RPC '${e}' stream ${s} transport closed`),P.So())}),N(g,di.EventType.ERROR,D=>{A||(A=!0,_s(lt,`RPC '${e}' stream ${s} transport errored:`,D),P.So(new X(M.UNAVAILABLE,"The operation could not be completed")))}),N(g,di.EventType.MESSAGE,D=>{var I;if(!A){const x=D.data[0];Ee(!!x);const k=x,b=k.error||((I=k[0])===null||I===void 0?void 0:I.error);if(b){W(lt,`RPC '${e}' stream ${s} received error:`,b);const U=b.status;let z=function(w){const T=ze[w];if(T!==void 0)return Pv(T)}(U),E=b.message;z===void 0&&(z=M.INTERNAL,E="Unknown error status: "+U+" with message "+b.message),A=!0,P.So(new X(z,E)),g.close()}else W(lt,`RPC '${e}' stream ${s} received:`,x),P.bo(x)}}),N(l,rv.STAT_EVENT,D=>{D.stat===Ac.PROXY?W(lt,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===Ac.NOPROXY&&W(lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}function Su(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t){return new zT(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n,r,s,i,a,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Bv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(wn(n.toString()),wn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new X(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VI extends $v{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=HT(this.serializer,e),r=function(i){if(!("targetChange"in i))return te.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?tn(a.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Lc(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=Pc(u)?{documents:GT(i,u)}:{query:QT(i,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=bv(i,a.resumeToken);const h=Vc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(te.min())>0){l.readTime=Ga(i,a.snapshotVersion.toTimestamp());const h=Vc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=YT(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Lc(this.serializer),n.removeTarget=e,this.a_(n)}}class bI extends $v{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=qT(e.writeResults,e.commitTime),r=tn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Lc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>WT(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new X(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,bc(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(M.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,bc(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new X(M.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class LI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(wn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{Cr(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=ne(u);h.L_.add(4),await co(h),h.q_.set("Unknown"),h.L_.delete(4),await Il(h)}(this))})}),this.q_=new LI(r,s)}}async function Il(t){if(Cr(t))for(const e of t.B_)await e(!0)}async function co(t){for(const e of t.B_)await e(!1)}function Hv(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ad(n)?od(n):Vs(n).r_()&&id(n,e))}function sd(t,e){const n=ne(t),r=Vs(n);n.N_.delete(e),r.r_()&&Wv(n,e),n.N_.size===0&&(r.r_()?r.o_():Cr(n)&&n.q_.set("Unknown"))}function id(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vs(t).A_(e)}function Wv(t,e){t.Q_.xe(e),Vs(t).R_(e)}function od(t){t.Q_=new jT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Vs(t).start(),t.q_.v_()}function ad(t){return Cr(t)&&!Vs(t).n_()&&t.N_.size>0}function Cr(t){return ne(t).L_.size===0}function qv(t){t.Q_=void 0}async function jI(t){t.q_.set("Online")}async function MI(t){t.N_.forEach((e,n)=>{id(t,e)})}async function FI(t,e){qv(t),ad(t)?(t.q_.M_(e),od(t)):t.q_.set("Unknown")}async function UI(t,e,n){if(t.q_.set("Online"),e instanceof Vv&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qa(t,r)}else if(e instanceof fa?t.Q_.Ke(e):e instanceof Nv?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const r=await zv(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Q_.rt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(h);f&&i.N_.set(h,f.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(rt.EMPTY_BYTE_STRING,f.snapshotVersion)),Wv(i,u);const g=new bn(f.target,u,h,f.sequenceNumber);id(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await Qa(t,r)}}async function Qa(t,e,n){if(!ao(e))throw e;t.L_.add(1),await co(t),t.q_.set("Offline"),n||(n=()=>zv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Il(t)})}function Gv(t,e){return e().catch(n=>Qa(t,n,e))}async function Sl(t){const e=ne(t),n=Yn(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zI(e);)try{const s=await II(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,BI(e,s)}catch(s){await Qa(e,s)}Qv(e)&&Kv(e)}function zI(t){return Cr(t)&&t.O_.length<10}function BI(t,e){t.O_.push(e);const n=Yn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Qv(t){return Cr(t)&&!Yn(t).n_()&&t.O_.length>0}function Kv(t){Yn(t).start()}async function $I(t){Yn(t).p_()}async function HI(t){const e=Yn(t);for(const n of t.O_)e.m_(n.mutations)}async function WI(t,e,n){const r=t.O_.shift(),s=Jh.from(r,e,n);await Gv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Sl(t)}async function qI(t,e){e&&Yn(t).V_&&await async function(r,s){if(function(a){return DT(a)&&a!==M.ABORTED}(s.code)){const i=r.O_.shift();Yn(r).s_(),await Gv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Sl(r)}}(t,e),Qv(t)&&Kv(t)}async function lm(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Cr(n);n.L_.add(3),await co(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Il(n)}async function GI(t,e){const n=ne(t);e?(n.L_.delete(2),await Il(n)):e||(n.L_.add(2),await co(n),n.q_.set("Unknown"))}function Vs(t){return t.K_||(t.K_=function(n,r,s){const i=ne(n);return i.w_(),new VI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:jI.bind(null,t),Ro:MI.bind(null,t),mo:FI.bind(null,t),d_:UI.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ad(t)?od(t):t.q_.set("Unknown")):(await t.K_.stop(),qv(t))})),t.K_}function Yn(t){return t.U_||(t.U_=function(n,r,s){const i=ne(n);return i.w_(),new bI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$I.bind(null,t),mo:qI.bind(null,t),f_:HI.bind(null,t),g_:WI.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Sl(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new $n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new ld(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ud(t,e){if(wn("AsyncQueue",`${e}: ${t}`),ao(t))return new X(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=fi(),this.sortedSet=new De(this.comparator)}static emptySet(e){return new as(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof as)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new as;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this.W_=new De(J.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Is{constructor(e,n,r,s,i,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Is(e,n,as.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class KI{constructor(){this.queries=cm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ne(n),i=s.queries;s.queries=cm(),i.forEach((a,l)=>{for(const u of l.j_)u.onError(r)})})(this,new X(M.ABORTED,"Firestore shutting down"))}}function cm(){return new Ns(t=>yv(t),vl)}async function YI(t,e){const n=ne(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new QI,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=ud(a,`Initialization of query '${Fr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&cd(n)}async function XI(t,e){const n=ne(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function JI(t,e){const n=ne(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.j_)l.X_(s)&&(r=!0);a.z_=s}}r&&cd(n)}function ZI(t,e,n){const r=ne(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function cd(t){t.Y_.forEach(e=>{e.next()})}var jc,hm;(hm=jc||(jc={})).ea="default",hm.Cache="cache";class eS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Is(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Is.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==jc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this.key=e}}class Xv{constructor(e){this.key=e}}class tS{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=vv(e),this.Ra=new as(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new um,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,g)=>{const v=s.get(f),A=_l(this.query,g)?g:null,P=!!v&&this.mutatedKeys.has(v.key),N=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let D=!1;v&&A?v.data.isEqual(A.data)?P!==N&&(r.track({type:3,doc:A}),D=!0):this.ga(v,A)||(r.track({type:2,doc:A}),D=!0,(u&&this.Aa(A,u)>0||h&&this.Aa(A,h)<0)&&(l=!0)):!v&&A?(r.track({type:0,doc:A}),D=!0):v&&!A&&(r.track({type:1,doc:v}),D=!0,(u||h)&&(l=!0)),D&&(A?(a=a.add(A),i=N?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,g)=>function(A,P){const N=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return N(A)-N(P)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,a.length!==0||h?{snapshot:new Is(this.query,e.Ra,i,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new um,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Xv(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Yv(r))}),n}ba(e){this.Ta=e.Ts,this.da=ue();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Is.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class nS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class rS{constructor(e){this.key=e,this.va=!1}}class sS{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ns(l=>yv(l),vl),this.Ma=new Map,this.xa=new Set,this.Oa=new De(J.comparator),this.Na=new Map,this.La=new td,this.Ba={},this.ka=new Map,this.qa=Ts.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function iS(t,e,n=!0){const r=r0(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Jv(r,e,n,!0),s}async function oS(t,e){const n=r0(t);await Jv(n,e,!0,!1)}async function Jv(t,e,n,r){const s=await SI(t.localStore,en(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await aS(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Hv(t.remoteStore,s),l}async function aS(t,e,n,r,s){t.Ka=(g,v,A)=>async function(N,D,I,x){let k=D.view.ma(I);k.ns&&(k=await im(N.localStore,D.query,!1).then(({documents:E})=>D.view.ma(E,k)));const b=x&&x.targetChanges.get(D.targetId),U=x&&x.targetMismatches.get(D.targetId)!=null,z=D.view.applyChanges(k,N.isPrimaryClient,b,U);return fm(N,D.targetId,z.wa),z.snapshot}(t,g,v,A);const i=await im(t.localStore,e,!0),a=new tS(e,i.Ts),l=a.ma(i.documents),u=uo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=a.applyChanges(l,t.isPrimaryClient,u);fm(t,n,h.wa);const f=new nS(e,n,a);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function lS(t,e,n){const r=ne(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!vl(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Oc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&sd(r.remoteStore,s.targetId),Mc(r,s.targetId)}).catch(oo)):(Mc(r,s.targetId),await Oc(r.localStore,s.targetId,!0))}async function uS(t,e){const n=ne(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sd(n.remoteStore,r.targetId))}async function cS(t,e,n){const r=yS(t);try{const s=await function(a,l){const u=ne(a),h=qe.now(),f=l.reduce((A,P)=>A.add(P.key),ue());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",A=>{let P=En(),N=ue();return u.cs.getEntries(A,f).next(D=>{P=D,P.forEach((I,x)=>{x.isValidDocument()||(N=N.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(A,P)).next(D=>{g=D;const I=[];for(const x of l){const k=RT(x,g.get(x.key).overlayedDocument);k!=null&&I.push(new Ar(x.key,k,cv(k.value.mapValue),pn.exists(!0)))}return u.mutationQueue.addMutationBatch(A,h,I,l)}).next(D=>{v=D;const I=D.applyToLocalDocumentSet(g,N);return u.documentOverlayCache.saveOverlays(A,D.batchId,I)})}).then(()=>({batchId:v.batchId,changes:wv(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Ba[a.currentUser.toKey()];h||(h=new De(ve)),h=h.insert(l,u),a.Ba[a.currentUser.toKey()]=h}(r,s.batchId,n),await ho(r,s.changes),await Sl(r.remoteStore)}catch(s){const i=ud(s,"Failed to persist write");n.reject(i)}}async function Zv(t,e){const n=ne(t);try{const r=await xI(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(Ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?Ee(a.va):s.removedDocuments.size>0&&(Ee(a.va),a.va=!1))}),await ho(n,r,e)}catch(r){await oo(r)}}function dm(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const l=a.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=ne(a);u.onlineState=l;let h=!1;u.queries.forEach((f,g)=>{for(const v of g.j_)v.Z_(l)&&(h=!0)}),h&&cd(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function hS(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new De(J.comparator);a=a.insert(i,ht.newNoDocument(i,te.min()));const l=ue().add(i),u=new xl(te.min(),new Map,new De(ve),a,l);await Zv(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),hd(r)}else await Oc(r.localStore,e,!1).then(()=>Mc(r,e,n)).catch(oo)}async function dS(t,e){const n=ne(t),r=e.batch.batchId;try{const s=await EI(n.localStore,e);t0(n,r,null),e0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ho(n,s)}catch(s){await oo(s)}}async function fS(t,e,n){const r=ne(t);try{const s=await function(a,l){const u=ne(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(Ee(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);t0(r,e,n),e0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ho(r,s)}catch(s){await oo(s)}}function e0(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function t0(t,e,n){const r=ne(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Mc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||n0(t,r)})}function n0(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(sd(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),hd(t))}function fm(t,e,n){for(const r of n)r instanceof Yv?(t.La.addReference(r.key,e),pS(t,r)):r instanceof Xv?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||n0(t,r.key)):Z()}function pS(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),hd(t))}function hd(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new J(je.fromString(e)),r=t.qa.next();t.Na.set(r,new rS(n)),t.Oa=t.Oa.insert(n,r),Hv(t.remoteStore,new bn(en(Yh(n.path)),r,"TargetPurposeLimboResolution",Hh.oe))}}async function ho(t,e,n){const r=ne(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{a.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=rd.Wi(u.targetId,h);i.push(g)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,h){const f=ne(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>O.forEach(h,v=>O.forEach(v.$i,A=>f.persistence.referenceDelegate.addReference(g,v.targetId,A)).next(()=>O.forEach(v.Ui,A=>f.persistence.referenceDelegate.removeReference(g,v.targetId,A)))))}catch(g){if(!ao(g))throw g;W("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const A=f.os.get(v),P=A.snapshotVersion,N=A.withLastLimboFreeSnapshotVersion(P);f.os=f.os.insert(v,N)}}}(r.localStore,i))}async function mS(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await Uv(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new X(M.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ho(n,r.hs)}}function gS(t,e){const n=ne(t),r=n.Na.get(e);if(r&&r.va)return ue().add(r.key);{let s=ue();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function r0(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hS.bind(null,e),e.Ca.d_=JI.bind(null,e.eventManager),e.Ca.$a=ZI.bind(null,e.eventManager),e}function yS(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fS.bind(null,e),e}class Ka{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return wI(this.persistence,new vI,e.initialUser,this.serializer)}Ga(e){return new mI(nd.Zr,this.serializer)}Wa(e){return new CI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ka.provider={build:()=>new Ka};class Fc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mS.bind(null,this.syncEngine),await GI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new KI}()}createDatastore(e){const n=Tl(e.databaseInfo.databaseId),r=function(i){return new NI(i)}(e.databaseInfo);return function(i,a,l,u){return new DI(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new OI(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>dm(this.syncEngine,n,0),function(){return am.D()?new am:new kI}())}createSyncEngine(e,n){return function(s,i,a,l,u,h,f){const g=new sS(s,i,a,l,u,h);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ne(s);W("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await co(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Fc.provider={build:()=>new Fc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):wn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ut.UNAUTHENTICATED,this.clientId=av.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{W("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(W("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ud(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Au(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Uv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function pm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wS(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>lm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>lm(e.remoteStore,s)),t._onlineComponents=e}async function wS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await Au(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;_s("Error using user provided cache. Falling back to memory cache: "+n),await Au(t,new Ka)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await Au(t,new Ka);return t._offlineComponents}async function s0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await pm(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await pm(t,new Fc))),t._onlineComponents}function ES(t){return s0(t).then(e=>e.syncEngine)}async function xS(t){const e=await s0(t),n=e.eventManager;return n.onListen=iS.bind(null,e.syncEngine),n.onUnlisten=lS.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uS.bind(null,e.syncEngine),n}function TS(t,e,n={}){const r=new $n;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,h){const f=new vS({next:v=>{f.Za(),a.enqueueAndForget(()=>XI(i,g));const A=v.docs.has(l);!A&&v.fromCache?h.reject(new X(M.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&v.fromCache&&u&&u.source==="server"?h.reject(new X(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new eS(Yh(l.path),f,{includeMetadataChanges:!0,_a:!0});return YI(i,g)}(await xS(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(t,e,n){if(!n)throw new X(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SS(t,e,n,r){if(e===!0&&r===!0)throw new X(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gm(t){if(!J.isDocumentKey(t))throw new X(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Zi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dd(t);throw new X(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new X(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new X(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new X(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ym({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ym(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jx;switch(r.type){case"firstParty":return new zx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mm.get(n);r&&(W("ComponentProvider","Removing Datastore"),mm.delete(n),r.terminate())}(this),Promise.resolve()}}function AS(t,e,n,r={}){var s;const i=(t=Zi(t,fd))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&_s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=ut.MOCK_USER;else{l=r1(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new X(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ut(h)}t._authCredentials=new Mx(new ov(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pd(this.firestore,e,this._query)}}class Ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}}class eo extends pd{constructor(e,n,r){super(e,n,Yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new J(e))}withConverter(e){return new eo(this.firestore,e,this._path)}}function Ya(t,e,...n){if(t=Ua(t),arguments.length===1&&(e=av.newId()),IS("doc","path",e),t instanceof fd){const r=je.fromString(e,...n);return gm(r),new Ot(t,null,new J(r))}{if(!(t instanceof Ot||t instanceof eo))throw new X(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return gm(r),new Ot(t.firestore,t instanceof eo?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Bv(this,"async_queue_retry"),this.Vu=()=>{const r=Su();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Su();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Su();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new $n;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ao(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw wn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=ld.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class md extends fd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new vm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vm(e),this._firestoreClient=void 0,await e}}}function CS(t,e){const n=typeof t=="object"?t:Gy(),r=typeof t=="string"?t:"(default)",s=Fh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=t1("firestore");i&&AS(s,...i)}return s}function o0(t){if(t._terminated)throw new X(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kS(t),t._firestoreClient}function kS(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,f){return new eT(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,i0(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new _S(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ss(rt.fromBase64String(e))}catch(n){throw new X(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ss(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=/^__.*__$/;class PS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new lo(e,this.data,n,this.fieldTransforms)}}function l0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class _d{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new _d(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xa(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(l0(this.Cu)&&RS.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class NS{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tl(e)}Qu(e,n,r,s=!1){return new _d({Cu:e,methodName:n,qu:r,path:Ze.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function VS(t){const e=t._freezeSettings(),n=Tl(t._databaseId);return new NS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bS(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);d0("Data must be an object, but it was:",a,r);const l=c0(r,a);let u,h;if(i.merge)u=new Ht(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const v=DS(e,g,n);if(!a.contains(v))throw new X(M.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);OS(f,v)||f.push(v)}u=new Ht(f),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new PS(new Vt(l),u,h)}function u0(t,e){if(h0(t=Ua(t)))return d0("Unsupported field value:",e,t),c0(t,e);if(t instanceof a0)return function(r,s){if(!l0(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=u0(l,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ua(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=qe.fromDate(r);return{timestampValue:Ga(s.serializer,i)}}if(r instanceof qe){const i=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ga(s.serializer,i)}}if(r instanceof yd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ss)return{bytesValue:bv(s.serializer,r._byteString)};if(r instanceof Ot){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ed(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vd)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Xh(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${dd(r)}`)}(t,e)}function c0(t,e){const n={};return lv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ps(t,(r,s)=>{const i=u0(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function h0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof yd||t instanceof Ss||t instanceof Ot||t instanceof a0||t instanceof vd)}function d0(t,e,n){if(!h0(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=dd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function DS(t,e,n){if((e=Ua(e))instanceof gd)return e._internalPath;if(typeof e=="string")return f0(t,e);throw Xa("Field path arguments must be of type string or ",t,!1,void 0,n)}const LS=new RegExp("[~\\*/\\[\\]]");function f0(t,e,n){if(e.search(LS)>=0)throw Xa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gd(...e.split("."))._internalPath}catch{throw Xa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xa(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new X(M.INVALID_ARGUMENT,l+t+u)}function OS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(m0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jS extends p0{data(){return super.data()}}function m0(t,e){return typeof e=="string"?f0(t,e):e instanceof gd?e._internalPath:e._delegate._internalPath}class MS{convertValue(e,n="none"){switch(xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Er(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ps(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Fe(a.doubleValue));return new vd(i)}convertGeoPoint(e){return new yd(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qi(e));default:return null}}convertTimestamp(e){const n=Kn(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);Ee(Fv(r));const s=new Ki(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||wn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class g0 extends p0{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(m0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class zS extends g0{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){t=Zi(t,Ot);const e=Zi(t.firestore,md);return TS(o0(e),t._key).then(n=>HS(e,t,n))}class BS extends MS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ss(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function y0(t,e,n){t=Zi(t,Ot);const r=Zi(t.firestore,md),s=FS(t.converter,e);return $S(r,[bS(VS(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,pn.none())])}function $S(t,e){return function(r,s){const i=new $n;return r.asyncQueue.enqueueAndForget(async()=>cS(await ES(r),s,i)),i.promise}(o0(t),e)}function HS(t,e,n){const r=n.docs.get(e._key),s=new BS(t);return new g0(t,s,e._key,r,new US(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Rs=s})(Uh),vs(new ms("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new md(new Fx(r.getProvider("auth-internal")),new $x(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new X(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ki(h.options.projectId,f)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),fn(Mp,"4.7.3",e),fn(Mp,"4.7.3","esm2017")})();const WS={apiKey:"AIzaSyBAInv4O5MVcOE3kb8ztIM9U2Q1OOmnjJk",authDomain:"mission-ready-30e27.firebaseapp.com",projectId:"mission-ready-30e27",storageBucket:"mission-ready-30e27.firebasestorage.app",messagingSenderId:"421602206314",appId:"1:421602206314:web:6f24797d13a78609532013",measurementId:"G-QQ21XL2Y9H"},qS=Zy.initializeApp(WS),Ja=CS(qS),_m={register:async(t,e)=>{try{const n=Ya(Ja,"user_accounts",t);if((await Uc(n)).exists())return{success:!1,error:""};const s=Math.random().toString(36).substring(2,15);return await y0(n,{password:e,userId:s,createdAt:new Date().toISOString()}),{success:!0,userId:s}}catch(n){return console.error("Register failed:",n),{success:!1,error:n.message}}},login:async(t,e)=>{try{const n=Ya(Ja,"user_accounts",t),r=await Uc(n);if(!r.exists())return{success:!1,error:""};const s=r.data();return s.password!==e?{success:!1,error:""}:{success:!0,userId:s.userId}}catch(n){return console.error("Login failed:",n),{success:!1,error:n.message}}}},wm={upload:async(t,e)=>{try{return await y0(Ya(Ja,"users",t),{lastUpdated:new Date().toISOString(),data:JSON.stringify(e)}),{success:!0}}catch(n){return console.error("Upload failed:",n),{success:!1,error:n}}},download:async t=>{try{const e=Ya(Ja,"users",t),n=await Uc(e);if(n.exists()){const r=n.data().data;return{success:!0,data:JSON.parse(r)}}else return{success:!1,error:"No data found"}}catch(e){return console.error("Download failed:",e),{success:!1,error:e}}}},GS=({onLogin:t})=>{const[e,n]=Q.useState(!1),[r,s]=Q.useState(""),[i,a]=Q.useState(""),[l,u]=Q.useState(""),[h,f]=Q.useState(!1),g=async v=>{if(v.preventDefault(),u(""),f(!0),!r.trim()||!i.trim()){u(""),f(!1);return}try{if(e){const A=await _m.register(r,i);if(A.success&&A.userId){localStorage.setItem("mission_ready_active_user_id",A.userId);const P=JSON.parse(localStorage.getItem("mission_ready_users")||"[]");P.some(N=>N.username===r)||localStorage.setItem("mission_ready_users",JSON.stringify([...P,{id:A.userId,username:r,password:i}])),t({id:A.userId,username:r})}else u(A.error||"")}else{const A=await _m.login(r,i);if(A.success&&A.userId)localStorage.setItem("mission_ready_active_user_id",A.userId),t({id:A.userId,username:r});else{const N=JSON.parse(localStorage.getItem("mission_ready_users")||"[]").find(D=>D.username===r&&D.password===i);N?(console.log("Cloud login failed, using local credentials"),t({id:N.id,username:N.username})):u(A.error||"")}}}catch{u("")}finally{f(!1)}};return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100 p-4",children:p.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md border border-slate-200",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("div",{className:"bg-blue-600 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-blue-200",children:p.jsx(Ip,{className:"text-white",size:32})}),p.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Mission Ready"}),p.jsxs("p",{className:"text-slate-500 flex items-center justify-center gap-1",children:["",p.jsxs("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full flex items-center gap-1",children:[p.jsx(kE,{size:10})," Cloud Sync"]})]})]}),p.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg mb-6",children:[p.jsx("button",{onClick:()=>{n(!1),u("")},className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${e?"text-slate-500 hover:text-slate-700":"bg-white text-blue-600 shadow-sm"}`,children:""}),p.jsx("button",{onClick:()=>{n(!0),u("")},className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${e?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:""})]}),p.jsxs("form",{onSubmit:g,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),p.jsxs("div",{className:"relative",children:[p.jsx(zE,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),p.jsx("input",{type:"text",value:r,onChange:v=>s(v.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:bg-white outline-none transition-all text-slate-900",placeholder:""})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),p.jsxs("div",{className:"relative",children:[p.jsx(Ip,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),p.jsx("input",{type:"password",value:i,onChange:v=>a(v.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:bg-white outline-none transition-all text-slate-900",placeholder:""})]})]}),l&&p.jsxs("div",{className:"text-red-500 text-sm bg-red-50 p-3 rounded-lg border border-red-100 flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),l]}),p.jsx("button",{type:"submit",disabled:h,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg shadow-blue-200 active:scale-[0.98] transition-all flex items-center justify-center gap-2 mt-2 disabled:opacity-70 disabled:cursor-not-allowed",children:h?"...":e?"":""})]})]})})};function QS(){const[t,e]=Q.useState(null),[n,r]=Q.useState("DASHBOARD"),[s,i]=Q.useState([]),[a,l]=Q.useState([]),[u,h]=Q.useState([]),[f,g]=Q.useState([]),[v,A]=Q.useState([]),[P,N]=Q.useState(null),[D,I]=Q.useState(!1);Q.useEffect(()=>{const S=localStorage.getItem("mission_ready_active_user_id"),_=JSON.parse(localStorage.getItem("mission_ready_users")||"[]");if(S&&_.length>0){const se=_.find(_e=>_e.id===S);se&&k({id:se.id,username:se.username})}},[]);const x=S=>{const _=localStorage.getItem(`mission_ready_categories_${S}`);A(_?JSON.parse(_):yu);const se=localStorage.getItem(`mission_ready_inventory_${S}`);let _e=[];se?(_e=JSON.parse(se),_e=_e.map(q=>{let Y=q.category;return Y.includes("Tools")||Y.includes("")?Y="cat_tools":Y.includes("Hardware")||Y.includes("")?Y="cat_hardware":Y.includes("Cables")||Y.includes("")?Y="cat_cables":Y.includes("Software")||Y.includes("")?Y="cat_software":(Y.includes("Docs")||Y.includes(""))&&(Y="cat_docs"),!Y.startsWith("cat_")&&!yu.some(G=>G.id===Y)&&(Y="cat_tools"),{...q,category:Y,folderId:q.folderId||oe,groupId:q.groupId||le}})):_e=EE,i(_e);const Se=localStorage.getItem(`mission_ready_trips_${S}`);let Me=Se?JSON.parse(Se):[];Me=Me.map(q=>({...q,groups:q.groups||[{id:wc,name:""}],items:q.items.map(Y=>{let G=Y.category;return G.includes("Tools")||G.includes("")?G="cat_tools":G.includes("Hardware")||G.includes("")?G="cat_hardware":G.includes("Cables")||G.includes("")?G="cat_cables":G.includes("Software")||G.includes("")?G="cat_software":(G.includes("Docs")||G.includes(""))&&(G="cat_docs"),!G.startsWith("cat_")&&!yu.some(fe=>fe.id===G)&&(G="cat_tools"),{...Y,category:G,tripGroupId:Y.tripGroupId||wc}})})),l(Me);const $=localStorage.getItem(`mission_ready_folders_${S}`);h($?JSON.parse($):_E);const K=localStorage.getItem(`mission_ready_groups_${S}`);g(K?JSON.parse(K):wE)};Q.useEffect(()=>{t&&localStorage.setItem(`mission_ready_inventory_${t.id}`,JSON.stringify(s))},[s,t]),Q.useEffect(()=>{t&&localStorage.setItem(`mission_ready_trips_${t.id}`,JSON.stringify(a))},[a,t]),Q.useEffect(()=>{t&&localStorage.setItem(`mission_ready_folders_${t.id}`,JSON.stringify(u))},[u,t]),Q.useEffect(()=>{t&&localStorage.setItem(`mission_ready_groups_${t.id}`,JSON.stringify(f))},[f,t]),Q.useEffect(()=>{t&&localStorage.setItem(`mission_ready_categories_${t.id}`,JSON.stringify(v))},[v,t]);const k=S=>{e(S),localStorage.setItem("mission_ready_active_user_id",S.id),x(S.id),r("DASHBOARD")},b=()=>{e(null),localStorage.removeItem("mission_ready_active_user_id"),i([]),l([]),h([]),g([]),A([])},U=S=>{if(!t)return;const _={...S,userId:t.id};l(se=>se.find(Se=>Se.id===S.id)?se.map(Se=>Se.id===S.id?_:Se):[_,...se]),N(S.id),r("TRIP_RUN")},z=()=>{N(null),r("TRIP_EDIT")},E=S=>{N(S),r("TRIP_RUN")},y=(S,_)=>{S.stopPropagation(),window.confirm("")&&(l(se=>se.filter(_e=>_e.id!==_)),P===_&&(N(null),r("DASHBOARD")))},w=async()=>{if(!t)return;I(!0);const S={inventory:s,trips:a,folders:u,groups:f,categories:v};try{const _=await wm.upload(t.id,S);_.success?alert(` 
`):alert(" "+JSON.stringify(_.error))}catch(_){console.error(_),alert(" ")}finally{I(!1)}},T=async()=>{if(t&&window.confirm(` 

`)){I(!0);try{const S=await wm.download(t.id);if(S.success&&S.data){const{inventory:_,trips:se,folders:_e,groups:Se,categories:Me}=S.data;Me&&A(Me),_&&i(_),se&&l(se),_e&&h(_e),Se&&g(Se),alert(" ")}else alert(" ")}catch(S){console.error(S),alert(" ")}finally{I(!1)}}};if(!t)return p.jsx(GS,{onLogin:k});const C=a.find(S=>S.id===P)||null;return p.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900 font-sans",children:[p.jsx("nav",{className:"bg-white border-b border-slate-200 sticky top-0 z-20 shadow-sm",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between",children:[p.jsxs("div",{onClick:()=>r("DASHBOARD"),className:"flex items-center gap-2 cursor-pointer",children:[p.jsx("div",{className:"bg-slate-900 text-white p-1.5 rounded-lg",children:p.jsx(bE,{size:20})}),p.jsx("span",{className:"font-bold text-lg tracking-tight text-slate-800 hidden md:block",children:"Mission Ready"})]}),p.jsxs("div",{className:"flex items-center gap-1 md:gap-4",children:[p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:()=>r("DASHBOARD"),className:`px-3 md:px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="DASHBOARD"?"text-blue-600 bg-blue-50":"text-slate-500 hover:bg-slate-100"}`,children:""}),p.jsx("button",{onClick:()=>r("INVENTORY"),className:`px-3 md:px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="INVENTORY"?"text-blue-600 bg-blue-50":"text-slate-500 hover:bg-slate-100"}`,children:""})]}),p.jsx("div",{className:"h-6 w-px bg-slate-200 mx-1"}),p.jsxs("div",{className:"flex items-center gap-2",children:[D?p.jsxs("div",{className:"flex items-center gap-1 text-slate-400 px-2",children:[p.jsx(DE,{size:18,className:"animate-spin"}),p.jsx("span",{className:"text-xs hidden md:inline",children:"..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:w,className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:" ()",children:p.jsx(UE,{size:20})}),p.jsx("button",{onClick:T,className:"p-2 text-slate-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:" ()",children:p.jsx(RE,{size:20})})]}),p.jsx("div",{className:"h-4 w-px bg-slate-200 mx-1"}),p.jsxs("div",{className:"hidden md:flex items-center gap-2 text-slate-600 text-sm font-medium px-2",children:[p.jsx(BE,{size:16}),p.jsx("span",{children:t.username})]}),p.jsx("button",{onClick:b,className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"",children:p.jsx(LE,{size:20})})]})]})]})}),p.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[n==="DASHBOARD"&&p.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[p.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 rounded-2xl p-8 text-white shadow-lg flex flex-col md:flex-row justify-between items-center gap-6",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold mb-2",children:""}),p.jsx("p",{className:"text-slate-300",children:""})]}),p.jsxs("button",{onClick:z,className:"bg-blue-500 hover:bg-blue-400 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg hover:shadow-xl transition-all active:scale-95 whitespace-nowrap",children:[p.jsx(un,{size:24}),""]})]}),p.jsxs("div",{children:[p.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[p.jsx(IE,{size:20,className:"text-slate-500"}),""]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.length===0?p.jsxs("div",{className:"col-span-full bg-white border border-dashed border-slate-300 rounded-xl p-12 text-center text-slate-400",children:[p.jsx(Ec,{size:48,className:"mx-auto mb-4 opacity-50"}),p.jsx("p",{children:""})]}):a.map(S=>{const _=S.items.filter(Se=>Se.checked).length,se=S.items.length,_e=se===0?0:Math.round(_/se*100);return p.jsxs("div",{onClick:()=>E(S.id),className:"group bg-white p-5 rounded-xl border border-slate-200 shadow-sm hover:shadow-md hover:border-blue-200 transition-all cursor-pointer relative",children:[p.jsxs("div",{className:"flex justify-between items-start mb-3",children:[p.jsxs("div",{className:"min-w-0 pr-4",children:[p.jsx("h3",{className:"font-bold text-lg text-slate-800 group-hover:text-blue-600 transition-colors truncate",children:S.name}),p.jsx("p",{className:"text-sm text-slate-500",children:S.date})]}),p.jsxs("div",{className:"flex flex-col items-end shrink-0",children:[p.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${_e===100?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"}`,children:_e===100?"":""}),p.jsx("button",{onClick:Se=>y(Se,S.id),className:"mt-2 text-xs text-slate-300 hover:text-red-500 p-1 z-10",children:""})]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:"flex justify-between text-xs text-slate-500 font-medium",children:[p.jsx("span",{children:""}),p.jsxs("span",{children:[_,"/",se," "]})]}),p.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${_e}%`}})})]}),p.jsx(AE,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-200 opacity-0 group-hover:opacity-100 transition-all transform group-hover:translate-x-1"})]},S.id)})})]})]}),n==="INVENTORY"&&p.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",children:p.jsx($E,{items:s,setItems:i,folders:u,setFolders:h,groups:f,setGroups:g,categories:v,setCategories:A})}),n==="TRIP_EDIT"&&p.jsx("div",{className:"animate-in fade-in zoom-in-95 duration-200",children:p.jsx(HE,{inventory:s,folders:u,groups:f,categories:v,currentTrip:C,onSave:U,onCancel:()=>r(P?"TRIP_RUN":"DASHBOARD")})}),n==="TRIP_RUN"&&C&&p.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:p.jsx(WE,{trip:C,categories:v,onUpdateTrip:U,onBack:()=>r("DASHBOARD"),onEdit:()=>r("TRIP_EDIT")})})]})]})}const v0=document.getElementById("root");if(!v0)throw new Error("Could not find root element to mount to");const KS=Cu.createRoot(v0);KS.render(p.jsx(a_.StrictMode,{children:p.jsx(QS,{})}));
